{"version":3,"sources":["serviceWorker.js","key/ignore/firebaseAPI.js","cache/cacheService.js","components/Icons/slotIcons.jsx","fitter/src/Fit.js","components/Drawers/Slots/SlotChargeBadge.jsx","components/Drawers/Slots/SlotMetaBadge.jsx","components/Drawers/RecButton.jsx","components/Drawers/RecMenu.jsx","components/Icons/stateIcons.jsx","components/Drawers/ListDrawer/SetStateMenu.jsx","components/Drawers/Slots/Slot.jsx","components/Drawers/services/EFT.js","services/dataManipulation/findAttributes.js","components/Drawers/Slots/Slots.jsx","components/Drawers/FittingDrawer/ImportExportButtons.jsx","components/Drawers/FittingDrawer/fittingLazyFetch.js","components/Drawers/FittingDrawer/FittingDrawer.jsx","components/Drawers/Stats/StatTextField.jsx","components/Drawers/Stats/Stat.jsx","components/Drawers/Stats/StatDrawer.jsx","components/simpleEdition/shipCardComponents/NestedListDedicated.jsx","components/itemSelection/ItemSelection.jsx","services/eveListConstruction/filterInvTypesTable.js","services/eveListConstruction/createEveList.jsx","services/eveListConstruction/isTerminalGroup.js","services/eveListConstruction/findChildrenInvTypes.js","services/eveListConstruction/findChildrenMarketGroup.js","services/eveListConstruction/isArrayEmpty.js","components/itemSelection/ItemSelectionListCache.jsx","components/Drawers/ListDrawer/ListDrawerButtons.jsx","components/Drawers/ListDrawer/ListDrawerSearchbar.jsx","components/Drawers/ListDrawer/ListDrawer.jsx","components/Drawers/ListDrawer/ListDrawers.jsx","components/FitCard/Stats/services/EveMath.js","components/FitCard/Stats/services/Stat.js","components/FitCard/Stats/services/Summary.js","components/FitCard/Stats/services/Simulator.js","components/Drawers/Drawers.jsx","components/Icons/defenseIcons.jsx","components/FitCard/Stats/LinearProgressLabel.jsx","components/FitCard/Stats/ResistanceProgressLabel.jsx","components/FitCard/Stats/DamageTypeProgressLabel.jsx","components/FitCard/Stats/Resistance.jsx","components/Icons/resourceIcons.jsx","components/FitCard/Stats/ResourcesMiscellaneousListItem.jsx","components/FitCard/Stats/Resouces.jsx","components/Icons/damageIcons.jsx","components/FitCard/Stats/DamageRangeListItem.jsx","components/FitCard/Stats/Damage.jsx","components/FitCard/Stats/Engineering.jsx","components/Icons/capacitorIcons.jsx","components/FitCard/Stats/Capacitor.jsx","components/FitCard/Stats/StatsSummary.jsx","components/FitCard/FitCard.jsx","components/simpleEdition/ShipCanvas.jsx","components/InitialCard.jsx","InitialFetch.jsx","Initialtheming.jsx","index.js"],"names":["Boolean","window","location","hostname","match","NodeCache","require","cacheService","ttlSeconds","this","cache","stdTTL","checkperiod","useClones","key","value","get","set","console","log","storeFunction","Promise","resolve","then","result","reject","check","count","undefined","setTimeout","keys","del","flushAll","HighSlotIcon","props","SvgIcon","d","strokeWidth","stroke","color","MidSlotIcon","LowSlotIcon","RigSlotIcon","fill","DroneIcon","x1","y1","x2","y2","MiscIcon","CapsuleIcon","Fit","dogmaSkills","constructor","Object","skillBoard","skillsStaticBoardMax","values","reduce","acc","mods","concat","map","mod","debug","falseDebug","validateChargeSlot","slot","item","charge","itemChargeSize","chargeChargeSize","loadableGroupIDs","ID","attr","filter","length","includes","groupID","itemCapacity","capacity","chargeVolume","volume","chargePerCycle","chargeVolumePerAct","Math","floor","mapSlots_CONFIG","isIterate","ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots","mapSlots","fit","callback","partialConfig","config","slotName","slots","apply","fitWithDomainID","board","staticBoard","passiveBoard","forEach","modifiedAttributeID","isStatic","push","appliedMod","type","typeAttributesStats","attribute","attributeID","penCount","baseMod","baseValue","modifyingAttributeValue","operation","appliedValue","penalizedModifyingAttributeValue","isPenalized","modifyingAttributeID","sampleMod","compareFunc","highIsGood","modifiedAttributeHighIsGood","a","b","modStackables","modNotStackables","isStackException","modifiedAttributeStackable","sort","index","array","targetMod","applyMod","typeState","effectCategory","domain","func","domainID","typeGroupID","typeSkills","skillTypeID","error","split","skills","Array","typeID","skillsBoard","skill","typeName","itemMods","chargeMods","dogmaSkill","invalidEffectIDs","extrovertEffects","typeEffectsStats","effect","modifierInfo","effectID","modifyingAttribute","effectName","iconID","getCurrentState","getInitialState","efft","initialState","currentState","find","entry","applyValue","mulValue","perValue","addValue","subValue","divValue","pow","E","useStyles","makeStyles","theme","rootAvatar","width","height","right","bottom","fontSize","fontWeight","transition","transitions","create","easing","sharp","duration","leavingScreen","SlotChargeBadge","classes","useTheme","useState","palette","text","primary","backgroundColor","background","paper","badgeColor","setBadgeColor","badgeIcon","setBadgeIcon","handleBadgeClick","useCallback","e","stopPropagation","variant","dispatchSlotsOpen","payload","slotVariant","getLoadableGroup","setActiveSlotNumber","setActiveSlot","useEffect","Number","border","property","red","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","group","isDisplyCount","Avatar","className","style","onClick","children","size","useStyle","top","SlotMetaBadge","getTechColor","metaGroupID","root","borderRadius","RecButton","Button","disabled","action","hover","disableElevation","RecMenu","open","setOpen","anchor","useRef","Fragment","ref","menuButton","Popover","anchorEl","current","transformOrigin","onClose","PaperProps","clientWidth","elevation","square","container","OverloadIcon","ActivationIcon","OfflineIcon","PassiveIcon","rootButton","minWidth","overloadButton","activationButton","green","passiveButton","org","offlineButton","grey","OverloadButton","Tooltip","title","placement","arrow","dispatchListItems","button","ActivationButton","PassiveButton","OfflineButton","SetStateMenu","isActiveModule","setIsActiveModule","activeItem","slotsOpen","getCurrentStateColor","getCurrentStateIcon","state","isAmmo","isDisabled","rootActive","rootDiv","position","left","rootAvatarHover","marginLeft","marginTop","divider","marginRight","rootAvatarDefault","stateArcBorder","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","Slot","setItem","setCharge","isHover","setIsHover","handlePressOpen","getLoadableRig","getLoadableDrone","isActive","fetchedItem","fetchedCharge","ListItem","dense","onMouseEnter","onMouseLeave","typeCount","draggable","src","feedSource","SHIP","slotIcon","ListItemText","primaryTypographyProps","noWrap","secondary","getChageCountString","secondaryTypographyProps","EFT","fitText","typeIDs","findAttributebyID","shipText","slice","indexOf","moduleText","substring","shipName","replace","moduleNames","Set","moduleTextLine","dividedByComma","dividedByX","buildFitFromText","fitTextBlocks","droneText","moduleSlots","indexOfModuleText","trimStart","moduleTextBlocks","moduleTextBlock","chage","itemName","chargeName","droneTextLine","fitTextLine","dividedBy_x","textBlock","sampleTextLine","search","typeDroneSize","typeIsHiPower","typeIsMedPower","typeIsLoPower","buildTextFromFit","join","emptyText","moduleSlot","droneSlot","buildCompareTextFromFit","blankText","drone","lodingIndicator","gre","Slots","slotCount","rawItems","setRawItems","rawCharges","setRawCharges","fetchedItems","setFetchedItems","fetchedCharges","setFetchedCharges","setters","activeSlotNumber","isLoop","setIsLoop","isLoading","setIsLoading","sessionRef","importFitText","from","wait","fitFromText","getSlotCountAtImport","items","charges","translateVariant","dispatchImportStateFlag","importSlots","listItems","loopNumber","changeState","typeIsTurretFitted","typeIsLauncherFitted","pointLoad","turretPointLoad","launcherPointLoad","isTurretFitted","isLauncherFitted","extractHardpoints","validateHardpoints","assignItemToSlot","addCountToDroneSlots","AMMO","session","all","createFetchPromises","data","sessionData","fetchedData","FETCHED_SESSION","VALID_SESSION","warn","processFetchedData","checkData","Divider","getSlotCount","promisesItem","rawItem","promisesCharge","rawCharge","sessionPromise","fetcheditem","itemState","dispatchSlots","hashTypes","rawTypes","hashCount","types","number","ceiling","listItem","padding","listIcon","warning","ImportExportButtons","openAlert","setOpenAlert","setTitle","setText","handleImportClick","copyTextFromClipboard","setImportFitText","IDs","extractIDs","database","once","val","fittingLazyFetch","navigator","clipboard","writeText","exportFitText","Snackbar","ContentProps","getSnackbarBorder","message","ListItemIcon","autoHideDuration","permissions","query","name","permisson","readText","rootClose","enteringScreen","overflow","rootExpand","maxWidth","rootRetract","expandButton","opaqueHover","opacity","retractButton","zIndex","child","overflowX","overflowY","paddingBottom","paddingRight","importInitializeFlag","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT","importStateFlagReducer","FittingDrawer","useReducer","importStateFlag","childRef","savedSlots","JSON","parse","localStorage","getItem","tag","savedEFT","Drawer","switchExpandOpen","ButtonGroup","setExpand","expand","attrs","getDroneSlotCount","StatTextField","TextField","label","Typography","switchUnit","unitID","attributeName","defaultValue","InputProps","readOnly","disableUnderline","unit","eveUnit","displayName","Stat","setType","attributesCategories","setAttributesCategories","setTypeName","builtList","setList","etc","dividedAttributes","filteredAttributes","attributes","attributeCategoryID","filterAttributes","filtered","main","nameSpace","letterSpacing","lineHeight","align","createStatList","textDecoration","rootPaper","marginBottom","StatDrawer","tabIndex","setTabIndex","styleButton","selected","fullWidth","hidden","margin","transform","shortest","expandOpen","nested","paddingLeft","spacing","NestedList","React","opened","image","setImage","handleClick","itemData","isMounted","iconTypeID","iconFileName","storage","getDownloadURL","url","fetch","arrayBuffer","convertArrayBufferToBase64","List","ListItemAvatar","marketGroupName","IconButton","clsx","Collapse","in","timeout","unmountOnExit","binary","call","Uint8Array","String","fromCharCode","btoa","ItemSelection","handleItemClick","outboundSetItem","typeMetaGroupID","headFilterInvTypesTable","table","invTypesTable","allowedAttributes","allowedAttribute","toLowerCase","bodyFilterInvTypesTable","headCreateEveList","rootMarketGroupID","filterInvTypesTable","bodyCreateEveList","marketGroupTable","validateTables","marketGroupID","hasTypes","isTerminalGroup","childrenTypeIDs","swapped","len","i","tmp","bubbleSortByMetaLevel","findChildrenInvTypes","renderChildrenInvTypes","parentGroupID","findChildrenMarketGroup","renderedChildrenMarketGroups","renderedChildrenMarketGroup","isArrayEmpty","eveListConfig","renderChildrenMarketGroup","defalutEveListConfigStructure","paddingTop","memo","setMarketGroupTable","setInvTypesTable","builtListStructure","setBuiltListStructure","evelistConfigUpToDate","nosave","createEveList","stringify","hashFilter","deleteButton","ammoDeleteButton","orange","showInfoButton","blue","addButton","loopOrNotButton","DeleteButton","AmmoDeleteButton","activeCharge","ShowInfoButton","activeSlot","slotNumber","AddButton","LoopOrNotButton","liftedIsLoop","setLiftedIsLoop","ListDrawerButtons","Grid","xs","textField","textFieldInputLabel","textFieldinputLabel","popperVisible","popperHidden","popperPaper","popperChild","maxHeight","SearchTextField","withStyles","borderWidth","borderLeftWidth","ListDrawerSearchbar","searchOpen","setSearchOpen","searchVisible","setSearchVisible","searchText","setSearchText","handleSearchTextChange","target","ClickAwayListener","onClickAway","InputLabelProps","inputProps","onChange","onFocus","Popper","Paper","mutateEveListConfig","mutatedAllowedAttributes","ListDrawer","filters","setWidth","getEveListConfig","getRootMarketGroupID","innerWidth","handleRender","addEventListener","removeEventListener","getMiscSlotMarketGroupID","setActiveItem","setActiveCharge","getActiveSlot","fitID","generateFilter","EveMath","Cmax","Cnow","Tchg","sqrt","summary","owner","onBoardVector","situation","vector","hostileVector","distanceVector","x","anchors","anchor1X","y","anchor1Y","distance","trackingValue","range","tracking","signatureResolution","signatureRadius","misc","_angularVelocity","_trackingPart","getRangeModifier","toFixed","optimalRange","isSentry","getTurretAcurracy","targetUnitVector","targetVelocity","propulsion","orbitVelocity","droneAccuracyModifier","absoluteVelocity","droneVector","droneSituationsummary","orbitRange","explosionRadius","explosionVelocity","damageReductionFactor","simplePart","complexPart","min","randomDamageModifier","random","optimal","falloff","falloffRange","denominator","numerator","max","_distancePart","maximumVelocity","angularVelocity","fallOff","perpendicularVector","perpendicularUnitVector","unitVector","velocityVector","propCapacitor","capacitor","damage","defense","stableLevel","capacitor_stableLevel","engineering","resource","miscellaneous","turretLauncherDamage","effective","alpha","turretLauncherRange","droneDamage","turrets","launchers","drones","turretLauncherDamageSummaries","damage_getSummary","damagePerAct","maxDps","activationInfo","effectiveDps","e_duration","overlappingRange","droneSummaries","damageSummaries","ambientChargeRate","boosterChargeRate","activationUseRate","cus","capacitorUsePerSec","dominID","Tnow","capacitorDeltas","capacitorLevel","delta","getAmbientChargeRateMath","positiveDeltas","capacitorDelta","capacitorBonus","resistance","defense_resistance","active","armor","HP","EM","TH","KI","EX","shield","structure","shieldBonus","armorBonus","structureBonus","pg","load","output","cpu","pgLoad","pgOutput","cpuLoad","cpuOutput","turret","launcher","calibration","droneBandwidth","droneBay","droneActive","turretHardpoint","launcherHardpoint","droneCapacity","mountedTurrets","mountedLaunchers","mountedCalibration","mountedDroneBandwidth","droneVolume","sensor","scanResolution","maximumLockedTarget","maximumTargetingRange","strength","gravimetric","magnetometric","ladar","radar","inertialModifier","warpSpeedMultiplier","cargoBayCapacity","gravimetricSensorStrength","magnetometricSensorStrength","ladarSensorStrength","radarSensorStrength","activationCost","reloadTime","activationTime","activationLimit","Infinity","defaultStat","isActivated","damage_damagePerAct","getActivationInfo","damage_range","damageModifier","EM_damage","TH_damage","KI_damage","EX_damage","isDrone","chargeInfo","capacitor_getChargeInfo","bonusRate","boosterSlot","capacitor_getBonusPerAct_self","shipAttrs","armorHP","armorEM","armorTH","armorKI","armorEX","shieldHP","shieldEM","shieldTH","shieldKI","shieldEX","shieldChargeRate","structureHP","structureEM","structureTH","structureKI","structureEX","defense_getSummary","bonusPerAct","defense_getBonusPerAct","activePropulsionModules","isPropulsionModule","shipBaseMaximumVelocity","propModuleMaximumVelocityBonusMul","propModuleThrust","propModuleMassAdd","shipMass","mass","thisEffectsNeedCharge","Summary","self","booster_bonusPerAct","transfer_bonusPerAct","neut_bonusPerAct","isNosferatuBloodRaiderOverriden","isCapacitorTransmitter","isNosferatu","addSummaries","_slots","addSummaries_duplicateSlots","getSummary_ship","_slot","SimFit","toPath","path","_droneSlots","addSummaries_duplicateDroneSlots","slotString","moduleSummary","heatDamage","effectSummary","activationDataSet","createActivationDataSet","getSummary_damage","getSummary_defense","getSummary_capacitor","droneSumamry","getSummary_drone","situation_decription","activationState","lastActivation","nextActivation","nextActivationTick","activationLeft","targetSlot","p","c","Simulator","fit1","summarizedSlots1","onboard","summarizedSlots2","hostile","HAL","manageSchedules","getSchedules","simulate_oneTick","tick","simulate_capacitor","simulate_shield","activateDamage","activateDefense","activateCapacitor","capacitorState","capacitorInfo","shieldState","shieldInfo","situationalModifiedSummary","activateDamage_getAlpha","shieldDamage","remaining","appplied","armorDamage","structureDamage","shot","damageCapMultiplier","alpha_damaging","EM_applied","EM_damaging","TH_applied","TH_damaging","KI_applied","KI_damaging","EX_applied","EX_damaging","alpha_applied","EM_remaining","EM_blocked","TH_remaining","TH_blocked","KI_remaining","KI_blocked","EX_remaining","EX_blocked","alpha_blocked","situationalMul","droneAccuracy","getDroneAccracy","getTurretRandomDamageModifier","turretAccuracy","launcherAccracy","getLauncherAccuracy","getLauncherDamageModifier","ownerCapacitorHP","targetCapacitorHP","bonusPerActOwner","bonusPerActTarget","maxBonusPerAct","symmetricBonusPerAct","rangeModifier","simulateActivation","currentTime","info","subSecActivation","time","schedules","schedule","isCapacitorValidated","manageSchedules_validateCapacitor","isStructureValidated","manageSchedules_validateStructure","rootStructureHP","summarizedSlots","summarizedSlot","fragment","_target","_summary","subSecSchedule","initialSlots","slotsReducer","initialSlotsOpen","STAT","slotsOpenReducer","initialListItems","listItemsReducer","Drawers","setFit","setExportFitText","appliedFit","setFitID","setSlots","appliedFitExportText","appliedSlotsModified","giveSlotToStatDrawer","ArmorIcon","ShieldIcon","StructureIcon","EhpIcon","rootGrid","progress","childGrid","display","alignItems","justifyContent","description","LinearProgressLabel","LinearProgressFixed","bar","LinearProgress","Icon","typographyProps","ResistanceProgressLabel","forwardRef","innerRef","getLabel","getDescription","blueSecondary","redSecondary","greySecondary","orgSecondary","damageType","ehpFactor","activeBonus","scrollbarWidth","outer","document","createElement","visibility","msOverflowStyle","body","appendChild","inner","_scrollbarWidth","offsetWidth","parentNode","removeChild","DamageTypeList","list","component","damgeTypes","setDamageType","DamageTypeProgressLabel","DamageTypeListOpen","setDamageTypeListOpen","Resistance","stat","TurretIcon","strokeLinecap","LauncherIcon","CalibrationIcon","DroneBayIcon","DroneBandwidthIcon","boldTypography","GridBoldTypography","flexBasis","ResourcesMiscellaneousListItem","setMisc","justify","TextFieldmaximumVelocity","TurretHardpoint","LauncherHardpoint","Calibration","DroneBandwidth","isError","DroneBay","rootChild","Hardpoints","setLoad","setCapacity","alignContent","sm","AlphaIcon","DroneDamageSVG","rootPostIt","optimalRangeLabel","rangeFont","PostIt","share","borderRight","OptimalRangeBar","optimalRangeShare","FalloffRangeBar","falloffRangeShare","DamageRangeListItem","shares","setShares","rangeMax","rangeSum","getShares","WeaponDps","WeaponAlpha","DroneDps","Damage","Cpu","getPercent","getNum","Powergrid","Engineering","percent","CapacitorChargeIcon","tooltip","Capacitor","StatsSummary","setStat","editButton","EditButton","FitCard","isInitialRender","isSyncing","dispatchDrawersOpen","drawersOpen","Card","hostileAnchorInitial","anchor2X","anchor2Y","pX","pY","hostileAnchorReducer","Error","onBoardAnchorInitial","onBoardAnchorReducer","ShipCanvas","hostileAnchor","dispatchHostileAnchor","onBoardAnchor","dispatchOnBoardAnchor","setDistanceVector","setDistance","stageWheel","setStageWheel","stageScale","setStageScale","stagePoint","setStagePoint","isStageDrragable","setStageDraggable","vectorX","vectorY","_distanceVector","_distance","dispatchSituation","setSituation","handleResetClick","handleMagnifyButton","handleMinifyButton","handleStageDrragable","innerHeight","onWheel","handleWheel","scaleX","scaleY","offsetX","angleBetweenTwoVectors","pointerLength","pointerWidth","points","radius","onDragMove","handleHostileAnchor1OnDragMove","onDragEnd","handleHostileAnchor2OnDragMove","handleHostileAnchor2OnDragEnd","handleOnBoardAnchor1OnDragMove","on","handleOnBoardAnchor2OnDragMove","handleOnBoardAnchor2OnDragEnd","dash","evt","preventDefault","oldScale","getStage","newScale","deltaY","vectorLength","cosValue","innerProduct","acos","PI","modeButton","modeButtonActive","Links","href","Settings","isDark","setIsDark","initialDrawersOpen","defaultDrawersOpen","drawersOpenReducer","InitialCard","slots1","setSlots1","flexDirection","test","InitialD","json","cJSON","decompress","lightTheme","createMuiTheme","light","dark","blueGrey","darkTheme","overrides","MuiPaper","elevation3","boxShadow","Initialtheming","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","logEvent","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.3c51ab89.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export default {\r\n  apiKey: \"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc\",\r\n  authDomain: \"evefittingjs.firebaseapp.com\",\r\n  databaseURL: \"https://evefittingjs.firebaseio.com\",\r\n  projectId: \"evefittingjs\",\r\n  storageBucket: \"evefittingjs.appspot.com\",\r\n  messagingSenderId: \"50378609544\",\r\n  appId: \"1:50378609544:web:a183550dc926c774d4a03d\",\r\n  measurementId: \"G-9WGWL8V4F4\",\r\n};\r\n","const NodeCache = require(\"node-cache\");\r\n\r\nexport default class cacheService {\r\n  constructor(ttlSeconds) {\r\n    this.cache = new NodeCache({\r\n      stdTTL: ttlSeconds,\r\n      checkperiod: ttlSeconds * 0.2,\r\n      useClones: false,\r\n    });\r\n  }\r\n  set(key, value) {\r\n    if (!this.cache.get(key)) this.cache.set(key, value);\r\n    console.log(key, \": Cache Operation[SET]\");\r\n  }\r\n\r\n  get(key, storeFunction) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[GET]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n\r\n    return storeFunction().then((result) => {\r\n      /* console.log(`${key}: Cache set[GET_NETWORK]`); */\r\n      this.cache.set(key, result);\r\n      return result;\r\n    });\r\n  }\r\n  wait(key) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[WAIT]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      function check(count, cache) {\r\n        return () => {\r\n          const value = cache.get(key);\r\n          if (value !== undefined || count > 120) {\r\n            /*  console.log(`${key}: Cache Operation[WAIT]`); */\r\n            return resolve(value);\r\n          }\r\n          /* console.log(key, count); */\r\n          setTimeout(check(count++, cache), 100);\r\n        };\r\n      }\r\n      check(0, this.cache)();\r\n    });\r\n  }\r\n\r\n  del(keys) {\r\n    this.cache.del(keys);\r\n  }\r\n\r\n  flush() {\r\n    this.cache.flushAll();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const HighSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.949456,5.46298l0,5.560755\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m4.974388,17.593532l4.953309,-2.93155\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m14.038607,14.695678l5.020701,2.864158\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const MidSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m5.041085,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.477731,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const LowSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.983486,6.352277l0,11.23114\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const RigSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5\"\r\n      y1=\"5\"\r\n      x2=\"10\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"19\"\r\n      y1=\"5\"\r\n      x2=\"14\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"10\"\r\n      y1=\"14\"\r\n      x2=\"5\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"14\"\r\n      y1=\"14\"\r\n      x2=\"19\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ammoSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      id=\"svg_3\"\r\n      d=\"m9.784363,5.661415l0,17.46132\"\r\n      transform=\"rotate(45 9.784362792968757,14.392076492309569) \"\r\n      strokeWidth=\"5\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      transform=\"rotate(45 17.253654479980472,6.930145263671872) \"\r\n      stroke=\"#e5e5e5\"\r\n      id=\"svg_4\"\r\n      d=\"m17.205661,6.96214l0.017997,-0.06399l0.05999,0l0.017997,0.06399l-0.095984,0z\"\r\n      strokeWidth=\"3.72\"\r\n    />\r\n    <path\r\n      id=\"svg_6\"\r\n      d=\"m18.638913,4.001311l0,3.104507\"\r\n      transform=\"rotate(45 18.638912200927738,5.553564071655272) \"\r\n      strokeWidth=\"3.7\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      id=\"svg_7\"\r\n      d=\"m17.71106,4.705191c0,-2.952 0.78034,-5.34312 1.74371,-5.34312c0.96338,0 1.74372,2.39112 1.74372,5.34312c0,2.95201 -0.78034,5.34313 -1.74372,5.34313c-0.96337,0 -1.74371,-2.39112 -1.74371,-5.34313z\"\r\n      transform=\"rotate(45 19.454774856567386,4.705195426940916) \"\r\n      strokeWidth=\"0\"\r\n      stroke=\"#333333\"\r\n      fill=\"#e5e5e5\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const MiscIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CapsuleIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","export default class Fit {\r\n  static validateChargeSlot = function (slot) {\r\n    if (!slot || !slot.item || !slot.charge) return false;\r\n\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    // Charge size[attributeID] = 128\r\n    const itemChargeSize = Fit.#common_findAttributeByID(item, 128);\r\n    const chargeChargeSize = Fit.#common_findAttributeByID(charge, 128);\r\n    if (\r\n      !!itemChargeSize &&\r\n      !!chargeChargeSize &&\r\n      itemChargeSize.value !== chargeChargeSize.value\r\n    )\r\n      return false;\r\n\r\n    // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n    const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n      .map((ID) => {\r\n        const attr = Fit.#common_findAttributeByID(item, ID);\r\n        if (!attr) return undefined;\r\n        else return attr.value;\r\n      })\r\n      .filter((value) => value);\r\n    if (loadableGroupIDs.length === 0) return false;\r\n\r\n    if (!loadableGroupIDs.includes(charge.groupID)) return false;\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = Fit.#common_findAttributeByID(item, 56)?.value; //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    if (activationLimit <= 0) return false;\r\n\r\n    return true;\r\n  };\r\n\r\n  static mapSlots_CONFIG = {\r\n    isIterate: {\r\n      ship: false,\r\n      miscSlots: false,\r\n      highSlots: false,\r\n      midSlots: false,\r\n      lowSlots: false,\r\n      rigSlots: false,\r\n      droneSlots: false,\r\n    },\r\n  };\r\n  static mapSlots = function (fit, callback, partialConfig) {\r\n    const config = {\r\n      isIterate: {\r\n        ...Fit.mapSlots_CONFIG.isIterate,\r\n        ...partialConfig.isIterate,\r\n      },\r\n    };\r\n\r\n    return [\r\n      \"ship\",\r\n      \"miscSlots\",\r\n      \"highSlots\",\r\n      \"midSlots\",\r\n      \"lowSlots\",\r\n      \"rigSlots\",\r\n      \"droneSlots\",\r\n    ].reduce((acc, slotName) => {\r\n      if (config.isIterate[slotName] === true)\r\n        return acc.concat(Fit.#mapSlots_slots(fit[slotName], callback));\r\n      else return acc;\r\n    }, []);\r\n  };\r\n  static #mapSlots_slots = function (slots, callback) {\r\n    if (!slots) return [];\r\n    return slots.map((slot) => {\r\n      return callback(slot);\r\n    });\r\n  };\r\n\r\n  static apply = function (fit) {\r\n    const fitWithDomainID = Fit.#giveDomainID(fit);\r\n\r\n    const board = Fit.#createBoard(fitWithDomainID);\r\n    const staticBoard = Fit.#applyBoard_createStaticBoard(board);\r\n\r\n    return Fit.#applyBoard(fitWithDomainID, staticBoard);\r\n  };\r\n\r\n  static #applyBoard = function (fit, staticBoard) {\r\n    const ship = Fit.#applyBoard_type(fit.ship, staticBoard);\r\n    const miscSlots = Fit.#applyBoard_slots(fit.miscSlots, staticBoard);\r\n    const highSlots = Fit.#applyBoard_slots(fit.highSlots, staticBoard);\r\n    const midSlots = Fit.#applyBoard_slots(fit.midSlots, staticBoard);\r\n    const lowSlots = Fit.#applyBoard_slots(fit.lowSlots, staticBoard);\r\n    const rigSlots = Fit.#applyBoard_slots(fit.rigSlots, staticBoard);\r\n    const droneSlots = Fit.#applyBoard_slots(fit.droneSlots, staticBoard);\r\n\r\n    return {\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #applyBoard_createStaticBoard = function (board) {\r\n    const staticBoard = {};\r\n    const passiveBoard = Fit.#applyBoard_createPassiveBoard(board);\r\n\r\n    board.forEach((mod) => {\r\n      if (!staticBoard[mod.modifiedAttributeID])\r\n        staticBoard[mod.modifiedAttributeID] = [];\r\n      if (mod.isStatic === true) staticBoard[mod.modifiedAttributeID].push(mod);\r\n      else {\r\n        const appliedMod = Fit.#applyBoard_mod(mod, passiveBoard);\r\n        appliedMod[\"isStatic\"] = true;\r\n        staticBoard[mod.modifiedAttributeID].push(appliedMod);\r\n      }\r\n    });\r\n\r\n    return staticBoard;\r\n  };\r\n  static #applyBoard_createPassiveBoard = function (board) {\r\n    const passiveBoard = {};\r\n\r\n    board.forEach((mod) => {\r\n      if (!passiveBoard[mod.modifiedAttributeID])\r\n        passiveBoard[mod.modifiedAttributeID] = [];\r\n      passiveBoard[mod.modifiedAttributeID].push(mod);\r\n    });\r\n\r\n    return passiveBoard;\r\n  };\r\n  static #applyBoard_slots = function (slots, passiveBoard) {\r\n    return slots.map((slot) => {\r\n      const item = slot.item;\r\n      const charge = slot.charge;\r\n      return {\r\n        ...slot,\r\n        item: Fit.#applyBoard_type(item, passiveBoard),\r\n        charge: Fit.#applyBoard_type(charge, passiveBoard),\r\n      };\r\n    });\r\n  };\r\n  static #applyBoard_type = function (type, passiveBoard) {\r\n    if (!type || !type.typeAttributesStats) return type;\r\n\r\n    const typeAttributesStats = type.typeAttributesStats.map((attribute) => {\r\n      return Fit.#applyBoard_attribute(type, attribute, passiveBoard);\r\n    });\r\n\r\n    return { ...type, typeAttributesStats: typeAttributesStats };\r\n  };\r\n  static #applyBoard_attribute = function (type, attr, passiveBoard) {\r\n    const mods = passiveBoard[attr.attributeID];\r\n    if (!mods || mods.length === 0) return attr;\r\n\r\n    let value = attr.value;\r\n    let penCount = 0;\r\n    if (!!attr.debug || !!attr.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((mod) => {\r\n      if (Fit.#applyBoard_modIsTypeApplicable(type, mod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          mod.modifyingAttributeValue,\r\n          mod.operation,\r\n          penCount\r\n        );\r\n        debug.push({\r\n          ...mod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              mod.modifyingAttributeValue,\r\n              mod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (mod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(mod);\r\n    });\r\n\r\n    return { ...attr, value: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_mod = function (mod, passiveBoard) {\r\n    if (\r\n      mod.modifyingAttributeID === mod.modifiedAttributeID ||\r\n      mod.isStatic === true\r\n    )\r\n      return mod;\r\n\r\n    const mods = passiveBoard[mod.modifyingAttributeID];\r\n    if (!mods || mods.length === 0) return mod;\r\n\r\n    let value = mod.modifyingAttributeValue;\r\n    let penCount = 0;\r\n    if (!!mod.debug || !!mod.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((appliedMod) => {\r\n      if (Fit.#applyBoard_modIsModApplicable(mod, appliedMod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          appliedMod.modifyingAttributeValue,\r\n          appliedMod.operation,\r\n          penCount\r\n        );\r\n\r\n        debug.push({\r\n          ...appliedMod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              appliedMod.modifyingAttributeValue,\r\n              appliedMod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (appliedMod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(appliedMod);\r\n    });\r\n\r\n    return { ...mod, modifyingAttributeValue: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_sortMods = function (mods) {\r\n    const sampleMod = mods[0];\r\n\r\n    let compareFunc = () => true;\r\n    const highIsGood = sampleMod.modifiedAttributeHighIsGood;\r\n    if (highIsGood === true)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue - 1;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return 1 + b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n      };\r\n    else if (highIsGood === false)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return 1 + a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue - 1;\r\n      };\r\n    const modStackables = [];\r\n    const modNotStackables = [];\r\n    mods.forEach((mod) => {\r\n      if (\r\n        mod.operation === \"modAdd\" ||\r\n        mod.operation === \"modSub\" ||\r\n        mod.operation === \"postDiv\" ||\r\n        mod.isStackException === true\r\n      )\r\n        modStackables.push(mod);\r\n      else modNotStackables.push(mod);\r\n    });\r\n\r\n    const isModstackable = sampleMod.modifiedAttributeStackable;\r\n\r\n    if (isModstackable === false) {\r\n      modNotStackables.sort(compareFunc);\r\n      modNotStackables.forEach((mod, index, array) => {\r\n        array[index] = { ...mod, isPenalized: true };\r\n      });\r\n    }\r\n    return modStackables.concat(modNotStackables);\r\n  };\r\n  static #applyBoard_modIsModApplicable = function (targetMod, applyMod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(applyMod)) {\r\n      if (\r\n        !(\r\n          applyMod.typeState === \"activation\" &&\r\n          applyMod.effectCategory === \"overload\"\r\n        )\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${applyMod.typeState} <-/- ${applyMod.effectCategory}`,\r\n          targetMod,\r\n          \"<-\",\r\n          applyMod\r\n        ); //TESTETS\r\n      return false;\r\n    }\r\n    switch (applyMod.domain) {\r\n      case \"itemID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === applyMod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return targetMod.typeGroupID === applyMod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (applyMod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n        }\r\n      /*    case \"structureID\":\r\n        return false; */\r\n      default:\r\n        console.error(\"MOD_APPLICABLE_UNKNOWN\", targetMod, \"<-\", applyMod);\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsTypeApplicable = function (type, mod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(mod)) {\r\n      if (\r\n        !(mod.typeState === \"activation\" && mod.effectCategory === \"overload\")\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${mod.typeState} <-/- ${mod.effectCategory}`,\r\n          type,\r\n          \"<-\",\r\n          mod\r\n        ); //TESTETS\r\n      return false;\r\n    }\r\n    if (type.domainID === undefined) console.log(\"domainID missing\", type);\r\n    switch (mod.domain) {\r\n      case \"itemID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === mod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return type.groupID === mod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (mod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          case \"ItemModifier\":\r\n            return true;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"otherID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return (\r\n              type.domainID.split(\".\")[0] === mod.domainID.split(\".\")[0] &&\r\n              type.domainID.split(\".\")[1] === mod.domainID.split(\".\")[1]\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"structureID\":\r\n        return false;\r\n      default:\r\n        console.error(\"TYPE_APPLICABLE_UNKNOWN\", type, \"<-\", mod); //TESTETS\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsStateApplicable = function (mod) {\r\n    switch (mod.typeState) {\r\n      case \"overload\":\r\n        return true;\r\n      case \"activation\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"passive\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n          case \"target\":\r\n          case \"activation\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"offline\":\r\n        switch (mod.effectCategory) {\r\n          default:\r\n            return false;\r\n        }\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  static #giveDomainID = function (fit) {\r\n    const skills = Fit.#giveDomainID_skills(fit.skills);\r\n    const ship = { ...fit.ship, domainID: \"ship\" };\r\n    const miscSlots = Fit.#giveDomainID_slots(fit.miscSlots, \"miscSlots\");\r\n    const lowSlots = Fit.#giveDomainID_slots(fit.lowSlots, \"lowSlots\");\r\n    const midSlots = Fit.#giveDomainID_slots(fit.midSlots, \"midSlots\");\r\n    const highSlots = Fit.#giveDomainID_slots(fit.highSlots, \"highSlots\");\r\n    const rigSlots = Fit.#giveDomainID_slots(fit.rigSlots, \"rigSlots\");\r\n    const droneSlots = Fit.#giveDomainID_slots(fit.droneSlots, \"droneSlots\");\r\n\r\n    return {\r\n      skills,\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #giveDomainID_slots = function (slots, slotName) {\r\n    if (!slots || slots.constructor !== Array) return undefined;\r\n\r\n    return slots.map((slot, index) => {\r\n      const item = !!slot.item.typeID\r\n        ? { ...slot.item, domainID: `${slotName}.${index}.item` }\r\n        : false;\r\n      const charge = !!slot.charge.typeID\r\n        ? { ...slot.charge, domainID: `${slotName}.${index}.charge` }\r\n        : false;\r\n      return { item, charge };\r\n    });\r\n  };\r\n  static #giveDomainID_skills = function (skillsBoard) {\r\n    if (!skillsBoard || skillsBoard.constructor !== Array) {\r\n      const dogmaSkills = skillsBoard;\r\n      return dogmaSkills;\r\n    } else if (skillsBoard[0].domainID !== undefined) {\r\n      const skillsStaticBoardPlane = skillsBoard;\r\n      return skillsStaticBoardPlane;\r\n    }\r\n    return skillsBoard.map((skill) => ({\r\n      ...skill,\r\n      domainID: `skill:${skill.typeName}`,\r\n    }));\r\n  };\r\n\r\n  static #createBoard = function (fit) {\r\n    // skills will be two type: skills(Object) or pre made skills_modifiers(Array)\r\n    const skills = Fit.#createBoard_skills(fit.skills);\r\n    const ship = Fit.#createBoard_singleType(fit.ship, true);\r\n    const miscSlots = Fit.#createBoard_slots(fit.miscSlots, true);\r\n    const lowSlots = Fit.#createBoard_slots(fit.lowSlots);\r\n    const midSlots = Fit.#createBoard_slots(fit.midSlots);\r\n    const highSlots = Fit.#createBoard_slots(fit.highSlots);\r\n    const rigSlots = Fit.#createBoard_slots(fit.rigSlots);\r\n    const droneSlots = Fit.#createBoard_slots(fit.droneSlots);\r\n\r\n    return [\r\n      ...skills,\r\n      ...ship,\r\n      ...miscSlots,\r\n      ...lowSlots,\r\n      ...midSlots,\r\n      ...highSlots,\r\n      ...rigSlots,\r\n      ...droneSlots,\r\n    ];\r\n  };\r\n  static #createBoard_slots = function (slots, isStackException = false) {\r\n    if (!slots || slots.constructor !== Array) return [];\r\n\r\n    const mods = [];\r\n    slots.forEach((slot) => {\r\n      const itemMods = Fit.#createBoard_singleType(slot.item, isStackException);\r\n      const chargeMods = Fit.#createBoard_singleType(slot.charge, true);\r\n      if (!!itemMods) itemMods.forEach((mod) => mods.push(mod));\r\n      if (!!chargeMods) chargeMods.forEach((mod) => mods.push(mod));\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static extractSkillsStaticPlaneBoard(dogmaSkills) {\r\n    if (dogmaSkills.constructor !== Object) return [];\r\n\r\n    const skillBoard = Fit.#createBoard_skills(dogmaSkills);\r\n    const skillsStaticBoardMax = Fit.#applyBoard_createStaticBoard(skillBoard);\r\n    const skillsStaticBoardMed = Object.values(skillsStaticBoardMax)\r\n      .reduce((acc, mods) => acc.concat(mods), [])\r\n      .map((mod) => ({ ...mod, debug: undefined, falseDebug: undefined }));\r\n\r\n    return skillsStaticBoardMed;\r\n  }\r\n  static #createBoard_skills = function (dogmaSkills) {\r\n    if (dogmaSkills.constructor === Array) {\r\n      const skillsBoard = dogmaSkills;\r\n      return skillsBoard;\r\n    }\r\n\r\n    return Object.values(dogmaSkills).reduce((acc, dogmaSkill) => {\r\n      const mods = Fit.#createBoard_singleType(dogmaSkill, true);\r\n      const board = mods.map((mod) => ({\r\n        ...mod,\r\n        domainID: `skill:${mod.typeName}`,\r\n      }));\r\n      return acc.concat(board);\r\n    }, []);\r\n  };\r\n  static #createBoard_singleType = function (type, isStackException = false) {\r\n    if (!type) return [];\r\n\r\n    // effectID: 132,effectName: \"skillEffect\",\r\n    const invalidEffectIDs = [132];\r\n    // ExtrovertEffect is effect have modifierInfo\r\n    // Existence of modifierInfo ensures effect affect anonymous attribute with given value\r\n    const extrovertEffects = !!type.typeEffectsStats\r\n      ? type.typeEffectsStats.filter(\r\n          (effect) =>\r\n            effect.modifierInfo !== undefined &&\r\n            !invalidEffectIDs.includes(effect.effectID)\r\n        )\r\n      : [];\r\n\r\n    const mods = [];\r\n    extrovertEffects.forEach((effect) => {\r\n      effect.modifierInfo.forEach((mod) => {\r\n        const modifyingAttribute = Fit.#common_findAttributeByID(\r\n          type,\r\n          mod.modifyingAttributeID\r\n        );\r\n        const modifyingAttributeValue = !!mod.modifyingAttributeValue\r\n          ? mod.modifyingAttributeValue\r\n          : modifyingAttribute?.value;\r\n\r\n        mods.push({\r\n          domainID: type.domainID,\r\n          typeName: type.typeName,\r\n          ...mod,\r\n          effectName: effect.effectName,\r\n          effectCategory: effect.effectCategory,\r\n          modifyingAttributeValue: modifyingAttributeValue,\r\n          typeID: type.typeID,\r\n          typeState: type.iconID !== 33 ? type.typeState : \"passive\",\r\n          typeGroupID: type.groupID,\r\n          typeSkills: type.typeSkills,\r\n          isStackException:\r\n            mod.isStackException !== undefined\r\n              ? mod.isStackException\r\n              : isStackException,\r\n        });\r\n      });\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static getCurrentState = function (type) {\r\n    return Fit.#createBoard_setState(type);\r\n  };\r\n  static getInitialState = function (type) {\r\n    if (!type || !type.typeEffectsStats) return undefined;\r\n    if (type.iconID === 33) return \"passive\"; // if type is skill\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n  };\r\n  static #createBoard_setState = function (type) {\r\n    if (!type && type !== 0) return undefined;\r\n    if (!type.typeEffectsStats || type.iconID === 33) return \"passive\"; // if type is skill\r\n    const initialState = type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n    const currentState = type.typeState;\r\n\r\n    if (currentState === undefined) return initialState;\r\n    if (initialState === \"passive\" && currentState === \"activation\")\r\n      return \"passive\";\r\n    return currentState;\r\n  };\r\n\r\n  static #common_findAttributeByID = function (type, attributeID) {\r\n    if (!type || !type.typeAttributesStats) return undefined;\r\n    if (type.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n    const attribute = type.typeAttributesStats.find(\r\n      (entry) => entry.attributeID === attributeID\r\n    );\r\n\r\n    return attribute;\r\n  };\r\n  static #common_operation = function (\r\n    baseValue,\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    //TODO: findout why does eve developers make shit like this typeID=31760 effect is weird\r\n    if (applyValue === undefined) return baseValue;\r\n\r\n    let value = baseValue;\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        value = Fit.#oepration_mul(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        value = Fit.#oepration_per(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"modAdd\":\r\n        value = Fit.#operation_add(baseValue, applyValue);\r\n        break;\r\n      case \"modSub\":\r\n        value = Fit.#operation_sub(baseValue, applyValue);\r\n        break;\r\n      case \"postDiv\":\r\n        value = Fit.#operation_div(baseValue, applyValue);\r\n        break;\r\n      case \"postAssignment\":\r\n        return applyValue;\r\n      default:\r\n        break;\r\n    }\r\n    return value;\r\n  };\r\n  static #oepration_mul = function (baseValue, mulValue, penCount = 0) {\r\n    return baseValue * ((mulValue - 1) * Fit.#common_penaltyMul(penCount) + 1);\r\n  };\r\n  static #oepration_per = function (baseValue, perValue, penCount = 0) {\r\n    return (\r\n      baseValue * ((perValue / 100) * Fit.#common_penaltyMul(penCount) + 1)\r\n    );\r\n  };\r\n  static #operation_add = function (baseValue, addValue) {\r\n    return baseValue + addValue;\r\n  };\r\n  static #operation_sub = function (baseValue, subValue) {\r\n    return baseValue - subValue;\r\n  };\r\n  static #operation_div = function (baseValue, divValue) {\r\n    return baseValue / divValue;\r\n  };\r\n  static #common_penaltyMul = function (penCount) {\r\n    return Math.pow(Math.E, -0.140274 * penCount * penCount);\r\n  };\r\n  static #common_penalizedModifyingValue = function (\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        return 1 + Fit.#common_penaltyMul(penCount) * (applyValue - 1);\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        return Fit.#common_penaltyMul(penCount) * applyValue;\r\n      case \"modAdd\":\r\n      case \"modSub\":\r\n        return applyValue;\r\n      case \"postDiv\":\r\n        return applyValue / Fit.#common_penaltyMul(penCount);\r\n      default:\r\n        return applyValue;\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Badge, Avatar, makeStyles, useTheme } from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport AdjustIcon from \"@material-ui/icons/Adjust\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 20,\r\n    height: 20,\r\n    right: 15,\r\n    bottom: 3,\r\n    fontSize: 12,\r\n    fontWeight: 700,\r\n    transition: theme.transitions.create(\"color\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function SlotChargeBadge(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [badgeColor, setBadgeColor] = useState({\r\n    color: theme.palette.text.primary,\r\n    backgroundColor: theme.palette.background.paper,\r\n  });\r\n  const [badgeIcon, setBadgeIcon] = useState(false);\r\n\r\n  const handleBadgeClick = useCallback(\r\n    (e) => {\r\n      e.stopPropagation();\r\n      if (props.variant !== \"DRONE_SLOT\")\r\n        props.dispatchSlotsOpen({\r\n          type: \"AMMO\",\r\n          payload: {\r\n            slotVariant: props.variant,\r\n            filter: getLoadableGroup(props.item),\r\n          },\r\n        });\r\n      props.setActiveSlotNumber(props.index);\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    },\r\n    [props.index, props.variant, props.item]\r\n  );\r\n  useEffect(() => {\r\n    if (props.count !== undefined && props.count.constructor === Number) {\r\n      // count of item\r\n      setBadgeIcon(`${props.count}`);\r\n    } else if (!props.charge) {\r\n      // No charge loaded\r\n      setBadgeIcon(<AddCircleOutlineIcon fontSize=\"small\" />);\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n    } else if (\r\n      !Fit.validateChargeSlot({ item: props.item, charge: props.charge })\r\n    ) {\r\n      // Charge not compatible\r\n      setBadgeColor({\r\n        color: theme.palette.background.paper,\r\n        backgroundColor: theme.palette.property.red,\r\n      });\r\n      setBadgeIcon(<HighlightOffIcon fontSize=\"small\" />);\r\n    } else {\r\n      // Charge loaded\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n      setBadgeIcon(<AdjustIcon fontSize=\"small\" />);\r\n    }\r\n  }, [props.charge?.typeID, props.item?.typeID, props.count, theme]);\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"right\",\r\n      }}\r\n      badgeContent={\r\n        getLoadableGroup(props.item).group.length > 0 ||\r\n        isDisplyCount(props.count) ? (\r\n          <Avatar\r\n            className={classes.rootAvatar}\r\n            style={{\r\n              ...badgeColor,\r\n            }}\r\n            onClick={handleBadgeClick}\r\n          >\r\n            {badgeIcon}\r\n          </Avatar>\r\n        ) : undefined\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction isDisplyCount(count) {\r\n  if (count !== undefined && count.constructor === Number) return true;\r\n  return false;\r\n}\r\n\r\nexport function getLoadableGroup(item) {\r\n  if (!item || !item.typeAttributesStats) return { group: [], size: false };\r\n\r\n  const typeAttributesStats = item.typeAttributesStats;\r\n\r\n  // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n  const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n    .map((ID) => {\r\n      const attr = typeAttributesStats.find((attr) => attr.attributeID === ID);\r\n      if (!attr) return undefined;\r\n      else return attr.value;\r\n    })\r\n    .filter((value) => value);\r\n\r\n  // Charge size[attributeID] = 128\r\n  const loadableSize = typeAttributesStats.find(\r\n    (attr) => attr.attributeID === 128\r\n  )?.value;\r\n\r\n  return {\r\n    group: loadableGroupIDs,\r\n    size: loadableSize,\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    right: 15,\r\n    top: 3,\r\n    fontSize: 1,\r\n  },\r\n}));\r\n\r\nexport default function SlotMetaBadge(props) {\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      badgeContent={\r\n        getTechColor(props.item) && (\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: getTechColor(props.item),\r\n            }}\r\n            className={classes.rootAvatar}\r\n          >\r\n            {\"\"}\r\n          </Avatar>\r\n        )\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction getTechColor(item) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.metaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return undefined;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Button, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: 0,\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nexport default function RecButton(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      {...props}\r\n      classes={{ root: classes.root }}\r\n      variant=\"contained\"\r\n      style={\r\n        props.disabled === true\r\n          ? {\r\n              ...props.style,\r\n              backgroundColor: theme.palette.action.hover,\r\n              color: theme.palette.background.paper,\r\n            }\r\n          : { ...props.style }\r\n      }\r\n      disableElevation\r\n    >\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function RecMenu(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const anchor = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!props.open && open === true) setOpen(false);\r\n  }, [props.open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        ref={anchor}\r\n        onClick={() => {\r\n          if (props.menuButton.props.disabled !== true) setOpen(!open);\r\n        }}\r\n      >\r\n        {props.menuButton}\r\n      </div>\r\n\r\n      <Popover\r\n        open={props.open && open}\r\n        anchorEl={anchor.current}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        onClose={() => setOpen(false)}\r\n        PaperProps={{\r\n          style: { width: anchor.current?.clientWidth },\r\n          elevation: 0,\r\n          square: true,\r\n        }}\r\n        container={anchor.current}\r\n      >\r\n        {props.children}\r\n      </Popover>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const OverloadIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ActivationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const OfflineIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"14.742\"\r\n      y1=\"6.625\"\r\n      x2=\"14.742\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n    <line\r\n      x1=\"9.258\"\r\n      y1=\"6.625\"\r\n      x2=\"9.258\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const PassiveIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport RecButton from \"../RecButton\";\r\nimport RecMenu from \"../RecMenu\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport {\r\n  PassiveIcon,\r\n  ActivationIcon,\r\n  OverloadIcon,\r\n  OfflineIcon,\r\n} from \"../../Icons/stateIcons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n  },\r\n  overloadButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n  },\r\n  activationButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n  },\r\n  passiveButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.org,\r\n  },\r\n  offlineButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.grey,\r\n  },\r\n}));\r\n\r\nconst OverloadButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Overload\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.overloadButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"overload\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OverloadIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ActivationButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Active\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.activationButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"activation\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <ActivationIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst PassiveButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Online\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.passiveButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"passive\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <PassiveIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst OfflineButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Offline\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.offlineButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"offline\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OfflineIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function SetStateMenu(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [isActiveModule, setIsActiveModule] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const initialState = Fit.getInitialState(props.activeItem);\r\n    switch (initialState) {\r\n      case \"activation\":\r\n        setIsActiveModule(true);\r\n        break;\r\n      case \"passive\":\r\n        setIsActiveModule(false);\r\n        break;\r\n      default:\r\n        setIsActiveModule(undefined);\r\n    }\r\n  }, [props.activeItem?.typeID]);\r\n\r\n  return (\r\n    <RecMenu\r\n      open={props.slotsOpen[props.variant].open}\r\n      menuButton={\r\n        <RecButton\r\n          className={classes.rootButton}\r\n          style={{\r\n            backgroundColor: getCurrentStateColor(\r\n              props.activeItem?.typeState,\r\n              props.variant === \"AMMO\",\r\n              theme\r\n            ),\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <Tooltip title=\"Item state\" placement=\"bottom\" arrow>\r\n            <div style={{ height: 24 }}>\r\n              {getCurrentStateIcon(\r\n                props.activeItem?.typeState,\r\n                props.variant === \"AMMO\",\r\n                !props.activeItem?.typeID,\r\n                theme\r\n              )}\r\n            </div>\r\n          </Tooltip>\r\n        </RecButton>\r\n      }\r\n    >\r\n      <OverloadButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={\r\n          !isActiveModule ||\r\n          props.variant === \"DRONE_SLOT\" ||\r\n          props.variant === \"AMMO\"\r\n        }\r\n      />\r\n      <ActivationButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={!isActiveModule || props.variant === \"AMMO\"}\r\n      />\r\n      <PassiveButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n      />\r\n      <OfflineButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={props.variant === \"AMMO\"}\r\n      />\r\n    </RecMenu>\r\n  );\r\n}\r\nexport function getCurrentStateColor(state, isAmmo = false, theme) {\r\n  if (isAmmo === true) return theme.palette.property.org;\r\n  switch (state) {\r\n    case \"overload\":\r\n      return theme.palette.property.red;\r\n    case \"activation\":\r\n      return theme.palette.property.green;\r\n    case \"passive\":\r\n      return theme.palette.property.org;\r\n    case \"offline\":\r\n      return theme.palette.property.grey;\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\nfunction getCurrentStateIcon(state, isAmmo, isDisabled, theme) {\r\n  if (isAmmo === true)\r\n    return (\r\n      <PassiveIcon\r\n        color={\r\n          isDisabled\r\n            ? theme.palette.background.paper\r\n            : theme.palette.button.color\r\n        }\r\n      />\r\n    );\r\n  switch (state) {\r\n    case \"overload\":\r\n      return (\r\n        <OverloadIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"activation\":\r\n      return (\r\n        <ActivationIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"passive\":\r\n      return (\r\n        <PassiveIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"offline\":\r\n    default:\r\n      return (\r\n        <OfflineIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  ListItemText,\r\n  Avatar,\r\n  Tooltip,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  HighSlotIcon,\r\n  MidSlotIcon,\r\n  LowSlotIcon,\r\n  RigSlotIcon,\r\n  DroneIcon,\r\n  CapsuleIcon,\r\n  MiscIcon,\r\n} from \"../../Icons/slotIcons.jsx\";\r\nimport SlotChargeBadge from \"./SlotChargeBadge.jsx\";\r\nimport { useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport SlotMetaBadge from \"./SlotMetaBadge.jsx\";\r\nimport { getCurrentStateColor } from \"../ListDrawer/SetStateMenu.jsx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n  },\r\n  rootActive: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n  rootDiv: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n  rootAvatarHover: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.action.hover,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  rootAvatarDefault: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  stateArcBorder: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: \"50%\",\r\n    border: \"3px solid\",\r\n    borderLeftColor: \"transparent\",\r\n    borderRightColor: \"transparent\",\r\n    borderTopColor: \"transparent\",\r\n    borderBottomColor: \"transparent\",\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 7,\r\n  },\r\n}));\r\n\r\nexport default function Slot(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [charge, setCharge] = useState(false);\r\n\r\n  const [isHover, setIsHover] = useState(false);\r\n\r\n  const handlePressOpen = useCallback(() => {\r\n    props.setActiveSlotNumber(props.index);\r\n    switch (props.variant) {\r\n      case \"RIG_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"RIG_SLOT\",\r\n          payload: {\r\n            filter: getLoadableRig(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      case \"DRONE_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"DRONE_SLOT\",\r\n          payload: {\r\n            filter: getLoadableDrone(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      default:\r\n        props.dispatchSlotsOpen({ type: props.variant });\r\n        break;\r\n    }\r\n  }, [props.slots.ship?.typeID, props.variant, props.index]);\r\n\r\n  useEffect(() => {\r\n    if (props.isActive === true || props.isActive.open === true) {\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    }\r\n  }, [props.isActive]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedItem;\r\n    if (!type || !type.typeID) setItem(false);\r\n    else setItem(props.fetchedItem);\r\n  }, [props.fetchedItem?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedCharge;\r\n    if (!type || !type.typeID) setCharge(false);\r\n    else setCharge(props.fetchedCharge);\r\n  }, [props.fetchedCharge?.typeID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        className={props.isActive ? classes.rootActive : classes.root}\r\n        onClick={handlePressOpen}\r\n        dense\r\n        button\r\n      >\r\n        <div\r\n          className={classes.rootDiv}\r\n          onMouseEnter={() => {\r\n            setIsHover(true);\r\n          }}\r\n          onMouseLeave={() => {\r\n            setIsHover(false);\r\n          }}\r\n        >\r\n          <SlotChargeBadge\r\n            {...props}\r\n            item={item}\r\n            charge={charge}\r\n            count={props.fetchedItem?.typeCount}\r\n          >\r\n            <SlotMetaBadge item={item}>\r\n              <div\r\n                className={classes.stateArcBorder}\r\n                style={{\r\n                  borderLeftColor: getCurrentStateColor(\r\n                    props?.fetchedItem?.typeState,\r\n                    false,\r\n                    theme\r\n                  ),\r\n                }}\r\n              />\r\n              <Avatar\r\n                className={\r\n                  isHover ? classes.rootAvatarHover : classes.rootAvatarDefault\r\n                }\r\n              >\r\n                {!!item ? feedSource(item, charge) : slotIcon(props, theme)}\r\n              </Avatar>\r\n            </SlotMetaBadge>\r\n          </SlotChargeBadge>\r\n        </div>\r\n\r\n        <ListItemText\r\n          style={{ marginLeft: 50 }}\r\n          primary={item?.typeName}\r\n          primaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n          secondary={\r\n            !!charge &&\r\n            `${charge?.typeName} ${getChageCountString(item, charge)}`\r\n          }\r\n          secondaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n        />\r\n      </ListItem>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction feedSource(item, charge) {\r\n  if (!!item && !charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${item?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n  else if (!!item && !!charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${charge?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n}\r\nfunction getChageCountString(item, charge) {\r\n  const count = item.capacity / charge.volume || 1;\r\n  if (count === 1) return \"\";\r\n  else return `x${Math.floor(count)}`;\r\n}\r\nfunction getLoadableRig(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const rigSize = attrs.find((attr) => attr.attributeID === 1547)?.value;\r\n  return { size: rigSize };\r\n}\r\nfunction getLoadableDrone(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const droneSize = attrs.find((attr) => attr.attributeID === 1271)?.value; //attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  return { size: droneSize };\r\n}\r\n\r\nfunction slotIcon(props, theme) {\r\n  switch (props.variant) {\r\n    case \"SHIP\":\r\n      return (\r\n        <Tooltip\r\n          open={props.open && !props.slotsOpen.SHIP.open}\r\n          title=\"Click here to choose ship\"\r\n          placement=\"right\"\r\n          arrow\r\n        >\r\n          <div style={{ height: 24 }}>\r\n            <CapsuleIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    case \"MISC_SLOT\":\r\n      return <MiscIcon color={theme.palette.text.primary} />;\r\n    case \"HIGH_SLOT\":\r\n      return <HighSlotIcon color={theme.palette.text.primary} />;\r\n    case \"MID_SLOT\":\r\n      return <MidSlotIcon color={theme.palette.text.primary} />;\r\n    case \"LOW_SLOT\":\r\n      return <LowSlotIcon color={theme.palette.text.primary} />;\r\n    case \"RIG_SLOT\":\r\n      return <RigSlotIcon color={theme.palette.text.primary} />;\r\n    case \"DRONE_SLOT\":\r\n      return <DroneIcon color={theme.palette.text.primary} />;\r\n  }\r\n}\r\n","export default class EFT {\r\n  static extractIDs(fitText, typeIDs) {\r\n    if (!typeIDs) return [];\r\n\r\n    const typeNames = EFT.#extractIDs_getTypeNames(fitText);\r\n    return typeNames.reduce((acc, typeName) => {\r\n      const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n      if (!!type) acc.push(type.typeID);\r\n      else console.log(\"ERROR\", \"EFT:typeName is not found\", typeName);\r\n      return acc;\r\n    }, []);\r\n  }\r\n  static #extractIDs_getTypeNames = function (fitText) {\r\n    const shipText = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const moduleText = fitText.substring(fitText.indexOf(\"]\") + 1);\r\n\r\n    const shipName = shipText.replace(\"[\", \"\").split(\",\")[0];\r\n    const moduleNames = [\r\n      ...new Set(\r\n        moduleText.split(/\\r?\\n/).reduce((acc, moduleTextLine) => {\r\n          const dividedByComma = moduleTextLine.split(\", \");\r\n          const dividedByX = moduleTextLine.split(\" x\");\r\n\r\n          if (dividedByComma.length === 2) {\r\n            const item = dividedByComma[0];\r\n            const charge = dividedByComma[1];\r\n            return acc.concat([item, charge]);\r\n          }\r\n          if (dividedByX.length === 2) {\r\n            const item = dividedByX[0];\r\n            return acc.concat([item]);\r\n          }\r\n\r\n          if (moduleTextLine !== \"\") return acc.concat(moduleTextLine);\r\n          return acc;\r\n        }, [])\r\n      ),\r\n    ];\r\n    return [shipName, ...moduleNames];\r\n  };\r\n\r\n  static buildFitFromText = function (fitText, typeIDs) {\r\n    const shipTextLine = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const shipName = shipTextLine.replace(\"[\", \"\").split(\",\")[0];\r\n    const ship = EFT.#common_findIdByName(shipName, typeIDs);\r\n\r\n    const fitTextBlocks = fitText.split(/\\r?\\n\\r?\\n\\r?\\n/);\r\n    const moduleText = EFT.#buildFitFromText_getModuleText(fitTextBlocks);\r\n    const droneText = fitTextBlocks[1]; //At this point we dont know wether this text is drone or not\r\n\r\n    const moduleSlots = EFT.#buildFitFromText_buildModules(moduleText, typeIDs);\r\n    const droneSlots = EFT.#buildFitFromText_buildDrones(droneText, typeIDs);\r\n\r\n    return { ship, ...moduleSlots, ...droneSlots };\r\n  };\r\n  static #buildFitFromText_getModuleText = function (fitTextBlocks) {\r\n    const indexOfModuleText = fitTextBlocks[0].indexOf(\"]\") + 1;\r\n    const moduleText = fitTextBlocks[0].substring(indexOfModuleText);\r\n    return moduleText.trimStart();\r\n  };\r\n  static #buildFitFromText_buildModules = function (moduleText, typeIDs) {\r\n    const moduleTextBlocks = moduleText.split(/\\r?\\n\\r?\\n/);\r\n\r\n    const moduleSlots = {};\r\n    [\"lowSlots\", \"midSlots\", \"highSlots\", \"rigSlots\", \"miscSlots\"].forEach(\r\n      (slot, index) => {\r\n        moduleSlots[slot] = EFT.#buildFitFromText_buildModule(\r\n          moduleTextBlocks[index],\r\n          typeIDs\r\n        );\r\n      }\r\n    );\r\n\r\n    return moduleSlots;\r\n  };\r\n  static #buildFitFromText_buildModule = function (moduleTextBlock, typeIDs) {\r\n    if (!moduleTextBlock) return [];\r\n\r\n    const moduleTextLines = moduleTextBlock.split(/\\r?\\n/);\r\n    return moduleTextLines.map((moduleTextLine) => {\r\n      if (moduleTextLine.indexOf(\"Empty\") !== -1)\r\n        return { item: false, chage: false };\r\n      else {\r\n        const itemName = moduleTextLine.split(\", \")[0];\r\n        const chargeName = moduleTextLine.split(\", \")[1];\r\n        const item = EFT.#common_findIdByName(itemName, typeIDs);\r\n        const charge = EFT.#common_findIdByName(chargeName, typeIDs);\r\n        return { item, charge };\r\n      }\r\n    });\r\n  };\r\n  static #buildFitFromText_buildDrones = function (droneText, typeIDs) {\r\n    //prettier-ignore\r\n    if (EFT.#buildFitFromText_readoutTextBlock(droneText, typeIDs) !== \"droneSlots\")\r\n      return {};\r\n\r\n    const droneTextLines = droneText.split(/\\r?\\n/);\r\n    const droneSlots = droneTextLines.map((droneTextLine) => {\r\n      //prettier-ignore\r\n      const {typeName, typeCount} = EFT.#buildFitFromText_divideBy_x(droneTextLine)\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      return { item: { ...type, typeCount }, charge: false };\r\n    });\r\n\r\n    return { droneSlots };\r\n  };\r\n  static #buildFitFromText_divideBy_x = function (fitTextLine) {\r\n    const dividedBy_x = fitTextLine.split(\" x\");\r\n    const typeName = dividedBy_x[0];\r\n    const typeCount = Number(dividedBy_x[1]);\r\n\r\n    return { typeName, typeCount };\r\n  };\r\n  static #buildFitFromText_readoutTextBlock = function (textBlock, typeIDs) {\r\n    if (!textBlock) return \"undefined\";\r\n\r\n    const sampleTextLine = textBlock.slice(0, textBlock.search(/\\r?\\n/));\r\n    if (sampleTextLine.indexOf(\" x\") !== -1) {\r\n      const typeName = sampleTextLine.split(\" x\")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeDroneSize) return \"droneSlots\";\r\n      else return false;\r\n    } else if (sampleTextLine.indexOf(\",\") !== -1) {\r\n      const typeName = sampleTextLine.split(\", \")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeIsHiPower) return \"highSlots\";\r\n      else if (!!type.typeIsMedPower) return \"midSlots\";\r\n      else if (!!type.typeIsLoPower) return \"lowSlots\";\r\n      else return \"ship\";\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit]`;\r\n    const lowSlots = EFT.#buildTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const miscSlots = EFT.#buildTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Subsystem slot]\");\r\n    const moduleSlots =  [ship, lowSlots, midSlots, highSlots, rigSlots, miscSlots]\r\n      .filter(slots => !!slots)// In case for miscSlots is empty and returned as false\r\n      .join(\"\\n\\n\");\r\n\r\n    const drones =  EFT.#buildTextFromFit_droneSlots(fit?.droneSlots, \"[Empty Subsystem slot]\")\r\n\r\n    return [moduleSlots, drones].join(\"\\n\\n\\n\");\r\n  };\r\n  static #buildTextFromFit_moduleSlots = function (moduleSlots, emptyText) {\r\n    if (!moduleSlots || moduleSlots.length === 0) return false;\r\n\r\n    return moduleSlots\r\n      .map((moduleSlot) => {\r\n        if (!moduleSlot || !moduleSlot.item) return emptyText;\r\n        if (!moduleSlot.charge) return moduleSlot.item.typeName;\r\n        return moduleSlot.item.typeName.concat(\r\n          \", \",\r\n          moduleSlot.charge.typeName\r\n        );\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        if (!droneSlot || !droneSlot.item) return \"\";\r\n        return `${droneSlot.item.typeName} x${droneSlot.item.typeCount}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildCompareTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit] ${fit?.ship?.typeState}`;\r\n    const miscSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Misc slot]\");\r\n    const lowSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const drones = EFT.#buildCompareTextFromFit_droneSlots(fit?.droneSlots);\r\n\r\n    return [\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      drones,\r\n    ].join(\"\\n\\n\");\r\n  }\r\n  static #buildCompareTextFromFit_moduleSlots = function (slots, blankText) {\r\n    if (!slots) return \"\";\r\n    return slots\r\n      .map((slot) => {\r\n        if (!slot || !slot.item) return blankText;\r\n        if (!slot.charge) return `${slot.item.typeName} ${slot.item.typeState}`;\r\n        return `${slot.item.typeName}, ${slot.charge.typeName} ${slot.item.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildCompareTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        const drone = droneSlot.item;\r\n        return `${drone.typeName} x${drone.typeCount} ${drone.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  static #common_findIdByName = function (typeName, typeIDs) {\r\n    if (!typeName) return false;\r\n\r\n    const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n    return !!type ? type : false;\r\n  };\r\n}\r\n","export function findAttributesByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeName.constructor === String) {\r\n    return findAttributeByName(item, attributeName);\r\n  } else if (attributeName.constructor === Array) {\r\n    const attributes = attributeName.map((entry) =>\r\n      findAttributeByName(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nfunction findAttributeByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeName === attributeName\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n\r\nexport function findAttributesbyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeID.constructor === Number) {\r\n    return findAttributebyID(item, attributeID);\r\n  } else if (attributeID.constructor === Array) {\r\n    const attributes = attributeID.map((entry) =>\r\n      findAttributebyID(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nexport function findAttributebyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeID === attributeID\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  else if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport Slot from \"./Slot\";\r\nimport { useState, useEffect } from \"react\";\r\nimport EFT from \"../services/EFT\";\r\nimport { translateVariant } from \"../Drawers\";\r\nimport { getSlotCount } from \"../FittingDrawer/FittingDrawer.jsx\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes\";\r\nimport { Avatar, Divider, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"relative\",\r\n  },\r\n  lodingIndicator: {\r\n    position: \"absolute\",\r\n    height: 10,\r\n    width: 10,\r\n    top: 2,\r\n    left: 2,\r\n    backgroundColor: theme.palette.property.gre,\r\n  },\r\n  divider: {\r\n    width: \"200%\",\r\n  },\r\n}));\r\n\r\nexport default function Slots(props) {\r\n  const classes = useStyles();\r\n  //prettier-ignore\r\n  const [rawItems, setRawItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [rawCharges, setRawCharges] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedItems, setFetchedItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedCharges, setFetchedCharges] = useState(new Array(props.slotCount).fill(false));\r\n  const setters = {\r\n    setRawItems,\r\n    setFetchedItems,\r\n    setRawCharges,\r\n    setFetchedCharges,\r\n  };\r\n\r\n  const [activeSlotNumber, setActiveSlotNumber] = useState(0);\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const sessionRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    setRawItems(new Array(props.slotCount).fill(false));\r\n    setRawCharges(new Array(props.slotCount).fill(false));\r\n  }, [props.slots?.ship?.typeID]);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    rawItems.length = props.slotCount;\r\n    setRawItems(Array.from(rawItems, (item) => item || false));\r\n    rawCharges.length = props.slotCount;\r\n    setRawCharges(Array.from(rawCharges, (charge) => charge || false));\r\n  }, [props.slotCount]);\r\n\r\n  //Import fitText using EFT class\r\n  useEffect(() => {\r\n    if (props.importFitText !== false) importSlots(props, setters);\r\n  }, [props.importFitText]);\r\n\r\n  //Raw items, charges input [REFACTOR!!]\r\n  useEffect(() => {\r\n    switch (props.listItems[props.variant]) {\r\n      case false:\r\n      case undefined:\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawItems[activeSlotNumber] = false;\r\n        rawCharges[activeSlotNumber] = false;\r\n        break;\r\n      case \"ADD\":\r\n        const activeItem = rawItems[activeSlotNumber];\r\n        activeItem[\"typeCount\"] = loopNumber(activeItem.typeCount, 1, 6);\r\n        setRawItems([...rawItems]);\r\n        props.dispatchListItems({ type: props.variant, payload: false });\r\n        return;\r\n      case \"activation\":\r\n        changeState(rawItems[activeSlotNumber], \"activation\");\r\n        break;\r\n      case \"offline\":\r\n        changeState(rawItems[activeSlotNumber], \"offline\");\r\n        break;\r\n      case \"passive\":\r\n        changeState(rawItems[activeSlotNumber], \"passive\");\r\n        break;\r\n      case \"overload\":\r\n        changeState(rawItems[activeSlotNumber], \"overload\");\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); return;\r\n      default:\r\n        // New item is comming\r\n        if (validateHardpoints(props.fit, props.listItems[props.variant])) {\r\n          assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber);\r\n          addCountToDroneSlots(props, rawItems[activeSlotNumber]);\r\n          changeState(rawItems[activeSlotNumber], \"activation\");\r\n        }\r\n        break;\r\n    }\r\n    setRawItems([...rawItems]);\r\n    setRawCharges([...rawCharges]);\r\n    props.dispatchListItems({ type: props.variant, payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(\r\n        loopNumber(activeSlotNumber, 0, props.slotCount, props.variant)\r\n      );\r\n  }, [props.listItems[props.variant]]);\r\n\r\n  useEffect(() => {\r\n    switch (props.listItems[\"AMMO\"]) {\r\n      case false:\r\n      case undefined:\r\n      case \"activation\":\r\n      case \"offline\":\r\n      case \"passive\":\r\n      case \"overload\":\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawCharges[activeSlotNumber] = false;\r\n        setFetchedCharges([...rawCharges]);\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); break;\r\n      default:\r\n        if (props.slotsOpen.AMMO.slotVariant !== props.variant) break;\r\n        if (!rawItems[activeSlotNumber]) break;\r\n        rawCharges[activeSlotNumber] = props.listItems[\"AMMO\"];\r\n        changeState(rawCharges[activeSlotNumber], \"passive\");\r\n        setRawCharges([...rawCharges]);\r\n    }\r\n    props.dispatchListItems({ type: \"AMMO\", payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(loopNumber(activeSlotNumber, 0, props.slotCount));\r\n  }, [props.listItems[\"AMMO\"]]);\r\n\r\n  //Fetched items, charges input\r\n  useEffect(() => {\r\n    sessionRef.current = sessionRef.current + 1;\r\n    setIsLoading(true);\r\n    (async function (props, rawItems, rawCharges, session) {\r\n      const data = await Promise.all(\r\n        createFetchPromises(props, rawItems, rawCharges, session)\r\n      );\r\n\r\n      const sessionData = data[data.length - 1];\r\n      const fetchedData = data.slice(0, data.length - 1);\r\n\r\n      if (sessionData !== sessionRef.current) {\r\n        //prettier-ignore\r\n        console.error( \"ERROR_SESSION_COUNT_DEFECTED\", props.variant, {FETCHED_SESSION: sessionData, VALID_SESSION: sessionRef.current, fetchedData} );\r\n        return undefined;\r\n      } else if (fetchedData === false) {\r\n        //prettier-ignore\r\n        console.warn(\"WARN_ITEM_CHARGE_COUNT_DEFECTED\", props.variant, {rawItems, rawCharges})\r\n      } else {\r\n        processFetchedData(props, fetchedData, rawItems, rawCharges, setters);\r\n      }\r\n      setIsLoading(false);\r\n    })(props, rawItems, rawCharges, sessionRef.current);\r\n  }, [checkData(rawItems, rawCharges)]);\r\n\r\n  if (props.slotCount > 0)\r\n    return (\r\n      <React.Fragment>\r\n        <div className={classes.root}>\r\n          <Divider\r\n            className={classes.divider}\r\n            style={{ backgroundColor: props.backgroundColor }}\r\n          />\r\n          {new Array(props.slotCount).fill(undefined).map((slot, index) => {\r\n            return (\r\n              <Slot\r\n                key={`${props.variant}:${index}`}\r\n                variant={props.variant}\r\n                open={props.open}\r\n                slotsOpen={props.slotsOpen}\r\n                slots={props.slots}\r\n                fetchedItem={fetchedItems[index]}\r\n                fetchedCharge={fetchedCharges[index]}\r\n                dispatchSlotsOpen={props.dispatchSlotsOpen}\r\n                setActiveSlot={props.setActiveSlot}\r\n                isActive={\r\n                  activeSlotNumber === index &&\r\n                  (props.slotsOpen[props.variant].open ||\r\n                    props.slotsOpen.AMMO.slotVariant === props.variant)\r\n                }\r\n                index={index}\r\n                setActiveSlotNumber={setActiveSlotNumber}\r\n                cache={props.cache}\r\n              />\r\n            );\r\n          })}\r\n          {isLoading && (\r\n            <Avatar className={classes.lodingIndicator}>{\"\"}</Avatar>\r\n          )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  else return false;\r\n}\r\nfunction validateHardpoints(fit, listItems) {\r\n  if (\r\n    listItems.typeIsTurretFitted !== true &&\r\n    listItems.typeIsLauncherFitted !== true\r\n  )\r\n    return true;\r\n\r\n  const pointLoad = extractHardpoints(fit);\r\n\r\n  if (listItems.typeIsTurretFitted === true) {\r\n    const turretPoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    return turretPoint > pointLoad.turretPointLoad;\r\n  } else if (listItems.typeIsLauncherFitted === true) {\r\n    const launcherPoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\"\r\n    return launcherPoint > pointLoad.launcherPointLoad;\r\n  }\r\n}\r\nfunction extractHardpoints(fit) {\r\n  let turretPointLoad = 0;\r\n  let launcherPointLoad = 0;\r\n  Fit.mapSlots(\r\n    fit,\r\n    (slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      if (isTurretFitted === true) return ++turretPointLoad;\r\n      if (isLauncherFitted === true) return ++launcherPointLoad;\r\n    },\r\n    { isIterate: { highSlots: true } }\r\n  );\r\n  return { turretPointLoad, launcherPointLoad };\r\n}\r\nfunction importSlots(props, setters) {\r\n  if (!props.importFitText) return undefined;\r\n\r\n  (async (fitText) => {\r\n    const typeIDs = await props.cache.wait(\"/typeIDsTable\");\r\n    const fitFromText = EFT.buildFitFromText(fitText, typeIDs);\r\n    const ship = await props.cache.wait(`typeID/${fitFromText.ship.typeID}`);\r\n\r\n    if (props.variant === \"SHIP\") {\r\n      setters.setRawItems([fitFromText.ship]);\r\n      return undefined;\r\n    }\r\n\r\n    const slotCount = getSlotCountAtImport({ ship }, fitFromText, props);\r\n    const items = new Array(slotCount).fill(false);\r\n    const charges = new Array(slotCount).fill(false);\r\n\r\n    const slots = fitFromText[translateVariant(props.variant)] || [];\r\n\r\n    //prettier-ignore\r\n    slots.forEach((slot, index) => {\r\n      items[index] = !!slot.item && { ...slot.item, typeState: \"activation\" };\r\n      charges[index] = !!slot.charge && {...slot.charge, typeState: \"passive\",};\r\n    });\r\n\r\n    setters.setRawItems(items);\r\n    setters.setRawCharges(charges);\r\n\r\n    props.dispatchImportStateFlag({ type: props.variant });\r\n  })(props.importFitText);\r\n}\r\nfunction getSlotCountAtImport(fit, fitFromText, props) {\r\n  const isTacCruiser = fit.ship.groupID === 963;\r\n  if (isTacCruiser === true)\r\n    return fitFromText[translateVariant(props.variant)].length;\r\n  else return getSlotCount(fit, props.variant);\r\n}\r\nfunction createFetchPromises(props, rawItems, rawCharges, session) {\r\n  if (rawItems.length !== rawCharges.length)\r\n    return [Promise.resolve(false), Promise.resolve(session)];\r\n\r\n  const promisesItem = rawItems.map((rawItem) => {\r\n    if (rawItem === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawItem?.typeID}`);\r\n  });\r\n  const promisesCharge = rawCharges.map((rawCharge) => {\r\n    if (rawCharge === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawCharge?.typeID}`);\r\n  });\r\n  const sessionPromise = Promise.resolve(session);\r\n  return [...promisesItem, ...promisesCharge, sessionPromise];\r\n}\r\nfunction processFetchedData(props, data, rawItems, rawCharges, setters) {\r\n  const items = data.slice(0, data.length / 2);\r\n  const charges = data.slice(data.length / 2);\r\n  const payload = [];\r\n  items.forEach((fetcheditem, index) => {\r\n    const itemState = !!rawItems[index]\r\n      ? Fit.getCurrentState({\r\n          ...rawItems[index],\r\n          ...fetcheditem,\r\n        })\r\n      : undefined;\r\n    const item = !!rawItems[index]\r\n      ? { ...rawItems[index], ...fetcheditem, typeState: itemState }\r\n      : false;\r\n    const charge = Fit.validateChargeSlot({ item, charge: charges[index] })\r\n      ? { ...rawCharges[index], ...charges[index] }\r\n      : false;\r\n    rawItems[index] = item;\r\n    rawCharges[index] = charge;\r\n    payload.push({ item, charge });\r\n    // If validation of charge fails, set rawCharge as false value\r\n    if (charge === false) rawCharges[index] = false;\r\n    // Set rawItems state as fetch complete(initial value was activation)\r\n    if (!!rawItems[index] && !!itemState)\r\n      rawItems[index][\"typeState\"] = itemState;\r\n  });\r\n\r\n  props.dispatchSlots({ type: props.variant, payload: payload });\r\n  setters.setFetchedCharges([...rawCharges]); // If validation of charge fails, set rawCharge as false value\r\n  setters.setFetchedItems([...rawItems]);\r\n}\r\n\r\nfunction assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber) {\r\n  rawItems[activeSlotNumber] = { ...props.listItems[props.variant] };\r\n\r\n  //Sync chargeSlots count to itemSlots count\r\n  if (rawCharges[activeSlotNumber] === undefined)\r\n    rawCharges[activeSlotNumber] = false;\r\n}\r\nfunction addCountToDroneSlots(props, activeItem) {\r\n  if (props.variant === \"DRONE_SLOT\" && activeItem.typeCount === undefined)\r\n    activeItem[\"typeCount\"] = 1;\r\n}\r\nfunction changeState(activeItem, state) {\r\n  if (activeItem.typeState === undefined)\r\n    activeItem[\"typeState\"] = \"activation\";\r\n\r\n  switch (state) {\r\n    case \"offline\":\r\n    case \"overload\":\r\n    case \"passive\":\r\n    case \"activation\":\r\n      activeItem.typeState = state;\r\n      break;\r\n    default:\r\n      activeItem.typeState = \"activation\";\r\n      break;\r\n  }\r\n}\r\nfunction checkData(rawItems, rawCharges) {\r\n  return [\r\n    ...hashTypes(rawItems),\r\n    ...hashState(rawItems),\r\n    ...hashCount(rawItems),\r\n    ...hashTypes(rawCharges),\r\n  ].join(\":\");\r\n}\r\nfunction hashTypes(types) {\r\n  return types.map((type) => !!type && type.typeName).join(\"-\");\r\n}\r\nfunction hashState(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeState).join(\"-\");\r\n}\r\nfunction hashCount(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeCount).join(\"-\");\r\n}\r\nfunction loopNumber(number, floor, ceiling, variant) {\r\n  if (variant === \"DRONE_SLOT\") {\r\n    if (number >= ceiling) return floor;\r\n    return number + 1;\r\n  }\r\n\r\n  if (number + 1 >= ceiling) return floor;\r\n  else return number + 1;\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport UnarchiveIcon from \"@material-ui/icons/Unarchive\";\r\nimport RecButton from \"../RecButton\";\r\nimport EFT from \"../services/EFT\";\r\nimport fittingLazyFetch from \"./fittingLazyFetch.js\";\r\nimport {\r\n  makeStyles,\r\n  Snackbar,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItem,\r\n  Tooltip,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { importInitializeFlag } from \"./FittingDrawer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  listItem: {\r\n    width: 300,\r\n    padding: 0,\r\n  },\r\n  listIcon: {\r\n    width: 35,\r\n    minWidth: 10,\r\n  },\r\n  warning: {\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nexport default function ImportExportButtons(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n\r\n  const [title, setTitle] = useState(\r\n    \"Something went wrong . reload the page\"\r\n  );\r\n  const [text, setText] = useState(false);\r\n\r\n  const handleImportClick = useCallback(() => {\r\n    copyTextFromClipboard().then((text) => {\r\n      setOpenAlert(true);\r\n      if (text === false) return setTitle(\"Permission denied\");\r\n      setText(text);\r\n      props.setImportFitText(text);\r\n      props.dispatchImportStateFlag({ type: \"START\" });\r\n      props.cache.wait(\"/typeIDsTable\").then((typeIDs) => {\r\n        const IDs = EFT.extractIDs(text, typeIDs);\r\n        if (!IDs || IDs.length === 0) setTitle(\"Unvalid EFT\");\r\n        else setTitle(\"Importing EFT\");\r\n        fittingLazyFetch(props.cache, IDs);\r\n      });\r\n    });\r\n  }, [props.setImportFitText, props.dispatchImportStateFlag, props.cache]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Tooltip title=\"Import\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton className={classes.button} onClick={handleImportClick}>\r\n            <ArchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Tooltip title=\"Export\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton\r\n            className={classes.button}\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(props.exportFitText);\r\n            }}\r\n          >\r\n            <UnarchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        open={openAlert}\r\n        onClose={() => {\r\n          setOpenAlert(false);\r\n        }}\r\n        ContentProps={{\r\n          elevation: 3,\r\n          style: {\r\n            backgroundColor: theme.palette.background.paper,\r\n            border: getSnackbarBorder(title, theme),\r\n          },\r\n        }}\r\n        message={\r\n          <ListItem className={classes.listItem}>\r\n            <ListItemIcon>\r\n              <ArchiveIcon className={classes.warning} />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={title}\r\n              secondary={text}\r\n              primaryTypographyProps={{\r\n                style: { color: theme.palette.text.primary, fontWeight: 700 },\r\n              }}\r\n              secondaryTypographyProps={{\r\n                style: { color: theme.palette.text.secondary },\r\n              }}\r\n            />\r\n          </ListItem>\r\n        }\r\n        autoHideDuration={5000}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nasync function copyTextFromClipboard() {\r\n  const permisson = await navigator.permissions.query({\r\n    name: \"clipboard-read\",\r\n  });\r\n  if (permisson.state === \"granted\" || permisson.state === \"prompt\") {\r\n    return navigator.clipboard.readText();\r\n  }\r\n  return false;\r\n}\r\nfunction getSnackbarBorder(title, theme) {\r\n  switch (title) {\r\n    case \"Importing EFT\":\r\n      return \"none\";\r\n    case \"Unvalid EFT\":\r\n      return `solid 3px ${theme.palette.property.org}`;\r\n    case \"Permission denied\":\r\n      return `solid 3px ${theme.palette.property.red}`;\r\n    default:\r\n      return \"none\";\r\n  }\r\n}\r\n","import { database } from \"../../../index\";\r\n\r\nexport default function lazyFetch(cache, typeIDs) {\r\n  typeIDs.forEach((typeID) => {\r\n    cache.get(`typeID/${typeID}`, () => {\r\n      return database\r\n        .ref(`typeIDs/${typeID}`)\r\n        .once(\"value\")\r\n        .then((data) => data.val());\r\n    });\r\n  });\r\n}\r\n","import React, { useReducer } from \"react\";\r\nimport { Drawer, Button, makeStyles, ButtonGroup } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport Slots from \"../Slots/Slots.jsx\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport ImportExportButtons from \"./ImportExportButtons.jsx\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes.js\";\r\nimport Fit from \"../../../fitter/src/Fit.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootClose: {\r\n    width: 0,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootExpand: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootRetract: {\r\n    width: 60,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  expandButton: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    opacity: 1,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    zIndex: 1,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n\r\n  child: {\r\n    width: \"100%\",\r\n    overflowX: \"hidden\",\r\n    overflowY: \"auto\",\r\n    paddingBottom: 35,\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport const importInitializeFlag = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n};\r\n\r\nfunction importStateFlagReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"START\":\r\n      return importInitializeFlag;\r\n    default:\r\n      return {\r\n        ...state,\r\n        [action.type]: true,\r\n      };\r\n  }\r\n}\r\n\r\nexport default function FittingDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [importFitText, setImportFitText] = useState(false);\r\n  const [importStateFlag, dispatchImportStateFlag] = useReducer(\r\n    importStateFlagReducer,\r\n    importInitializeFlag\r\n  );\r\n\r\n  const childRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    //If import is finished\r\n    if (!Object.values(importStateFlag).includes(false)) {\r\n      setImportFitText(false);\r\n    }\r\n  }, [importStateFlag]);\r\n\r\n  useEffect(() => {\r\n    const savedSlots = JSON.parse(localStorage.getItem(`${props.tag}SLOTS`));\r\n    const savedEFT = localStorage.getItem(`${props.tag}EFT`);\r\n    console.log(props.tag, savedSlots, savedEFT);\r\n    if (!savedSlots?.ship?.typeID || !savedEFT) return;\r\n\r\n    props.cache.set(`typeID/${savedSlots.ship.typeID}`, savedSlots.ship);\r\n    Fit.mapSlots(\r\n      savedSlots,\r\n      (slot) => {\r\n        if (!!slot?.item?.typeID)\r\n          props.cache.set(`typeID/${slot.item.typeID}`, slot.item);\r\n        if (!!slot?.charge?.typeID)\r\n          props.cache.set(`typeID/${slot.charge.typeID}`, slot.charge);\r\n      },\r\n      {\r\n        isIterate: {\r\n          miscSlots: true,\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          rigSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    setImportFitText(savedEFT);\r\n    dispatchImportStateFlag({ type: \"START\" });\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={props.open}\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: classes[switchExpandOpen(props)],\r\n        }}\r\n      >\r\n        <ButtonGroup>\r\n          <ImportExportButtons\r\n            exportFitText={props.exportFitText}\r\n            setImportFitText={setImportFitText}\r\n            dispatchImportStateFlag={dispatchImportStateFlag}\r\n            cache={props.cache}\r\n          />\r\n        </ButtonGroup>\r\n        <Button\r\n          className={classes.expandButton}\r\n          onClick={() => props.setExpand(!props.expand)}\r\n        >\r\n          {!!props.expand ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n        </Button>\r\n\r\n        <div className={classes.child}>\r\n          <div ref={childRef}>\r\n            {[\r\n              \"SHIP\",\r\n              \"MISC_SLOT\",\r\n              \"HIGH_SLOT\",\r\n              \"MID_SLOT\",\r\n              \"LOW_SLOT\",\r\n              \"RIG_SLOT\",\r\n              \"DRONE_SLOT\",\r\n            ].map((variant) => {\r\n              return (\r\n                <Slots\r\n                  key={variant}\r\n                  importFitText={importFitText}\r\n                  importStateFlag={importStateFlag}\r\n                  dispatchImportStateFlag={dispatchImportStateFlag}\r\n                  variant={variant}\r\n                  slotCount={getSlotCount(props.fit, variant)}\r\n                  {...props}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          className={classes.retractButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({ type: \"RESET\" });\r\n            props.setOpen(false);\r\n          }}\r\n        >\r\n          <FirstPageIcon />\r\n        </Button>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction switchExpandOpen(props) {\r\n  if (!props.open) return \"rootClose\";\r\n  if (!props.expand) return \"rootRetract\";\r\n  return \"rootExpand\";\r\n}\r\nexport function getSlotCount(slots, variant) {\r\n  if (variant === \"SHIP\") return 1;\r\n  if (!slots.ship || !slots.ship.typeAttributesStats) return 0;\r\n\r\n  const ship = slots.ship;\r\n  const attrs = ship.typeAttributesStats;\r\n  switch (variant) {\r\n    case \"MISC_SLOT\":\r\n      switch (ship.groupID) {\r\n        // groupID: 963, name.en: Strategic Cruiser\r\n        case 963:\r\n          return 4;\r\n        // groupID: 1305, name.en: Tactical Destroyer\r\n        case 1305:\r\n          return 1;\r\n        default:\r\n          return 0;\r\n      }\r\n    case \"HIGH_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 14)?.value;\r\n    case \"MID_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 13)?.value;\r\n    case \"LOW_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 12)?.value;\r\n    case \"RIG_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 1137)?.value; //rigslot count is not sure 1137 or 1154\r\n    case \"DRONE_SLOT\":\r\n      return getDroneSlotCount(slots);\r\n  }\r\n}\r\nfunction getDroneSlotCount(slots) {\r\n  const droneBandwidth = findAttributebyID(slots.ship, 1271); // attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  if (!droneBandwidth) return 0;\r\n\r\n  if (!slots.droneSlots) return 1;\r\n  return slots.droneSlots.reduce((acc, slot, index) => {\r\n    if (!!slot.item) return index + 2;\r\n    return acc;\r\n  }, 1);\r\n}\r\n","import React from \"react\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\n\r\nexport default function StatTextField(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 4,\r\n        width: \"70%\",\r\n      }}\r\n    >\r\n      <TextField\r\n        style={{ width: \"100%\" }}\r\n        label={\r\n          <Typography noWrap style={{ width: \"100%\" }}>\r\n            {!!switchUnit(props.attr.unitID)\r\n              ? `${props.attr.attributeName} (${switchUnit(props.attr.unitID)})`\r\n              : props.attr.attributeName}\r\n          </Typography>\r\n        }\r\n        defaultValue={props.attr.value}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nfunction switchUnit(unitID) {\r\n  if (!unitID) return false;\r\n\r\n  const unit = eveUnit.find((unit) => unit.unitID === unitID);\r\n  if (unit === undefined)\r\n    console.log(\r\n      \"ERROR\",\r\n      `unitID:${unitID} not found. dear developer please update database!`\r\n    );\r\n  return unit?.displayName;\r\n}\r\nconst eveUnit = [\r\n  { unitID: 1, displayName: \"m\" },\r\n  { unitID: 2, displayName: \"kg\" },\r\n  { unitID: 3, displayName: \"sec\" },\r\n  { unitID: 4, displayName: \"A\" },\r\n  { unitID: 5, displayName: \"K\" },\r\n  { unitID: 6, displayName: \"mol\" },\r\n  { unitID: 7, displayName: \"cd\" },\r\n  { unitID: 8, displayName: \"m2\" },\r\n  { unitID: 9, displayName: \"m3\" },\r\n  { unitID: 10, displayName: \"m/sec\" },\r\n  { unitID: 11, displayName: \"m/sec\" },\r\n  { unitID: 12, displayName: \"m-1\" },\r\n  { unitID: 13, displayName: \"kg/m3\" },\r\n  { unitID: 14, displayName: \"m3/kg\" },\r\n  { unitID: 15, displayName: \"A/m2\" },\r\n  { unitID: 16, displayName: \"A/m\" },\r\n  { unitID: 17, displayName: \"mol/m3\" },\r\n  { unitID: 18, displayName: \"cd/m2\" },\r\n  { unitID: 19, displayName: \"kg/kg = 1\" },\r\n  { unitID: 101, displayName: \"s\" },\r\n  { unitID: 102, displayName: \"mm\" },\r\n  { unitID: 103, displayName: \"MegaPascals\" },\r\n  { unitID: 104, displayName: \"x\" },\r\n  { unitID: 105, displayName: \"%\" },\r\n  { unitID: 106, displayName: \"tf\" },\r\n  { unitID: 107, displayName: \"MW\" },\r\n  { unitID: 108, displayName: \"%\" },\r\n  { unitID: 109, displayName: \"%\" },\r\n  { unitID: 111, displayName: \"%\" },\r\n  { unitID: 112, displayName: \"rad/sec\" },\r\n  { unitID: 113, displayName: \"HP\" },\r\n  { unitID: 114, displayName: \"GJ\" },\r\n  { unitID: 115, displayName: \"groupID\" },\r\n  { unitID: 116, displayName: \"typeID\" },\r\n  { unitID: 117, displayName: \"Sizeclass\" },\r\n  { unitID: 118, displayName: \"Ore units\" },\r\n  { unitID: 119, displayName: \"attributeID\" },\r\n  { unitID: 120, displayName: \"points\" },\r\n  { unitID: 121, displayName: \"%\" },\r\n  { unitID: 122, displayName: \"Fitting slots\" },\r\n  { unitID: 123, displayName: \"sec\" },\r\n  { unitID: 124, displayName: \"%\" },\r\n  { unitID: 125, displayName: \"N\" },\r\n  { unitID: 126, displayName: \"ly\" },\r\n  { unitID: 127, displayName: \"%\" },\r\n  { unitID: 128, displayName: \"Mbit/sec\" },\r\n  { unitID: 129, displayName: \"Hours\" },\r\n  { unitID: 133, displayName: \"ISK\" },\r\n  { unitID: 134, displayName: \"m3/hour\" },\r\n  { unitID: 135, displayName: \"AU\" },\r\n  { unitID: 136, displayName: \"Slot\" },\r\n  { unitID: 137, displayName: \"Boolean\" },\r\n  { unitID: 138, displayName: \"units\" },\r\n  { unitID: 139, displayName: \"+\" },\r\n  { unitID: 140, displayName: \"Level\" },\r\n  { unitID: 141, displayName: \"hardpoints\" },\r\n  { unitID: 142, displayName: \"1=Male 2=Unisex 3=Female\" },\r\n  { unitID: 143, displayName: \"Datetime\" },\r\n];\r\n","import React from \"react\";\r\nimport { Typography, TextField, InputAdornment } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport StatTextField from \"./StatTextField\";\r\n\r\nexport default function Stat(props) {\r\n  const [type, setType] = useState(false);\r\n  const [attributesCategories, setAttributesCategories] = useState(false);\r\n\r\n  const [typeName, setTypeName] = useState(false);\r\n  const [builtList, setList] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/attributesCategories\").then((data) => {\r\n      setAttributesCategories(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setType(props.type);\r\n  }, [props.type]);\r\n\r\n  useEffect(() => {\r\n    if (!!type && !!attributesCategories) {\r\n      setTypeName(type.typeName);\r\n      setList(createStatList(type, attributesCategories));\r\n    }\r\n  }, [attributesCategories, type]);\r\n  return (\r\n    <React.Fragment>\r\n      <Typography\r\n        style={{\r\n          fontSize: 26,\r\n          fontWeight: 1000,\r\n          letterSpacing: -1.5,\r\n          lineHeight: 1,\r\n          marginRight: 20,\r\n          textDecoration: \"underline\",\r\n        }}\r\n        variant=\"h4\"\r\n        align=\"right\"\r\n      >\r\n        {typeName}\r\n      </Typography>\r\n      <div style={{ marginTop: 20 }}>{builtList}</div>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction createStatList(item, attributesCategories) {\r\n  const etc = [\"Miscellaneous\", \"Required Skills\", \"Graphics\", \"NULL\"];\r\n  const dividedAttributes = filterAttributes(item, attributesCategories).reduce(\r\n    (acc, filtered) => {\r\n      if (etc.includes(filtered.name))\r\n        acc.etc[etc.indexOf(filtered.name)] = filtered;\r\n      else acc.main.push(filtered);\r\n      return acc;\r\n    },\r\n    { main: [], etc: new Array(etc.length).fill(undefined) }\r\n  );\r\n\r\n  return [...dividedAttributes.main, ...dividedAttributes.etc].map(\r\n    (filtered) => {\r\n      if (!filtered || !filtered.name || filtered.attributes.length === 0)\r\n        return undefined;\r\n\r\n      const attrs = filtered.attributes;\r\n      const name = filtered.name;\r\n      const nameSpace = [];\r\n\r\n      return (\r\n        <React.Fragment key={name}>\r\n          <Typography\r\n            style={{\r\n              fontSize: 20,\r\n              fontWeight: 1000,\r\n              letterSpacing: -1.5,\r\n              lineHeight: 1,\r\n              marginRight: 20,\r\n              marginTop: 20,\r\n            }}\r\n            variant=\"h4\"\r\n            align=\"right\"\r\n          >\r\n            {name}\r\n          </Typography>\r\n          {attrs.map((attr) => {\r\n            const key = `${attr.attributeName}:${attr.value}`;\r\n            if (!nameSpace.includes(key)) {\r\n              nameSpace.push(key);\r\n              return <StatTextField key={key} attr={attr} />;\r\n            }\r\n          })}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  );\r\n}\r\nfunction filterAttributes(type, attributesCategories) {\r\n  if (!type || !type.typeAttributesStats) return undefined;\r\n  const typeAttributesStats = type.typeAttributesStats;\r\n\r\n  const filteredAttributes = new Array(50)\r\n    .fill(undefined)\r\n    .map((attr, index) => ({\r\n      name: attributesCategories[index]?.name,\r\n      attributes: [],\r\n    }));\r\n\r\n  typeAttributesStats.forEach((attr) => {\r\n    if (!attr.attributeCategoryID) filteredAttributes[0].attributes.push(attr);\r\n    else filteredAttributes[attr.attributeCategoryID].attributes.push(attr);\r\n  });\r\n\r\n  return filteredAttributes;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Drawer,\r\n  makeStyles,\r\n  Button,\r\n  ButtonGroup,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport { useState } from \"react\";\r\nimport Stat from \"./Stat\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"scroll\",\r\n    padding: \"10px 20px 0px 10px\",\r\n    marginBottom: 40,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n    borderRadius: 0,\r\n  },\r\n  rootButton: {\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport default function StatDrawer(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [tabIndex, setTabIndex] = useState(0);\r\n\r\n  const styleButton = useCallback(\r\n    (index) => {\r\n      let backgroundColor = theme.palette.action.hover;\r\n      let color = theme.palette.text.disabled;\r\n\r\n      if (tabIndex === index) {\r\n        backgroundColor = theme.palette.action.selected;\r\n        color = theme.palette.text.primary;\r\n      }\r\n      return {\r\n        backgroundColor: backgroundColor,\r\n        color: color,\r\n        marginBottom: 10,\r\n      };\r\n    },\r\n    [tabIndex]\r\n  );\r\n\r\n  return (\r\n    <Drawer\r\n      anchor={!!props.anchor ? props.anchor : \"right\"}\r\n      open={props.open}\r\n      variant=\"temporary\"\r\n      classes={{ paper: classes.rootPaper }}\r\n      onClose={() => {\r\n        props.dispatchSlotsOpen({\r\n          type: \"STAT\",\r\n          payload: {\r\n            open: false,\r\n          },\r\n        });\r\n        setTabIndex(0);\r\n      }}\r\n    >\r\n      <div className={classes.child}>\r\n        {props.slot?.charge && (\r\n          <ButtonGroup fullWidth variant=\"text\">\r\n            <Button style={styleButton(0)} onClick={() => setTabIndex(0)}>\r\n              ITEM\r\n            </Button>\r\n            <Button style={styleButton(1)} onClick={() => setTabIndex(1)}>\r\n              CHARGE\r\n            </Button>\r\n          </ButtonGroup>\r\n        )}\r\n        <div hidden={tabIndex !== 0}>\r\n          <Stat\r\n            type={\r\n              props.slot?.typeID !== undefined ? props.slot : props.slot?.item\r\n            }\r\n            cache={props.cache}\r\n          />\r\n        </div>\r\n        <div hidden={tabIndex !== 1}>\r\n          <Stat type={props.slot?.charge} cache={props.cache} />\r\n        </div>\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={() => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        <LastPageIcon />\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport clsx from \"clsx\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { ListItemAvatar, Avatar } from \"@material-ui/core\";\r\nimport { storage } from \"../../../index\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    paddingLeft: theme.spacing(1),\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function NestedList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(props.opened);\r\n  const [image, setImage] = React.useState(\"\");\r\n\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.opened === true) setOpen(true);\r\n\r\n    return () => {\r\n      setOpen(false);\r\n    };\r\n  }, [props.opened]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    if (props.itemData.iconTypeID === 3584)\r\n      // description: Severed head (soaked in formaldehyde) - Unknown\r\n      props.cache\r\n        .get(`/icons/${props.itemData.iconFileName}`, () => {\r\n          return storage\r\n            .ref(`eveIcons/${props.itemData.iconFileName}`)\r\n            .getDownloadURL()\r\n            .then(async (url) => {\r\n              return await fetch(url)\r\n                .then((data) => data.arrayBuffer())\r\n                .then((arrayBuffer) => convertArrayBufferToBase64(arrayBuffer));\r\n            });\r\n        })\r\n        .then((data) => !!isMounted && setImage(data));\r\n    else setImage(feedSource(props.itemData));\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [props.cache, props.itemData]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemAvatar>\r\n          <Avatar style={{ width: 30, height: 30 }} src={image}>\r\n            ?\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={props.itemData.marketGroupName}\r\n          primaryTypographyProps={{ variant: \"subtitle2\" }}\r\n        />\r\n        <IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: open,\r\n          })}\r\n          onClick={handleClick}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <List className={classes.nested}>{props.children}</List>\r\n      </Collapse>\r\n    </List>\r\n  );\r\n}\r\nfunction feedSource(itemData) {\r\n  return `https://images.evetech.net/types/${itemData?.iconTypeID}/icon?size=32`;\r\n}\r\nfunction convertArrayBufferToBase64(arrayBuffer) {\r\n  const base64Flag = \"data:image/jpeg;base64,\";\r\n\r\n  let binary = \"\";\r\n  const bytes = [].slice.call(new Uint8Array(arrayBuffer));\r\n  bytes.forEach((b) => (binary += String.fromCharCode(b)));\r\n  return base64Flag + window.btoa(binary);\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  Avatar,\r\n  makeStyles,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  root: {\r\n    padding: \"8px 16px 8px 16px\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n  },\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    marginRight: 10,\r\n  },\r\n}));\r\n\r\nexport default function ItemSelection(props) {\r\n  const classes = useStyle();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <ListItem\r\n      className={classes.root}\r\n      key={props.itemData.typeName}\r\n      button\r\n      onClick={handleItemClick(props)}\r\n    >\r\n      <Avatar\r\n        style={{\r\n          backgroundColor: getTechColor(props.itemData, theme),\r\n        }}\r\n        className={classes.rootAvatar}\r\n      >\r\n        {\"\" /* Necessary! */}\r\n      </Avatar>\r\n\r\n      <ListItemText\r\n        primary={props.itemData.typeName}\r\n        primaryTypographyProps={{ variant: \"caption\" }}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst handleItemClick = (props) => () => {\r\n  props.setItem && props.setItem(props.itemData);\r\n  props.outboundSetItem && props.outboundSetItem(props.itemData);\r\n};\r\n\r\nfunction getTechColor(item, theme) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.typeMetaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return theme.palette.action.hover;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\n","export default function headFilterInvTypesTable(props) {\r\n  if (!props.table.invTypesTable) return undefined;\r\n\r\n  const allowedAttributes = props.filter.allowedAttributes;\r\n\r\n  if (allowedAttributes.constructor === Array) {\r\n    let invTypesTable = props.table.invTypesTable;\r\n\r\n    allowedAttributes.forEach((entry) => {\r\n      invTypesTable = bodyFilterInvTypesTable(entry, invTypesTable);\r\n    });\r\n\r\n    return invTypesTable;\r\n  }\r\n\r\n  return props.table.invTypesTable;\r\n}\r\n\r\nfunction bodyFilterInvTypesTable(allowedAttribute, invTypesTable) {\r\n  if (!allowedAttribute.attributeName) return invTypesTable;\r\n\r\n  return invTypesTable.filter((entry) => {\r\n    switch (allowedAttribute?.value?.constructor) {\r\n      case Boolean:\r\n      case Number:\r\n        return entry[allowedAttribute.attributeName] === allowedAttribute.value;\r\n      case Array:\r\n        return allowedAttribute.value.includes(\r\n          entry[allowedAttribute.attributeName]\r\n        );\r\n      case String:\r\n        return entry[allowedAttribute.attributeName]\r\n          .toLowerCase()\r\n          .includes(allowedAttribute.value.toLowerCase());\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport NestedList from \"../../components/simpleEdition/shipCardComponents/NestedListDedicated\";\r\nimport ItemSelection from \"../../components/itemSelection/ItemSelection\";\r\nimport isTerminalGroup from \"./isTerminalGroup\";\r\nimport findChildrenMarketGroup from \"./findChildrenMarketGroup\";\r\nimport findChildrenInvTypes from \"./findChildrenInvTypes\";\r\nimport isArrayEmpty from \"./isArrayEmpty\";\r\nimport filterInvTypesTable from \"./filterInvTypesTable\";\r\n\r\n// Judge creating multuple list or not by rootMaeketGroupID's condition\r\nexport default function headCreateEveList(props) {\r\n  if (!props.rootMarketGroupID) return;\r\n\r\n  props.table.invTypesTable = filterInvTypesTable(props);\r\n  if (props.table.invTypesTable.length > 50) props.opened = false;\r\n\r\n  if (props.rootMarketGroupID.constructor === Number) {\r\n    return bodyCreateEveList(props);\r\n  }\r\n  if (props.rootMarketGroupID.constructor === Array) {\r\n    return props.rootMarketGroupID.map((entry) => {\r\n      return bodyCreateEveList({\r\n        ...props,\r\n        rootMarketGroupID: entry,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction bodyCreateEveList(props) {\r\n  if (!validateTables(props)) return false;\r\n\r\n  if (isTerminalGroup(props)) {\r\n    return renderChildrenInvTypes(props);\r\n  } else {\r\n    return renderChildrenMarketGroup(props);\r\n  }\r\n}\r\n\r\nfunction renderChildrenInvTypes(props) {\r\n  const childrenInvTypes = findChildrenInvTypes(props);\r\n  return childrenInvTypes.map((entry) => {\r\n    return (\r\n      <ItemSelection\r\n        setItem={props.state.setItem}\r\n        outboundSetItem={props.state.outboundSetItem}\r\n        key={entry.typeName}\r\n        itemData={entry}\r\n      />\r\n    );\r\n  });\r\n}\r\nfunction renderChildrenMarketGroup(props) {\r\n  const childrenMarketGroup = findChildrenMarketGroup(props);\r\n  return childrenMarketGroup.map((entry) => {\r\n    const renderedChildrenMarketGroups = bodyCreateEveList({\r\n      ...props,\r\n      rootMarketGroupID: entry.marketGroupID,\r\n    });\r\n\r\n    if (!isArrayEmpty(renderedChildrenMarketGroups)) return undefined;\r\n    else\r\n      return (\r\n        <NestedList\r\n          opened={!!props.opened}\r\n          key={entry.marketGroupName}\r\n          itemData={entry}\r\n          eveListConfig={props}\r\n          cache={props.cache}\r\n        >\r\n          {renderedChildrenMarketGroups}\r\n        </NestedList>\r\n      );\r\n  });\r\n}\r\n\r\nfunction validateTables(props) {\r\n  if (!!props.table.marketGroupTable && !!props.table.invTypesTable) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport const defalutEveListConfigStructure = {\r\n  opened: false,\r\n  rootMarketGroupID: 2,\r\n  table: {\r\n    marketGroupTable: false,\r\n    invTypesTable: false,\r\n  },\r\n  filter: {\r\n    allowedAttributes: [\r\n      {\r\n        attributeName: false,\r\n        value: false,\r\n      },\r\n    ],\r\n  },\r\n  state: {\r\n    item: false,\r\n    setItem: false,\r\n    outboundSetItem: false,\r\n  },\r\n};\r\n","export default function isTerminalGroup(props) {\r\n  if (!props.table.marketGroupTable || props.rootMarketGroupID === undefined)\r\n    return undefined;\r\n  const marketCategory = props.table.marketGroupTable.find(\r\n    (entry) => entry.marketGroupID === props.rootMarketGroupID\r\n  );\r\n  return marketCategory.hasTypes;\r\n}\r\n","export default function findChildrenInvTypes(props) {\r\n  if (!props.table.invTypesTable) return [];\r\n\r\n  const invTypesTable = props.table.invTypesTable;\r\n  const marketGroupID = props.rootMarketGroupID;\r\n\r\n  const reultTEST = bubbleSortByMetaLevel(\r\n    invTypesTable.filter((entry) => entry.marketGroupID === marketGroupID)\r\n  );\r\n\r\n  return reultTEST;\r\n}\r\nfunction bubbleSortByMetaLevel(childrenTypeIDs) {\r\n  let len = childrenTypeIDs.length;\r\n\r\n  let swapped;\r\n  do {\r\n    swapped = false;\r\n    for (let i = 0; i < len - 1; i++) {\r\n      if (\r\n        childrenTypeIDs[i].typeMetaGroupID >\r\n        childrenTypeIDs[i + 1].typeMetaGroupID\r\n      ) {\r\n        let tmp = childrenTypeIDs[i];\r\n        childrenTypeIDs[i] = childrenTypeIDs[i + 1];\r\n        childrenTypeIDs[i + 1] = tmp;\r\n        swapped = true;\r\n      }\r\n    }\r\n  } while (swapped);\r\n  return childrenTypeIDs;\r\n}\r\n","export default function findChildrenMarketGroup(props) {\r\n  if (!props.table.marketGroupTable) return [];\r\n\r\n  return props.table.marketGroupTable.filter((entry) => {\r\n    return entry.parentGroupID === props.rootMarketGroupID;\r\n  });\r\n}\r\n","export default function isArrayEmpty(renderedChildrenMarketGroup) {\r\n  if (renderedChildrenMarketGroup.length === 0) return false;\r\n\r\n  for (let entry of renderedChildrenMarketGroup) {\r\n    if (entry !== undefined) return true;\r\n  }\r\n  return false;\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport createEveList from \"../../services/eveListConstruction/createEveList\";\r\nimport { defalutEveListConfigStructure } from \"../../services/eveListConstruction/createEveList\";\r\nimport { database } from \"../../index\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    minWidth: 350,\r\n    height: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    paddingTop: 0,\r\n  },\r\n}));\r\n\r\nexport default React.memo(function ItemSelectionListCache(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n\r\n  const [marketGroupTable, setMarketGroupTable] = useState(false);\r\n  const [invTypesTable, setInvTypesTable] = useState(false);\r\n\r\n  const [builtListStructure, setBuiltListStructure] = useState(undefined);\r\n  const [eveListConfig] = useState({\r\n    ...defalutEveListConfigStructure,\r\n    ...props.eveListConfig,\r\n    state: {\r\n      item: item,\r\n      setItem: setItem,\r\n      outboundSetItem: props.eveListConfig.state.outboundSetItem,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/marketCategories\").then((data) => {\r\n      setMarketGroupTable(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/typeIDsTable\").then((data) => setInvTypesTable(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item?.typeID) {\r\n      props.cache\r\n        .get(`typeID/${item.typeID}`, () => {\r\n          return database\r\n            .ref(`/typeIDs/${item.typeID}`)\r\n            .once(\"value\")\r\n            .then((data) => data.val());\r\n        })\r\n        .then((data) => {\r\n          setItem(data);\r\n          return;\r\n        });\r\n    }\r\n  }, [item?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const evelistConfigUpToDate = {\r\n      ...eveListConfig,\r\n      rootMarketGroupID: props.eveListConfig.rootMarketGroupID,\r\n      filter: props.eveListConfig.filter,\r\n      table: {\r\n        marketGroupTable: marketGroupTable,\r\n        invTypesTable: invTypesTable,\r\n      },\r\n      cache: props.cache,\r\n    };\r\n\r\n    if (!!marketGroupTable && !!invTypesTable) {\r\n      if (!props.nosave)\r\n        props.cache\r\n          .get(\r\n            //prettier-ignore\r\n            `eveListConfig:${JSON.stringify(props.eveListConfig)}}`,\r\n            () => {\r\n              return new Promise((resolve) => {\r\n                resolve(createEveList(evelistConfigUpToDate));\r\n              });\r\n            }\r\n          )\r\n          .then((data) => {\r\n            setBuiltListStructure(data);\r\n          });\r\n      else setBuiltListStructure(createEveList(evelistConfigUpToDate));\r\n    }\r\n  }, [marketGroupTable, invTypesTable, hashFilter(props.eveListConfig)]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <Collapse in timeout=\"auto\">\r\n        {builtListStructure}\r\n      </Collapse>\r\n    </List>\r\n  );\r\n});\r\nfunction hashFilter(eveListConfig) {\r\n  const rootMarketGroupID = eveListConfig.rootMarketGroupID;\r\n  const allowedAttributes = eveListConfig.filter.allowedAttributes;\r\n\r\n  return allowedAttributes\r\n    .map((attr) => [attr.attributeName, attr.value].join(\"-\"))\r\n    .join(\"|\")\r\n    .concat(rootMarketGroupID);\r\n}\r\n","import React from \"react\";\r\nimport { Grid, makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport RecButton from \"../RecButton\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport ExposurePlus1Icon from \"@material-ui/icons/ExposurePlus1\";\r\nimport SetStateMenu from \"./SetStateMenu\";\r\nimport SyncIcon from \"@material-ui/icons/Sync\";\r\nimport SyncDisabledIcon from \"@material-ui/icons/SyncDisabled\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  deleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n    color: theme.palette.button.color,\r\n  },\r\n  ammoDeleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.orange,\r\n    color: theme.palette.button.color,\r\n  },\r\n  showInfoButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.blue,\r\n    color: theme.palette.button.color,\r\n  },\r\n  addButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n    color: theme.palette.button.color,\r\n  },\r\n  loopOrNotButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    color: theme.palette.button.color,\r\n  },\r\n}));\r\n\r\nconst DeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.deleteButton}\r\n          onClick={() => props.setItem(\"DEL\")}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <CloseIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AmmoDeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete ammo\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.ammoDeleteButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({ type: \"AMMO\", payload: \"DEL\" });\r\n          }}\r\n          disabled={!props.activeCharge?.typeID}\r\n        >\r\n          <HighlightOffIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ShowInfoButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Information\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.showInfoButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({\r\n              type: \"STAT\",\r\n              payload: {\r\n                open: true,\r\n                slotVariant: props.activeSlot.type,\r\n                slotNumber: props.activeSlot.index,\r\n              },\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <InfoIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AddButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Add drone\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.addButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: \"DRONE_SLOT\",\r\n              payload: \"ADD\",\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <ExposurePlus1Icon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst LoopOrNotButton = function (props) {\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    if (props.liftedIsLoop !== isLoop) setIsLoop(props.liftedIsLoop);\r\n  }, [props.liftedIsLoop]);\r\n\r\n  return (\r\n    <Tooltip title=\"Loop through slots\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.loopOrNotButton}\r\n          style={{\r\n            backgroundColor: isLoop\r\n              ? theme.palette.property.green\r\n              : theme.palette.property.red,\r\n          }}\r\n          onClick={() => {\r\n            props.setItem(\"LOOPLOOP\");\r\n            props.setLiftedIsLoop(!isLoop);\r\n            setIsLoop(!isLoop);\r\n          }}\r\n        >\r\n          {isLoop ? <SyncIcon /> : <SyncDisabledIcon />}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function ListDrawerButtons(props) {\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={2}>\r\n        <DeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <AmmoDeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <ShowInfoButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <SetStateMenu {...props} />\r\n      </Grid>\r\n      {props.variant === \"DRONE_SLOT\" ? (\r\n        <Grid item xs={2}>\r\n          <AddButton {...props} />\r\n        </Grid>\r\n      ) : (\r\n        <Grid item xs={2}></Grid>\r\n      )}\r\n\r\n      <Grid item xs={2}>\r\n        <LoopOrNotButton {...props} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  TextField,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  textField: {\r\n    margin: \"3px 12px 0px 16px\",\r\n  },\r\n  textFieldInputLabel: {\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  textFieldinputLabel: {\r\n    fontWeight: 700,\r\n    padding: \"3px 0px 3px 1px\",\r\n    height: 26,\r\n  },\r\n  popperVisible: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })}`,\r\n  },\r\n  popperHidden: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })},${theme.transitions.create([\"z-index\"], {\r\n      duration: 300,\r\n    })}`,\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    maxHeight: 600,\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n}));\r\n\r\nconst SearchTextField = withStyles({\r\n  root: {\r\n    \"& input:valid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:invalid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:valid:focus + fieldset\": {\r\n      borderLeftWidth: 6,\r\n      padding: \"4px !important\", // override inline-style\r\n    },\r\n    width: \"90%\",\r\n  },\r\n})(TextField);\r\n\r\nexport default function ListDrawerSearchbar(props) {\r\n  const classes = useStyles();\r\n  const anchorEl = useRef(null);\r\n\r\n  const [searchOpen, setSearchOpen] = useState(false);\r\n  const [searchVisible, setSearchVisible] = useState(false);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  const handleSearchTextChange = useCallback((e) => {\r\n    setSearchText(e.target.value);\r\n    if (!!e.target.value) {\r\n      setSearchOpen(true);\r\n      setSearchVisible(true);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setSearchVisible(false);\r\n      }}\r\n    >\r\n      <div>\r\n        <SearchTextField\r\n          ref={anchorEl}\r\n          className={classes.textField}\r\n          InputLabelProps={{\r\n            className: classes.textFieldInputLabel,\r\n          }}\r\n          inputProps={{\r\n            className: classes.textFieldinputLabel,\r\n          }}\r\n          label=\"Search\"\r\n          onChange={handleSearchTextChange}\r\n          onFocus={handleSearchTextChange}\r\n        />\r\n\r\n        <Popper\r\n          style={{\r\n            opacity: searchVisible ? 1 : 0,\r\n            zIndex: searchVisible ? 2000 : -1000,\r\n          }}\r\n          className={\r\n            searchVisible ? classes.popperVisible : classes.popperHidden\r\n          }\r\n          open={searchOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom-start\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <ItemSelectionListCache\r\n                eveListConfig={mutateEveListConfig(\r\n                  props.eveListConfig,\r\n                  searchText\r\n                )}\r\n                cache={props.cache}\r\n                nosave\r\n              />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\nfunction mutateEveListConfig(eveListConfig, searchText) {\r\n  if (!searchText) return eveListConfig;\r\n\r\n  const mutatedAllowedAttributes = [...eveListConfig.filter.allowedAttributes];\r\n  mutatedAllowedAttributes.push({\r\n    attributeName: \"typeName\",\r\n    value: searchText,\r\n  });\r\n\r\n  return {\r\n    ...eveListConfig,\r\n    opened: true,\r\n    filter: {\r\n      allowedAttributes: mutatedAllowedAttributes,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, Button, makeStyles } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\nimport { useEffect } from \"react\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport ListDrawerButtons from \"./ListDrawerButtons\";\r\nimport { useCallback } from \"react\";\r\nimport ListDrawerSearchbar from \"./ListDrawerSearchbar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ListDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const getEveListConfig = useCallback(() => {\r\n    return {\r\n      rootMarketGroupID: getRootMarketGroupID(props.slots, props.variant),\r\n      state: {\r\n        outboundSetItem: setItem,\r\n      },\r\n      filter: {\r\n        allowedAttributes: [\r\n          ...allowedAttributes(props.variant),\r\n          ...props.filter,\r\n        ],\r\n      },\r\n      tag: props.tag,\r\n    };\r\n  }, [\r\n    props.variant,\r\n    getFilterID(props.filter),\r\n    getRootMarketGroupID(props.slots, props.variant),\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item) {\r\n      props.dispatchListItems({ type: props.variant, payload: item });\r\n      setItem(false);\r\n    }\r\n  }, [item]);\r\n\r\n  return (\r\n    <Drawer\r\n      classes={{ paper: classes.rootPaper }}\r\n      PaperProps={{\r\n        style: {\r\n          marginLeft: props.expand === true ? 300 : 60,\r\n        },\r\n      }}\r\n      anchor={width < 1000 ? \"right\" : \"left\"}\r\n      open={props.open}\r\n      variant=\"persistent\"\r\n    >\r\n      <ListDrawerButtons setItem={setItem} {...props} />\r\n      <ListDrawerSearchbar\r\n        eveListConfig={getEveListConfig()}\r\n        cache={props.cache}\r\n      />\r\n      <div className={classes.child}>\r\n        <ItemSelectionListCache\r\n          eveListConfig={getEveListConfig()}\r\n          cache={props.cache}\r\n        />\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={(e) => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        {width < 1000 ? <LastPageIcon /> : <FirstPageIcon />}\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nfunction getRootMarketGroupID(slots, variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return 4;\r\n    case \"MISC_SLOT\":\r\n      return getMiscSlotMarketGroupID(slots);\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return 9;\r\n    case \"RIG_SLOT\":\r\n      return 1111;\r\n    case \"AMMO\":\r\n      return 11;\r\n    case \"DRONE_SLOT\":\r\n      return 157;\r\n  }\r\n}\r\nfunction allowedAttributes(variant) {\r\n  switch (variant) {\r\n    case \"HIGH_SLOT\":\r\n      return [{ attributeName: \"typeIsHiPower\", value: true }];\r\n    case \"MID_SLOT\":\r\n      return [{ attributeName: \"typeIsMedPower\", value: true }];\r\n    case \"LOW_SLOT\":\r\n      return [{ attributeName: \"typeIsLoPower\", value: true }];\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nfunction getMiscSlotMarketGroupID(slots) {\r\n  switch (slots.ship?.typeID) {\r\n    case 34317: //Confessor\r\n      return 10001;\r\n    case 34828: //Jackdaw\r\n      return 10002;\r\n    case 35683: //Hecate\r\n      return 10003;\r\n    case 34562: //Svipul\r\n      return 10004;\r\n    case 29986: //Legion\r\n      return 1610;\r\n    case 29984: //Tengu\r\n      return 1625;\r\n    case 29988: //Proteus\r\n      return 1627;\r\n    case 29990: //Loki\r\n      return 1626;\r\n    default:\r\n      return 9;\r\n  }\r\n}\r\nfunction getFilterID(filters) {\r\n  return filters\r\n    .map((filter) => `${filter.attributeName}:${filter.value}`)\r\n    .join(\"-\");\r\n}\r\n","import React from \"react\";\r\nimport ListDrawer from \"./ListDrawer\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { translateVariant } from \"../Drawers\";\r\n\r\nexport default React.memo(function ListDrawers(props) {\r\n  const [activeItem, setActiveItem] = useState(false);\r\n  const [activeCharge, setActiveCharge] = useState(false);\r\n\r\n  const [liftedIsLoop, setLiftedIsLoop] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const activeSlot = getActiveSlot(props.fit, props.activeSlot);\r\n    setActiveItem(activeSlot?.item);\r\n    setActiveCharge(activeSlot?.charge);\r\n  }, [props.fitID, props.activeSlot]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {[\r\n        \"SHIP\",\r\n        \"MISC_SLOT\",\r\n        \"HIGH_SLOT\",\r\n        \"MID_SLOT\",\r\n        \"LOW_SLOT\",\r\n        \"RIG_SLOT\",\r\n        \"AMMO\",\r\n        \"DRONE_SLOT\",\r\n      ].map((variant) => {\r\n        return (\r\n          <ListDrawer\r\n            tag={props.tag}\r\n            key={variant}\r\n            variant={variant}\r\n            activeItem={activeItem}\r\n            activeCharge={activeCharge}\r\n            liftedIsLoop={liftedIsLoop}\r\n            setLiftedIsLoop={setLiftedIsLoop}\r\n            expand={props.expand}\r\n            open={props.slotsOpen[variant].open}\r\n            filter={generateFilter(props.slots, props.slotsOpen, variant)}\r\n            {...props}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n});\r\nfunction generateFilter(slots, slotsOpen, variant) {\r\n  switch (variant) {\r\n    case \"AMMO\": {\r\n      const filter = slotsOpen.AMMO.filter;\r\n      if (!filter.group || filter.group.length === 0) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeGroupID\",\r\n          value: filter.group,\r\n        },\r\n        { attributeName: \"typeChargeSize\", value: filter.size },\r\n      ];\r\n    }\r\n    case \"RIG_SLOT\": {\r\n      const filter = slotsOpen.RIG_SLOT.filter;\r\n      if (!filter || !filter.size) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeRigSize\",\r\n          value: filter.size,\r\n        },\r\n      ];\r\n    }\r\n    case \"DRONE_SLOT\": {\r\n      const filter = slotsOpen.DRONE_SLOT.filter;\r\n      if (filter.size === false || filter.size === undefined) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeDroneSize\",\r\n          value: [...new Array(filter.size + 1).keys()],\r\n        },\r\n      ];\r\n    }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nexport function getActiveSlot(fit, activeSlot) {\r\n  if (activeSlot.type === false || activeSlot.index === false)\r\n    return { item: false, charge: false };\r\n  if (activeSlot.type === \"SHIP\") return { item: fit.ship };\r\n\r\n  return fit[translateVariant(activeSlot.type)][activeSlot.index];\r\n}\r\n","export default class EveMath {\r\n  static getAmbientChargeRateMath(Cmax, Cnow, Tchg) {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  }\r\n  static getTurretAcurracy(summary, owner, target) {\r\n    const onBoardVector = owner.summary.situation.vector;\r\n    const hostileVector = target.summary.situation.vector;\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const trackingValue =\r\n      summary.range.tracking * (40000 / summary.range.signatureResolution);\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n\r\n    const _angularVelocity = EveMath.#getTurretAcurracy_angularVelocuty(\r\n      distance,\r\n      distanceVector,\r\n      onBoardVector,\r\n      hostileVector\r\n    );\r\n    const _trackingPart = EveMath.#getTurretAcurracy_trackingPart(\r\n      _angularVelocity,\r\n      trackingValue,\r\n      signatureRadius\r\n    );\r\n\r\n    const trackingModifier = Math.pow(0.5, _trackingPart);\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    return (trackingModifier * rangeModifier).toFixed(3);\r\n  }\r\n  static getLauncherAccuracy(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    return summary.range.optimalRange < distance * 1000 ? 0 : 1;\r\n  }\r\n  static getDroneAccracy(summary, owner, target) {\r\n    // owner is owner of drone! which is ship\r\n    if (summary.isSentry)\r\n      return EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n    const targetUnitVector = EveMath.#common_makeUnitVector(\r\n      target.summary.situation.vector\r\n    );\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n    const isChasing =\r\n      summary.capacity.propulsion.orbitVelocity < targetVelocity;\r\n    if (isChasing) {\r\n      const droneAccuracyModifier = EveMath.#getDroneAccracy_getAccuracyModifier(\r\n        summary,\r\n        targetVelocity\r\n      );\r\n      const absoluteVelocity = summary.capacity.propulsion.orbitVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      };\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return (\r\n        EveMath.getTurretAcurracy(summary, droneSituationsummary, target) *\r\n        droneAccuracyModifier\r\n      );\r\n    } else {\r\n      const absoluteVelocity =\r\n        summary.capacity.propulsion.orbitVelocity + targetVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      }; // drone positions at perpendicular to targetVector\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X +\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return EveMath.getTurretAcurracy(summary, droneSituationsummary, target);\r\n    }\r\n  }\r\n  static #getDroneAccracy_getAccuracyModifier = (summary, targetVelocity) => {\r\n    // Estimated modifier - drone movement is too complicated simplify the situation when target velocity is higher than orbit velocity\r\n    //prettier-ignore\r\n    const value = 1 -targetVelocity /\r\n          (summary.capacity.propulsion.maximumVelocity - summary.capacity.propulsion.orbitVelocity);\r\n    if (value >= 1) return 1;\r\n    return value >= 0 ? value : 0.01;\r\n  };\r\n  static getLauncherDamageModifier(summary, target) {\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n    const explosionRadius = summary.range.explosionRadius;\r\n    const explosionVelocity = summary.range.explosionVelocity;\r\n    const damageReductionFactor = summary.range.damageReductionFactor;\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n\r\n    const simplePart = signatureRadius / explosionRadius;\r\n    const complexPart = Math.pow(\r\n      (signatureRadius * explosionVelocity) /\r\n        (explosionRadius * targetVelocity),\r\n      damageReductionFactor\r\n    );\r\n\r\n    return Math.min(1, simplePart, complexPart);\r\n  }\r\n  static getTurretRandomDamageModifier() {\r\n    const randomDamageModifier = Math.random();\r\n    return randomDamageModifier < 0.01 ? 3 : randomDamageModifier + 0.49;\r\n  }\r\n  static getRangeModifier(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const optimal = summary.range.optimalRange;\r\n    const falloff = summary.range.falloffRange;\r\n    if (distance * 1000 > optimal + 3 * falloff) return 0;\r\n\r\n    const denominator = falloff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    const _distancePart = Math.pow(numerator / denominator, 2);\r\n\r\n    return Math.pow(0.5, _distancePart);\r\n  }\r\n\r\n  static #getTurretAcurracy_trackingPart = (\r\n    angularVelocity,\r\n    trackingValue,\r\n    signatureRadius\r\n  ) => {\r\n    const denominator = trackingValue * signatureRadius;\r\n    const numerator = angularVelocity * 40000;\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_distancePart = (optimal, fallOff, distance) => {\r\n    const denominator = fallOff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_angularVelocuty = (\r\n    distance,\r\n    distanceVector,\r\n    onBoardVector,\r\n    hostileVector\r\n  ) => {\r\n    if (\r\n      EveMath.#getTurretAcurracy_validateVector(distanceVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(onBoardVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(hostileVector)\r\n    ) {\r\n      const perpendicularVector = { x: -distanceVector.y, y: distanceVector.x };\r\n      const perpendicularUnitVector = EveMath.#common_makeUnitVector(\r\n        perpendicularVector\r\n      );\r\n      const hostileOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        hostileVector\r\n      );\r\n      const onBoardOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        onBoardVector\r\n      );\r\n      const trueObitalVelocity =\r\n        (hostileOrbitalVelocity - onBoardOrbitalVelocity) * 3;\r\n      return trueObitalVelocity / (distance * 1000);\r\n    } else return false;\r\n  };\r\n  static #getTurretAcurracy_innerProduct = (unitVector, velocityVector) => {\r\n    return unitVector.x * velocityVector.x + unitVector.y * velocityVector.y;\r\n  };\r\n  static #getTurretAcurracy_validateVector = (vector) => {\r\n    if (vector.x !== undefined && vector.y !== undefined) return true;\r\n    else return false;\r\n  };\r\n  static #common_makeUnitVector = (vector) => {\r\n    const length = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n    return { x: vector.x / length, y: vector.y / length };\r\n  };\r\n}\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\n\r\nexport default class Stat {\r\n  static defaultStat = {\r\n    damage: {\r\n      turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n      turretLauncherRange: [],\r\n      droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n    },\r\n    defense: {\r\n      resistance: {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      },\r\n      active: {\r\n        shieldBonus: 0,\r\n        armorBonus: 0,\r\n        structureBonus: 0,\r\n      },\r\n    },\r\n    capacitor: {\r\n      ambientChargeRate: 0,\r\n      boosterChargeRate: 0,\r\n      activationUseRate: 0,\r\n      stableLevel: 0,\r\n    },\r\n    resource: {\r\n      capacity: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 0,\r\n      },\r\n    },\r\n    engineering: {\r\n      pg: { load: 0, output: 0 },\r\n      cpu: { load: 0, output: 0 },\r\n    },\r\n    miscellaneous: {\r\n      sensor: {\r\n        scanResolution: 0,\r\n        maximumLockedTarget: 0,\r\n        maximumTargetingRange: 0,\r\n        strength: {\r\n          gravimetric: 0,\r\n          magnetometric: 0,\r\n          ladar: 0,\r\n          radar: 0,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier: 0,\r\n        maximumVelocity: 0,\r\n        warpSpeedMultiplier: 0,\r\n      },\r\n      misc: {\r\n        cargoBayCapacity: 0,\r\n        signatureRadius: 0,\r\n      },\r\n    },\r\n  };\r\n  static stat(fit) {\r\n    const propCapacitor = Stat.capacitor(fit);\r\n\r\n    return {\r\n      damage: Stat.damage(fit),\r\n      defense: Stat.defense(fit),\r\n      capacitor: {\r\n        ...propCapacitor,\r\n        stableLevel: Stat.capacitor_stableLevel(fit, propCapacitor),\r\n      },\r\n      engineering: Stat.engineering(fit),\r\n      resource: Stat.resource(fit),\r\n      miscellaneous: Stat.miscellaneous(fit),\r\n    };\r\n  }\r\n\r\n  static damage(fit) {\r\n    if (!fit.highSlots)\r\n      return {\r\n        turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n        turretLauncherRange: [],\r\n        droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n      };\r\n\r\n    const turrets = Stat.#damage_turrets(fit);\r\n    const launchers = Stat.#damage_launchers(fit);\r\n    const drones = Stat.#damage_drones(fit);\r\n\r\n    const turretLauncherDamageSlots = [...turrets, ...launchers];\r\n    const turretLauncherDamageSummaries = turretLauncherDamageSlots.map(\r\n      (slot) => {\r\n        return Stat.damage_getSummary(slot.item, slot.charge);\r\n      }\r\n    );\r\n    const turretLauncherDamage = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n\r\n        return {\r\n          max: acc.max + maxDps,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const turretLauncherRange = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const optimalRange = summary.range.optimalRange;\r\n        const falloffRange = summary.range.falloffRange;\r\n\r\n        const overlappingRange = acc.find(\r\n          (range) =>\r\n            range.optimalRange === optimalRange &&\r\n            range.falloffRange === falloffRange\r\n        );\r\n        if (!!overlappingRange) overlappingRange.debug.push(summary.slot);\r\n        else acc.push({ optimalRange, falloffRange, debug: [summary.slot] });\r\n        return acc;\r\n      },\r\n      []\r\n    );\r\n\r\n    const droneSummaries = drones.map((drone) => {\r\n      return Stat.damage_getSummary(drone.item, drone.item);\r\n    });\r\n    const droneDamage = droneSummaries.reduce(\r\n      (acc, summary) => {\r\n        const typeCount = summary.typeCount;\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n        return {\r\n          max: acc.max + maxDps * typeCount,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const damageSummaries = [\r\n      ...turretLauncherDamageSummaries,\r\n      ...droneSummaries,\r\n    ];\r\n\r\n    return {\r\n      turretLauncherDamage,\r\n      turretLauncherRange,\r\n      droneDamage,\r\n      damageSummaries,\r\n    };\r\n  }\r\n  static #damage_turrets = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 42\r\n        ); //effectID: 42, effectName: \"turretFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isTurretFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_launchers = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 40\r\n        ); //effectID: 40, effectName: \"launcherFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isLauncherFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_drones = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isActivated) return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { droneSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static damage_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = Stat.damage_damagePerAct(item, charge);\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const range = Stat.damage_range(item, charge);\r\n    const typeCount = item.typeCount;\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, damagePerAct, range, typeCount, slot };\r\n  };\r\n  static damage_damagePerAct = (item, charge) => {\r\n    const damageModifier = findAttributebyID(item, 64) || 1; //attributeID: 64, attributeName: \"Damage Modifier\"\r\n\r\n    const EM_damage = findAttributebyID(charge, 114); //attributeID: 114, attributeName: \"EM damage\"\r\n    const TH_damage = findAttributebyID(charge, 118); //attributeID: 118, attributeName: \"Thermal damage\"\r\n    const KI_damage = findAttributebyID(charge, 117); //attributeID: 117, attributeName: \"Kinetic damage\"\r\n    const EX_damage = findAttributebyID(charge, 116); //attributeID: 116, attributeName: \"Explosive damage\"\r\n    const mergedDamage = EM_damage + TH_damage + KI_damage + EX_damage;\r\n\r\n    const alpha = damageModifier * mergedDamage;\r\n\r\n    return {\r\n      alpha,\r\n      EM: EM_damage * damageModifier,\r\n      TH: TH_damage * damageModifier,\r\n      KI: KI_damage * damageModifier,\r\n      EX: EX_damage * damageModifier,\r\n    };\r\n  };\r\n  static damage_range = (item, charge) => {\r\n    const isTurretFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 42\r\n    ); //effectID: 42, effectName: \"turretFitted\"\r\n    const isLauncherFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 40\r\n    ); //effectID: 40, effectName: \"launcherFitted\"\r\n    const isDrone = item?.typeDroneSize !== undefined;\r\n\r\n    if (isTurretFitted || isDrone) {\r\n      const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n      const falloffRange = findAttributebyID(item, 158); //attributeID: 158, attributeName: \"Accuracy falloff \"\r\n      const tracking = findAttributebyID(item, 160); // attributeID: 160, attributeName: \"Turret Tracking\"\r\n      const signatureResolution = findAttributebyID(item, 620); // attributeID: 620, attributeName: \"Signature Resolution\"\r\n\r\n      return { optimalRange, falloffRange, tracking, signatureResolution };\r\n    } else if (isLauncherFitted) {\r\n      const maximumVelocity = findAttributebyID(charge, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n      const filghtTime = findAttributebyID(charge, 281); //attributeID: 281, attributeName: \"Maximum Flight Time\"\r\n      const optimalRange = maximumVelocity * (filghtTime / 1000);\r\n      const explosionVelocity = findAttributebyID(charge, 653); // attributeID: 653, attributeName: \"Explosion Velocity\"\r\n      const explosionRadius = findAttributebyID(charge, 654); // attributeID: 654, attributeName: \"Explosion Radius\"\r\n      const damageReductionFactor = findAttributebyID(charge, 1353); // attributeID: 1353, attributeName: \"aoeDamageReductionFactor\"\r\n\r\n      //prettier-ignore\r\n      return { optimalRange, falloffRange: 0, explosionVelocity, explosionRadius, damageReductionFactor };\r\n    } else return { optimalRange: 0, falloffRange: 0 };\r\n  };\r\n\r\n  static capacitor(fit) {\r\n    if (!fit)\r\n      return {\r\n        ambientChargeRate: 0,\r\n        boosterChargeRate: 0,\r\n        activationUseRate: 0,\r\n      };\r\n    const debug = [];\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: {\r\n        highSlots: true,\r\n        midSlots: true,\r\n        lowSlots: true,\r\n      },\r\n    });\r\n    const activationUseRate = slots.reduce((acc, slot) => {\r\n      const cus = Stat.#capacitor_getUseRate(slot);\r\n      if (cus > 0)\r\n        debug.push({\r\n          typeName: slot.item.typeName,\r\n          capacitorUsePerSec: cus,\r\n          dominID: slot.item.domainID,\r\n        });\r\n      return acc + cus;\r\n    }, 0);\r\n    const ambientChargeRate = Stat.#capacitor_getAmbientChargeRate(fit, 25);\r\n    const boosterChargeRate = Stat.#capacitor_getBoosterChargeRate(fit);\r\n    debug.push({ activationUseRate, ambientChargeRate, boosterChargeRate });\r\n\r\n    /* console.log(debug) */\r\n    return { ambientChargeRate, boosterChargeRate, activationUseRate };\r\n  }\r\n  static capacitor_stableLevel(fit, propCapacitor = false) {\r\n    if (!fit.ship?.typeID) return 0;\r\n    const capacitor = !!propCapacitor ? propCapacitor : Stat.capacitor(fit);\r\n    const Cmax = findAttributebyID(fit.ship, 482); //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const Tnow = findAttributebyID(fit.ship, 55) / 1000; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    const capacitorDeltas = [];\r\n    for (let i = 200; i < 1000 + 1; i++) {\r\n      const Cnow = Cmax * (i / 1000);\r\n      capacitorDeltas.push({\r\n        capacitorLevel: i / 10,\r\n        delta:\r\n          Stat.getAmbientChargeRateMath(Cmax, Cnow, Tnow) +\r\n          capacitor.boosterChargeRate -\r\n          capacitor.activationUseRate,\r\n      });\r\n    }\r\n    const positiveDeltas = capacitorDeltas\r\n      .sort((a, b) => a.delta - b.delta)\r\n      .filter((capacitorDelta) => capacitorDelta.delta >= 0);\r\n\r\n    if (positiveDeltas[0] === undefined) return 0;\r\n    else return positiveDeltas[0].capacitorLevel;\r\n  }\r\n  static #capacitor_getUseRate = (slot) => {\r\n    if (slot.item.typeState !== \"activation\") return 0;\r\n\r\n    const activationCost = findAttributebyID(slot.item, 6); // attributeID: 6, attributeName: \"Activation Cost\"\r\n    if (activationCost === undefined) return 0;\r\n\r\n    const activationInfo = Stat.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return activationCost / activationInfo.e_duration;\r\n  };\r\n  static #capacitor_getAmbientChargeRate = (fit, capacitorLevel) => {\r\n    const chargeInfo = Stat.capacitor_getChargeInfo(fit);\r\n    const Cmax = chargeInfo.HP;\r\n    const Tchg = chargeInfo.bonusRate;\r\n    const Cnow = (Cmax * capacitorLevel) / 100;\r\n\r\n    return Stat.getAmbientChargeRateMath(Cmax, Cnow, Tchg);\r\n  };\r\n  static capacitor_getChargeInfo = (fit) => {\r\n    const HP = findAttributebyID(fit.ship, 482) || 0; //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const bonusRate = findAttributebyID(fit.ship, 55) / 1000 || 0; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    return { HP, bonusRate };\r\n  };\r\n  static #capacitor_getBoosterChargeRate = (fit) => {\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: { midSlots: true },\r\n    });\r\n    const boosterSlots = slots.filter((slot) => {\r\n      if (!slot?.item?.typeEffectsStats) return false;\r\n      return slot.item.typeEffectsStats.find((efft) => efft.effectID === 48); // effectID: 48, effectName: \"powerBooster\"\r\n    });\r\n\r\n    return boosterSlots.reduce((acc, boosterSlot) => {\r\n      //prettier-ignore\r\n      const activationInfo = Stat.getActivationInfo(boosterSlot.item, boosterSlot.charge);\r\n      //prettier-ignore\r\n      const capacitorBonus = Stat.capacitor_getBonusPerAct_self(boosterSlot.item, boosterSlot.charge);\r\n      const boostChargeRate = capacitorBonus / activationInfo.e_duration || 0;\r\n\r\n      return acc + boostChargeRate;\r\n    }, 0);\r\n  };\r\n  static capacitor_getBonusPerAct_self(item, charge) {\r\n    if (!item || !charge) return { capacitorBonus: 0 };\r\n\r\n    const bonusPerAct = findAttributebyID(charge, 67); //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n\r\n    return bonusPerAct;\r\n  }\r\n\r\n  static defense(fit) {\r\n    if (!fit || !fit.ship)\r\n      return {\r\n        resistance: {\r\n          armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        },\r\n        active: {\r\n          shieldBonus: 0,\r\n          armorBonus: 0,\r\n          structureBonus: 0,\r\n        },\r\n      };\r\n    return {\r\n      resistance: Stat.defense_resistance(fit),\r\n      active: Stat.#defense_active(fit),\r\n    };\r\n  }\r\n  static defense_resistance = (fit) => {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      };\r\n\r\n    const shipAttrs = fit.ship.typeAttributesStats;\r\n\r\n    const armorHP = shipAttrs.find((attr) => attr.attributeID === 265);\r\n    const armorEM = shipAttrs.find((attr) => attr.attributeID === 267);\r\n    const armorTH = shipAttrs.find((attr) => attr.attributeID === 270);\r\n    const armorKI = shipAttrs.find((attr) => attr.attributeID === 269);\r\n    const armorEX = shipAttrs.find((attr) => attr.attributeID === 268);\r\n\r\n    const shieldHP = shipAttrs.find((attr) => attr.attributeID === 263);\r\n    const shieldEM = shipAttrs.find((attr) => attr.attributeID === 271);\r\n    const shieldTH = shipAttrs.find((attr) => attr.attributeID === 274);\r\n    const shieldKI = shipAttrs.find((attr) => attr.attributeID === 273);\r\n    const shieldEX = shipAttrs.find((attr) => attr.attributeID === 272);\r\n    const shieldChargeRate =\r\n      shipAttrs.find((attr) => attr.attributeID === 479).value / 1000 || 0; // attributeID: 479, attributeName: \"Shield recharge time\"\r\n\r\n    const structureHP = shipAttrs.find((attr) => attr.attributeID === 9);\r\n    const structureEM = shipAttrs.find((attr) => attr.attributeID === 113);\r\n    const structureTH = shipAttrs.find((attr) => attr.attributeID === 110);\r\n    const structureKI = shipAttrs.find((attr) => attr.attributeID === 109);\r\n    const structureEX = shipAttrs.find((attr) => attr.attributeID === 111);\r\n\r\n    return {\r\n      armor: {\r\n        HP: armorHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(armorEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(armorTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(armorKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(armorEX),\r\n      },\r\n      shield: {\r\n        HP: shieldHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(shieldEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(shieldTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(shieldKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(shieldEX),\r\n        bonusRate: shieldChargeRate,\r\n      },\r\n      structure: {\r\n        HP: structureHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(structureEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(structureTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(structureKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(structureEX),\r\n      },\r\n    };\r\n  };\r\n  static #defense_resistance_decimal_fix = (attr) => {\r\n    return 100 - attr.value * 100;\r\n  };\r\n  static defense_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const bonusPerAct = Stat.defense_getBonusPerAct(item, charge);\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, bonusPerAct, slot };\r\n  };\r\n  static defense_getBonusPerAct = (item, charge) => {\r\n    if (!item) return { shieldBonus: 0, armorBonus: 0, structureBonus: 0 };\r\n\r\n    const shield = findAttributebyID(item, 68) || 0; //attributeID: 68, attributeName: \"Shield Bonus\"\r\n    const armor = findAttributebyID(item, 84) || 0; //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n    const structure = findAttributebyID(item, 83) || 0; //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n\r\n    return { shield, armor, structure };\r\n  };\r\n  static #defense_active = (fit) => {\r\n    const active = {\r\n      shieldBonus: 0,\r\n      armorBonus: 0,\r\n      structureBonus: 0,\r\n    };\r\n    if (!fit.ship || !fit.ship.typeAttributesStats) return active;\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item.typeAttributesStats) return;\r\n        const activationTime = findAttributebyID(slot.item, 73); //attributeID: 73, attributeName: \"Activation time / duration\"\r\n\r\n        const shieldBonus = findAttributebyID(slot.item, 68); //attributeID: 68, attributeName: \"Shield Bonus\"\r\n        if (!!shieldBonus) {\r\n          active.shieldBonus += (shieldBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const armorBonus = findAttributebyID(slot.item, 84); //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n        if (!!armorBonus) {\r\n          active.armorBonus += (armorBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const structureBonus = findAttributebyID(slot.item, 83); //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n        if (!!structureBonus) {\r\n          active.structureBonus += (structureBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n      },\r\n      {\r\n        isIterate: { midSlots: true, lowSlots: true },\r\n      }\r\n    );\r\n    return active;\r\n  };\r\n\r\n  static engineering(fit) {\r\n    if (!fit.ship?.typeID)\r\n      return {\r\n        pg: { load: 0, output: 0 },\r\n        cpu: { load: 0, output: 0 },\r\n      };\r\n\r\n    const pgLoad = findAttributebyID(fit.ship, 15); // attributeID: 15, attributeName: \"Power Load\"\r\n    const pgOutput = findAttributebyID(fit.ship, 11); //attributeID: 11, attributeName: \"Powergrid Output\"\r\n    const cpuLoad = findAttributebyID(fit.ship, 49); // attributeID: 49, attributeName: \"CPU Load\"\r\n    const cpuOutput = findAttributebyID(fit.ship, 48); //attributeID: 48, attributeName: \"CPU Output\"\r\n\r\n    return {\r\n      pg: { load: Number(pgLoad.toFixed(1)), output: pgOutput },\r\n      cpu: { load: Number(cpuLoad.toFixed(1)), output: cpuOutput },\r\n    };\r\n  }\r\n\r\n  static resource(fit) {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        capacity: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 5,\r\n        },\r\n        load: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 0,\r\n        },\r\n      };\r\n\r\n    const turretHardpoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    const launcherHardpoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\";\r\n    const calibration = findAttributebyID(fit.ship, 1132); //attributeID: 1132, attributeName: \"Calibration\"\r\n    const droneCapacity = findAttributebyID(fit.ship, 283); //attributeID: 283, attributeName: \"Drone Capacity\"\r\n    const droneBandwidth = findAttributebyID(fit.ship, 1271); //ttributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n\r\n    const mountedTurrets = fit.highSlots.reduce((acc, slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      return isTurretFitted && slot.item.typeState !== \"offline\" ? ++acc : acc;\r\n    }, 0);\r\n    const mountedLaunchers = fit.highSlots.reduce((acc, slot) => {\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      return isLauncherFitted && slot.item.typeState !== \"offline\"\r\n        ? ++acc\r\n        : acc;\r\n    }, 0);\r\n    const mountedCalibration = fit.rigSlots.reduce((acc, slot) => {\r\n      const calibration = findAttributebyID(slot.item, 1153); //attributeID: 1153, attributeName: \"Calibration cost\"\r\n      return !!calibration && slot.item.typeState !== \"offline\"\r\n        ? acc + calibration\r\n        : acc;\r\n    }, 0);\r\n    const mountedDroneBandwidth = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneBandwidth = findAttributebyID(slot.item, 1272); //attributeID: 1272, attributeName: \"Bandwidth Needed\"\r\n      return !!droneBandwidth && slot.item.typeState === \"activation\"\r\n        ? acc + droneBandwidth * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const mountedDronebay = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneVolume = slot.item.volume;\r\n      return !!droneVolume && slot.item.typeState !== \"offline\"\r\n        ? acc + droneVolume * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const droneActive = fit.droneSlots.reduce((acc, slot) => {\r\n      if (slot.item.typeState === \"activation\")\r\n        return acc + (slot.item.typeCount || 0);\r\n      return acc;\r\n    }, 0);\r\n\r\n    return {\r\n      capacity: {\r\n        turret: turretHardpoint,\r\n        launcher: launcherHardpoint,\r\n        calibration: calibration,\r\n        droneBay: droneCapacity,\r\n        droneBandwidth: droneBandwidth,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: mountedTurrets,\r\n        launcher: mountedLaunchers,\r\n        calibration: mountedCalibration,\r\n        droneBay: mountedDronebay,\r\n        droneBandwidth: mountedDroneBandwidth,\r\n        droneActive: droneActive,\r\n      },\r\n    };\r\n  }\r\n\r\n  static miscellaneous(fit) {\r\n    if (!fit?.ship?.typeID)\r\n      return {\r\n        sensor: {\r\n          scanResolution: 0,\r\n          maximumLockedTarget: 0,\r\n          maximumTargetingRange: 0,\r\n          strength: {\r\n            gravimetric: 0,\r\n            magnetometric: 0,\r\n            ladar: 0,\r\n            radar: 0,\r\n          },\r\n        },\r\n        propulsion: {\r\n          inertialModifier: 0,\r\n          maximumVelocity: 0,\r\n          warpSpeedMultiplier: 0,\r\n        },\r\n        misc: {\r\n          cargoBayCapacity: 0,\r\n          signatureRadius: 0,\r\n        },\r\n      };\r\n\r\n    const ship = fit.ship;\r\n\r\n    const scanResolution = findAttributebyID(ship, 564); //attributeID: 564, attributeName: \"Scan Resolution\"\r\n    const signatureRadius = findAttributebyID(ship, 552); //attributeID: 552, attributeName: \"Signature Radius\"\r\n\r\n    const gravimetricSensorStrength = findAttributebyID(ship, 211); //attributeID: 211, attributeName: \"Gravimetric Sensor Strength\"\r\n    const magnetometricSensorStrength = findAttributebyID(ship, 210); //attributeID: 210, attributeName: \"Magnetometric Sensor Strength\"\r\n    const ladarSensorStrength = findAttributebyID(ship, 209); // attributeID: 209, attributeName: \"Ladar Sensor Strength\"\r\n    const radarSensorStrength = findAttributebyID(ship, 208); //attributeID: 208, attributeName: \"RADAR Sensor Strength\"\r\n    const maximumLockedTarget = findAttributebyID(ship, 192); //attributeID: 192, attributeName: \"Maximum Locked Targets\"\r\n    const maximumTargetingRange = findAttributebyID(ship, 76); // attributeID: 76, attributeName: \"Maximum Targeting Range\"\r\n\r\n    const inertialModifier = findAttributebyID(ship, 70); // attributeID: 70, attributeName: \"Inertia Modifier\"\r\n    const maximumVelocity = Stat.#miscellaneous_maximumVelocity(fit);\r\n    const warpSpeedMultiplier = findAttributebyID(ship, 600); //attributeID: 600, attributeName: \"Warp Speed Multiplier\"\r\n\r\n    const cargoBayCapacity = findAttributebyID(ship.capacity);\r\n\r\n    return {\r\n      sensor: {\r\n        scanResolution,\r\n        maximumLockedTarget,\r\n        maximumTargetingRange,\r\n        strength: {\r\n          gravimetric: gravimetricSensorStrength,\r\n          magnetometric: magnetometricSensorStrength,\r\n          ladar: ladarSensorStrength,\r\n          radar: radarSensorStrength,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier,\r\n        maximumVelocity,\r\n        warpSpeedMultiplier,\r\n      },\r\n      misc: {\r\n        signatureRadius,\r\n        cargoBayCapacity,\r\n      },\r\n    };\r\n  }\r\n  static #miscellaneous_maximumVelocity = function (fit) {\r\n    const activePropulsionModules = Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isPropulsionModule = !!slot.item?.typeEffectsStats?.find((efft) =>\r\n          [6730, 6731].includes(efft.effectID)\r\n        ); // effectID: 6731, effectName: \"moduleBonusAfterburner\"\r\n        // effectID: 6730, effectName: \"moduleBonusMicrowarpdrive\"\r\n        const isActive = slot.item.typeState === \"activation\";\r\n\r\n        if (isActive && isPropulsionModule) return slot.item;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { midSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n    const shipBaseMaximumVelocity = findAttributebyID(fit.ship, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    if (activePropulsionModules.length === 0) return shipBaseMaximumVelocity;\r\n\r\n    //prettier-ignore\r\n    const propModuleMaximumVelocityBonusMul = findAttributebyID( activePropulsionModules[0], 20) / 100 // attributeID: 20, attributeName: \"Maximum Velocity Bonus\"\r\n    const propModuleThrust = findAttributebyID(activePropulsionModules[0], 567); // attributeID: 567, attributeName: \"Thrust\",\r\n\r\n    const propModuleMassAdd = propModuleThrust / 3;\r\n    const shipMass = findAttributebyID(fit.ship, 4); // attributeID: 4, attributeName: \"Mass\";\r\n    const mass =\r\n      Fit.mapSlots(fit, (slot) => slot, {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }).reduce((acc, slot) => {\r\n        if (!!slot.item.mass) return acc + slot.item.mass;\r\n        return acc;\r\n      }, 0) +\r\n      propModuleMassAdd +\r\n      shipMass;\r\n\r\n    const shipAppliedMaximumVelocity =\r\n      shipBaseMaximumVelocity *\r\n      (1 + (propModuleMaximumVelocityBonusMul * propModuleThrust) / mass);\r\n\r\n    return shipAppliedMaximumVelocity;\r\n  };\r\n\r\n  static getActivationInfo(item, charge) {\r\n    if (!item) return { duration: 0, e_duration: 0 };\r\n\r\n    const activationCost = findAttributebyID(item, 6) || 0; //attributeID: 6, attributeName: \"Activation Cost\"\r\n    const reloadTime = (findAttributebyID(item, 1795) || undefined) / 1000; //attributeID: 1795, attributeName: \"Reload Time\"\r\n    const activationTime =\r\n      (findAttributebyID(item, 73) || findAttributebyID(item, 51)) / 1000; // attributeID: 73, attributeName: \"Activation time / duration\" attributeID: 51, attributeName: \"Rate of fire\"\r\n\r\n    if (!reloadTime || !Stat.#getActivationInfo_isTypeNeedCharge(item))\r\n      return {\r\n        duration: activationTime,\r\n        e_duration: activationTime,\r\n        activationLimit: Infinity,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n    if (!Fit.validateChargeSlot({ item, charge }))\r\n      return {\r\n        duration: Infinity,\r\n        e_duration: Infinity,\r\n        activationLimit: 0,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = findAttributebyID(item, 56); //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    const reloadTimePerAct =\r\n      !!reloadTime && !!itemCapacity && !!chargeVolume\r\n        ? reloadTime / activationLimit\r\n        : 0;\r\n    const EactivationTime = activationTime + reloadTimePerAct;\r\n\r\n    return {\r\n      duration: activationTime,\r\n      e_duration: EactivationTime,\r\n      activationLimit,\r\n      reloadTime,\r\n      activationCost,\r\n    };\r\n  }\r\n  static #getActivationInfo_isTypeNeedCharge = (type) => {\r\n    if (!type || !type.typeEffectsStats) return false;\r\n\r\n    //TODO: Add command burst effectIDs\r\n    //effectID: 42, effectName: \"turretFitted\"\r\n    //effectID: 40, effectName: \"launcherFitted\"\r\n    //effectID: 48, effectName: \"powerBooster\"\r\n    const thisEffectsNeedCharge = [42, 40, 48];\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (thisEffectsNeedCharge.includes(efft.effectID)) return true;\r\n      return acc;\r\n    }, false);\r\n  };\r\n\r\n  static getAmbientChargeRateMath = (Cmax, Cnow, Tchg) => {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  };\r\n}\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\nimport Stat from \"./Stat\";\r\n\r\nexport default class Summary extends Stat {\r\n  static addSummaries = (slots, situation) => {\r\n    const _slots = Summary.addSummaries_duplicateSlots(slots);\r\n    const fit = Fit.apply(_slots);\r\n\r\n    if (!!_slots) _slots[\"summary\"] = Summary.getSummary_ship(fit, situation);\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_modules(slot);\r\n        summary[\"root\"] = _slots.summary;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_drones(slot, situation);\r\n        summary[\"root\"] = _slots.summary;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n    return _slots;\r\n  };\r\n  static addSummaries_duplicateSlots = (slots) => {\r\n    const _droneSlots = Summary.addSummaries_duplicateDroneSlots(slots);\r\n    const _slots = JSON.parse(JSON.stringify(slots));\r\n    _slots.droneSlots = _droneSlots;\r\n\r\n    return _slots;\r\n  };\r\n  // duplicate droneslots to number of typecount\r\n  static addSummaries_duplicateDroneSlots = (slots) => {\r\n    let slotCount = 0;\r\n    return slots.droneSlots.reduce((acc, slot) => {\r\n      const slotString = JSON.stringify(slot);\r\n      const _slots = new Array(slot.item.typeCount || 1).fill(false).map(() => {\r\n        const _slot = JSON.parse(slotString);\r\n        if (!!_slot.item) {\r\n          _slot.typeCount = undefined;\r\n          _slot.item.domainID = `droneSlots.${slotCount}.item`;\r\n        }\r\n        slotCount++;\r\n\r\n        return _slot;\r\n      });\r\n\r\n      return acc.concat(_slots);\r\n    }, []);\r\n  };\r\n\r\n  static #getSummaries_modules = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    const structureHP = findAttributebyID(item, 9); //attributeID: 9, attributeName: \"Structure Hitpoints\"\r\n    const heatDamage = findAttributebyID(item, 1211); // attributeID: 1211, attributeName: \"Heat Damage\"\r\n\r\n    const moduleSummary = {\r\n      load: {\r\n        structure: { HP: structureHP },\r\n      },\r\n      capacity: {\r\n        structure: { HP: structureHP },\r\n        misc: { heatDamage: heatDamage },\r\n      },\r\n    };\r\n\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\"); //eg)highSlots.1\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        const activationDataSet = Summary.createActivationDataSet(slot);\r\n        let summary = {};\r\n        let operation = false;\r\n\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_damage(item, charge);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          case 4: // effectID: 4, effectName: \"shieldBoosting\"\r\n          case 26: // effectID: 26, effectName: \"structureRepair\"\r\n          case 4936: // effectID: 4936, effectName: \"fueledShieldBoosting\"\r\n          case 27: // effectID: 27, effectName: \"armorRepair\"\r\n          case 5275: // effectID: 5275, effectName: \"fueledArmorRepair\"\r\n            summary = Summary.getSummary_defense(item, charge);\r\n            operation = \"defense\";\r\n            break;\r\n          case 48: //effectID: 48, effectName: \"powerBooster\"\r\n          case 6187: //effectID: 6187, effectName: \"energyNeutralizerFalloff\"\r\n          case 6197: //effectID: 6197, effectName: \"energyNosferatuFalloff\"\r\n          case 6148: // effectID: 6184, effectName: \"shipModuleRemoteCapacitorTransmitter\"\r\n            summary = Summary.getSummary_capacitor(item, charge);\r\n            operation = \"capacitor\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else return { ...moduleSummary, ...effectSummary[0], path };\r\n  };\r\n  static #getSummaries_drones = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const isSentry = item.marketGroupID === 911; // marketGroupID: 911 \"marketGroupName\": \"Sentry Drones\"\r\n\r\n    // These functions from Stat class is targeted for ship. modified to fit in drone in this case\r\n    const defense = this.defense_resistance({ ship: item });\r\n    const capacitor = this.capacitor_getChargeInfo({ ship: item });\r\n\r\n    const misc = this.miscellaneous({ ship: item });\r\n    const orbitVelocity = findAttributebyID(item, 508); // attributeID: 508, attributeName: \"Orbit Velocity\"\r\n    const orbitRange = findAttributebyID(item, 416); //attributeID: 416, attributeName: \"entityFlyRange\"\r\n    const maximumVelocity = findAttributebyID(item, 37); // attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    misc.propulsion = {\r\n      ...misc.propulsion,\r\n      orbitVelocity,\r\n      orbitRange,\r\n      maximumVelocity,\r\n    };\r\n    const droneSumamry = {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n    };\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\");\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        const activationDataSet = Summary.createActivationDataSet(slot);\r\n        let summary = {};\r\n        let operation = false;\r\n\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_drone(item);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    const situation_decription =\r\n      \"Currently situation is not calculated BUT! always hitted by smart bomb\";\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else\r\n      return {\r\n        ...droneSumamry,\r\n        ...effectSummary[0],\r\n        situation_decription,\r\n        isSentry,\r\n        isDrone: true,\r\n        path,\r\n      };\r\n  };\r\n  static createActivationDataSet = (slot) => {\r\n    const activationInfo = this.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return {\r\n      activationInfo,\r\n      activationState: {\r\n        isActive: false,\r\n        lastActivation: 0,\r\n        nextActivation: 0,\r\n        nextActivationTick: 0,\r\n        activationLeft: activationInfo.activationLimit,\r\n      },\r\n    };\r\n  };\r\n  static getSummary_ship = (fit, situation) => {\r\n    const defense = this.defense_resistance(fit);\r\n    const misc = this.miscellaneous(fit);\r\n    const capacitor = this.capacitor_getChargeInfo(fit);\r\n\r\n    return {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n      situation: situation,\r\n    };\r\n  };\r\n\r\n  static getSummary_damage(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, charge);\r\n    const range = this.damage_range(item, charge);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_drone(item) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, item);\r\n    const range = this.damage_range(item, item);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_defense(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const bonusPerAct = this.defense_getBonusPerAct(item, charge);\r\n\r\n    return { bonusPerAct: { self: bonusPerAct } };\r\n  }\r\n  static getSummary_capacitor(item, charge) {\r\n    if (!item) return false;\r\n    const booster_bonusPerAct = findAttributebyID(charge, 67) || 0; //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n    const transfer_bonusPerAct = findAttributebyID(item, 90) || 0; // attributeID: 90, attributeName: \"Energy transfer amount\"\r\n    const neut_bonusPerAct = findAttributebyID(item, 97) || 0; // attributeID: 97, attributeName: \"Neutralization Amount\"\r\n\r\n    const isNosferatuBloodRaiderOverriden = findAttributebyID(item, 1945) === 1; //attributeID: 1945, attributeName: \"nosOverride\"\r\n    const isCapacitorTransmitter = !!findAttributebyID(item, 3423); //attributeID: 182, attributeName: \"Primary Skill required\" (3423: capacitor emission system)\r\n    const isNosferatu = !isCapacitorTransmitter && !!transfer_bonusPerAct;\r\n\r\n    const bonusPerAct_self = isCapacitorTransmitter\r\n      ? 0\r\n      : booster_bonusPerAct + transfer_bonusPerAct;\r\n    const bonusPerAct_target = isCapacitorTransmitter\r\n      ? transfer_bonusPerAct\r\n      : -transfer_bonusPerAct - neut_bonusPerAct;\r\n\r\n    const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n    const falloffRange = findAttributebyID(item, 2044); //attributeID: 2044, attributeName: \"Effectiveness Falloff\"\r\n\r\n    return {\r\n      bonusPerAct: { self: bonusPerAct_self, target: bonusPerAct_target },\r\n      range: { optimalRange, falloffRange },\r\n      isNosferatuBloodRaiderOverriden,\r\n      isCapacitorTransmitter,\r\n      isNosferatu,\r\n    };\r\n  }\r\n}\r\n\r\nclass SimFit extends Fit {\r\n  static changeStateOfModule(slots, path, state) {\r\n    if (![\"overload\", \"activation\", \"passive\", \"offline\"].includes(state))\r\n      return false;\r\n\r\n    const targetSlot = this.toPath(slots, path);\r\n    if (!targetSlot || !targetSlot.item) return false;\r\n\r\n    targetSlot.item.typeState = state;\r\n    const fit = this.apply(slots);\r\n    return fit;\r\n  }\r\n  static toPath(slots, path) {\r\n    return path.split(\".\").reduce((p, c) => (p && p[c]) || undefined, slots);\r\n  }\r\n}\r\n","import Fit from \"../../../../fitter/src/Fit\";\r\nimport EveMath from \"./EveMath\";\r\nimport Summary from \"./Summary\";\r\n\r\nexport default class Simulator {\r\n  static test(slots, fit1, situation) {\r\n    const summarizedSlots1 = Summary.addSummaries(slots, situation.onboard);\r\n    const summarizedSlots2 = Summary.addSummaries(fit1, situation.hostile);\r\n    console.log(summarizedSlots1, summarizedSlots2);\r\n\r\n    Fit.mapSlots(\r\n      summarizedSlots1,\r\n      (slot) => {\r\n        if (!slot?.summary?.activationState) return false;\r\n        slot.summary.activationState.isActive = true;\r\n        slot.summary.activationState.nextActivationTick = 0;\r\n        slot.summary.activationState.nextActivation = 0;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    HAL.manageSchedules(\r\n      HAL.getSchedules(summarizedSlots1, summarizedSlots2, 0)\r\n    );\r\n  }\r\n\r\n  static simulate_oneTick = (owner, target, tick) => {\r\n    Simulator.simulate_capacitor(owner);\r\n    Simulator.simulate_shield(owner);\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.summary) return false;\r\n        switch (slot.summary.operation) {\r\n          case \"damage\":\r\n            Simulator.activateDamage(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"defense\":\r\n            Simulator.activateDefense(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"capacitor\":\r\n            Simulator.activateCapacitor(slot.summary, owner, target, tick);\r\n            break;\r\n        }\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true /*  */,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static simulate_capacitor = (target) => {\r\n    const capacitorState = target.summary.load.capacitor;\r\n    const capacitorInfo = target.summary.capacity.capacitor;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      capacitorInfo.HP,\r\n      capacitorState.HP,\r\n      capacitorInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    capacitorState.HP += ambientChargeRate;\r\n    if (capacitorState.HP === 0) capacitorState.HP = 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  static simulate_shield = (target) => {\r\n    const shieldState = target.summary.load.shield;\r\n    const shieldInfo = target.summary.capacity.shield;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      shieldInfo.HP,\r\n      shieldState.HP,\r\n      shieldInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    shieldState.HP += ambientChargeRate;\r\n    if (shieldState.HP === 0) shieldState.HP += 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  //Currently target boost (remote armor repair is nor possible)\r\n  static activateDefense = (summary) => {\r\n    const owner = summary.root;\r\n    //prettier-ignore\r\n    /*  const numOfActivation = Simulator.simulateActivation(owner,summary,tick).length;\r\n    if (numOfActivation == 0) return false;\r\n\r\n    for (let i = 0; i < numOfActivation; i++) { */\r\n    // MUTATION!\r\n    owner.summary.load.shield.HP += summary.bonusPerAct.self.shield;\r\n    if (owner.summary.capacity.shield.HP < owner.summary.load.shield.HP)\r\n      owner.summary.load.shield.HP = owner.summary.capacity.shield.HP;\r\n\r\n    owner.summary.load.armor.HP += summary.bonusPerAct.self.armor;\r\n    if (owner.summary.capacity.armor.HP < owner.summary.load.armor.HP)\r\n      owner.summary.load.armor.HP = owner.summary.capacity.armor.HP;\r\n\r\n    owner.summary.load.structure.HP += summary.bonusPerAct.self.structure;\r\n    if (owner.summary.capacity.structure.HP < owner.summary.load.structure.HP)\r\n      owner.summary.load.structure.HP = owner.summary.capacity.structure.HP;\r\n    /*  } */\r\n  };\r\n\r\n  static activateDamage = (summary) => {\r\n    const owner = summary.isDrone ? summary : summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateDamage_getSituationalModifiedSummary(summary, owner, target);\r\n    //prettier-ignore\r\n    const alpha = Simulator.activateDamage_getAlpha(situationalModifiedSummary, target);\r\n\r\n    // MUTATION!\r\n    target.summary.load.shield.HP -= alpha.shield;\r\n    if (target.summary.load.shield.HP < 0) target.summary.load.shield.HP = 0;\r\n    target.summary.load.armor.HP -= alpha.armor;\r\n    if (target.summary.load.armor.HP < 0) target.summary.load.armor.HP = 0;\r\n    target.summary.load.structure.HP -= alpha.structure;\r\n    if (target.summary.load.structure.HP < 0)\r\n      target.summary.load.structure.HP = 0;\r\n  };\r\n  static activateDamage_getAlpha = (summary, target) => {\r\n    if (!summary.damagePerAct.alpha)\r\n      return { shield: 0, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const shieldDamage = Simulator.#activateDamage_getDamageResult(summary.damagePerAct, target, \"shield\");\r\n    if (shieldDamage.remaining.alpha <= 0.01)\r\n      return { shield: shieldDamage.appplied.alpha, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const armorDamage = Simulator.#activateDamage_getDamageResult(shieldDamage.remaining, target, \"armor\");\r\n    if (armorDamage.remaining.alpha <= 0.01)\r\n      return {\r\n        shield: shieldDamage.appplied.alpha,\r\n        armor: armorDamage.appplied.alpha,\r\n        structure: 0,\r\n      };\r\n\r\n    //prettier-ignore\r\n    const structureDamage = Simulator.#activateDamage_getDamageResult(armorDamage.remaining, target, \"structure\");\r\n    return {\r\n      shield: shieldDamage.appplied.alpha,\r\n      armor: armorDamage.appplied.alpha,\r\n      structure: structureDamage.appplied.alpha,\r\n    };\r\n  };\r\n  static #activateDamage_getDamageResult = (damagePerAct, target, type) => {\r\n    //prettier-ignore\r\n    const shot = Simulator.#activateDamage_getShot(damagePerAct, target, type);\r\n    const damageCapMultiplier =\r\n      target.summary.load[type].HP / shot.alpha_damaging < 1\r\n        ? target.summary.load[type].HP / shot.alpha_damaging\r\n        : 1;\r\n\r\n    const EM_applied = shot.EM_damaging * damageCapMultiplier;\r\n    const TH_applied = shot.TH_damaging * damageCapMultiplier;\r\n    const KI_applied = shot.KI_damaging * damageCapMultiplier;\r\n    const EX_applied = shot.EX_damaging * damageCapMultiplier;\r\n    const alpha_applied = EM_applied + TH_applied + KI_applied + EX_applied;\r\n\r\n    const EM_remaining = damagePerAct.EM - EM_applied - shot.EM_blocked;\r\n    const TH_remaining = damagePerAct.TH - TH_applied - shot.TH_blocked;\r\n    const KI_remaining = damagePerAct.KI - KI_applied - shot.KI_blocked;\r\n    const EX_remaining = damagePerAct.EX - EX_applied - shot.EX_blocked;\r\n    const alpha_remaining =\r\n      EM_remaining + TH_remaining + KI_remaining + EX_remaining;\r\n\r\n    return {\r\n      appplied: {\r\n        alpha: alpha_applied,\r\n        EM: EM_applied,\r\n        TH: TH_applied,\r\n        KI: KI_applied,\r\n        EX: EX_applied,\r\n      },\r\n      remaining: {\r\n        alpha: alpha_remaining,\r\n        EM: EM_remaining,\r\n        TH: TH_remaining,\r\n        KI: KI_remaining,\r\n        EX: EX_remaining,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getShot = (damagePerAct, target, type) => {\r\n    const EM_blocked =\r\n      (damagePerAct.EM * target.summary.capacity[type].EM) / 100;\r\n    const TH_blocked =\r\n      (damagePerAct.TH * target.summary.capacity[type].TH) / 100;\r\n    const KI_blocked =\r\n      (damagePerAct.KI * target.summary.capacity[type].KI) / 100;\r\n    const EX_blocked =\r\n      (damagePerAct.EX * target.summary.capacity[type].EX) / 100;\r\n    const alpha_blocked = EM_blocked + TH_blocked + KI_blocked + EX_blocked;\r\n\r\n    const EM_damaging = damagePerAct.EM - EM_blocked;\r\n    const TH_damaging = damagePerAct.TH - TH_blocked;\r\n    const KI_damaging = damagePerAct.KI - KI_blocked;\r\n    const EX_damaging = damagePerAct.EX - EX_blocked;\r\n    const alpha_damaging =\r\n      EM_damaging + TH_damaging + KI_damaging + EX_damaging;\r\n\r\n    return {\r\n      alpha_damaging,\r\n      EM_damaging,\r\n      TH_damaging,\r\n      KI_damaging,\r\n      EX_damaging,\r\n      alpha_blocked,\r\n      EM_blocked,\r\n      TH_blocked,\r\n      KI_blocked,\r\n      EX_blocked,\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const situationalMul = Simulator.#activateDamage_getSituationalMul(\r\n      summary,\r\n      owner,\r\n      target\r\n    );\r\n\r\n    return {\r\n      ...summary,\r\n      damagePerAct: {\r\n        alpha: summary.damagePerAct.alpha * situationalMul,\r\n        EM: summary.damagePerAct.EM * situationalMul,\r\n        TH: summary.damagePerAct.TH * situationalMul,\r\n        KI: summary.damagePerAct.KI * situationalMul,\r\n        EX: summary.damagePerAct.EX * situationalMul,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalMul = (summary, owner, target) => {\r\n    if (summary.isDrone) {\r\n      //prettier-ignore\r\n      const droneAccuracy = EveMath.getDroneAccracy(summary, owner, target);\r\n\r\n      return Math.random() <= droneAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.tracking) {\r\n      //prettier-ignore\r\n      const turretAccuracy = EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n      return Math.random() <= turretAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.explosionRadius) {\r\n      //prettier-ignore\r\n      const launcherAccracy = EveMath.getLauncherAccuracy(summary, owner, target);\r\n\r\n      return Math.random() <= launcherAccracy\r\n        ? EveMath.getLauncherDamageModifier(summary, target)\r\n        : 0;\r\n    } else return 0;\r\n  };\r\n\r\n  static activateCapacitor = (summary) => {\r\n    const owner = summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateCapacitor_getSituationalModifiedSummary(summary, owner, target);\r\n\r\n    // MUTATION!\r\n    target.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.target;\r\n    if (target.summary.load.capacitor.HP < 0)\r\n      target.summary.load.capacitor.HP = 0;\r\n    if (target.summary.capacity.capacitor.HP < target.summary.load.capacitor.HP)\r\n      target.summary.load.capacitor.HP = target.summary.capacity.capacitor.HP;\r\n\r\n    owner.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.owner;\r\n    if (owner.summary.load.capacitor.HP < 0)\r\n      owner.summary.load.capacitor.HP = 0;\r\n    if (owner.summary.capacity.capacitor.HP < owner.summary.load.capacitor.HP)\r\n      owner.summary.load.capacitor.HP = owner.summary.capacity.capacitor.HP;\r\n  };\r\n  static #activateCapacitor_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const ownerCapacitorHP = owner.summary.load.capacitor.HP;\r\n    const targetCapacitorHP = target.summary.load.capacitor.HP;\r\n\r\n    // prettier-ignore\r\n    const situationalMul = Simulator.#activateCapacitor_getSituationalMul(summary, owner, target);\r\n    const bonusPerActOwner = summary.bonusPerAct.self * situationalMul;\r\n    const bonusPerActTarget = summary.bonusPerAct.target * situationalMul;\r\n\r\n    if (summary.isNosferatu) {\r\n      const maxBonusPerAct = Math.min(bonusPerActOwner, targetCapacitorHP);\r\n      let symmetricBonusPerAct = maxBonusPerAct;\r\n\r\n      if (\r\n        !summary.isNosferatuBloodRaiderOverriden &&\r\n        targetCapacitorHP + bonusPerActTarget < ownerCapacitorHP\r\n      )\r\n        symmetricBonusPerAct = Math.max(\r\n          Math.floor((targetCapacitorHP - ownerCapacitorHP) / 2),\r\n          0\r\n        );\r\n      symmetricBonusPerAct = Math.min(maxBonusPerAct, symmetricBonusPerAct);\r\n      return {\r\n        ...summary,\r\n        bonusPerAct: {\r\n          self: symmetricBonusPerAct,\r\n          target: -symmetricBonusPerAct,\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      ...summary,\r\n      bonusPerAct: {\r\n        owner: bonusPerActOwner,\r\n        target: bonusPerActTarget,\r\n      },\r\n    };\r\n  };\r\n  static #activateCapacitor_getSituationalMul = (summary, owner, target) => {\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    const isCapacitorBooster = summary.slot.item?.typeEffectsStats?.reduce(\r\n      (acc, efft) => {\r\n        if (efft.effectID === 48)\r\n          //effectID: 48, effectName: \"powerBooster\"\r\n          return true;\r\n        return acc;\r\n      },\r\n      false\r\n    );\r\n\r\n    return isCapacitorBooster ? 1 : rangeModifier;\r\n  };\r\n\r\n  static simulateActivation = (owner, summary, tick) => {\r\n    const currentTime = summary.activationState.nextActivation;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n    if (state.isActive && state.nextActivationTick < tick)\r\n      console.warn(\"ERR: Tick is not in sync\"); //TODO: for testing, check tick is okay\r\n    if (!state.isActive || state.nextActivationTick !== tick) return [];\r\n    //prettier-ignore\r\n    const activationCost = Simulator.#simulateActivation_capcitor(owner, summary);\r\n    if (activationCost === false) {\r\n      state.isActive = false; // TODO: for testing, auto off if capacitor is out. make ai control capacitor\r\n      return [];\r\n    }\r\n\r\n    // MUTATION!\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    // Check if next activation is in same tick\r\n    let subSecActivation = [];\r\n    if (state.nextActivationTick === tick)\r\n      subSecActivation = Simulator.simulateActivation(owner, summary, tick);\r\n\r\n    return [{ time: currentTime, summary }, ...subSecActivation];\r\n  };\r\n  static #simulateActivation_capcitor = (summary) => {\r\n    const activationInfo = summary.activationInfo;\r\n    const capacitorState =\r\n      summary.load.capacitor || summary.root.load.capacitor;\r\n    if (capacitorState.HP < activationInfo.activationCost) return false;\r\n\r\n    // MUTATION!\r\n    capacitorState.HP -= activationInfo.activationCost;\r\n\r\n    return activationInfo.activationCost;\r\n  };\r\n}\r\nclass HAL {\r\n  //TODO: DEBUG HAL!!!!!\r\n  static manageSchedules(schedules) {\r\n    schedules.forEach((schedule) => {\r\n      const isCapacitorValidated = HAL.manageSchedules_validateCapacitor(\r\n        schedule.summary\r\n      );\r\n      const isStructureValidated = HAL.manageSchedules_validateStructure(\r\n        schedule.summary\r\n      );\r\n      if (!isCapacitorValidated || !isStructureValidated) return false;\r\n\r\n      HAL.#manageSchedules_executeSchedule(schedule);\r\n    });\r\n  }\r\n  static #manageSchedules_executeSchedule = (schedule) => {\r\n    switch (schedule.summary.operation) {\r\n      case \"damage\":\r\n        Simulator.activateDamage(schedule.summary);\r\n        break;\r\n      case \"defense\":\r\n        Simulator.activateDefense(schedule.summary);\r\n        break;\r\n      case \"capacitor\":\r\n        Simulator.activateCapacitor(schedule.summary);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  static manageSchedules_validateCapacitor(summary) {\r\n    const activationInfo = summary.activationInfo;\r\n    const capacitorState =\r\n      summary?.load?.capacitor || summary.root.load.capacitor;\r\n\r\n    if (capacitorState.HP < activationInfo.activationCost) return false;\r\n    else return true;\r\n  }\r\n  static manageSchedules_validateStructure(summary) {\r\n    const structureHP = summary?.load?.structure?.HP;\r\n    const rootStructureHP = summary.root.load.structure.HP;\r\n\r\n    if (structureHP <= 0 || rootStructureHP <= 0) return false;\r\n    else return true;\r\n  }\r\n\r\n  static getSchedules(summarizedSlots, target, tick) {\r\n    HAL.#getSchedules_setTarget(summarizedSlots, target);\r\n    return Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        return HAL.#getSchedules_getFragment(summarizedSlot.summary, tick);\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    )\r\n      .reduce((acc, fragment) => {\r\n        if (!fragment) return acc;\r\n        return acc.concat(fragment);\r\n      }, [])\r\n      .sort((a, b) => a.time - b.time);\r\n  }\r\n  static #getSchedules_setTarget = (summarizedSlots, target) => {\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        let _target = false;\r\n        switch (summarizedSlot?.summary?.operation) {\r\n          case \"damage\":\r\n          case \"defense\":\r\n          case \"capacitor\":\r\n            _target = target;\r\n            break;\r\n          default:\r\n            _target = false;\r\n            break;\r\n        }\r\n        summarizedSlot.summary[\"target\"] = _target;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static #getSchedules_getFragment = (summary, tick) => {\r\n    const _summary = JSON.parse(JSON.stringify(summary));\r\n    const fragment = HAL.#getSchedules_getFragmentRecursion(_summary, tick);\r\n    return fragment.map((schedule) => {\r\n      schedule[\"summary\"] = summary;\r\n      return schedule;\r\n    });\r\n  };\r\n  static #getSchedules_getFragmentRecursion = (summary, tick) => {\r\n    if (\r\n      !summary?.activationState?.isActive ||\r\n      summary?.activationState?.nextActivationTick !== tick\r\n    )\r\n      return [];\r\n    const currentTime = summary.activationState.nextActivation;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n    //prettier-ignore TODO: for testing, check tick is okay\r\n    if (state.isActive && state.nextActivationTick < tick)\r\n      console.warn(\"ERR: Tick is not in sync\");\r\n\r\n    // MUTATION!\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    // Check if next activation is in same tick\r\n    let subSecSchedule = [];\r\n    if (state.nextActivationTick === tick)\r\n      subSecSchedule = HAL.#getSchedules_getFragmentRecursion(summary, tick);\r\n\r\n    return [{ time: currentTime }, ...subSecSchedule];\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport FittingDrawer from \"./FittingDrawer/FittingDrawer.jsx\";\r\nimport { useState } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Fit from \"../../fitter/src/Fit\";\r\nimport StatDrawer from \"./Stats/StatDrawer.jsx\";\r\nimport EFT from \"./services/EFT.js\";\r\nimport ListDrawers from \"./ListDrawer/ListDrawers.jsx\";\r\nimport Simulator from \"../FitCard/Stats/services/Simulator.js\";\r\n\r\nconst initialSlots = {\r\n  skills: false,\r\n  ship: false,\r\n  miscSlots: [],\r\n  lowSlots: [],\r\n  midSlots: [],\r\n  highSlots: [],\r\n  rigSlots: [],\r\n  droneSlots: [],\r\n};\r\nfunction slotsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SKILL\":\r\n      return {\r\n        ...state,\r\n        skills: action.payload,\r\n      };\r\n    case \"SHIP\":\r\n      return {\r\n        ...state,\r\n        ship:\r\n          //prettier-ignore\r\n          action.payload[0]?.item !== undefined ? action.payload[0].item : false,\r\n      };\r\n    case \"MISC_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...state,\r\n        [translateVariant(action.type)]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst initialSlotsOpen = {\r\n  SHIP: { open: false },\r\n  MISC_SLOT: { open: false },\r\n  HIGH_SLOT: { open: false },\r\n  MID_SLOT: { open: false },\r\n  LOW_SLOT: { open: false },\r\n  RIG_SLOT: { open: false, filter: false },\r\n  DRONE_SLOT: { open: false, filter: false },\r\n\r\n  AMMO: { open: false, slotVariant: false, filter: false },\r\n  STAT: { open: false, slotVariant: false, slotNumber: false, filter: false },\r\n};\r\n\r\nfunction slotsOpenReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return { ...initialSlotsOpen, [action.type]: { open: true } };\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        DRONE_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RIG_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        RIG_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"AMMO\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        AMMO: {\r\n          open: true,\r\n          slotVariant: action.payload.slotVariant,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"STAT\":\r\n      return {\r\n        ...state,\r\n        STAT: {\r\n          open: action.payload.open,\r\n          slotVariant: action.payload.slotVariant,\r\n          slotNumber: action.payload.slotNumber,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RESET\":\r\n    default:\r\n      return initialSlotsOpen;\r\n  }\r\n}\r\n\r\nconst initialListItems = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n  AMMO: false,\r\n};\r\nfunction listItemsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n    case \"AMMO\":\r\n      return { ...state, [action.type]: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function Drawers(props) {\r\n  //prettier-ignore\r\n  const [activeSlot, setActiveSlot] = useState({ type: false, index: false});\r\n\r\n  const [slots, dispatchSlots] = useReducer(slotsReducer, initialSlots);\r\n  const [slotsOpen, dispatchSlotsOpen] = useReducer(\r\n    slotsOpenReducer,\r\n    initialSlotsOpen\r\n  );\r\n  const [listItems, dispatchListItems] = useReducer(\r\n    listItemsReducer,\r\n    initialListItems\r\n  );\r\n\r\n  const [fit, setFit] = useState(false);\r\n  const [exportFitText, setExportFitText] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache\r\n      .wait(\"/skillsStaticBoard\")\r\n      .then((data) => dispatchSlots({ type: \"SKILL\", payload: data }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.open === true) dispatchSlotsOpen({ type: \"SHIP\" });\r\n    else dispatchSlotsOpen({ type: \"RESET\" });\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    /* console.log(\r\n      \"FitCalc\"\r\n    );\r\n    console.time(\"Fit Stat Calculation\"); */\r\n    const appliedFit = Fit.apply(slots);\r\n    /*  console.timeEnd(\"Fit Stat Calculation\");\r\n    console.log(appliedFit);\r\n    console.log(\r\n      ``\r\n    ); */\r\n    setFit(appliedFit);\r\n    props.setFit(appliedFit);\r\n    props.setFitID(EFT.buildCompareTextFromFit(slots));\r\n    props.setSlots(slots);\r\n\r\n    const appliedFitExportText = EFT.buildTextFromFit(appliedFit);\r\n    const appliedSlotsModified = { ...slots, skills: undefined };\r\n    setExportFitText(appliedFitExportText);\r\n    localStorage.setItem(\r\n      `${props.tag}SLOTS`,\r\n      JSON.stringify(appliedSlotsModified)\r\n    );\r\n    localStorage.setItem(`${props.tag}EFT`, appliedFitExportText);\r\n  }, [EFT.buildCompareTextFromFit(slots)]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListDrawers\r\n        tag={props.tag}\r\n        expand={props.expand}\r\n        slotsOpen={slotsOpen}\r\n        fit={fit}\r\n        slots={slots}\r\n        activeSlot={activeSlot}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        fitID={props.fitID}\r\n        cache={props.cache}\r\n      />\r\n\r\n      <FittingDrawer\r\n        tag={props.tag}\r\n        fit={fit}\r\n        slots={slots}\r\n        open={props.open}\r\n        setOpen={props.setOpen}\r\n        expand={props.expand}\r\n        setExpand={props.setExpand}\r\n        backgroundColor={props.backgroundColor}\r\n        exportFitText={exportFitText}\r\n        slotsOpen={slotsOpen}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        listItems={listItems}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlots={dispatchSlots}\r\n        setActiveSlot={setActiveSlot}\r\n        cache={props.cache}\r\n      />\r\n      <StatDrawer\r\n        open={slotsOpen.STAT.open}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        slot={giveSlotToStatDrawer(fit, slotsOpen.STAT)}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction giveSlotToStatDrawer(fit, STAT) {\r\n  if (!STAT.slotVariant) return undefined;\r\n  switch (STAT.slotVariant) {\r\n    case \"SHIP\":\r\n      return fit.ship;\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n      return fit[translateVariant(STAT.slotVariant)][STAT.slotNumber];\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\nexport function translateVariant(variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return \"ship\";\r\n    case \"MISC_SLOT\":\r\n      return \"miscSlots\";\r\n    case \"HIGH_SLOT\":\r\n      return \"highSlots\";\r\n    case \"MID_SLOT\":\r\n      return \"midSlots\";\r\n    case \"LOW_SLOT\":\r\n      return \"lowSlots\";\r\n    case \"RIG_SLOT\":\r\n      return \"rigSlots\";\r\n    case \"DRONE_SLOT\":\r\n      return \"droneSlots\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const ArmorIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ShieldIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const StructureIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"6.771\"\r\n      y1=\"8.587\"\r\n      x2=\"17.862\"\r\n      y2=\"14.945\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"17.862\"\r\n      y1=\"8.587\"\r\n      x2=\"6.606\"\r\n      y2=\"15.11\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"12.266\"\r\n      y1=\"5.257\"\r\n      x2=\"12.266\"\r\n      y2=\"18.33\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const EhpIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 17.856 11.92 L 17.856 11.92 Q 18.168 11.92 18.348 12.208 L 18.348 12.208 L 18.348 12.208 Q 18.528 12.496 18.528 13 L 18.528 13 L 18.528 13 Q 18.528 13.96 18.072 14.488 L 18.072 14.488 L 18.072 14.488 Q 17.184 15.568 15.564 16.48 L 15.564 16.48 L 15.564 16.48 Q 13.944 17.392 12.096 17.392 L 12.096 17.392 L 12.096 17.392 Q 9.576 17.392 8.184 16.024 L 8.184 16.024 L 8.184 16.024 Q 6.792 14.656 6.792 12.28 L 6.792 12.28 L 6.792 12.28 Q 6.792 10.624 7.488 9.196 L 7.488 9.196 L 7.488 9.196 Q 8.184 7.768 9.42 6.928 L 9.42 6.928 L 9.42 6.928 Q 10.656 6.088 12.216 6.088 L 12.216 6.088 L 12.216 6.088 Q 13.608 6.088 14.448 6.916 L 14.448 6.916 L 14.448 6.916 Q 15.288 7.744 15.288 9.16 L 15.288 9.16 L 15.288 9.16 Q 15.288 10.816 14.1 12.004 L 14.1 12.004 L 14.1 12.004 Q 12.912 13.192 10.08 13.888 L 10.08 13.888 L 10.08 13.888 Q 10.68 14.992 12.36 14.992 L 12.36 14.992 L 12.36 14.992 Q 13.44 14.992 14.82 14.236 L 14.82 14.236 L 14.82 14.236 Q 16.2 13.48 17.208 12.256 L 17.208 12.256 L 17.208 12.256 Q 17.496 11.92 17.856 11.92 L 17.856 11.92 L 17.856 11.92 Z  M 11.808 8.44 L 11.808 8.44 Q 10.92 8.44 10.308 9.472 L 10.308 9.472 L 10.308 9.472 Q 9.696 10.504 9.696 11.968 L 9.696 11.968 L 9.696 12.016 L 9.696 12.016 Q 11.112 11.68 11.928 11.008 L 11.928 11.008 L 11.928 11.008 Q 12.744 10.336 12.744 9.448 L 12.744 9.448 L 12.744 9.448 Q 12.744 8.992 12.492 8.716 L 12.492 8.716 L 12.492 8.716 Q 12.24 8.44 11.808 8.44 L 11.808 8.44 L 11.808 8.44 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport {\r\n  LinearProgress,\r\n  Typography,\r\n  Grid,\r\n  withStyles,\r\n  useTheme,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 20,\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n  },\r\n  rootGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n  },\r\n  progress: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  childGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  label: {\r\n    fontSize: 12,\r\n    color: \"#ffffff\",\r\n  },\r\n  description: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function LinearProgressLabel(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const LinearProgressFixed = useCallback(\r\n    withStyles(() => ({\r\n      root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: !!props.backgroundColor\r\n          ? props.backgroundColor\r\n          : theme.palette.background.paper,\r\n      },\r\n      bar: {\r\n        backgroundColor: !!props.color\r\n          ? props.color\r\n          : theme.palette.background.paper,\r\n      },\r\n    }))(LinearProgress),\r\n    [props.backgroundColor, props.color, theme]\r\n  );\r\n\r\n  return (\r\n    <Grid className={classes.root}>\r\n      <Grid className={classes.rootGrid}>\r\n        <LinearProgressFixed\r\n          className={classes.progress}\r\n          variant=\"determinate\"\r\n          value={props.value}\r\n        />\r\n      </Grid>\r\n      <Grid className={classes.childGrid}>\r\n        {props.Icon}\r\n        <Typography className={classes.label} {...props.typographyProps}>\r\n          {props.label}\r\n        </Typography>\r\n        <Typography\r\n          className={classes.description}\r\n          style={{ paddingLeft: !!props.description ? 5 : 0 }}\r\n        >\r\n          {props.description}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, Grid, ListItem, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\n\r\nexport const ResistanceProgressLabel = React.forwardRef((props, ref) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid innerRef={ref} item xs={12}>\r\n        <ListItem style={{ width: \"100%\", padding: 0 }} button={!!props.button}>\r\n          <LinearProgressLabel\r\n            value={0}\r\n            label={getLabel(props)}\r\n            description={getDescription(props)}\r\n            backgroundColor={theme.palette.background.paper}\r\n            Icon={props.Icon}\r\n            typographyProps={{\r\n              style: {\r\n                fontSize: 14,\r\n                fontWeight: 700,\r\n                color: theme.palette.text.primary,\r\n              },\r\n            }}\r\n          />\r\n        </ListItem>\r\n      </Grid>\r\n\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EM}\r\n          label={`${props.resistance?.EM.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.blueSecondary}\r\n          color={theme.palette.property.blue}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.TH}\r\n          label={`${props.resistance?.TH.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.redSecondary}\r\n          color={theme.palette.property.red}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.KI}\r\n          label={`${props.resistance?.KI.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.greySecondary}\r\n          color={theme.palette.property.grey}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EX}\r\n          label={`${props.resistance?.EX.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.orgSecondary}\r\n          color={theme.palette.property.org}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});\r\nfunction getDescription(props) {\r\n  const ehpFactor = calculateEhpFactor(props.damageType, props.resistance);\r\n  if (ehpFactor === 1 || !ehpFactor) return \"\";\r\n\r\n  if (props.activeBonus === 0)\r\n    return `${(props.resistance?.HP * ehpFactor).toFixed(0)}`;\r\n  return `${(props.resistance?.HP * ehpFactor).toFixed(0)}+${(\r\n    props.activeBonus * ehpFactor\r\n  ).toFixed(1)}/s`;\r\n}\r\nfunction getLabel(props) {\r\n  if (!!props.label) return props.label;\r\n  if (props.activeBonus === 0) return `${(props.resistance?.HP).toFixed(0)}`;\r\n  return `${(props.resistance?.HP).toFixed(0)}+${props.activeBonus.toFixed(\r\n    1\r\n  )}/s`;\r\n}\r\nfunction calculateEhpFactor(damageType, resistance) {\r\n  if (!damageType || !resistance) return 1;\r\n\r\n  return (\r\n    (100 * (damageType.EM + damageType.TH + damageType.KI + damageType.EX)) /\r\n    (damageType.EM * (100 - resistance.EM) +\r\n      damageType.TH * (100 - resistance.TH) +\r\n      damageType.KI * (100 - resistance.KI) +\r\n      damageType.EX * (100 - resistance.EX))\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  List,\r\n  ListItem,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { EhpIcon } from \"../../Icons/defenseIcons\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\n\r\nconst scrollbarWidth = (() => {\r\n  // Creating invisible container\r\n  const outer = document.createElement(\"div\");\r\n  outer.style.visibility = \"hidden\";\r\n  outer.style.overflow = \"scroll\"; // forcing scrollbar to appear\r\n  outer.style.msOverflowStyle = \"scrollbar\"; // needed for WinJS apps\r\n  document.body.appendChild(outer);\r\n\r\n  // Creating inner element and placing it in the container\r\n  const inner = document.createElement(\"div\");\r\n  outer.appendChild(inner);\r\n\r\n  // Calculating difference between container's full width and the child width\r\n  const _scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\r\n\r\n  // Removing temporary elements from the DOM\r\n  outer.parentNode.removeChild(outer);\r\n\r\n  return _scrollbarWidth;\r\n})();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: 300 + scrollbarWidth,\r\n    maxHeight: 400,\r\n    overflowY: \"auto\",\r\n    overflowX: \"hidden\",\r\n    paddingRight: scrollbarWidth,\r\n  },\r\n  listItem: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nfunction DamageTypeList(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <List className={classes.list} component=\"div\">\r\n      {damgeTypes.map((damageType) => {\r\n        return (\r\n          <ListItem\r\n            key={damageType.name}\r\n            className={classes.listItem}\r\n            button\r\n            onClick={() => {\r\n              props.setDamageType({ ...damageType });\r\n            }}\r\n          >\r\n            <ResistanceProgressLabel\r\n              label={damageType.name}\r\n              resistance={damageType}\r\n            />\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default function DamageTypeProgressLabel(props) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n\r\n  const anchorEl = useRef(null);\r\n\r\n  const [DamageTypeListOpen, setDamageTypeListOpen] = useState(false);\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setDamageTypeListOpen(false);\r\n      }}\r\n    >\r\n      {/* wrraper for ClickAwayListener */}\r\n      <div className={classes.root}>\r\n        <div\r\n          ref={anchorEl}\r\n          onClick={() => {\r\n            setDamageTypeListOpen(!DamageTypeListOpen);\r\n          }}\r\n        >\r\n          <ResistanceProgressLabel\r\n            label={props.damageType.name || \"Omni\"}\r\n            Icon={\r\n              <div style={{ height: 24 }}>\r\n                <EhpIcon color={theme.palette.text.primary} />\r\n              </div>\r\n            }\r\n            resistance={props.damageType}\r\n            button\r\n          />\r\n        </div>\r\n        <Popper\r\n          open={DamageTypeListOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <DamageTypeList setDamageType={props.setDamageType} />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nconst damgeTypes = [\r\n  { name: \"Omni\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Amarr\", EM: 60, TH: 40, KI: 0, EX: 0 },\r\n  { name: \"Minmatar\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Caldari\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Gallente\", EM: 25, TH: 40, KI: 60, EX: 25 },\r\n  { name: \"Angel Cartel\", EM: 7, TH: 9, KI: 22, EX: 62 },\r\n  { name: \"Blood Raiders\", EM: 50, TH: 48, KI: 1, EX: 1 },\r\n  { name: \"Drones\", EM: 6, TH: 6, KI: 20, EX: 68 },\r\n  { name: \"EoM\", EM: 0, TH: 26, KI: 74, EX: 0 },\r\n  { name: \"Guristas\", EM: 2, TH: 18, KI: 79, EX: 1 },\r\n  { name: \"Mercenaries\", EM: 51, TH: 9, KI: 33, EX: 7 },\r\n  { name: \"Mordu's Region\", EM: 30, TH: 0, KI: 70, EX: 0 },\r\n  { name: \"Sansha\", EM: 53, TH: 47, KI: 0, EX: 0 },\r\n  { name: \"Blood\", EM: 0, TH: 55, KI: 45, EX: 0 },\r\n  { name: \"Electro Magnetic\", EM: 100, TH: 0, KI: 0, EX: 0 },\r\n  { name: \"Thermal\", EM: 0, TH: 100, KI: 0, EX: 0 },\r\n  { name: \"Kinetic\", EM: 0, TH: 0, KI: 100, EX: 0 },\r\n  { name: \"Explosive\", EM: 0, TH: 0, KI: 0, EX: 100 },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  ArmorIcon,\r\n  EhpIcon,\r\n  ShieldIcon,\r\n  StructureIcon,\r\n} from \"../../Icons/defenseIcons.jsx\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport DamageTypeProgressLabel from \"./DamageTypeProgressLabel.jsx\";\r\n\r\n// EM-TH-KI-EX\r\nexport default function Resistance(props) {\r\n  const theme = useTheme();\r\n\r\n  const [damageType, setDamageType] = useState({\r\n    EM: 25,\r\n    TH: 25,\r\n    KI: 25,\r\n    EX: 25,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <ResistanceProgressLabel\r\n          variant=\"shield\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ShieldIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.shield}\r\n          activeBonus={props.stat.defense.active.shieldBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"armor\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ArmorIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.armor}\r\n          activeBonus={props.stat.defense.active.armorBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"structure\"\r\n          Icon={\r\n            <div>\r\n              <StructureIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.structure}\r\n          activeBonus={props.stat.defense.active.structureBonus}\r\n          damageType={damageType}\r\n        />\r\n        <DamageTypeProgressLabel\r\n          damageType={damageType}\r\n          setDamageType={setDamageType}\r\n        />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const TurretIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5.284\"\r\n      y1=\"12.303\"\r\n      x2=\"15.248\"\r\n      y2=\"7.431\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n      strokeLinecap=\"round\"\r\n    />\r\n    <path\r\n      d=\" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const LauncherIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CalibrationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneBayIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z \"\r\n        fill=\"none\"\r\n        strokeWidth=\"1\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"9.328\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"14.602\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.328\"\r\n        y1=\"14.789\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeLinecap=\"square\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"14.602\"\r\n        y1=\"14.789\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\nexport const DroneBandwidthIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z \"\r\n        fill={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.041\"\r\n        y1=\"6.915\"\r\n        x2=\"9.635\"\r\n        y2=\"9.728\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.635\"\r\n        y1=\"14.118\"\r\n        x2=\"7.041\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"15.844\"\r\n        y1=\"16.281\"\r\n        x2=\"16.479\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\n\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    marginBottom: 8,\r\n    width: \"100%\",\r\n    paddingLeft: 10,\r\n  },\r\n  boldTypography: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n  },\r\n}));\r\n\r\nconst GridBoldTypography = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid style={{ flexBasis: 140, maxWidth: 140 }}>\r\n      <TextField\r\n        label={\r\n          <Typography className={classes.boldTypography} noWrap>\r\n            {props.children}\r\n          </Typography>\r\n        }\r\n        value={props.value || 0}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n        inputProps={{\r\n          style: {\r\n            padding: \"2px 0px 2px 0px\",\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n          },\r\n        }}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default function ResourcesMiscellaneousListItem(props) {\r\n  const classes = useStyles();\r\n\r\n  const [misc, setMisc] = useState(Stat.defaultStat.miscellaneous);\r\n\r\n  useEffect(() => {\r\n    setMisc(props.stat.miscellaneous);\r\n  }, [props.stat.miscellaneous]);\r\n\r\n  return (\r\n    <ListItem className={classes.root} key=\"onlyOne\">\r\n      <Grid justify=\"center\" container>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumLockedTarget}\r\n        >{`Max Locked Target`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumTargetingRange}\r\n        >{`Max Trageting Range (m)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.scanResolution}\r\n        >{`Scan Resolution (mm)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.gravimetric?.toFixed(1)}\r\n        >\r\n          {`Gravimetric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.magnetometric?.toFixed(1)}\r\n        >\r\n          {`Magnetometric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.ladar?.toFixed(1)}\r\n        >{`Ladar (point)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.radar?.toFixed(1)}\r\n        >{`Radar (point)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.propulsion.TextFieldmaximumVelocity?.toFixed(2)}\r\n        >{`Max Velocity (m/sec)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.inertialModifier?.toFixed(6)}\r\n        >{`Inertia Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.warpSpeedMultiplier}\r\n        >{`Warp Speed Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.misc.signatureRadius?.toFixed(2)}\r\n        >{`Signature Radius (m)`}</GridBoldTypography>\r\n        <Grid style={{ flexBasis: 140 }} item />\r\n      </Grid>\r\n    </ListItem>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Grid,\r\n  Tooltip,\r\n  List,\r\n  ListItem,\r\n  Collapse,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport {\r\n  TurretIcon,\r\n  LauncherIcon,\r\n  CalibrationIcon,\r\n  DroneBayIcon,\r\n  DroneBandwidthIcon,\r\n} from \"../../Icons/resourceIcons\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useCallback } from \"react\";\r\nimport ResourcesMiscellaneousListItem from \"./ResourcesMiscellaneousListItem\";\r\n\r\nconst TurretHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Turret Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst LauncherHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Launcher Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <LauncherIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst Calibration = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Calibration\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <CalibrationIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBandwidth = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bandwidth\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBandwidthIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBay = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bay\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBayIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function Hardpoints(props) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const [load, setLoad] = useState(Stat.defaultStat.resource.load);\r\n  const [capacity, setCapacity] = useState(Stat.defaultStat.resource.capacity);\r\n\r\n  useEffect(() => {\r\n    setLoad(props.stat.resource.load);\r\n    setCapacity(props.stat.resource.capacity);\r\n  }, [props.stat]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid container item alignContent=\"center\">\r\n            <Grid item xs={4} sm={2}>\r\n              <TurretHardpoint label={`${load.turret}/${capacity.turret}`} />\r\n            </Grid>\r\n            <Grid item xs={4} sm={2}>\r\n              <LauncherHardpoint\r\n                label={`${load.launcher}/${capacity.launcher}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={4} sm={2}>\r\n              <Calibration\r\n                label={`${load.calibration}/${capacity.calibration}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBay\r\n                value={load.droneBay / capacity.droneBay}\r\n                label={`${load.droneBay}/${capacity.droneBay}m3`}\r\n                isError={load.droneBay > capacity.droneBay}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBandwidth\r\n                value={load.droneBandwidth / capacity.droneBandwidth}\r\n                label={`${load.droneBandwidth}/${capacity.droneBandwidth}Mbit/s`}\r\n                isError={load.droneBandwidth > capacity.droneBandwidth}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <ResourcesMiscellaneousListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const AlphaIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneDamageSVG = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"10.652\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"13.348\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"10.652\"\r\n        y1=\"13.442\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"13.348\"\r\n        y1=\"13.442\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <path\r\n        d=\" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z \"\r\n        fill=\"rgb(255,255,255)\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles, Typography, ListItem, useTheme } from \"@material-ui/core\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPostIt: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n  },\r\n  rootDiv: {\r\n    padding: 0,\r\n    width: \"100%\",\r\n    height: 52,\r\n    position: \"relative\",\r\n  },\r\n  label: {\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 6,\r\n    fontSize: 11,\r\n    color: \"#ffffff\",\r\n    fontWeight: 700,\r\n  },\r\n  optimalRangeLabel: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  rangeFont: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nconst PostIt = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div\r\n      className={classes.rootPostIt}\r\n      style={{\r\n        width: `${props.share || 0}%`,\r\n        height: props.index * 13 + 22,\r\n        borderRight: `solid 1px ${props.color}`,\r\n      }}\r\n    >\r\n      <div style={{ backgroundColor: props.color, height: 20 }} />\r\n      <div style={{ height: props.index * 13 }} />\r\n\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OptimalRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <PostIt\r\n      share={props.share.optimalRangeShare}\r\n      index={0}\r\n      color={theme.palette.property.green}\r\n    >\r\n      <Typography className={classes.rangeFont} align=\"right\">\r\n        {`${(props.share.optimalRange / 1000).toFixed(1)}KM`}\r\n      </Typography>\r\n    </PostIt>\r\n  );\r\n};\r\nconst FalloffRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    props.share.falloffRange > 0 && (\r\n      <PostIt\r\n        share={props.share.falloffRangeShare}\r\n        index={1}\r\n        color={theme.palette.property.org}\r\n      >\r\n        <Typography className={classes.rangeFont} align=\"right\">\r\n          {\r\n            //prettier-ignore\r\n            `${((props.share.optimalRange + props.share.falloffRange) / 1000).toFixed(1)}KM`\r\n          }\r\n        </Typography>\r\n      </PostIt>\r\n    )\r\n  );\r\n};\r\n\r\nexport default function DamageRangeListItem(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [shares, setShares] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setShares(getShares(props.stat.damage.turretLauncherRange));\r\n  }, [props.stat.damage.turretLauncherRange]);\r\n\r\n  return shares.map((share) => {\r\n    return (\r\n      <ListItem\r\n        className={classes.root}\r\n        key={`${share.optimalRangeShare}/${share.falloffRangeShare}`}\r\n      >\r\n        <div className={classes.rootDiv}>\r\n          <PostIt\r\n            share={100}\r\n            index={2}\r\n            color={theme.palette.property.greySecondary}\r\n          />\r\n          <FalloffRangeBar share={share} />\r\n          <OptimalRangeBar share={share} />\r\n          <Typography className={classes.label}>\r\n            {`${share.debug[0].item.typeName} - ${share.debug[0].charge.typeName}`}\r\n          </Typography>\r\n        </div>\r\n      </ListItem>\r\n    );\r\n  });\r\n}\r\nfunction getShares(turretLauncherRange) {\r\n  const rangeMax = turretLauncherRange.reduce((acc, range) => {\r\n    const rangeSum = range.optimalRange + range.falloffRange;\r\n    if (rangeSum > acc) return rangeSum;\r\n    else return acc;\r\n  }, 0);\r\n\r\n  return turretLauncherRange.map((range) => {\r\n    return {\r\n      ...range,\r\n      optimalRangeShare: (range.optimalRange / rangeMax) * 100,\r\n      falloffRangeShare:\r\n        ((range.falloffRange + range.optimalRange) / rangeMax) * 100,\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { AlphaIcon, DroneDamageSVG } from \"../../Icons/damageIcons\";\r\nimport { TurretIcon } from \"../../Icons/resourceIcons\";\r\nimport {\r\n  Tooltip,\r\n  Grid,\r\n  makeStyles,\r\n  Collapse,\r\n  ListItem,\r\n  List,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport DamageRangeListItem from \"./DamageRangeListItem\";\r\n\r\nconst WeaponDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Weapon DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst WeaponAlpha = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Alpha Damage\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <AlphaIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Drone DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneDamageSVG\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    height: 20,\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n}));\r\n\r\nexport default function Damage(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <Grid container>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid item xs={1}></Grid>\r\n          <Grid item xs={4}>\r\n            <WeaponDps\r\n              label={`${props.stat.damage.turretLauncherDamage.effective.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <WeaponAlpha\r\n              label={`${props.stat.damage.turretLauncherDamage.alpha.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <DroneDps\r\n              label={`${props.stat.damage.droneDamage.max.toFixed(0)}`}\r\n              isError={\r\n                props.stat.resource.load.droneActive >\r\n                props.stat.resource.capacity.droneActive\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}></Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <DamageRangeListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport FlagIcon from \"@material-ui/icons/Flag\";\r\n\r\nconst Cpu = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}tf`}\r\n      backgroundColor={theme.palette.property.blueSecondary}\r\n      color={theme.palette.property.blue}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\nconst Powergrid = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}MW`}\r\n      backgroundColor={theme.palette.property.redSecondary}\r\n      color={theme.palette.property.red}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default function Engineering(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          <Cpu\r\n            load={props.stat.engineering.cpu.load}\r\n            output={props.stat.engineering.cpu.output}\r\n          />\r\n          <Powergrid\r\n            load={props.stat.engineering.pg.load}\r\n            output={props.stat.engineering.pg.output}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction getPercent(load, output) {\r\n  if (!load || !output) return 0;\r\n  if (load.constructor !== Number || output.constructor !== Number) return 0;\r\n\r\n  const percent = Number((load / output) * 100);\r\n  if (percent >= 100) return 100;\r\n  else return percent;\r\n}\r\nfunction getNum(data) {\r\n  if (!data || data.constructor !== Number) return 0;\r\n  else return data;\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const CapacitorChargeIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z \"\r\n      fill={props.color || \"#000000\"}\r\n      strokeWidth=\"1.5\"\r\n      stroke={props.backgroundColor || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { CapacitorChargeIcon } from \"../../Icons/capacitorIcons\";\r\nimport { Tooltip, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  tooltip: {\r\n    maxWidth: 80,\r\n  },\r\n}));\r\n\r\nexport default function Capacitor(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgressLabel\r\n        value={0}\r\n        label={`${(\r\n          props.stat.capacitor.ambientChargeRate +\r\n          props.stat.capacitor.boosterChargeRate -\r\n          props.stat.capacitor.activationUseRate\r\n        ).toFixed(2)}GJ/s`}\r\n        backgroundColor={theme.palette.background.paper}\r\n        Icon={\r\n          <Tooltip\r\n            classes={{ tooltip: classes.tooltip }}\r\n            //prettier-ignore\r\n            title={`Passive +${props.stat.capacitor.ambientChargeRate.toFixed(2)} \r\n            Active +${props.stat.capacitor.boosterChargeRate.toFixed(2)} \r\n            Active -${props.stat.capacitor.activationUseRate.toFixed(2)}`}\r\n            placement=\"left\"\r\n            arrow\r\n          >\r\n            <div style={{ height: 24 }}>\r\n              <CapacitorChargeIcon\r\n                color={theme.palette.text.primary}\r\n                backgroundColor={theme.palette.background.paper}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n        }\r\n        typographyProps={{\r\n          style: {\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n            color: theme.palette.text.primary,\r\n          },\r\n        }}\r\n      />\r\n      <LinearProgressLabel\r\n        value={props.stat.capacitor.stableLevel}\r\n        label={`${props.stat.capacitor.stableLevel}%`}\r\n        backgroundColor={theme.palette.property.orgSecondary}\r\n        color={theme.palette.property.org}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Resistance from \"./Resistance\";\r\nimport Resources from \"./Resouces\";\r\nimport Damage from \"./Damage\";\r\nimport Engineering from \"./Engineering\";\r\nimport Capacitor from \"./Capacitor\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function StatsSummary(props) {\r\n  useEffect(() => {\r\n    const stat = Stat.stat(props.fit);\r\n    props.setStat(stat);\r\n  }, [props.fitID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Resources {...props} />\r\n      <Damage {...props} />\r\n      <Capacitor {...props} />\r\n      <Resistance {...props} />\r\n      <Engineering {...props} />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport Drawers from \"../Drawers/Drawers\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  makeStyles,\r\n  useTheme,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport StatsSummary from \"./Stats/StatsSummary\";\r\nimport Stat from \"./Stats/services/Stat\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  editButton: {\r\n    fontSize: 26,\r\n    fontWeight: 1000,\r\n    letterSpacing: -1.5,\r\n    lineHeight: 1,\r\n    width: \"auto\",\r\n  },\r\n}));\r\n\r\nconst EditButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      style={{\r\n        height: 70,\r\n        borderRadius: 0,\r\n        backgroundColor: props.backgroundColor,\r\n        marginBottom: 10,\r\n      }}\r\n      fullWidth\r\n      onClick={() => {\r\n        props.setOpen(!props.open);\r\n      }}\r\n    >\r\n      <Grid container item xs={2} justify=\"center\">\r\n        <Avatar\r\n          style={{\r\n            padding: 5,\r\n            width: 40,\r\n            height: 40,\r\n            backgroundColor: props.color,\r\n          }}\r\n        >\r\n          {!!props.fit?.ship?.typeID ? (\r\n            <img\r\n              draggable=\"false\"\r\n              style={{ width: 50, height: 50 }}\r\n              src={`https://images.evetech.net/types/${props.fit?.ship?.typeID}/icon?size=128`}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Avatar>\r\n      </Grid>\r\n      <Grid item xs={10}>\r\n        <Typography\r\n          className={classes.editButton}\r\n          style={{\r\n            color: props.color,\r\n          }}\r\n          align=\"center\"\r\n        >\r\n          {getFitCardTitle(props.open, props.fit.ship?.typeName)}\r\n        </Typography>\r\n      </Grid>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default function FitCard(props) {\r\n  const [fit, setFit] = useState(false);\r\n  const [fitID, setFitID] = useState(false);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [expand, setExpand] = useState(window.innerWidth < 1000 ? false : true);\r\n\r\n  const [stat, setStat] = useState(Stat.defaultStat);\r\n\r\n  const isInitialRender = useRef(true);\r\n  useEffect(() => {\r\n    if (!isInitialRender.current && !isSyncing.current) {\r\n      props.dispatchDrawersOpen({\r\n        type: open ? \"OPEN\" : \"CLOSE\",\r\n        tag: props.tag,\r\n        payload: open,\r\n      });\r\n    } else {\r\n      isInitialRender.current = false;\r\n      isSyncing.current = false;\r\n    }\r\n  }, [open]);\r\n\r\n  const isSyncing = useRef(false); // Too complicated.!\r\n  useEffect(() => {\r\n    setOpen(props.drawersOpen[props.tag]);\r\n    if (open !== props.drawersOpen[props.tag]) isSyncing.current = true;\r\n  }, [props.drawersOpen[props.tag]]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card\r\n        style={{ width: \"85%\", minWidth: 300, maxWidth: 600 }}\r\n        elevation={3}\r\n      >\r\n        <EditButton\r\n          fit={fit}\r\n          open={open}\r\n          setOpen={setOpen}\r\n          backgroundColor={props.backgroundColor}\r\n          color={props.color}\r\n        />\r\n        <StatsSummary fit={fit} fitID={fitID} stat={stat} setStat={setStat} />\r\n      </Card>\r\n\r\n      <Drawers\r\n        tag={props.tag}\r\n        open={open}\r\n        setOpen={setOpen}\r\n        backgroundColor={props.backgroundColor}\r\n        expand={expand}\r\n        setExpand={setExpand}\r\n        fitID={fitID}\r\n        setFitID={setFitID}\r\n        setFit={setFit}\r\n        setSlots={props.setSlots}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction getFitCardTitle(open, typeName) {\r\n  if (!typeName)\r\n    return open\r\n      ? \"> CLICK HERE TO START FITTING <\"\r\n      : \"CLICK HERE TO START FITTING\";\r\n  else return open ? `> ${typeName} <` : typeName;\r\n}\r\n","import React from \"react\";\r\nimport { Stage, Layer, Arrow, Circle, Line, Text } from \"react-konva\";\r\nimport {\r\n  makeStyles,\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  ButtonGroup,\r\n  Icon,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useCallback } from \"react\";\r\nimport PanToolIcon from \"@material-ui/icons/PanTool\";\r\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\r\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\r\nimport ReplayIcon from \"@material-ui/icons/Replay\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"85%\",\r\n    minWidth: 300,\r\n    maxWidth: 600,\r\n    height: \"80%\",\r\n  },\r\n}));\r\n\r\nconst hostileAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 200,\r\n    anchor2X: 75,\r\n    anchor2Y: 200,\r\n  },\r\n  vector: {\r\n    x: 50,\r\n    y: 0,\r\n    pX: 50,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction hostileAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return hostileAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\nconst onBoardAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 25,\r\n    anchor2X: 25,\r\n    anchor2Y: 25,\r\n  },\r\n  vector: {\r\n    x: 0,\r\n    y: 0,\r\n    pX: 0,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction onBoardAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return onBoardAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\n\r\nexport default function ShipCanvas(props) {\r\n  const [hostileAnchor, dispatchHostileAnchor] = useReducer(\r\n    hostileAnchorReducer,\r\n    hostileAnchorInitial\r\n  );\r\n  const [onBoardAnchor, dispatchOnBoardAnchor] = useReducer(\r\n    onBoardAnchorReducer,\r\n    onBoardAnchorInitial\r\n  );\r\n  const [distanceVector, setDistanceVector] = useState({\r\n    x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n    y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n  });\r\n  const [distance, setDistance] = useState(\r\n    Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100\r\n  );\r\n  const [stageWheel, setStageWheel] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n  const [stagePoint, setStagePoint] = useState({ x: 0, y: 0 });\r\n  const [isStageDrragable, setStageDraggable] = useState(false);\r\n\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      hostileAnchor.anchors.anchor2X - hostileAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      hostileAnchor.anchors.anchor2Y - hostileAnchor.anchors.anchor1Y;\r\n    dispatchHostileAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [hostileAnchor.anchors.anchor2X, hostileAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      onBoardAnchor.anchors.anchor2X - onBoardAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      onBoardAnchor.anchors.anchor2Y - onBoardAnchor.anchors.anchor1Y;\r\n    dispatchOnBoardAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [onBoardAnchor.anchors.anchor2X, onBoardAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const _distanceVector = {\r\n      x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n      y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n    };\r\n    const _distance =\r\n      Math.sqrt(\r\n        Math.pow(_distanceVector.x, 2) + Math.pow(_distanceVector.y, 2)\r\n      ) / 100;\r\n    setDistanceVector(_distanceVector);\r\n    setDistance(_distance);\r\n  }, [\r\n    hostileAnchor.anchors.anchor1X,\r\n    onBoardAnchor.anchors.anchor1X,\r\n    hostileAnchor.anchors.anchor1Y,\r\n    onBoardAnchor.anchors.anchor1Y,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    dispatchSituation();\r\n  }, []);\r\n\r\n  const dispatchSituation = useCallback(() => {\r\n    props.setSituation({\r\n      onboard: { ...onBoardAnchor },\r\n      hostile: { ...hostileAnchor },\r\n    });\r\n  }, [onBoardAnchor, hostileAnchor, distance]);\r\n\r\n  const handleResetClick = useCallback(() => {\r\n    setStagePoint({});\r\n    dispatchOnBoardAnchor({ type: \"reset\" });\r\n    dispatchHostileAnchor({ type: \"reset\" });\r\n  }, []);\r\n\r\n  const handleMagnifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 1.5);\r\n    setStageWheel(stageScale * 1.5);\r\n  }, [stageScale]);\r\n\r\n  const handleMinifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 0.65);\r\n    setStageWheel(stageScale * 0.65);\r\n  }, [stageScale]);\r\n\r\n  const handleStageDrragable = useCallback(() => {\r\n    setStageDraggable(!isStageDrragable);\r\n  }, [isStageDrragable]);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card className={classes.root} elevation={3}>\r\n        <Grid style={{ padding: 5 }} spacing={1} container justify=\"flex-end\">\r\n          <Grid item xs={8}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button onClick={handleMagnifyButton}>\r\n                <ZoomInIcon />\r\n              </Button>\r\n              <Button onClick={handleResetClick}>\r\n                <ReplayIcon />\r\n              </Button>\r\n              <Button onClick={handleMinifyButton}>\r\n                <ZoomOutIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button\r\n                variant={isStageDrragable ? \"contained\" : \"outlined\"}\r\n                onClick={handleStageDrragable}\r\n              >\r\n                <PanToolIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Stage\r\n          x={stagePoint.x}\r\n          y={stagePoint.y}\r\n          width={window.innerWidth}\r\n          height={window.innerHeight}\r\n          onWheel={handleWheel(setStageWheel, setStageScale)}\r\n          scaleX={stageWheel}\r\n          scaleY={stageWheel}\r\n          draggable={isStageDrragable}\r\n        >\r\n          <Layer>\r\n            <Text\r\n              x={onBoardAnchor.anchors.anchor1X + onBoardAnchor.vector.x}\r\n              y={onBoardAnchor.anchors.anchor1Y + onBoardAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(onBoardAnchor.vector.x, 2) +\r\n                    Math.pow(onBoardAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + hostileAnchor.vector.x}\r\n              y={hostileAnchor.anchors.anchor1Y + hostileAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(hostileAnchor.vector.x, 2) +\r\n                    Math.pow(hostileAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + 12 / stageScale}\r\n              y={hostileAnchor.anchors.anchor1Y - 15 / stageScale}\r\n              fontSize={12 / stageScale}\r\n              fill={theme.palette.text.primary}\r\n              text={`${angleBetweenTwoVectors(\r\n                distanceVector,\r\n                hostileAnchor.vector\r\n              ).toFixed(0)}`}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor2X,\r\n                hostileAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.red}\r\n              fill={theme.palette.property.red}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor1X}\r\n              y={hostileAnchor.anchors.anchor1Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor1OnDragMove(\r\n                dispatchHostileAnchor,\r\n                hostileAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor2X}\r\n              y={hostileAnchor.anchors.anchor2Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={10 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor2OnDragMove(dispatchHostileAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleHostileAnchor2OnDragEnd(\r\n                  dispatchHostileAnchor,\r\n                  hostileAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                onBoardAnchor.anchors.anchor2X,\r\n                onBoardAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.blue}\r\n              fill={theme.palette.property.blue}\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor1X}\r\n              y={onBoardAnchor.anchors.anchor1Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor1OnDragMove(\r\n                dispatchOnBoardAnchor,\r\n                onBoardAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n              on\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor2X}\r\n              y={onBoardAnchor.anchors.anchor2Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleOnBoardAnchor2OnDragEnd(\r\n                  dispatchOnBoardAnchor,\r\n                  onBoardAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Line\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.primary.main}\r\n              fill={theme.palette.primary.main}\r\n              dash={[5 / stageScale, 5 / stageScale]}\r\n            />\r\n            <Text\r\n              //prettier-ignore\r\n              x={\r\n              (onBoardAnchor.anchors.anchor1X + hostileAnchor.anchors.anchor1X) / 2\r\n            }\r\n              //prettier-ignore\r\n              y={\r\n              (onBoardAnchor.anchors.anchor1Y + hostileAnchor.anchors.anchor1Y) / 2\r\n            }\r\n              fill={theme.palette.text.primary}\r\n              fontSize={12 / stageScale}\r\n              text={`${distance.toFixed(2)}km`}\r\n              offsetX={-2}\r\n              /* rotation={handleRotation(distanceVector)} */\r\n            />\r\n          </Layer>\r\n        </Stage>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction handleHostileAnchor1OnDragMove(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + hostileAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + hostileAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragMove(dispatchHostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragEnd(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - hostileAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - hostileAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\n\r\nfunction handleOnBoardAnchor1OnDragMove(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + onBoardAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + onBoardAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragEnd(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - onBoardAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - onBoardAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleWheel(setStageWheel, setStageScale) {\r\n  return (e) => {\r\n    e.evt.preventDefault();\r\n\r\n    const scaleBy = 1.5;\r\n    const stage = e.target.getStage();\r\n    const oldScale = stage.scaleX();\r\n\r\n    const newScale = e.evt.deltaY > 0 ? oldScale * scaleBy : oldScale / scaleBy;\r\n    setStageScale(newScale);\r\n    setStageWheel(newScale);\r\n  };\r\n}\r\nfunction innerProduct(distanceVector, velocityVector) {\r\n  return (\r\n    distanceVector.x * velocityVector.x + distanceVector.y * velocityVector.y\r\n  );\r\n}\r\nfunction vectorLength(vector) {\r\n  return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n}\r\nfunction angleBetweenTwoVectors(distanceVector, velocityVector) {\r\n  const cosValue =\r\n    innerProduct(distanceVector, velocityVector) /\r\n    (vectorLength(distanceVector) * vectorLength(velocityVector));\r\n  return Math.acos(cosValue) * (180 / Math.PI);\r\n}\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport FitCard from \"./FitCard/FitCard\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  Grid,\r\n  makeStyles,\r\n  Paper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\r\nimport WbSunnyIcon from \"@material-ui/icons/WbSunny\";\r\nimport Brightness2Icon from \"@material-ui/icons/Brightness2\";\r\nimport ShipCanvas from \"./simpleEdition/ShipCanvas\";\r\nimport Simulator from \"./FitCard/Stats/services/Simulator\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modeButton: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  modeButtonActive: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.property.org,\r\n  },\r\n}));\r\n\r\nconst Links = (props) => {\r\n  return (\r\n    <Paper elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          <GitHubIcon />\r\n        </Button>\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js/issues\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          BUG REPORT\r\n        </Button>\r\n        <Button\r\n          href={\r\n            \"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md\"\r\n          }\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          DOCS\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst Settings = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Paper style={{ marginLeft: 10 }} elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButton : classes.modeButtonActive\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(false);\r\n          }}\r\n        >\r\n          <WbSunnyIcon />\r\n        </Button>\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButtonActive : classes.modeButton\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(true);\r\n          }}\r\n        >\r\n          <Brightness2Icon />\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst initialDrawersOpen = {\r\n  fit: true,\r\n  fit1: false,\r\n};\r\nconst defaultDrawersOpen = {\r\n  fit: false,\r\n  fit1: false,\r\n};\r\nfunction drawersOpenReducer(state, action) {\r\n  if (!action?.tag) return defaultDrawersOpen;\r\n  switch (action.type) {\r\n    case \"OPEN\":\r\n      return { ...defaultDrawersOpen, [action.tag]: action.payload };\r\n    case \"CLOSE\":\r\n      return { ...defaultDrawersOpen };\r\n    default:\r\n      return defaultDrawersOpen;\r\n  }\r\n}\r\n\r\nexport default function InitialCard(props) {\r\n  const theme = useTheme();\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const [drawersOpen, dispatchDrawersOpen] = useReducer(\r\n    drawersOpenReducer,\r\n    initialDrawersOpen\r\n  );\r\n\r\n  const [situation, setSituation] = useState();\r\n  const [slots, setSlots] = useState();\r\n  const [slots1, setSlots1] = useState();\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n      <Grid\r\n        style={{\r\n          width: width < 1000 ? \"100%\" : width - 600,\r\n          margin: 0,\r\n        }}\r\n        container\r\n        spacing={3}\r\n      >\r\n        <Grid xs={12} container item justify=\"center\"></Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots}\r\n            backgroundColor={theme.palette.property.blue}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots1}\r\n            backgroundColor={theme.palette.property.red}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit1\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Button\r\n            onClick={() => {\r\n              if (!!slots && !!slots1) Simulator.test(slots, slots1, situation);\r\n            }}\r\n            fullWidth\r\n          >\r\n            Simulate\r\n          </Button>\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ShipCanvas setSituation={setSituation} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Links />\r\n          <Settings isDark={props.isDark} setIsDark={props.setIsDark} />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport cacheService from \"./cache/cacheService\";\r\nimport { useEffect } from \"react\";\r\nimport { storage } from \"./index\";\r\nimport cJSON from \"compressed-json\";\r\nimport InitialCard from \"./components/InitialCard\";\r\nimport { makeStyles, Paper } from \"@material-ui/core\";\r\n\r\nconst ttl = 60 * 60 * 1;\r\nconst cache = new cacheService(ttl);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    borderRadius: 0,\r\n    overflow: \"auto\",\r\n  },\r\n}));\r\n\r\nexport default function InitialD(props) {\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/marketCategories\", () => {\r\n      return storage\r\n        .ref(\"/marketCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/typeIDsTable\", () => {\r\n      return storage\r\n        .ref(\"/listInvTypesTable.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/skillsStaticBoard\", () => {\r\n      return storage\r\n        .ref(\"/skillsStaticBoard.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/attributesCategories\", () => {\r\n      return storage\r\n        .ref(\"/attributesCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Paper className={classes.root} elevation={0}>\r\n      <InitialCard\r\n        isDark={props.isDark}\r\n        setIsDark={props.setIsDark}\r\n        cache={cache}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import InitialFetch from \"./InitialFetch\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { red, orange, blue, blueGrey, green } from \"@material-ui/core/colors\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst lightTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: \"#6d6d6d\",\r\n      main: \"#424242\",\r\n      dark: \"#1b1b1b\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#F5F5F5\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: blue[500],\r\n      blueSecondary: blue[200],\r\n      red: red[500],\r\n      redSecondary: red[200],\r\n      grey: blueGrey[500],\r\n      greySecondary: blueGrey[200],\r\n      org: orange[500], // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: orange[200], // So instead of looking for some problem jusy used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n});\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      light: \"#ffffff\",\r\n      main: \"#ffffff\",\r\n      dark: \"#f5f5f5\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#515151\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: \"#66b3e8\",\r\n      blueSecondary: \"#b1cce2\",\r\n      red: \"#f54256\",\r\n      redSecondary: \"#e8a5a5\",\r\n      grey: blueGrey[400],\r\n      greySecondary: blueGrey[200],\r\n      org: \"#ff994d\", // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: \"#f3cb90\", // So instead of looking for problem just used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiPaper: {\r\n      elevation3: {\r\n        boxShadow: \"\",\r\n        border: \"solid 0.1px #595959\",\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default function Initialtheming(props) {\r\n  const [isDark, setIsDark] = useState(false);\r\n\r\n  return (\r\n    <MuiThemeProvider theme={isDark ? darkTheme : lightTheme}>\r\n      <InitialFetch isDark={isDark} setIsDark={setIsDark} />\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport firebaseAPI from \"./key/ignore/firebaseAPI\";\r\nimport * as firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\nimport Initialtheming from \"./Initialtheming\";\r\n\r\nfirebase.initializeApp(firebaseAPI);\r\nexport const database = firebase.database();\r\nexport const analytics = firebase.analytics();\r\nexport const storage = firebase.storage();\r\n\r\nanalytics.logEvent(\"pageLoad\", { type: \"log\" });\r\n\r\nReactDOM.render(<Initialtheming />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}