{"version":3,"sources":["serviceWorker.js","key/ignore/firebaseAPI.js","cache/cacheService.js","components/Icons/slotIcons.jsx","fitter/src/Fit.js","components/Drawers/Slots/SlotChargeBadge.jsx","components/Drawers/Slots/SlotMetaBadge.jsx","components/Drawers/RecButton.jsx","components/Drawers/RecMenu.jsx","components/Icons/stateIcons.jsx","components/Drawers/ListDrawer/SetStateMenu.jsx","components/Drawers/Slots/Slot.jsx","components/Drawers/services/EFT.js","services/dataManipulation/findAttributes.js","components/Drawers/Slots/Slots.jsx","components/Drawers/FittingDrawer/ImportExportButtons.jsx","components/Drawers/FittingDrawer/fittingLazyFetch.js","components/Drawers/FittingDrawer/FittingDrawer.jsx","components/Drawers/Stats/StatTextField.jsx","components/Drawers/Stats/Stat.jsx","components/Drawers/Stats/StatDrawer.jsx","components/simpleEdition/shipCardComponents/NestedListDedicated.jsx","components/itemSelection/ItemSelection.jsx","services/eveListConstruction/filterInvTypesTable.js","services/eveListConstruction/createEveList.jsx","services/eveListConstruction/isTerminalGroup.js","services/eveListConstruction/findChildrenInvTypes.js","services/eveListConstruction/findChildrenMarketGroup.js","services/eveListConstruction/isArrayEmpty.js","components/itemSelection/ItemSelectionListCache.jsx","components/Drawers/ListDrawer/ListDrawerButtons.jsx","components/Drawers/ListDrawer/ListDrawerSearchbar.jsx","components/Drawers/ListDrawer/ListDrawer.jsx","components/Drawers/ListDrawer/ListDrawers.jsx","components/FitCard/Stats/services/EveMath.js","components/FitCard/Stats/services/Stat.js","components/FitCard/Stats/services/Summary.js","components/FitCard/Stats/services/Simulator.js","components/Drawers/Drawers.jsx","components/Icons/defenseIcons.jsx","components/FitCard/Stats/LinearProgressLabel.jsx","components/FitCard/Stats/ResistanceProgressLabel.jsx","components/FitCard/Stats/DamageTypeProgressLabel.jsx","components/FitCard/Stats/Resistance.jsx","components/Icons/resourceIcons.jsx","components/FitCard/Stats/ResourcesMiscellaneousListItem.jsx","components/FitCard/Stats/Resouces.jsx","components/Icons/damageIcons.jsx","components/FitCard/Stats/DamageRangeListItem.jsx","components/FitCard/Stats/Damage.jsx","components/FitCard/Stats/Engineering.jsx","components/Icons/capacitorIcons.jsx","components/FitCard/Stats/Capacitor.jsx","components/FitCard/Stats/StatsSummary.jsx","components/FitCard/FitCard.jsx","components/simpleEdition/ShipCanvas.jsx","components/InitialCard.jsx","InitialFetch.jsx","Initialtheming.jsx","index.js"],"names":["Boolean","window","location","hostname","match","NodeCache","require","cacheService","ttlSeconds","this","cache","stdTTL","checkperiod","useClones","key","value","get","set","storeFunction","Promise","resolve","then","result","reject","check","count","undefined","setTimeout","keys","del","flushAll","HighSlotIcon","props","SvgIcon","d","strokeWidth","stroke","color","MidSlotIcon","LowSlotIcon","RigSlotIcon","fill","DroneIcon","x1","y1","x2","y2","MiscIcon","CapsuleIcon","Fit","dogmaSkills","constructor","Object","skillBoard","skillsStaticBoardMax","values","reduce","acc","mods","concat","map","mod","debug","falseDebug","validateChargeSlot","slot","item","charge","itemChargeSize","chargeChargeSize","loadableGroupIDs","ID","attr","filter","length","includes","groupID","itemCapacity","capacity","chargeVolume","volume","chargePerCycle","chargeVolumePerAct","Math","floor","mapSlots_CONFIG","isIterate","ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots","mapSlots","fit","callback","partialConfig","config","slotName","slots","apply","fitWithDomainID","board","staticBoard","passiveBoard","forEach","modifiedAttributeID","isStatic","push","appliedMod","type","typeAttributesStats","attribute","attributeID","penCount","console","log","baseMod","baseValue","modifyingAttributeValue","operation","appliedValue","penalizedModifyingAttributeValue","isPenalized","modifyingAttributeID","sampleMod","compareFunc","highIsGood","modifiedAttributeHighIsGood","a","b","modStackables","modNotStackables","isStackException","modifiedAttributeStackable","sort","index","array","targetMod","applyMod","typeState","effectCategory","domain","func","domainID","typeGroupID","typeSkills","skillTypeID","error","split","skills","Array","typeID","skillsBoard","skill","typeName","itemMods","chargeMods","dogmaSkill","invalidEffectIDs","extrovertEffects","typeEffectsStats","effect","modifierInfo","effectID","modifyingAttribute","effectName","iconID","getCurrentState","getInitialState","efft","initialState","currentState","find","entry","applyValue","mulValue","perValue","addValue","subValue","divValue","pow","E","useStyles","makeStyles","theme","rootAvatar","width","height","right","bottom","fontSize","fontWeight","transition","transitions","create","easing","sharp","duration","leavingScreen","SlotChargeBadge","classes","useTheme","useState","palette","text","primary","backgroundColor","background","paper","badgeColor","setBadgeColor","badgeIcon","setBadgeIcon","handleBadgeClick","useCallback","e","stopPropagation","variant","dispatchSlotsOpen","payload","slotVariant","getLoadableGroup","setActiveSlotNumber","setActiveSlot","useEffect","Number","border","property","red","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","group","isDisplyCount","Avatar","className","style","onClick","children","size","useStyle","top","SlotMetaBadge","getTechColor","metaGroupID","root","borderRadius","RecButton","Button","disabled","action","hover","disableElevation","RecMenu","open","setOpen","anchor","useRef","Fragment","ref","menuButton","Popover","anchorEl","current","transformOrigin","onClose","PaperProps","clientWidth","elevation","square","container","OverloadIcon","ActivationIcon","OfflineIcon","PassiveIcon","rootButton","minWidth","overloadButton","activationButton","green","passiveButton","org","offlineButton","grey","OverloadButton","Tooltip","title","placement","arrow","dispatchListItems","button","ActivationButton","PassiveButton","OfflineButton","SetStateMenu","isActiveModule","setIsActiveModule","activeItem","slotsOpen","getCurrentStateColor","getCurrentStateIcon","state","isAmmo","isDisabled","rootActive","rootDiv","position","left","rootAvatarHover","marginLeft","marginTop","divider","marginRight","rootAvatarDefault","stateArcBorder","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","Slot","setItem","setCharge","isHover","setIsHover","handlePressOpen","getLoadableRig","getLoadableDrone","isActive","fetchedItem","fetchedCharge","ListItem","dense","onMouseEnter","onMouseLeave","typeCount","draggable","src","feedSource","SHIP","slotIcon","ListItemText","primaryTypographyProps","noWrap","secondary","getChageCountString","secondaryTypographyProps","EFT","fitText","typeIDs","findAttributebyID","shipText","slice","indexOf","moduleText","substring","shipName","replace","moduleNames","Set","moduleTextLine","dividedByComma","dividedByX","buildFitFromText","fitTextBlocks","droneText","moduleSlots","indexOfModuleText","trimStart","moduleTextBlocks","moduleTextBlock","chage","itemName","chargeName","droneTextLine","fitTextLine","dividedBy_x","textBlock","sampleTextLine","search","typeDroneSize","typeIsHiPower","typeIsMedPower","typeIsLoPower","buildTextFromFit","join","emptyText","moduleSlot","droneSlot","buildCompareTextFromFit","blankText","drone","lodingIndicator","gre","Slots","slotCount","rawItems","setRawItems","rawCharges","setRawCharges","fetchedItems","setFetchedItems","fetchedCharges","setFetchedCharges","setters","activeSlotNumber","isLoop","setIsLoop","isLoading","setIsLoading","sessionRef","importFitText","from","wait","fitFromText","getSlotCountAtImport","items","charges","translateVariant","dispatchImportStateFlag","importSlots","listItems","loopNumber","changeState","typeIsTurretFitted","typeIsLauncherFitted","pointLoad","turretPointLoad","launcherPointLoad","isTurretFitted","isLauncherFitted","extractHardpoints","validateHardpoints","assignItemToSlot","addCountToDroneSlots","AMMO","session","all","createFetchPromises","data","sessionData","fetchedData","processFetchedData","checkData","Divider","getSlotCount","promisesItem","rawItem","promisesCharge","rawCharge","sessionPromise","fetcheditem","itemState","dispatchSlots","hashTypes","rawTypes","hashCount","types","number","ceiling","listItem","padding","listIcon","warning","ImportExportButtons","openAlert","setOpenAlert","setTitle","setText","handleImportClick","copyTextFromClipboard","setImportFitText","IDs","extractIDs","database","once","val","fittingLazyFetch","navigator","clipboard","writeText","exportFitText","Snackbar","ContentProps","getSnackbarBorder","message","ListItemIcon","autoHideDuration","permissions","query","name","permisson","readText","rootClose","enteringScreen","overflow","rootExpand","maxWidth","rootRetract","expandButton","opaqueHover","opacity","retractButton","zIndex","child","overflowX","overflowY","paddingBottom","paddingRight","importInitializeFlag","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT","importStateFlagReducer","FittingDrawer","useReducer","importStateFlag","childRef","savedSlots","JSON","parse","localStorage","getItem","tag","savedEFT","Drawer","switchExpandOpen","ButtonGroup","setExpand","expand","attrs","getDroneSlotCount","StatTextField","TextField","label","Typography","switchUnit","unitID","attributeName","defaultValue","InputProps","readOnly","disableUnderline","unit","eveUnit","displayName","Stat","setType","attributesCategories","setAttributesCategories","setTypeName","builtList","setList","etc","dividedAttributes","filteredAttributes","attributes","attributeCategoryID","filterAttributes","filtered","main","nameSpace","letterSpacing","lineHeight","align","createStatList","textDecoration","rootPaper","marginBottom","StatDrawer","tabIndex","setTabIndex","styleButton","selected","fullWidth","hidden","margin","transform","shortest","expandOpen","nested","paddingLeft","spacing","NestedList","React","opened","image","setImage","handleClick","itemData","isMounted","iconTypeID","iconFileName","storage","getDownloadURL","url","fetch","arrayBuffer","convertArrayBufferToBase64","List","ListItemAvatar","marketGroupName","IconButton","clsx","Collapse","in","timeout","unmountOnExit","binary","call","Uint8Array","String","fromCharCode","btoa","ItemSelection","handleItemClick","outboundSetItem","typeMetaGroupID","headFilterInvTypesTable","table","invTypesTable","allowedAttributes","allowedAttribute","toLowerCase","bodyFilterInvTypesTable","headCreateEveList","rootMarketGroupID","filterInvTypesTable","bodyCreateEveList","marketGroupTable","validateTables","marketGroupID","hasTypes","isTerminalGroup","childrenTypeIDs","swapped","len","i","tmp","bubbleSortByMetaLevel","findChildrenInvTypes","renderChildrenInvTypes","parentGroupID","findChildrenMarketGroup","renderedChildrenMarketGroups","renderedChildrenMarketGroup","isArrayEmpty","eveListConfig","renderChildrenMarketGroup","defalutEveListConfigStructure","paddingTop","memo","setMarketGroupTable","setInvTypesTable","builtListStructure","setBuiltListStructure","evelistConfigUpToDate","nosave","createEveList","stringify","hashFilter","deleteButton","ammoDeleteButton","orange","showInfoButton","blue","addButton","loopOrNotButton","DeleteButton","AmmoDeleteButton","activeCharge","ShowInfoButton","activeSlot","slotNumber","AddButton","LoopOrNotButton","liftedIsLoop","setLiftedIsLoop","ListDrawerButtons","Grid","xs","textField","textFieldInputLabel","textFieldinputLabel","popperVisible","popperHidden","popperPaper","popperChild","maxHeight","SearchTextField","withStyles","borderWidth","borderLeftWidth","ListDrawerSearchbar","searchOpen","setSearchOpen","searchVisible","setSearchVisible","searchText","setSearchText","handleSearchTextChange","target","ClickAwayListener","onClickAway","InputLabelProps","inputProps","onChange","onFocus","Popper","Paper","mutateEveListConfig","mutatedAllowedAttributes","ListDrawer","filters","setWidth","getEveListConfig","getRootMarketGroupID","innerWidth","handleRender","addEventListener","removeEventListener","getMiscSlotMarketGroupID","setActiveItem","setActiveCharge","getActiveSlot","fitID","generateFilter","EveMath","Cmax","Cnow","Tchg","sqrt","summary","owner","onBoardVector","situation","vector","hostileVector","distanceVector","x","anchors","anchor1X","y","anchor1Y","distance","trackingValue","range","tracking","signatureResolution","signatureRadius","misc","_angularVelocity","_trackingPart","getRangeModifier","toFixed","optimalRange","isSentry","getTurretAcurracy","targetUnitVector","targetVelocity","propulsion","orbitVelocity","droneAccuracyModifier","absoluteVelocity","droneVector","droneSituationsummary","orbitRange","explosionRadius","explosionVelocity","damageReductionFactor","simplePart","complexPart","min","randomDamageModifier","random","optimal","falloff","falloffRange","denominator","numerator","max","_distancePart","maximumVelocity","angularVelocity","fallOff","perpendicularVector","perpendicularUnitVector","unitVector","velocityVector","propCapacitor","capacitor","damage","defense","stableLevel","capacitor_stableLevel","engineering","resource","miscellaneous","turretLauncherDamage","effective","alpha","turretLauncherRange","droneDamage","turrets","launchers","drones","turretLauncherDamageSummaries","damage_getSummary","damagePerAct","maxDps","activationInfo","effectiveDps","e_duration","overlappingRange","droneSummaries","damageSummaries","ambientChargeRate","boosterChargeRate","activationUseRate","cus","capacitorUsePerSec","dominID","Tnow","capacitorDeltas","capacitorLevel","delta","getAmbientChargeRateMath","positiveDeltas","capacitorDelta","capacitorBonus","resistance","defense_resistance","active","armor","HP","EM","TH","KI","EX","shield","structure","shieldBonus","armorBonus","structureBonus","pg","load","output","cpu","pgLoad","pgOutput","cpuLoad","cpuOutput","turret","launcher","calibration","droneBandwidth","droneBay","droneActive","turretHardpoint","launcherHardpoint","droneCapacity","mountedTurrets","mountedLaunchers","mountedCalibration","mountedDroneBandwidth","droneVolume","sensor","scanResolution","maximumLockedTarget","maximumTargetingRange","strength","gravimetric","magnetometric","ladar","radar","inertialModifier","warpSpeedMultiplier","cargoBayCapacity","gravimetricSensorStrength","magnetometricSensorStrength","ladarSensorStrength","radarSensorStrength","Infinity","activationLimit","reloadTime","activationCost","activationTime","defaultStat","isActivated","damage_damagePerAct","getActivationInfo","damage_range","damageModifier","EM_damage","TH_damage","KI_damage","EX_damage","isDrone","chargeInfo","capacitor_getChargeInfo","bonusRate","boosterSlot","capacitor_getBonusPerAct_self","shipAttrs","armorHP","armorEM","armorTH","armorKI","armorEX","shieldHP","shieldEM","shieldTH","shieldKI","shieldEX","shieldChargeRate","structureHP","structureEM","structureTH","structureKI","structureEX","defense_getSummary","bonusPerAct","defense_getBonusPerAct","activePropulsionModules","isPropulsionModule","shipBaseMaximumVelocity","propModuleMaximumVelocityBonusMul","propModuleThrust","propModuleMassAdd","shipMass","mass","thisEffectsNeedCharge","capPrioritySet","alwaysOn","mostTrivial","turretDamage","shieldHarden","shieldBoost","shieldBoostAncillaryFueled","shieldBoostAncillary","armorHardener","armorBoost","armorBoostAncillaryFueled","armorBoostAncillary","damageControl","structureBoost","capacitorNeutralizer","capacitorTransmitter","Summary","self","booster_bonusPerAct","transfer_bonusPerAct","neut_bonusPerAct","isNosferatuBloodRaiderOverriden","isCapacitorTransmitter","isNosferatu","updateSummaries","summarizedSlots","shipSummary","getSummary_ship","assign","_slot","SimFit","toPath","path","activationState","addSummaries","_slots","addSummaries_duplicateSlots","_droneSlots","addSummaries_duplicateDroneSlots","slotString","moduleSummary","heatDamage","activationDataSet","createActivationDataSet","effectSummary","getSummary_damage","getSummary_defense","getSummary_capacitor","activationPriority","getActivationPriority","droneSumamry","getSummary_drone","situation_decription","lastActivation","nextActivation","nextActivationTick","activationLeft","shieldHardener","targetSlot","p","c","Simulator","fit1","summarizedSlots1","onboard","summarizedSlots2","hostile","HAL","manageActivation_getCapUsageRateByPriorityLevel","schedule","getSchedules","manageSchedules","simulate_oneTick","tick","simulate_capacitor","simulate_shield","activateDamage","activateDefense","activateCapacitor","capacitorState","capacitorInfo","shieldState","shieldInfo","situationalModifiedSummary","activateDamage_getAlpha","shieldDamage","remaining","appplied","armorDamage","structureDamage","shot","damageCapMultiplier","alpha_damaging","EM_applied","EM_damaging","TH_applied","TH_damaging","KI_applied","KI_damaging","EX_applied","EX_damaging","alpha_applied","EM_remaining","EM_blocked","TH_remaining","TH_blocked","KI_remaining","KI_blocked","EX_remaining","EX_blocked","alpha_blocked","situationalMul","droneAccuracy","getDroneAccracy","getTurretRandomDamageModifier","turretAccuracy","launcherAccracy","getLauncherAccuracy","getLauncherDamageModifier","ownerCapacitorHP","targetCapacitorHP","bonusPerActOwner","bonusPerActTarget","maxBonusPerAct","symmetricBonusPerAct","rangeModifier","simulateActivation","info","summarizedSlot","fragment","time","schedules","manageSchedules_validate","isCapacitorValidated","manageSchedules_validateCapacitor","isStructureValidated","manageSchedules_validateStructure","rootStructureHP","capUsageRateAccumulator","capUsageRate","_target","_summary","currentTime","warn","subSecSchedule","initialSlots","slotsReducer","initialSlotsOpen","STAT","slotsOpenReducer","initialListItems","listItemsReducer","Drawers","setFit","setExportFitText","appliedFit","setFitID","setSlots","appliedFitExportText","appliedSlotsModified","giveSlotToStatDrawer","ArmorIcon","ShieldIcon","StructureIcon","EhpIcon","rootGrid","progress","childGrid","display","alignItems","justifyContent","description","LinearProgressLabel","LinearProgressFixed","bar","LinearProgress","Icon","typographyProps","ResistanceProgressLabel","forwardRef","innerRef","getLabel","getDescription","blueSecondary","redSecondary","greySecondary","orgSecondary","damageType","ehpFactor","activeBonus","scrollbarWidth","outer","document","createElement","visibility","msOverflowStyle","body","appendChild","inner","_scrollbarWidth","offsetWidth","parentNode","removeChild","DamageTypeList","list","component","damgeTypes","setDamageType","DamageTypeProgressLabel","DamageTypeListOpen","setDamageTypeListOpen","Resistance","stat","TurretIcon","strokeLinecap","LauncherIcon","CalibrationIcon","DroneBayIcon","DroneBandwidthIcon","boldTypography","GridBoldTypography","flexBasis","ResourcesMiscellaneousListItem","setMisc","justify","TextFieldmaximumVelocity","TurretHardpoint","LauncherHardpoint","Calibration","DroneBandwidth","isError","DroneBay","rootChild","Hardpoints","setLoad","setCapacity","alignContent","sm","AlphaIcon","DroneDamageSVG","rootPostIt","optimalRangeLabel","rangeFont","PostIt","share","borderRight","OptimalRangeBar","optimalRangeShare","FalloffRangeBar","falloffRangeShare","DamageRangeListItem","shares","setShares","rangeMax","rangeSum","getShares","WeaponDps","WeaponAlpha","DroneDps","Damage","Cpu","getPercent","getNum","Powergrid","Engineering","percent","CapacitorChargeIcon","tooltip","Capacitor","StatsSummary","setStat","editButton","EditButton","FitCard","isInitialRender","isSyncing","dispatchDrawersOpen","drawersOpen","Card","hostileAnchorInitial","anchor2X","anchor2Y","pX","pY","hostileAnchorReducer","Error","onBoardAnchorInitial","onBoardAnchorReducer","ShipCanvas","hostileAnchor","dispatchHostileAnchor","onBoardAnchor","dispatchOnBoardAnchor","setDistanceVector","setDistance","stageWheel","setStageWheel","stageScale","setStageScale","stagePoint","setStagePoint","isStageDrragable","setStageDraggable","vectorX","vectorY","_distanceVector","_distance","dispatchSituation","setSituation","handleResetClick","handleMagnifyButton","handleMinifyButton","handleStageDrragable","innerHeight","onWheel","handleWheel","scaleX","scaleY","offsetX","angleBetweenTwoVectors","pointerLength","pointerWidth","points","radius","onDragMove","handleHostileAnchor1OnDragMove","onDragEnd","handleHostileAnchor2OnDragMove","handleHostileAnchor2OnDragEnd","handleOnBoardAnchor1OnDragMove","on","handleOnBoardAnchor2OnDragMove","handleOnBoardAnchor2OnDragEnd","dash","evt","preventDefault","oldScale","getStage","newScale","deltaY","vectorLength","cosValue","innerProduct","acos","PI","modeButton","modeButtonActive","Links","href","Settings","isDark","setIsDark","initialDrawersOpen","defaultDrawersOpen","drawersOpenReducer","InitialCard","slots1","setSlots1","flexDirection","test","InitialD","json","cJSON","decompress","lightTheme","createMuiTheme","light","dark","blueGrey","darkTheme","overrides","MuiPaper","elevation3","boxShadow","Initialtheming","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","logEvent","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"+UAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DClBS,I,+ECATC,EAAYC,EAAQ,KAELC,E,WACnB,WAAYC,GAAa,oBACvBC,KAAKC,MAAQ,IAAIL,EAAU,CACzBM,OAAQH,EACRI,YAA0B,GAAbJ,EACbK,WAAW,I,gDAGXC,EAAKC,GACFN,KAAKC,MAAMM,IAAIF,IAAML,KAAKC,MAAMO,IAAIH,EAAKC,K,0BAI5CD,EAAKI,GAAgB,IAAD,OAChBH,EAAQN,KAAKC,MAAMM,IAAIF,GAC7B,OAAIC,EAEKI,QAAQC,QAAQL,GAGlBG,IAAgBG,MAAK,SAACC,GAG3B,OADA,EAAKZ,MAAMO,IAAIH,EAAKQ,GACbA,O,2BAGNR,GAAM,IAAD,OACFC,EAAQN,KAAKC,MAAMM,IAAIF,GAC7B,OAAIC,EAEKI,QAAQC,QAAQL,GAElB,IAAII,SAAQ,SAACC,EAASG,IAC3B,SAASC,EAAMC,EAAOf,GACpB,OAAO,WACL,IAAMK,EAAQL,EAAMM,IAAIF,GACxB,QAAcY,IAAVX,GAAuBU,EAAQ,IAEjC,OAAOL,EAAQL,GAGjBY,WAAWH,EAAMC,IAASf,GAAQ,MAGtCc,CAAM,EAAG,EAAKd,MAAdc,Q,0BAIAI,GACFnB,KAAKC,MAAMmB,IAAID,K,8BAIfnB,KAAKC,MAAMoB,e,4HCpDFC,EAAe,SAACC,GAAD,OAC1B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,gCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEH,EAAE,wCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEH,EAAE,yCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAKhBC,EAAc,SAACN,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,iCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEH,EAAE,kCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAKhBE,EAAc,SAACP,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,iCACFC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAKhBG,EAAc,SAACR,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,4OACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,2OACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,+OACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,0OACFO,KAAMT,EAAMK,OAAS,cAIdK,EAAY,SAACV,GAAD,OACvB,kBAACC,EAAA,EAAD,KACE,0BACEU,GAAG,IACHC,GAAG,IACHC,GAAG,KACHC,GAAG,KACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,KACHC,GAAG,IACHC,GAAG,KACHC,GAAG,KACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,KACHC,GAAG,KACHC,GAAG,IACHC,GAAG,KACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,KACHC,GAAG,KACHC,GAAG,KACHC,GAAG,KACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAqChBU,GAhCVd,EAAA,EAgCqB,SAACD,GAAD,OACtB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,6FACFO,KAAK,OACLN,YAAY,IACZC,OAAQJ,EAAMK,OAAS,eAIhBW,EAAc,SAAChB,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,+JACFO,KAAK,OACLN,YAAY,IACZC,OAAQJ,EAAMK,OAAS,c,4ECzJRY,E,2HAugBkBC,GACnC,GAAIA,EAAYC,cAAgBC,OAAQ,MAAO,GAE/C,IAAMC,EAAa,YAAAJ,EAAG,IAAH,IAAwBC,GACrCI,EAAuB,YAAAL,EAAG,GAAH,GAAkCI,GAK/D,OAJ6BD,OAAOG,OAAOD,GACxCE,QAAO,SAACC,EAAKC,GAAN,OAAeD,EAAIE,OAAOD,KAAO,IACxCE,KAAI,SAACC,GAAD,sBAAeA,EAAf,CAAoBC,WAAOpC,EAAWqC,gBAAYrC,W,qkCA9gBxCuB,EACZe,mBAAqB,SAAUC,GAAO,IAAD,EAC1C,IAAKA,IAASA,EAAKC,OAASD,EAAKE,OAAQ,OAAO,EAEhD,IAAMD,EAAOD,EAAKC,KACZC,EAASF,EAAKE,OAGdC,EAAiB,YAAAnB,EAAG,IAAH,IAA8BiB,EAAM,KACrDG,EAAmB,YAAApB,EAAG,IAAH,IAA8BkB,EAAQ,KAC/D,GACIC,GACAC,GACFD,EAAerD,QAAUsD,EAAiBtD,MAE1C,OAAO,EAGT,IAAMuD,EAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,KAC3CV,KAAI,SAACW,GACJ,IAAMC,EAAO,YAAAvB,EAAG,IAAH,IAA8BiB,EAAMK,GACjD,OAAKC,EACOA,EAAKzD,WADN,KAGZ0D,QAAO,SAAC1D,GAAD,OAAWA,KACrB,GAAgC,IAA5BuD,EAAiBI,OAAc,OAAO,EAE1C,IAAKJ,EAAiBK,SAASR,EAAOS,SAAU,OAAO,EAEvD,IAAMC,EAAeX,EAAKY,SACpBC,EAAeZ,EAAOa,OACtBC,EAAc,UAAG,YAAAhC,EAAG,IAAH,IAA8BiB,EAAM,WAAvC,aAAG,EAAyCnD,MAC1DmE,EAAuBD,EACzBF,EAAeE,EACf,EAEJ,QADwBE,KAAKC,MAAMP,EAAeK,IAC3B,IApCNjC,EAyCZoC,gBAAkB,CACvBC,UAAW,CACTC,MAAM,EACNC,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,YAAY,IAjDG5C,EAoDZ6C,SAAW,SAAUC,EAAKC,EAAUC,GACzC,IAAMC,EACM,eACLjD,EAAIoC,gBAAgBC,UADhB,GAEJW,EAAcX,WAIrB,MAAO,CACL,OACA,YACA,YACA,WACA,WACA,WACA,cACA9B,QAAO,SAACC,EAAK0C,GACb,OAAmC,IAA/BD,EAAiBC,GACZ1C,EAAIE,OAAO,YAAAV,EAAG,GAAH,GAAoB8C,EAAII,GAAWH,IAC3CvC,IACX,K,sBAxEcR,E,qBA0EM,SAAUmD,EAAOJ,GACxC,OAAKI,EACEA,EAAMxC,KAAI,SAACK,GAChB,OAAO+B,EAAS/B,MAFC,MA3EFhB,EAiFZoD,MAAQ,SAAUN,GACvB,IAAMO,EAAkB,YAAArD,EAAG,IAAH,IAAkB8C,GAEpCQ,EAAQ,YAAAtD,EAAG,IAAH,IAAiBqD,GACzBE,EAAc,YAAAvD,EAAG,GAAH,GAAkCsD,GAEtD,OAAO,YAAAtD,EAAG,GAAH,GAAgBqD,EAAiBE,I,sBAvFvBvD,E,qBA0FE,SAAU8C,EAAKS,GAClC,IAAMjB,EAAO,YAAAtC,EAAG,GAAH,GAAqB8C,EAAIR,KAAMiB,GACtChB,EAAY,YAAAvC,EAAG,GAAH,GAAsB8C,EAAIP,UAAWgB,GACjDf,EAAY,YAAAxC,EAAG,GAAH,GAAsB8C,EAAIN,UAAWe,GACjDd,EAAW,YAAAzC,EAAG,GAAH,GAAsB8C,EAAIL,SAAUc,GAKrD,MAAO,CACLjB,OACAC,YACAG,SAPe,YAAA1C,EAAG,GAAH,GAAsB8C,EAAIJ,SAAUa,GAQnDd,WACAD,YACAG,SATe,YAAA3C,EAAG,GAAH,GAAsB8C,EAAIH,SAAUY,GAUnDX,WATiB,YAAA5C,EAAG,GAAH,GAAsB8C,EAAIF,WAAYW,O,sBAjGxCvD,E,qBA6GoB,SAAUsD,GAC/C,IAAMC,EAAc,GACdC,EAAe,YAAAxD,EAAG,GAAH,GAAmCsD,GAaxD,OAXAA,EAAMG,SAAQ,SAAC7C,GAGb,GAFK2C,EAAY3C,EAAI8C,uBACnBH,EAAY3C,EAAI8C,qBAAuB,KACpB,IAAjB9C,EAAI+C,SAAmBJ,EAAY3C,EAAI8C,qBAAqBE,KAAKhD,OAChE,CACH,IAAMiD,EAAa,YAAA7D,EAAG,IAAH,IAAoBY,EAAK4C,GAC5CK,EAAU,UAAe,EACzBN,EAAY3C,EAAI8C,qBAAqBE,KAAKC,OAIvCN,K,sBA5HUvD,E,qBA8HqB,SAAUsD,GAChD,IAAME,EAAe,GAQrB,OANAF,EAAMG,SAAQ,SAAC7C,GACR4C,EAAa5C,EAAI8C,uBACpBF,EAAa5C,EAAI8C,qBAAuB,IAC1CF,EAAa5C,EAAI8C,qBAAqBE,KAAKhD,MAGtC4C,K,sBAvIUxD,E,qBAyIQ,SAAUmD,EAAOK,GAC1C,OAAOL,EAAMxC,KAAI,SAACK,GAChB,IAAMC,EAAOD,EAAKC,KACZC,EAASF,EAAKE,OACpB,OAAO,eACFF,EADL,CAEEC,KAAM,YAAAjB,EAAG,GAAH,GAAqBiB,EAAMuC,GACjCtC,OAAQ,YAAAlB,EAAG,GAAH,GAAqBkB,EAAQsC,W,sBAhJxBxD,E,qBAoJO,SAAU8D,EAAMN,GACxC,IAAKM,IAASA,EAAKC,oBAAqB,OAAOD,EAE/C,IAAMC,EAAsBD,EAAKC,oBAAoBpD,KAAI,SAACqD,GACxD,OAAO,YAAAhE,EAAG,GAAH,GAA0B8D,EAAME,EAAWR,MAGpD,OAAO,eAAKM,EAAZ,CAAkBC,oBAAqBA,O,sBA3JtB/D,E,qBA6JY,SAAU8D,EAAMvC,EAAMiC,GACnD,IAAM/C,EAAO+C,EAAajC,EAAK0C,aAC/B,IAAKxD,GAAwB,IAAhBA,EAAKgB,OAAc,OAAOF,EAEvC,IAAIzD,EAAQyD,EAAKzD,MACboG,EAAW,GACT3C,EAAKV,OAAWU,EAAKT,aAAYqD,QAAQC,IAAI,QAAS,gBAC5D,IAAMvD,EAAQ,GACRC,EAAa,GA8BnB,OA5BA,YAAAd,EAAG,IAAH,IACES,EAAKE,KAAI,SAAC0D,GAAD,OAAa,YAAArE,EAAG,IAAH,IAAoBqE,EAASb,OACnDC,SAAQ,SAAC7C,GACT,GAAI,YAAAZ,EAAG,IAAH,IAAoC8D,EAAMlD,GAAM,CAClD,IAAM0D,EAAYxG,EAClBA,EAAQ,YAAAkC,EAAG,IAAH,IACNlC,EACA8C,EAAI2D,wBACJ3D,EAAI4D,UACJN,GAEFrD,EAAM+C,KAAN,eACKhD,EADL,CAEEsD,WACA5D,OAAQ,CACNgE,UAAWA,EACXG,aAAc3G,EACd4G,iCAAkC,YAAA1E,EAAG,IAAH,IAChCY,EAAI2D,wBACJ3D,EAAI4D,UACJN,QAIkB,IAApBtD,EAAI+D,aAAsBT,SACzBpD,EAAW8C,KAAKhD,MAGlB,eAAKW,EAAZ,CAAkBzD,MAAOA,EAAO+C,QAAOC,kB,sBAnMtBd,E,sBAqMM,SAAUY,EAAK4C,GACtC,GACE5C,EAAIgE,uBAAyBhE,EAAI8C,sBAChB,IAAjB9C,EAAI+C,SAEJ,OAAO/C,EAET,IAAMH,EAAO+C,EAAa5C,EAAIgE,sBAC9B,IAAKnE,GAAwB,IAAhBA,EAAKgB,OAAc,OAAOb,EAEvC,IAAI9C,EAAQ8C,EAAI2D,wBACZL,EAAW,GACTtD,EAAIC,OAAWD,EAAIE,aAAYqD,QAAQC,IAAI,QAAS,gBAC1D,IAAMvD,EAAQ,GACRC,EAAa,GA+BnB,OA7BA,YAAAd,EAAG,IAAH,IACES,EAAKE,KAAI,SAAC0D,GAAD,OAAa,YAAArE,EAAG,IAAH,IAAoBqE,EAASb,OACnDC,SAAQ,SAACI,GACT,GAAI,YAAA7D,EAAG,IAAH,IAAmCY,EAAKiD,GAAa,CACvD,IAAMS,EAAYxG,EAClBA,EAAQ,YAAAkC,EAAG,IAAH,IACNlC,EACA+F,EAAWU,wBACXV,EAAWW,UACXN,GAGFrD,EAAM+C,KAAN,eACKC,EADL,CAEEK,WACA5D,OAAQ,CACNgE,UAAWA,EACXG,aAAc3G,EACd4G,iCAAkC,YAAA1E,EAAG,IAAH,IAChC6D,EAAWU,wBACXV,EAAWW,UACXN,QAIyB,IAA3BL,EAAWc,aAAsBT,SAChCpD,EAAW8C,KAAKC,MAGlB,eAAKjD,EAAZ,CAAiB2D,wBAAyBzG,EAAO+C,QAAOC,kB,sBAlPvCd,E,sBAoPW,SAAUS,GACtC,IAAMoE,EAAYpE,EAAK,GAEnBqE,EAAc,kBAAM,GAClBC,EAAaF,EAAUG,6BACV,IAAfD,EACFD,EAAc,SAACG,EAAGC,GAChB,OAAID,EAAET,YAAcU,EAAEV,UACbU,EAAEX,wBAA0BU,EAAEV,wBAEnB,eAAhBU,EAAET,WAA8C,gBAAhBS,EAAET,UAC7BU,EAAEX,wBAA0BU,EAAEV,wBAA0B,EAE7C,eAAhBW,EAAEV,WAA8C,gBAAhBU,EAAEV,UAC7B,EAAIU,EAAEX,wBAA0BU,EAAEV,6BAD3C,IAGoB,IAAfQ,IACPD,EAAc,SAACG,EAAGC,GAChB,OAAID,EAAET,YAAcU,EAAEV,UACbS,EAAEV,wBAA0BW,EAAEX,wBAEnB,eAAhBU,EAAET,WAA8C,gBAAhBS,EAAET,UAC7B,EAAIS,EAAEV,wBAA0BW,EAAEX,wBAEvB,eAAhBW,EAAEV,WAA8C,gBAAhBU,EAAEV,UAC7BS,EAAEV,wBAA0BW,EAAEX,wBAA0B,OADjE,IAGJ,IAAMY,EAAgB,GAChBC,EAAmB,GAoBzB,OAnBA3E,EAAKgD,SAAQ,SAAC7C,GAEQ,WAAlBA,EAAI4D,WACc,WAAlB5D,EAAI4D,WACc,YAAlB5D,EAAI4D,YACqB,IAAzB5D,EAAIyE,iBAEJF,EAAcvB,KAAKhD,GAChBwE,EAAiBxB,KAAKhD,OAKN,IAFAiE,EAAUS,6BAG/BF,EAAiBG,KAAKT,GACtBM,EAAiB3B,SAAQ,SAAC7C,EAAK4E,EAAOC,GACpCA,EAAMD,GAAN,eAAoB5E,EAApB,CAAyB+D,aAAa,QAGnCQ,EAAczE,OAAO0E,M,sBApSXpF,E,sBAsSqB,SAAU0F,EAAWC,GAAW,IAAD,IACrE,IAAK,YAAA3F,EAAG,IAAH,IAAqC2F,GAcxC,MAX2B,eAAvBA,EAASC,WACmB,aAA5BD,EAASE,gBAGX1B,QAAQC,IACN,QADF,UAEKuB,EAASC,UAFd,iBAEgCD,EAASE,gBACvCH,EACA,KACAC,IAEG,EAET,OAAQA,EAASG,QACf,IAAK,SACH,OAAQH,EAASI,MACf,IAAK,eACH,OAAOL,EAAUM,WAAaL,EAASK,SAI7C,IAAK,SACH,OAAQL,EAASI,MACf,IAAK,eACH,MAA8B,SAAvBL,EAAUM,SACnB,IAAK,wBACH,OAAON,EAAUO,cAAgBN,EAAShE,QAC5C,IAAK,gCACH,cAAO+D,QAAP,IAAOA,GAAP,UAAOA,EAAWQ,kBAAlB,aAAO,EAAuBxE,SAASiE,EAASQ,aAItD,IAAK,SACH,OAAQR,EAASI,MACf,IAAK,6BACH,cAAOL,QAAP,IAAOA,GAAP,UAAOA,EAAWQ,kBAAlB,aAAO,EAAuBxE,SAASiE,EAASQ,aAItD,QAEE,OADAhC,QAAQiC,MAAM,yBAA0BV,EAAW,KAAMC,IAClD,M,sBAnVM3F,E,sBAsVsB,SAAU8D,EAAMlD,GACvD,IAAK,YAAAZ,EAAG,IAAH,IAAqCY,GAWxC,MATsB,eAAlBA,EAAIgF,WAAqD,aAAvBhF,EAAIiF,gBAExC1B,QAAQC,IACN,QADF,UAEKxD,EAAIgF,UAFT,iBAE2BhF,EAAIiF,gBAC7B/B,EACA,KACAlD,IAEG,EAGT,YADsBnC,IAAlBqF,EAAKkC,UAAwB7B,QAAQC,IAAI,mBAAoBN,GACzDlD,EAAIkF,QACV,IAAK,SACH,OAAQlF,EAAImF,MACV,IAAK,eACH,OAAOjC,EAAKkC,WAAapF,EAAIoF,SAInC,IAAK,SACH,OAAQpF,EAAImF,MACV,IAAK,eACH,MAAyB,SAAlBjC,EAAKkC,SACd,IAAK,wBACH,OAAOlC,EAAKnC,UAAYf,EAAIe,QAC9B,IAAK,gCACH,QACImC,EAAKoC,YAAcpC,EAAKoC,WAAWxE,SAASd,EAAIuF,aAK1D,IAAK,SACH,OAAQvF,EAAImF,MACV,IAAK,6BACH,QACIjC,EAAKoC,YAAcpC,EAAKoC,WAAWxE,SAASd,EAAIuF,aAEtD,IAAK,eACH,OAAO,EAIb,IAAK,UACH,OAAQvF,EAAImF,MACV,IAAK,eACH,OACEjC,EAAKkC,SAASK,MAAM,KAAK,KAAOzF,EAAIoF,SAASK,MAAM,KAAK,IACxDvC,EAAKkC,SAASK,MAAM,KAAK,KAAOzF,EAAIoF,SAASK,MAAM,KAAK,GAKhE,IAAK,cACH,OAAO,EACT,QAEE,OADAlC,QAAQiC,MAAM,0BAA2BtC,EAAM,KAAMlD,IAC9C,M,sBAnZMZ,E,sBAsZuB,SAAUY,GAClD,OAAQA,EAAIgF,WACV,IAAK,WACH,OAAO,EACT,IAAK,aACH,OAAQhF,EAAIiF,gBACV,IAAK,WACH,OAAO,EACT,QACE,OAAO,EAEb,IAAK,UACH,OAAQjF,EAAIiF,gBACV,IAAK,WACL,IAAK,SACL,IAAK,aACH,OAAO,EACT,QACE,OAAO,EAEb,IAAK,UAGC,OAFIjF,EAAIiF,gBAED,EAEb,QACE,OAAO,M,sBAhbM7F,E,sBAobI,SAAU8C,GAU/B,MAAO,CACLwD,OAVa,YAAAtG,EAAG,IAAH,IAAyB8C,EAAIwD,QAW1ChE,KAVQ,eAAQQ,EAAIR,KAAZ,CAAkB0D,SAAU,SAWpCzD,UAVgB,YAAAvC,EAAG,IAAH,IAAwB8C,EAAIP,UAAW,aAWvDG,SAVe,YAAA1C,EAAG,IAAH,IAAwB8C,EAAIJ,SAAU,YAWrDD,SAVe,YAAAzC,EAAG,IAAH,IAAwB8C,EAAIL,SAAU,YAWrDD,UAVgB,YAAAxC,EAAG,IAAH,IAAwB8C,EAAIN,UAAW,aAWvDG,SAVe,YAAA3C,EAAG,IAAH,IAAwB8C,EAAIH,SAAU,YAWrDC,WAViB,YAAA5C,EAAG,IAAH,IAAwB8C,EAAIF,WAAY,kB,sBA5b1C5C,E,sBAycU,SAAUmD,EAAOD,GAC5C,GAAKC,GAASA,EAAMjD,cAAgBqG,MAEpC,OAAOpD,EAAMxC,KAAI,SAACK,EAAMwE,GAOtB,MAAO,CAAEvE,OANMD,EAAKC,KAAKuF,QAAZ,eACJxF,EAAKC,KADD,CACO+E,SAAS,GAAD,OAAK9C,EAAL,YAAiBsC,EAAjB,WAKbtE,SAHEF,EAAKE,OAAOsF,QAAd,eACNxF,EAAKE,OADC,CACO8E,SAAS,GAAD,OAAK9C,EAAL,YAAiBsC,EAAjB,oB,sBAjdfxF,E,sBAsdW,SAAUyG,GACtC,OAAKA,GAAeA,EAAYvG,cAAgBqG,WAGT9H,IAA5BgI,EAAY,GAAGT,SACOS,EAG1BA,EAAY9F,KAAI,SAAC+F,GAAD,sBAClBA,EADkB,CAErBV,SAAS,SAAD,OAAWU,EAAMC,eARLF,K,sBAxdLzG,E,sBAoeG,SAAU8C,GAE9B,IAAMwD,EAAS,YAAAtG,EAAG,IAAH,IAAwB8C,EAAIwD,QACrChE,EAAO,YAAAtC,EAAG,IAAH,IAA4B8C,EAAIR,MAAM,GAC7CC,EAAY,YAAAvC,EAAG,IAAH,IAAuB8C,EAAIP,WAAW,GAClDG,EAAW,YAAA1C,EAAG,IAAH,IAAuB8C,EAAIJ,UACtCD,EAAW,YAAAzC,EAAG,IAAH,IAAuB8C,EAAIL,UACtCD,EAAY,YAAAxC,EAAG,IAAH,IAAuB8C,EAAIN,WACvCG,EAAW,YAAA3C,EAAG,IAAH,IAAuB8C,EAAIH,UACtCC,EAAa,YAAA5C,EAAG,IAAH,IAAuB8C,EAAIF,YAE9C,MAAM,GAAN,mBACK0D,GADL,YAEKhE,GAFL,YAGKC,GAHL,YAIKG,GAJL,YAKKD,GALL,YAMKD,GANL,YAOKG,GAPL,YAQKC,O,sBAvfY5C,E,sBA0fS,SAAUmD,GAAkC,IAA3BkC,EAA0B,wDACrE,IAAKlC,GAASA,EAAMjD,cAAgBqG,MAAO,MAAO,GAElD,IAAM9F,EAAO,GAQb,OAPA0C,EAAMM,SAAQ,SAACzC,GACb,IAAM4F,EAAW,YAAA5G,EAAG,IAAH,IAA4BgB,EAAKC,KAAMoE,GAClDwB,EAAa,YAAA7G,EAAG,IAAH,IAA4BgB,EAAKE,QAAQ,GACtD0F,GAAUA,EAASnD,SAAQ,SAAC7C,GAAD,OAASH,EAAKmD,KAAKhD,MAC9CiG,GAAYA,EAAWpD,SAAQ,SAAC7C,GAAD,OAASH,EAAKmD,KAAKhD,SAGnDH,K,sBArgBUT,E,sBAkhBU,SAAUC,GACrC,OAAIA,EAAYC,cAAgBqG,MACVtG,EAIfE,OAAOG,OAAOL,GAAaM,QAAO,SAACC,EAAKsG,GAC7C,IACMxD,EADO,YAAAtD,EAAG,IAAH,IAA4B8G,GAAY,GAClCnG,KAAI,SAACC,GAAD,sBAClBA,EADkB,CAErBoF,SAAS,SAAD,OAAWpF,EAAI+F,eAEzB,OAAOnG,EAAIE,OAAO4C,KACjB,O,sBA/hBctD,E,sBAiiBc,SAAU8D,GAAiC,IAA3BuB,EAA0B,wDACzE,IAAKvB,EAAM,MAAO,GAGlB,IAAMiD,EAAmB,CAAC,KAGpBC,EAAqBlD,EAAKmD,iBAC5BnD,EAAKmD,iBAAiBzF,QACpB,SAAC0F,GAAD,YAC0BzI,IAAxByI,EAAOC,eACNJ,EAAiBrF,SAASwF,EAAOE,aAEtC,GAEE3G,EAAO,GA8Bb,OA7BAuG,EAAiBvD,SAAQ,SAACyD,GACxBA,EAAOC,aAAa1D,SAAQ,SAAC7C,GAC3B,IAAMyG,EAAqB,YAAArH,EAAG,IAAH,IACzB8D,EACAlD,EAAIgE,sBAEAL,EAA4B3D,EAAI2D,wBAClC3D,EAAI2D,wBADwB,OAE5B8C,QAF4B,IAE5BA,OAF4B,EAE5BA,EAAoBvJ,MAExB2C,EAAKmD,KAAL,aACEoC,SAAUlC,EAAKkC,SACfW,SAAU7C,EAAK6C,UACZ/F,EAHL,CAIE0G,WAAYJ,EAAOI,WACnBzB,eAAgBqB,EAAOrB,eACvBtB,wBAAyBA,EACzBiC,OAAQ1C,EAAK0C,OACbZ,UAA2B,KAAhB9B,EAAKyD,OAAgBzD,EAAK8B,UAAY,UACjDK,YAAanC,EAAKnC,QAClBuE,WAAYpC,EAAKoC,WACjBb,sBAC2B5G,IAAzBmC,EAAIyE,iBACAzE,EAAIyE,iBACJA,WAKL5E,KA9kBUT,EAglBZwH,gBAAkB,SAAU1D,GACjC,OAAO,YAAA9D,EAAG,IAAH,IAA0B8D,IAjlBhB9D,EAmlBZyH,gBAAkB,SAAU3D,GACjC,GAAKA,GAASA,EAAKmD,iBACnB,OAAoB,KAAhBnD,EAAKyD,OAAsB,UAExBzD,EAAKmD,iBAAiB1G,QAAO,SAACC,EAAKkH,GACxC,MAC2B,eAAxBA,EAAK7B,gBAAqD,KAAlB6B,EAAKN,UACtB,WAAxBM,EAAK7B,eAGE,aAEFrF,IACN,Y,sBAhmBcR,E,sBAkmBY,SAAU8D,GACvC,GAAKA,GAAiB,IAATA,EAAb,CACA,IAAKA,EAAKmD,kBAAoC,KAAhBnD,EAAKyD,OAAe,MAAO,UACzD,IAAMI,EAAe7D,EAAKmD,iBAAiB1G,QAAO,SAACC,EAAKkH,GACtD,MAC2B,eAAxBA,EAAK7B,gBAAqD,KAAlB6B,EAAKN,UACtB,WAAxBM,EAAK7B,eAGE,aAEFrF,IACN,WACGoH,EAAe9D,EAAK8B,UAE1B,YAAqBnH,IAAjBmJ,EAAmCD,EAClB,YAAjBA,GAA+C,eAAjBC,EACzB,UACFA,M,sBApnBU5H,E,sBAunBgB,SAAU8D,EAAMG,GACjD,GAAKH,GAASA,EAAKC,qBACfD,EAAKC,oBAAoB7D,cAAgBqG,MAM7C,OAJkBzC,EAAKC,oBAAoB8D,MACzC,SAACC,GAAD,OAAWA,EAAM7D,cAAgBA,Q,sBA5nBlBjE,E,sBAioBQ,SACzBsE,EACAyD,EACAvD,EACAN,GAGA,QAAmBzF,IAAfsJ,EAA0B,OAAOzD,EAErC,IAAIxG,EAAQwG,EACZ,OAAQE,GACN,IAAK,SACL,IAAK,UACH1G,EAAQ,YAAAkC,EAAG,IAAH,IAAmBsE,EAAWyD,EAAY7D,GAClD,MACF,IAAK,aACL,IAAK,cACHpG,EAAQ,YAAAkC,EAAG,IAAH,IAAmBsE,EAAWyD,EAAY7D,GAClD,MACF,IAAK,SACHpG,EAAQ,YAAAkC,EAAG,IAAH,IAAmBsE,EAAWyD,GACtC,MACF,IAAK,SACHjK,EAAQ,YAAAkC,EAAG,IAAH,IAAmBsE,EAAWyD,GACtC,MACF,IAAK,UACHjK,EAAQ,YAAAkC,EAAG,IAAH,IAAmBsE,EAAWyD,GACtC,MACF,IAAK,iBACH,OAAOA,EAIX,OAAOjK,K,sBAlqBUkC,E,sBAoqBK,SAAUsE,EAAW0D,GAAyB,IAAf9D,EAAc,uDAAH,EAChE,OAAOI,IAAc0D,EAAW,GAAK,YAAAhI,EAAG,IAAH,IAAuBkE,GAAY,M,sBArqBvDlE,E,sBAuqBK,SAAUsE,EAAW2D,GAAyB,IAAf/D,EAAc,uDAAH,EAChE,OACEI,GAAc2D,EAAW,IAAO,YAAAjI,EAAG,IAAH,IAAuBkE,GAAY,M,sBAzqBpDlE,E,sBA4qBK,SAAUsE,EAAW4D,GAC3C,OAAO5D,EAAY4D,K,sBA7qBFlI,E,sBA+qBK,SAAUsE,EAAW6D,GAC3C,OAAO7D,EAAY6D,K,sBAhrBFnI,E,sBAkrBK,SAAUsE,EAAW8D,GAC3C,OAAO9D,EAAY8D,K,sBAnrBFpI,E,sBAqrBS,SAAUkE,GACpC,OAAOhC,KAAKmG,IAAInG,KAAKoG,GAAI,QAAWpE,EAAWA,M,sBAtrB9BlE,E,sBAwrBsB,SACvC+H,EACAvD,EACAN,GAEA,OAAQM,GACN,IAAK,SACL,IAAK,UACH,OAAO,EAAI,YAAAxE,EAAG,IAAH,IAAuBkE,IAAa6D,EAAa,GAC9D,IAAK,aACL,IAAK,cACH,OAAO,YAAA/H,EAAG,IAAH,IAAuBkE,GAAY6D,EAC5C,IAAK,SACL,IAAK,SACH,OAAOA,EACT,IAAK,UACH,OAAOA,EAAa,YAAA/H,EAAG,IAAH,IAAuBkE,GAC7C,QACE,OAAO6D,MChsBf,IAAMQ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,WAAY,CACVC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,OAAQ,EACRC,SAAU,GACVC,WAAY,IACZC,WAAYR,EAAMS,YAAYC,OAAO,QAAS,CAC5CC,OAAQX,EAAMS,YAAYE,OAAOC,MACjCC,SAAUb,EAAMS,YAAYI,SAASC,qBAK5B,SAASC,GAAgBzK,GAAQ,IAAD,IACvC0K,EAAUlB,KACVE,EAAQiB,cAF+B,EAITC,mBAAS,CAC3CvK,MAAOqJ,EAAMmB,QAAQC,KAAKC,QAC1BC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,QANC,mBAItCC,EAJsC,KAI1BC,EAJ0B,OAQXR,oBAAS,GARE,mBAQtCS,EARsC,KAQ3BC,EAR2B,KAUvCC,EAAmBC,uBACvB,SAACC,GACCA,EAAEC,kBACoB,eAAlB1L,EAAM2L,SACR3L,EAAM4L,kBAAkB,CACtB7G,KAAM,OACN8G,QAAS,CACPC,YAAa9L,EAAM2L,QACnBlJ,OAAQsJ,GAAiB/L,EAAMkC,SAGrClC,EAAMgM,oBAAoBhM,EAAMyG,OAChCzG,EAAMiM,cAAc,CAClBlH,KAAM/E,EAAM2L,QACZlF,MAAOzG,EAAMyG,UAGjB,CAACzG,EAAMyG,MAAOzG,EAAM2L,QAAS3L,EAAMkC,OAkCrC,OAhCAgK,qBAAU,gBACYxM,IAAhBM,EAAMP,OAAuBO,EAAMP,MAAM0B,cAAgBgL,OAE3Db,EAAa,GAAD,OAAItL,EAAMP,QACZO,EAAMmC,OASflB,EAAIe,mBAAmB,CAAEE,KAAMlC,EAAMkC,KAAMC,OAAQnC,EAAMmC,UAU1DiJ,EAAc,CACZ/K,MAAOqJ,EAAMmB,QAAQC,KAAKC,QAC1BC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1CkB,OAAO,eAAD,OAAiB1C,EAAMmB,QAAQI,WAAWC,SAElDI,EAAa,kBAAC,IAAD,CAAYtB,SAAS,aAZlCoB,EAAc,CACZ/K,MAAOqJ,EAAMmB,QAAQI,WAAWC,MAChCF,gBAAiBtB,EAAMmB,QAAQwB,SAASC,MAE1ChB,EAAa,kBAAC,IAAD,CAAkBtB,SAAS,aAdxCsB,EAAa,kBAAC,IAAD,CAAsBtB,SAAS,WAC5CoB,EAAc,CACZ/K,MAAOqJ,EAAMmB,QAAQC,KAAKC,QAC1BC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1CkB,OAAO,eAAD,OAAiB1C,EAAMmB,QAAQI,WAAWC,YAoBnD,WAAClL,EAAMmC,cAAP,aAAC,EAAcsF,OAAf,UAAuBzH,EAAMkC,YAA7B,aAAuB,EAAYuF,OAAQzH,EAAMP,MAAOiK,IAGzD,kBAAC6C,EAAA,EAAD,CACEC,QAAQ,SACRC,aAAc,CACZC,SAAU,SACVC,WAAY,SAEdC,aACEb,GAAiB/L,EAAMkC,MAAM2K,MAAMnK,OAAS,GAC5CoK,GAAc9M,EAAMP,OAClB,kBAACsN,EAAA,EAAD,CACEC,UAAWtC,EAAQf,WACnBsD,MAAK,eACA9B,GAEL+B,QAAS3B,GAERF,QAED3L,GAGLM,EAAMmN,UAIb,SAASL,GAAcrN,GACrB,YAAcC,IAAVD,GAAuBA,EAAM0B,cAAgBgL,OAI5C,SAASJ,GAAiB7J,GAAO,IAAD,EACrC,IAAKA,IAASA,EAAK8C,oBAAqB,MAAO,CAAE6H,MAAO,GAAIO,MAAM,GAElE,IAAMpI,EAAsB9C,EAAK8C,oBAgBjC,MAAO,CACL6H,MAduB,CAAC,IAAK,IAAK,IAAK,IAAK,KAC3CjL,KAAI,SAACW,GACJ,IAAMC,EAAOwC,EAAoB8D,MAAK,SAACtG,GAAD,OAAUA,EAAK0C,cAAgB3C,KACrE,OAAKC,EACOA,EAAKzD,WADN,KAGZ0D,QAAO,SAAC1D,GAAD,OAAWA,KASnBqO,KANgB,UAAGpI,EAAoB8D,MACvC,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,sBADC,aAAG,EAElBnG,OCnIL,IAAMsO,GAAW5D,aAAW,SAACC,GAAD,MAAY,CACtCC,WAAY,CACVC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPwD,IAAK,EACLtD,SAAU,OAIC,SAASuD,GAAcvN,GACpC,IAAM0K,EAAU2C,KAEhB,OACE,kBAACd,EAAA,EAAD,CACEC,QAAQ,SACRC,aAAc,CAAEC,SAAU,MAAOC,WAAY,SAC7CC,aACEY,GAAaxN,EAAMkC,OACjB,kBAAC6K,EAAA,EAAD,CACEE,MAAO,CACLjC,gBAAiBwC,GAAaxN,EAAMkC,OAEtC8K,UAAWtC,EAAQf,YAElB,KAKN3J,EAAMmN,UAIb,SAASK,GAAatL,GACpB,GAAKA,EAGL,OADwBA,EAAKuL,aAG3B,KAAK,EACH,OAEF,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,GACH,MAAO,UAET,KAAK,GACH,MAAO,UACT,QACE,QChEN,IAAMjE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJC,aAAc,EACd/D,MAAO,QAII,SAASgE,GAAU5N,GAChC,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAACkD,EAAA,EAAD,iBACM7N,EADN,CAEE0K,QAAS,CAAEgD,KAAMhD,EAAQgD,MACzB/B,QAAQ,YACRsB,OACqB,IAAnBjN,EAAM8N,SAAN,eAES9N,EAAMiN,MAFf,CAGMjC,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,MACtC3N,MAAOqJ,EAAMmB,QAAQI,WAAWC,QAJtC,eAMSlL,EAAMiN,OAEjBgB,kBAAgB,IAEfjO,EAAMmN,U,cCxBE,SAASe,GAAQlO,GAAQ,IAAD,IACb4K,oBAAS,GADI,mBAC9BuD,EAD8B,KACxBC,EADwB,KAE/BC,EAASC,iBAAO,MAMtB,OAJApC,qBAAU,WACHlM,EAAMmO,OAAiB,IAATA,GAAeC,GAAQ,KACzC,CAACpO,EAAMmO,OAGR,kBAAC,IAAMI,SAAP,KACE,yBACEC,IAAKH,EACLnB,QAAS,YACiC,IAApClN,EAAMyO,WAAWzO,MAAM8N,UAAmBM,GAASD,KAGxDnO,EAAMyO,YAGT,kBAACC,GAAA,EAAD,CACEP,KAAMnO,EAAMmO,MAAQA,EACpBQ,SAAUN,EAAOO,QACjBnC,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDkC,gBAAiB,CAAEnC,SAAU,MAAOC,WAAY,UAChDmC,QAAS,kBAAMV,GAAQ,IACvBW,WAAY,CACV9B,MAAO,CAAErD,MAAK,UAAEyE,EAAOO,eAAT,aAAE,EAAgBI,aAChCC,UAAW,EACXC,QAAQ,GAEVC,UAAWd,EAAOO,SAEjB5O,EAAMmN,WCnCR,IAAMiC,GAAe,SAACpP,GAAD,OAC1B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,2PACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,yQACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,2QACFO,KAAMT,EAAMK,OAAS,cAIdgP,GAAiB,SAACrP,GAAD,OAC5B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,yFACFO,KAAMT,EAAMK,OAAS,cAKdiP,GAAc,SAACtP,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEU,GAAG,SACHC,GAAG,QACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,QACHC,GAAG,QACHC,GAAG,QACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAIhBkP,GAAc,SAACvP,GAAD,OACzB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,uKACFO,KAAK,OACLN,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cCxCvBmJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC8F,WAAY,CACV5F,MAAO,OACP6F,SAAU,IAEZC,eAAgB,CACd9F,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASC,KAE1CqD,iBAAkB,CAChB/F,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASuD,OAE1CC,cAAe,CACbjG,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASyD,KAE1CC,cAAe,CACbnG,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAAS2D,UAItCC,GAAiB,SAACjQ,GACtB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAACuF,EAAA,EAAD,CAASC,MAAM,WAAWC,UAAU,OAAOC,OAAK,GAC9C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQgF,eACnBxC,QAAS,WACPlN,EAAMsQ,kBAAkB,CACtBvL,KAAM/E,EAAM2L,QACZE,QAAS,cAGbiC,SAAU9N,EAAM8N,UAEhB,kBAAC,GAAD,CACEzN,MACEL,EAAM8N,SACFpE,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,YAQjCmQ,GAAmB,SAACxQ,GACxB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAACuF,EAAA,EAAD,CAASC,MAAM,SAASC,UAAU,OAAOC,OAAK,GAC5C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQiF,iBACnBzC,QAAS,WACPlN,EAAMsQ,kBAAkB,CACtBvL,KAAM/E,EAAM2L,QACZE,QAAS,gBAGbiC,SAAU9N,EAAM8N,UAEhB,kBAAC,GAAD,CACEzN,MACEL,EAAM8N,SACFpE,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,YAQjCoQ,GAAgB,SAACzQ,GACrB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAACuF,EAAA,EAAD,CAASC,MAAM,SAASC,UAAU,OAAOC,OAAK,GAC5C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQmF,cACnB3C,QAAS,WACPlN,EAAMsQ,kBAAkB,CACtBvL,KAAM/E,EAAM2L,QACZE,QAAS,aAGbiC,SAAU9N,EAAM8N,UAEhB,kBAAC,GAAD,CACEzN,MACEL,EAAM8N,SACFpE,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,YAQjCqQ,GAAgB,SAAC1Q,GACrB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAACuF,EAAA,EAAD,CAASC,MAAM,UAAUC,UAAU,OAAOC,OAAK,GAC7C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQqF,cACnB7C,QAAS,WACPlN,EAAMsQ,kBAAkB,CACtBvL,KAAM/E,EAAM2L,QACZE,QAAS,aAGbiC,SAAU9N,EAAM8N,UAEhB,kBAAC,GAAD,CACEzN,MACEL,EAAM8N,SACFpE,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,YASxB,SAASsQ,GAAa3Q,GAAQ,IAAD,UACpC0K,EAAUlB,KACVE,EAAQiB,cAF4B,EAIEC,oBAAS,GAJX,mBAInCgG,EAJmC,KAInBC,EAJmB,KAoB1C,OAdA3E,qBAAU,WAER,OADqBjL,EAAIyH,gBAAgB1I,EAAM8Q,aAE7C,IAAK,aACHD,GAAkB,GAClB,MACF,IAAK,UACHA,GAAkB,GAClB,MACF,QACEA,OAAkBnR,MAErB,WAACM,EAAM8Q,kBAAP,aAAC,EAAkBrJ,SAGpB,kBAACyG,GAAD,CACEC,KAAMnO,EAAM+Q,UAAU/Q,EAAM2L,SAASwC,KACrCM,WACE,kBAACb,GAAD,CACEZ,UAAWtC,EAAQ8E,WACnBvC,MAAO,CACLjC,gBAAiBgG,GAAoB,UACnChR,EAAM8Q,kBAD6B,aACnC,EAAkBjK,UACA,SAAlB7G,EAAM2L,QACNjC,IAGJoE,WAAU,UAAC9N,EAAM8Q,kBAAP,aAAC,EAAkBrJ,SAE7B,kBAACyI,EAAA,EAAD,CAASC,MAAM,aAAaC,UAAU,SAASC,OAAK,GAClD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACnBoH,GAAmB,UAClBjR,EAAM8Q,kBADY,aAClB,EAAkBjK,UACA,SAAlB7G,EAAM2L,UACN,UAAC3L,EAAM8Q,kBAAP,aAAC,EAAkBrJ,QACnBiC,OAOV,kBAAC,GAAD,CACEiC,QAAS3L,EAAM2L,QACf2E,kBAAmBtQ,EAAMsQ,kBACzBxC,UACG8C,GACiB,eAAlB5Q,EAAM2L,SACY,SAAlB3L,EAAM2L,UAGV,kBAAC,GAAD,CACEA,QAAS3L,EAAM2L,QACf2E,kBAAmBtQ,EAAMsQ,kBACzBxC,UAAW8C,GAAoC,SAAlB5Q,EAAM2L,UAErC,kBAAC,GAAD,CACEA,QAAS3L,EAAM2L,QACf2E,kBAAmBtQ,EAAMsQ,oBAE3B,kBAAC,GAAD,CACE3E,QAAS3L,EAAM2L,QACf2E,kBAAmBtQ,EAAMsQ,kBACzBxC,SAA4B,SAAlB9N,EAAM2L,WAKjB,SAASqF,GAAqBE,GAA+B,IAAxBC,EAAuB,wDAAPzH,EAAO,uCACjE,IAAe,IAAXyH,EAAiB,OAAOzH,EAAMmB,QAAQwB,SAASyD,IACnD,OAAQoB,GACN,IAAK,WACH,OAAOxH,EAAMmB,QAAQwB,SAASC,IAChC,IAAK,aACH,OAAO5C,EAAMmB,QAAQwB,SAASuD,MAChC,IAAK,UACH,OAAOlG,EAAMmB,QAAQwB,SAASyD,IAChC,IAAK,UACH,OAAOpG,EAAMmB,QAAQwB,SAAS2D,KAChC,QACE,OAAOtG,EAAMmB,QAAQkD,OAAOC,OAGlC,SAASiD,GAAoBC,EAAOC,EAAQC,EAAY1H,GACtD,IAAe,IAAXyH,EACF,OACE,kBAAC,GAAD,CACE9Q,MACE+Q,EACI1H,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,QAIjC,OAAQ6Q,GACN,IAAK,WACH,OACE,kBAAC,GAAD,CACE7Q,MACE+Q,EACI1H,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,QAIjC,IAAK,aACH,OACE,kBAAC,GAAD,CACEA,MACE+Q,EACI1H,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,QAIjC,IAAK,UACH,OACE,kBAAC,GAAD,CACEA,MACE+Q,EACI1H,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,QAIjC,IAAK,UACL,QACE,OACE,kBAAC,GAAD,CACEA,MACE+Q,EACI1H,EAAMmB,QAAQI,WAAWC,MACzBxB,EAAMmB,QAAQ0F,OAAOlQ,SC/QrC,IAAMmJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ7D,OAAQ,GACRD,MAAO,OACP6F,SAAU,IAEZ4B,WAAY,CACVxH,OAAQ,GACRD,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,OAExCsD,QAAS,CACPC,SAAU,WACVC,KAAM,EACNlE,IAAK,GAEPmE,gBAAiB,CACf7H,MAAO,GACPC,OAAQ,GACR6H,WAAY,GACZC,UAAW,EACX3G,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,MACtC5B,OAAO,eAAD,OAAiB1C,EAAMmB,QAAQ+G,SACrCC,YAAa,IAEfC,kBAAmB,CACjBlI,MAAO,GACPC,OAAQ,GACR6H,WAAY,GACZC,UAAW,EACX3G,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1CkB,OAAO,eAAD,OAAiB1C,EAAMmB,QAAQ+G,SACrCC,YAAa,IAEfE,eAAgB,CACdnI,MAAO,GACPC,OAAQ,GACR8D,aAAc,MACdvB,OAAQ,YACR4F,gBAAiB,cACjBC,iBAAkB,cAClBC,eAAgB,cAChBC,kBAAmB,cACnBZ,SAAU,WACVjE,IAAK,EACLkE,KAAM,OAIK,SAASY,GAAKpS,GAAQ,IAAD,UAC5B0K,EAAUlB,KACVE,EAAQiB,cAFoB,EAIVC,oBAAS,GAJC,mBAI3B1I,EAJ2B,KAIrBmQ,EAJqB,OAKNzH,oBAAS,GALH,mBAK3BzI,EAL2B,KAKnBmQ,EALmB,OAOJ1H,oBAAS,GAPL,mBAO3B2H,EAP2B,KAOlBC,EAPkB,KAS5BC,EAAkBjH,uBAAY,WAElC,OADAxL,EAAMgM,oBAAoBhM,EAAMyG,OACxBzG,EAAM2L,SACZ,IAAK,WACH3L,EAAM4L,kBAAkB,CACtB7G,KAAM,WACN8G,QAAS,CACPpJ,OAAQiQ,GAAe1S,EAAMoE,MAAMb,SAGvC,MACF,IAAK,aACHvD,EAAM4L,kBAAkB,CACtB7G,KAAM,aACN8G,QAAS,CACPpJ,OAAQkQ,GAAiB3S,EAAMoE,MAAMb,SAGzC,MACF,QACEvD,EAAM4L,kBAAkB,CAAE7G,KAAM/E,EAAM2L,aAGzC,WAAC3L,EAAMoE,MAAMb,YAAb,aAAC,EAAkBkE,OAAQzH,EAAM2L,QAAS3L,EAAMyG,QAuBnD,OArBAyF,qBAAU,YACe,IAAnBlM,EAAM4S,WAA6C,IAAxB5S,EAAM4S,SAASzE,MAC5CnO,EAAMiM,cAAc,CAClBlH,KAAM/E,EAAM2L,QACZlF,MAAOzG,EAAMyG,UAGhB,CAACzG,EAAM4S,WAEV1G,qBAAU,WACR,IAAMnH,EAAO/E,EAAM6S,YACd9N,GAASA,EAAK0C,OACd4K,EAAQrS,EAAM6S,aADQR,GAAQ,KAElC,WAACrS,EAAM6S,mBAAP,aAAC,EAAmBpL,SAEvByE,qBAAU,WACR,IAAMnH,EAAO/E,EAAM8S,cACd/N,GAASA,EAAK0C,OACd6K,EAAUtS,EAAM8S,eADMR,GAAU,KAEpC,WAACtS,EAAM8S,qBAAP,aAAC,EAAqBrL,SAGvB,kBAAC,IAAM8G,SAAP,KACE,kBAACwE,EAAA,EAAD,CACE/F,UAAWhN,EAAM4S,SAAWlI,EAAQ2G,WAAa3G,EAAQgD,KACzDR,QAASuF,EACTO,OAAK,EACLzC,QAAM,GAEN,yBACEvD,UAAWtC,EAAQ4G,QACnB2B,aAAc,WACZT,GAAW,IAEbU,aAAc,WACZV,GAAW,KAGb,kBAAC/H,GAAD,iBACMzK,EADN,CAEEkC,KAAMA,EACNC,OAAQA,EACR1C,MAAK,UAAEO,EAAM6S,mBAAR,aAAE,EAAmBM,YAE1B,kBAAC5F,GAAD,CAAerL,KAAMA,GACnB,yBACE8K,UAAWtC,EAAQqH,eACnB9E,MAAO,CACL+E,gBAAiBhB,GAAoB,OACnChR,QADmC,IACnCA,GADmC,UACnCA,EAAO6S,mBAD4B,aACnC,EAAoBhM,WACpB,EACA6C,MAIN,kBAACqD,EAAA,EAAD,CACEC,UACEuF,EAAU7H,EAAQ+G,gBAAkB/G,EAAQoH,mBAG3C5P,EAoBnB,SAAoBA,EAAMC,GACxB,GAAMD,IAASC,EACb,OACE,yBACEiR,UAAU,QACVnG,MAAO,CAAErD,MAAO,OAAQC,OAAQ,QAChCwJ,IAAG,kDAAsCnR,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAMuF,OAA5C,mBAGJ,GAAMvF,GAAUC,EACnB,OACE,yBACEiR,UAAU,QACVnG,MAAO,CAAErD,MAAO,OAAQC,OAAQ,QAChCwJ,IAAG,kDAAsClR,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAQsF,OAA9C,mBAlCe6L,CAAWpR,EAAMC,GA0D3C,SAAkBnC,EAAO0J,GACvB,OAAQ1J,EAAM2L,SACZ,IAAK,OACH,OACE,kBAACuE,EAAA,EAAD,CACE/B,KAAMnO,EAAMmO,OAASnO,EAAM+Q,UAAUwC,KAAKpF,KAC1CgC,MAAM,4BACNC,UAAU,QACVC,OAAK,GAEL,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,EAAD,CAAaxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAI/C,IAAK,YACH,OAAO,kBAAC,EAAD,CAAU1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,UAC7C,IAAK,YACH,OAAO,kBAAC,EAAD,CAAc1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,UACjD,IAAK,WACH,OAAO,kBAAC,EAAD,CAAa1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,UAChD,IAAK,WACH,OAAO,kBAAC,EAAD,CAAa1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,UAChD,IAAK,WACH,OAAO,kBAAC,EAAD,CAAa1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,UAChD,IAAK,aACH,OAAO,kBAAC,EAAD,CAAW1K,MAAOqJ,EAAMmB,QAAQC,KAAKC,WApFGyI,CAASxT,EAAO0J,OAM7D,kBAAC+J,EAAA,EAAD,CACExG,MAAO,CAAEyE,WAAY,IACrB3G,QAAO,OAAE7I,QAAF,IAAEA,OAAF,EAAEA,EAAM0F,SACf8L,uBAAwB,CAAEC,QAAQ,EAAMhI,QAAS,aACjDiI,YACIzR,GAAF,iBACGA,QADH,IACGA,OADH,EACGA,EAAQyF,SADX,YACuBiM,GAAoB3R,EAAMC,IAEnD2R,yBAA0B,CAAEH,QAAQ,EAAMhI,QAAS,iBAwB7D,SAASkI,GAAoB3R,EAAMC,GACjC,IAAM1C,EAAQyC,EAAKY,SAAWX,EAAOa,QAAU,EAC/C,OAAc,IAAVvD,EAAoB,GACnB,WAAW0D,KAAKC,MAAM3D,IAE7B,SAASiT,GAAenP,GAAO,IAAD,EAC5B,GAAKA,EAIL,MAAO,CAAE6J,KADI,UADC7J,EAAKyB,oBACG8D,MAAK,SAACtG,GAAD,OAA+B,OAArBA,EAAK0C,sBAA7B,aAAG,EAAiDnG,OAGnE,SAAS4T,GAAiBpP,GAAO,IAAD,EAC9B,GAAKA,EAIL,MAAO,CAAE6J,KADM,UADD7J,EAAKyB,oBACK8D,MAAK,SAACtG,GAAD,OAA+B,OAArBA,EAAK0C,sBAA7B,aAAG,EAAiDnG,O,IC/NhDgV,G,wGACDC,EAASC,GACzB,OAAKA,EAEa,YAAAF,EAAG,IAAH,IAA6BC,GAC9BxS,QAAO,SAACC,EAAKmG,GAC5B,IAAM7C,EAAOkP,EAAQnL,MAAK,SAACrB,GAAD,OAAYA,EAAOG,WAAaA,KAG1D,OAFM7C,EAAMtD,EAAIoD,KAAKE,EAAK0C,QACrBrC,QAAQC,IAAI,QAAS,4BAA6BuC,GAChDnG,IACN,IARkB,O,8jBC0ClB,SAASyS,GAAkBhS,EAAMgD,GACtC,GAAKhD,GAASA,EAAK8C,qBAEf9C,EAAK8C,oBAAoB7D,cAAgBqG,MAA7C,CAEA,IAAMlI,EAAS4C,EAAK8C,oBAAoBvC,QACtC,SAACsG,GAAD,OAAWA,EAAM7D,cAAgBA,KAGnC,OAAsB,IAAlB5F,EAAOoD,OAAqBpD,EAAO,GAAGP,MACjCO,EAAOoD,QAAU,EAAUpD,EAAOsC,KAAI,SAACmH,GAAD,OAAWA,EAAMhK,cAC3D,G,sBDvDcgV,G,sBAYe,SAAUC,GAC1C,IAAMG,EAAWH,EAAQI,MAAM,EAAGJ,EAAQK,QAAQ,KAAO,GACnDC,EAAaN,EAAQO,UAAUP,EAAQK,QAAQ,KAAO,GAEtDG,EAAWL,EAASM,QAAQ,IAAK,IAAInN,MAAM,KAAK,GAChDoN,EAAW,YACZ,IAAIC,IACLL,EAAWhN,MAAM,SAAS9F,QAAO,SAACC,EAAKmT,GACrC,IAAMC,EAAiBD,EAAetN,MAAM,MACtCwN,EAAaF,EAAetN,MAAM,MAExC,GAA8B,IAA1BuN,EAAenS,OAAc,CAC/B,IAAMR,EAAO2S,EAAe,GACtB1S,EAAS0S,EAAe,GAC9B,OAAOpT,EAAIE,OAAO,CAACO,EAAMC,IAE3B,GAA0B,IAAtB2S,EAAWpS,OAAc,CAC3B,IAAMR,EAAO4S,EAAW,GACxB,OAAOrT,EAAIE,OAAO,CAACO,IAGrB,MAAuB,KAAnB0S,EAA8BnT,EAAIE,OAAOiT,GACtCnT,IACN,MAGP,MAAM,CAAE+S,GAAR,mBAAqBE,OAtCJX,GAyCZgB,iBAAmB,SAAUf,EAASC,GAC3C,IACMO,EADeR,EAAQI,MAAM,EAAGJ,EAAQK,QAAQ,KAAO,GAC/BI,QAAQ,IAAK,IAAInN,MAAM,KAAK,GACpD/D,EAAO,YAAAwQ,GAAG,IAAH,IAAyBS,EAAUP,GAE1Ce,EAAgBhB,EAAQ1M,MAAM,mBAC9BgN,EAAa,YAAAP,GAAG,IAAH,IAAoCiB,GACjDC,EAAYD,EAAc,GAE1BE,EAAc,YAAAnB,GAAG,IAAH,IAAmCO,EAAYL,GAC7DpQ,EAAa,YAAAkQ,GAAG,IAAH,IAAkCkB,EAAWhB,GAEhE,OAAO,aAAE1Q,QAAS2R,EAAlB,GAAkCrR,I,sBArDjBkQ,G,sBAuDsB,SAAUiB,GACjD,IAAMG,EAAoBH,EAAc,GAAGX,QAAQ,KAAO,EAE1D,OADmBW,EAAc,GAAGT,UAAUY,GAC5BC,e,sBA1DDrB,G,sBA4DqB,SAAUO,EAAYL,GAC5D,IAAMoB,EAAmBf,EAAWhN,MAAM,cAEpC4N,EAAc,GAUpB,MATA,CAAC,WAAY,WAAY,YAAa,WAAY,aAAaxQ,SAC7D,SAACzC,EAAMwE,GACLyO,EAAYjT,GAAQ,YAAA8R,GAAG,IAAH,IAClBsB,EAAiB5O,GACjBwN,MAKCiB,K,sBAzEUnB,G,sBA2EoB,SAAUuB,EAAiBrB,GAChE,OAAKqB,EAEmBA,EAAgBhO,MAAM,SACvB1F,KAAI,SAACgT,GAC1B,IAAyC,IAArCA,EAAeP,QAAQ,SACzB,MAAO,CAAEnS,MAAM,EAAOqT,OAAO,GAE7B,IAAMC,EAAWZ,EAAetN,MAAM,MAAM,GACtCmO,EAAab,EAAetN,MAAM,MAAM,GAG9C,MAAO,CAAEpF,KAFI,YAAA6R,GAAG,IAAH,IAAyByB,EAAUvB,GAEjC9R,OADA,YAAA4R,GAAG,IAAH,IAAyB0B,EAAYxB,OAV3B,M,sBA5EZF,G,sBA2FoB,SAAUkB,EAAWhB,GAE1D,MAAmE,eAA/D,YAAAF,GAAG,IAAH,IAAuCkB,EAAWhB,GAC7C,GAUF,CAAEpQ,WARcoR,EAAU3N,MAAM,SACL1F,KAAI,SAAC8T,GAAkB,MAEzB,YAAA3B,GAAG,IAAH,IAAiC2B,GAAxD9N,EAFgD,EAEhDA,SAAUuL,EAFsC,EAEtCA,UACXpO,EAAO,YAAAgP,GAAG,IAAH,IAAyBnM,EAAUqM,GAChD,MAAO,CAAE/R,KAAK,eAAM6C,EAAP,CAAaoO,cAAahR,QAAQ,U,sBArGhC4R,G,sBA0GmB,SAAU4B,GAC9C,IAAMC,EAAcD,EAAYrO,MAAM,MAItC,MAAO,CAAEM,SAHQgO,EAAY,GAGVzC,UAFDhH,OAAOyJ,EAAY,Q,sBA7GpB7B,G,sBAiHyB,SAAU8B,EAAW5B,GAC/D,IAAK4B,EAAW,MAAO,YAEvB,IAAMC,EAAiBD,EAAUzB,MAAM,EAAGyB,EAAUE,OAAO,UAC3D,IAAsC,IAAlCD,EAAezB,QAAQ,MAAc,CACvC,IAAMzM,EAAWkO,EAAexO,MAAM,MAAM,GAE5C,QADa,YAAAyM,GAAG,IAAH,IAAyBnM,EAAUqM,GACrC+B,eAAsB,aAE5B,IAAqC,IAAjCF,EAAezB,QAAQ,KAAa,CAC7C,IAAMzM,EAAWkO,EAAexO,MAAM,MAAM,GACtCvC,EAAO,YAAAgP,GAAG,IAAH,IAAyBnM,EAAUqM,GAChD,OAAMlP,EAAKkR,cAAsB,YACtBlR,EAAKmR,eAAuB,WAC5BnR,EAAKoR,cAAsB,WAC1B,OAGd,OAAO,KAnIUpC,GAuIZqC,iBAAmB,SAAUrS,GAAM,IAAD,IAavC,MAAO,CANc,CANX,kBAAOA,QAAP,IAAOA,GAAP,UAAOA,EAAKR,YAAZ,aAAO,EAAWqE,SAAlB,oBAA+B7D,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAKR,YAApC,aAA+B,EAAWqE,SAA1C,SACO,YAAAmM,GAAG,IAAH,WAAkChQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAKJ,SAAU,oBACjD,YAAAoQ,GAAG,IAAH,WAAkChQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAKL,SAAU,oBAChD,YAAAqQ,GAAG,IAAH,WAAkChQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAKN,UAAW,qBACnD,YAAAsQ,GAAG,IAAH,WAAkChQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAKH,SAAU,oBAChD,YAAAmQ,GAAG,IAAH,WAAkChQ,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAKP,UAAW,2BAEjEf,QAAO,SAAA2B,GAAK,QAAMA,KAClBiS,KAAK,QAEQ,YAAAtC,GAAG,IAAH,WAAiChQ,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAKF,WAAY,2BAErCwS,KAAK,W,sBApJjBtC,G,sBAsJoB,SAAUmB,EAAaoB,GAC5D,SAAKpB,GAAsC,IAAvBA,EAAYxS,SAEzBwS,EACJtT,KAAI,SAAC2U,GACJ,OAAKA,GAAeA,EAAWrU,KAC1BqU,EAAWpU,OACToU,EAAWrU,KAAK0F,SAASjG,OAC9B,KACA4U,EAAWpU,OAAOyF,UAHW2O,EAAWrU,KAAK0F,SADH0O,KAO7CD,KAAK,S,sBAlKStC,G,sBAoKmB,SAAUlQ,GAC9C,OAAKA,EACEA,EACJjC,KAAI,SAAC4U,GACJ,OAAKA,GAAcA,EAAUtU,KACvB,GAAN,OAAUsU,EAAUtU,KAAK0F,SAAzB,aAAsC4O,EAAUtU,KAAKiR,WADX,MAG3CkD,KAAK,MANgB,MArKPtC,GA+KZ0C,wBAA0B,SAAU1S,GAAM,IAAD,MAS9C,MAAO,CARG,kBAAOA,QAAP,IAAOA,GAAP,UAAOA,EAAKR,YAAZ,aAAO,EAAWqE,SAAlB,oBAA+B7D,QAA/B,IAA+BA,GAA/B,UAA+BA,EAAKR,YAApC,aAA+B,EAAWqE,SAA1C,wBAA2D7D,QAA3D,IAA2DA,GAA3D,UAA2DA,EAAKR,YAAhE,aAA2D,EAAWsD,WAC9D,YAAAkN,GAAG,IAAH,WAAyChQ,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAKP,UAAW,qBAC1D,YAAAuQ,GAAG,IAAH,WAAyChQ,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAKJ,SAAU,oBACxD,YAAAoQ,GAAG,IAAH,WAAyChQ,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAKL,SAAU,oBACvD,YAAAqQ,GAAG,IAAH,WAAyChQ,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAKN,UAAW,qBAC1D,YAAAsQ,GAAG,IAAH,WAAyChQ,QAAzC,IAAyCA,OAAzC,EAAyCA,EAAKH,SAAU,oBAC1D,YAAAmQ,GAAG,IAAH,WAAwChQ,QAAxC,IAAwCA,OAAxC,EAAwCA,EAAKF,aAU1DwS,KAAK,S,sBAhMUtC,G,sBAkM2B,SAAU3P,EAAOsS,GAC7D,OAAKtS,EACEA,EACJxC,KAAI,SAACK,GACJ,OAAKA,GAASA,EAAKC,KACdD,EAAKE,OACJ,GAAN,OAAUF,EAAKC,KAAK0F,SAApB,aAAiC3F,EAAKE,OAAOyF,SAA7C,YAAyD3F,EAAKC,KAAK2E,WAD3C,GAAN,OAAU5E,EAAKC,KAAK0F,SAApB,YAAgC3F,EAAKC,KAAK2E,WAD5B6P,KAIjCL,KAAK,MAPW,M,sBAnMFtC,G,sBA4M0B,SAAUlQ,GACrD,OAAKA,EACEA,EACJjC,KAAI,SAAC4U,GACJ,IAAMG,EAAQH,EAAUtU,KACxB,MAAM,GAAN,OAAUyU,EAAM/O,SAAhB,aAA6B+O,EAAMxD,UAAnC,YAAgDwD,EAAM9P,cAEvDwP,KAAK,MANgB,M,sBA7MPtC,G,sBAsNW,SAAUnM,EAAUqM,GAChD,IAAKrM,EAAU,OAAO,EAEtB,IAAM7C,EAAOkP,EAAQnL,MAAK,SAACrB,GAAD,OAAYA,EAAOG,WAAaA,KAC1D,OAAS7C,IAAc,K,cEhNrByE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ6D,SAAU,YAEZqF,gBAAiB,CACfrF,SAAU,WACV1H,OAAQ,GACRD,MAAO,GACP0D,IAAK,EACLkE,KAAM,EACNxG,gBAAiBtB,EAAMmB,QAAQwB,SAASwK,KAE1CjF,QAAS,CACPhI,MAAO,YAII,SAASkN,GAAM9W,GAAQ,IAAD,IAC7B0K,EAAUlB,KADmB,EAGHoB,mBAAS,IAAIpD,MAAMxH,EAAM+W,WAAWtW,MAAK,IAHtC,mBAG5BuW,EAH4B,KAGlBC,EAHkB,OAKCrM,mBAAS,IAAIpD,MAAMxH,EAAM+W,WAAWtW,MAAK,IAL1C,mBAK5ByW,EAL4B,KAKhBC,EALgB,OAOKvM,mBAAS,IAAIpD,MAAMxH,EAAM+W,WAAWtW,MAAK,IAP9C,mBAO5B2W,EAP4B,KAOdC,EAPc,OASSzM,mBAAS,IAAIpD,MAAMxH,EAAM+W,WAAWtW,MAAK,IATlD,mBAS5B6W,EAT4B,KASZC,EATY,KAU7BC,EAAU,CACdP,cACAI,kBACAF,gBACAI,qBAdiC,EAiBa3M,mBAAS,GAjBtB,mBAiB5B6M,EAjB4B,KAiBVzL,EAjBU,OAkBPpB,oBAAS,GAlBF,mBAkB5B8M,EAlB4B,KAkBpBC,EAlBoB,OAmBD/M,oBAAS,GAnBR,mBAmB5BgN,EAnB4B,KAmBjBC,EAnBiB,KAoB7BC,EAAaxJ,iBAAO,GA0H1B,OAxHApC,qBAAU,WACFlM,EAAM+X,eAAmC,SAAlB/X,EAAM2L,UAEnCsL,EAAY,IAAIzP,MAAMxH,EAAM+W,WAAWtW,MAAK,IAC5C0W,EAAc,IAAI3P,MAAMxH,EAAM+W,WAAWtW,MAAK,OAC7C,WAACT,EAAMoE,aAAP,iBAAC,EAAab,YAAd,aAAC,EAAmBkE,SAEvByE,qBAAU,WACFlM,EAAM+X,eAAmC,SAAlB/X,EAAM2L,UAEnCqL,EAAStU,OAAS1C,EAAM+W,UACxBE,EAAYzP,MAAMwQ,KAAKhB,GAAU,SAAC9U,GAAD,OAAUA,IAAQ,MACnDgV,EAAWxU,OAAS1C,EAAM+W,UAC1BI,EAAc3P,MAAMwQ,KAAKd,GAAY,SAAC/U,GAAD,OAAYA,IAAU,SAC1D,CAACnC,EAAM+W,YAGV7K,qBAAU,YACoB,IAAxBlM,EAAM+X,eAiLd,SAAqB/X,EAAOwX,GAC1B,IAAKxX,EAAM+X,cAAe,QAE1B,uCAAC,WAAO/D,GAAP,yBAAA9N,EAAA,sEACuBlG,EAAMtB,MAAMuZ,KAAK,iBADxC,cACOhE,EADP,OAEOiE,EAAcnE,GAAIgB,iBAAiBf,EAASC,GAFnD,SAGoBjU,EAAMtB,MAAMuZ,KAAZ,iBAA2BC,EAAY3U,KAAKkE,SAHhE,UAGOlE,EAHP,OAKuB,SAAlBvD,EAAM2L,QALX,wBAMG6L,EAAQP,YAAY,CAACiB,EAAY3U,OANpC,uBAOU7D,GAPV,QAUOqX,EAAYoB,GAAqB,CAAE5U,QAAQ2U,EAAalY,GACxDoY,EAAQ,IAAI5Q,MAAMuP,GAAWtW,MAAK,GAClC4X,EAAU,IAAI7Q,MAAMuP,GAAWtW,MAAK,IAE5ByX,EAAYI,GAAiBtY,EAAM2L,WAAa,IAGxDjH,SAAQ,SAACzC,EAAMwE,GACnB2R,EAAM3R,KAAWxE,EAAKC,MAAP,eAAoBD,EAAKC,KAAzB,CAA+B2E,UAAW,eACzDwR,EAAQ5R,KAAWxE,EAAKE,QAAP,eAAqBF,EAAKE,OAA1B,CAAkC0E,UAAW,eAGhE2Q,EAAQP,YAAYmB,GACpBZ,EAAQL,cAAckB,GAEtBrY,EAAMuY,wBAAwB,CAAExT,KAAM/E,EAAM2L,UAzB7C,4CAAD,sDA0BG3L,EAAM+X,eA9M4BS,CAAYxY,EAAOwX,KACrD,CAACxX,EAAM+X,gBAGV7L,qBAAU,WACR,OAAQlM,EAAMyY,UAAUzY,EAAM2L,UAC5B,KAAK,EACL,UAAKjM,EACH,OACF,IAAK,MACHsX,EAASS,IAAoB,EAC7BP,EAAWO,IAAoB,EAC/B,MACF,IAAK,MACH,IAAM3G,EAAakG,EAASS,GAI5B,OAHA3G,EAAU,UAAgB4H,GAAW5H,EAAWqC,UAAW,EAAG,GAC9D8D,EAAY,YAAID,SAChBhX,EAAMsQ,kBAAkB,CAAEvL,KAAM/E,EAAM2L,QAASE,SAAS,IAE1D,IAAK,aACH8M,GAAY3B,EAASS,GAAmB,cACxC,MACF,IAAK,UACHkB,GAAY3B,EAASS,GAAmB,WACxC,MACF,IAAK,UACHkB,GAAY3B,EAASS,GAAmB,WACxC,MACF,IAAK,WACHkB,GAAY3B,EAASS,GAAmB,YACxC,MAEF,IAAK,WAAgC,YAApBE,GAAWD,GAC5B,SA4GN,SAA4B3T,EAAK0U,GAC/B,IACmC,IAAjCA,EAAUG,qBACyB,IAAnCH,EAAUI,qBAEV,OAAO,EAET,IAAMC,EAUR,SAA2B/U,GACzB,IAAIgV,EAAkB,EAClBC,EAAoB,EAexB,OAdA/X,EAAI6C,SACFC,GACA,SAAC9B,GAAU,IAAD,QACFgX,KAAkB,OAAChX,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACrD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEX6Q,KAAoB,OAACjX,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACvD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEjB,OAAuB,IAAnB4Q,IAAkCF,GACb,IAArBG,IAAoCF,OAAxC,IAEF,CAAE1V,UAAW,CAAEG,WAAW,KAErB,CAAEsV,kBAAiBC,qBA3BRG,CAAkBpV,GAEpC,IAAqC,IAAjC0U,EAAUG,mBAEZ,OADoB1E,GAAkBnQ,EAAIR,KAAM,KAC3BuV,EAAUC,gBAC1B,IAAuC,IAAnCN,EAAUI,qBAEnB,OADsB3E,GAAkBnQ,EAAIR,KAAM,KAC3BuV,EAAUE,mBAxHzBI,CAAmBpZ,EAAM+D,IAAK/D,EAAMyY,UAAUzY,EAAM2L,aAkOhE,SAA0B3L,EAAOgX,EAAUE,EAAYO,GACrDT,EAASS,GAAT,eAAkCzX,EAAMyY,UAAUzY,EAAM2L,eAGnBjM,IAAjCwX,EAAWO,KACbP,EAAWO,IAAoB,GAtOzB4B,CAAiBrZ,EAAOgX,EAAUE,EAAYO,GAwOxD,SAA8BzX,EAAO8Q,GACb,eAAlB9Q,EAAM2L,cAAqDjM,IAAzBoR,EAAWqC,YAC/CrC,EAAU,UAAgB,GAzOpBwI,CAAqBtZ,EAAOgX,EAASS,IACrCkB,GAAY3B,EAASS,GAAmB,eAI9CR,EAAY,YAAID,IAChBG,EAAc,YAAID,IAClBlX,EAAMsQ,kBAAkB,CAAEvL,KAAM/E,EAAM2L,QAASE,SAAS,KACzC,IAAX6L,GACF1L,EACE0M,GAAWjB,EAAkB,EAAGzX,EAAM+W,UAAW/W,EAAM2L,YAE1D,CAAC3L,EAAMyY,UAAUzY,EAAM2L,WAE1BO,qBAAU,WACR,OAAQlM,EAAMyY,UAAN,MACN,KAAK,EACL,UAAK/Y,EACL,IAAK,aACL,IAAK,UACL,IAAK,UACL,IAAK,WACH,OACF,IAAK,MACHwX,EAAWO,IAAoB,EAC/BF,EAAkB,YAAIL,IACtB,MAEF,IAAK,WAAYS,GAAWD,GAAS,MACrC,QACE,GAAI1X,EAAM+Q,UAAUwI,KAAKzN,cAAgB9L,EAAM2L,QAAS,MACxD,IAAKqL,EAASS,GAAmB,MACjCP,EAAWO,GAAoBzX,EAAMyY,UAAN,KAC/BE,GAAYzB,EAAWO,GAAmB,WAC1CN,EAAc,YAAID,IAEtBlX,EAAMsQ,kBAAkB,CAAEvL,KAAM,OAAQ8G,SAAS,KAClC,IAAX6L,GACF1L,EAAoB0M,GAAWjB,EAAkB,EAAGzX,EAAM+W,cAC3D,CAAC/W,EAAMyY,UAAN,OAGJvM,qBAAU,WACR4L,EAAWlJ,QAAUkJ,EAAWlJ,QAAU,EAC1CiJ,GAAa,GACb,uCAAC,WAAgB7X,EAAOgX,EAAUE,EAAYsC,GAA7C,mBAAAtT,EAAA,sEACoB/G,QAAQsa,IACzBC,GAAoB1Z,EAAOgX,EAAUE,EAAYsC,IAFpD,UACOG,EADP,OAKOC,EAAcD,EAAKA,EAAKjX,OAAS,GACjCmX,EAAcF,EAAKvF,MAAM,EAAGuF,EAAKjX,OAAS,GAE5CkX,IAAgB9B,EAAWlJ,QARhC,8CAUUlP,GAVV,QAW4B,IAAhBma,GAGTC,GAAmB9Z,EAAO6Z,EAAa7C,EAAUE,EAAYM,GAdhE,QAgBCK,GAAa,GAhBd,4CAAD,4DAiBG7X,EAAOgX,EAAUE,EAAYY,EAAWlJ,WAC1C,CAACmL,GAAU/C,EAAUE,KAEpBlX,EAAM+W,UAAY,GAElB,kBAAC,IAAMxI,SAAP,KACE,yBAAKvB,UAAWtC,EAAQgD,MACtB,kBAACsM,GAAA,EAAD,CACEhN,UAAWtC,EAAQkH,QACnB3E,MAAO,CAAEjC,gBAAiBhL,EAAMgL,mBAEjC,IAAIxD,MAAMxH,EAAM+W,WAAWtW,UAAKf,GAAWkC,KAAI,SAACK,EAAMwE,GACrD,OACE,kBAAC2L,GAAD,CACEtT,IAAG,UAAKkB,EAAM2L,QAAX,YAAsBlF,GACzBkF,QAAS3L,EAAM2L,QACfwC,KAAMnO,EAAMmO,KACZ4C,UAAW/Q,EAAM+Q,UACjB3M,MAAOpE,EAAMoE,MACbyO,YAAauE,EAAa3Q,GAC1BqM,cAAewE,EAAe7Q,GAC9BmF,kBAAmB5L,EAAM4L,kBACzBK,cAAejM,EAAMiM,cACrB2G,SACE6E,IAAqBhR,IACpBzG,EAAM+Q,UAAU/Q,EAAM2L,SAASwC,MAC9BnO,EAAM+Q,UAAUwI,KAAKzN,cAAgB9L,EAAM2L,SAE/ClF,MAAOA,EACPuF,oBAAqBA,EACrBtN,MAAOsB,EAAMtB,WAIlBkZ,GACC,kBAAC7K,EAAA,EAAD,CAAQC,UAAWtC,EAAQkM,iBAAkB,MA0EzD,SAASuB,GAAqBpU,EAAKmU,EAAalY,GAE9C,OAAqB,KADqB,MAArB+D,EAAIR,KAAKX,SAErBsV,EAAYI,GAAiBtY,EAAM2L,UAAUjJ,OAC1CuX,GAAalW,EAAK/D,EAAM2L,SAEtC,SAAS+N,GAAoB1Z,EAAOgX,EAAUE,EAAYsC,GACxD,GAAIxC,EAAStU,SAAWwU,EAAWxU,OACjC,MAAO,CAACvD,QAAQC,SAAQ,GAAQD,QAAQC,QAAQoa,IAElD,IAAMU,EAAelD,EAASpV,KAAI,SAACuY,GACjC,OAAgB,IAAZA,EAA0Bhb,QAAQC,SAAQ,GACvCY,EAAMtB,MAAMuZ,KAAZ,wBAA2BkC,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAS1S,YAEvC2S,EAAiBlD,EAAWtV,KAAI,SAACyY,GACrC,OAAkB,IAAdA,EAA4Blb,QAAQC,SAAQ,GACzCY,EAAMtB,MAAMuZ,KAAZ,wBAA2BoC,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAW5S,YAEzC6S,EAAiBnb,QAAQC,QAAQoa,GACvC,MAAM,GAAN,mBAAWU,GAAX,YAA4BE,GAA5B,CAA4CE,IAE9C,SAASR,GAAmB9Z,EAAO2Z,EAAM3C,EAAUE,EAAYM,GAC7D,IAAMY,EAAQuB,EAAKvF,MAAM,EAAGuF,EAAKjX,OAAS,GACpC2V,EAAUsB,EAAKvF,MAAMuF,EAAKjX,OAAS,GACnCmJ,EAAU,GAChBuM,EAAM1T,SAAQ,SAAC6V,EAAa9T,GAC1B,IAAM+T,EAAcxD,EAASvQ,GACzBxF,EAAIwH,gBAAJ,eACKuO,EAASvQ,GADd,GAEK8T,SAEL7a,EACEwC,IAAS8U,EAASvQ,IAAX,eACJuQ,EAASvQ,GADL,GACgB8T,EADhB,CAC6B1T,UAAW2T,IAE/CrY,IAASlB,EAAIe,mBAAmB,CAAEE,OAAMC,OAAQkW,EAAQ5R,MAA/C,eACNyQ,EAAWzQ,GADL,GACgB4R,EAAQ5R,IAEvCuQ,EAASvQ,GAASvE,EAClBgV,EAAWzQ,GAAStE,EACpB0J,EAAQhH,KAAK,CAAE3C,OAAMC,YAEN,IAAXA,IAAkB+U,EAAWzQ,IAAS,GAEpCuQ,EAASvQ,IAAY+T,IACzBxD,EAASvQ,GAAT,UAA+B+T,MAGnCxa,EAAMya,cAAc,CAAE1V,KAAM/E,EAAM2L,QAASE,QAASA,IACpD2L,EAAQD,kBAAR,YAA8BL,IAC9BM,EAAQH,gBAAR,YAA4BL,IAc9B,SAAS2B,GAAY7H,EAAYI,GAI/B,YAH6BxR,IAAzBoR,EAAWjK,YACbiK,EAAU,UAAgB,cAEpBI,GACN,IAAK,UACL,IAAK,WACL,IAAK,UACL,IAAK,aACHJ,EAAWjK,UAAYqK,EACvB,MACF,QACEJ,EAAWjK,UAAY,cAI7B,SAASkT,GAAU/C,EAAUE,GAC3B,MAAO,sBACFwD,GAAU1D,IADR,aAUU2D,EARF3D,EASR2D,EAAS/Y,KAAI,SAACmD,GAAD,QAAYA,GAAQA,EAAK8B,aAAWwP,KAAK,OAXtD,YAaT,SAAmBsE,GACjB,OAAOA,EAAS/Y,KAAI,SAACmD,GAAD,QAAYA,GAAQA,EAAKoO,aAAWkD,KAAK,KAXxDuE,CAAU5D,IAHR,YAIF0D,GAAUxD,KACbb,KAAK,KAKT,IAAmBsE,EAHnB,SAASD,GAAUG,GACjB,OAAOA,EAAMjZ,KAAI,SAACmD,GAAD,QAAYA,GAAQA,EAAK6C,YAAUyO,KAAK,KAQ3D,SAASqC,GAAWoC,EAAQ1X,EAAO2X,EAASpP,GAC1C,MAAgB,eAAZA,EACEmP,GAAUC,EAAgB3X,EACvB0X,EAAS,EAGdA,EAAS,GAAKC,EAAgB3X,EACtB0X,EAAS,E,mICzWjBtR,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC6G,OAAQ,CACNvF,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1C7K,MAAOqJ,EAAMmB,QAAQC,KAAKC,SAE5BiQ,SAAU,CACRpR,MAAO,IACPqR,QAAS,GAEXC,SAAU,CACRtR,MAAO,GACP6F,SAAU,IAEZ0L,QAAS,CACP9a,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAIf,SAASqQ,GAAoBpb,GAC1C,IAAM0K,EAAUlB,KACVE,EAAQiB,cAFmC,EAIfC,oBAAS,GAJM,mBAI1CyQ,EAJ0C,KAI/BC,EAJ+B,OAMvB1Q,mBACxB,sDAP+C,mBAM1CuF,EAN0C,KAMnCoL,EANmC,OASzB3Q,oBAAS,GATgB,mBAS1CE,EAT0C,KASpC0Q,EAToC,KAW3CC,EAAoBjQ,uBAAY,Y,4CACpCkQ,GAAwBrc,MAAK,SAACyL,GAE5B,GADAwQ,GAAa,IACA,IAATxQ,EAAgB,OAAOyQ,EAAS,qBACpCC,EAAQ1Q,GACR9K,EAAM2b,iBAAiB7Q,GACvB9K,EAAMuY,wBAAwB,CAAExT,KAAM,UACtC/E,EAAMtB,MAAMuZ,KAAK,iBAAiB5Y,MAAK,SAAC4U,GACtC,IAAM2H,EAAM7H,GAAI8H,WAAW/Q,EAAMmJ,GAC5B2H,GAAsB,IAAfA,EAAIlZ,OACX6Y,EAAS,iBADgBA,EAAS,eCtDhC,SAAmB7c,EAAOuV,GACvCA,EAAQvP,SAAQ,SAAC+C,GACf/I,EAAMM,IAAN,iBAAoByI,IAAU,WAC5B,OAAOqU,GACJtN,IADI,kBACW/G,IACfsU,KAAK,SACL1c,MAAK,SAACsa,GAAD,OAAUA,EAAKqC,eDkDrBC,CAAiBjc,EAAMtB,MAAOkd,WAGjC,CAAC5b,EAAM2b,iBAAkB3b,EAAMuY,wBAAyBvY,EAAMtB,QAEjE,OACE,kBAAC,IAAM6P,SAAP,KACE,kBAAC2B,EAAA,EAAD,CAASC,MAAM,SAASC,UAAU,SAASC,OAAK,GAC9C,6BACE,kBAACzC,GAAD,CAAWZ,UAAWtC,EAAQ6F,OAAQrD,QAASuO,GAC7C,kBAAC,KAAD,SAKN,kBAACvL,EAAA,EAAD,CAASC,MAAM,SAASC,UAAU,SAASC,OAAK,GAC9C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQ6F,OACnBrD,QAAS,WACPgP,UAAUC,UAAUC,UAAUpc,EAAMqc,iBAGtC,kBAAC,KAAD,SAKN,kBAACC,GAAA,EAAD,CACE7P,aAAc,CAAEC,SAAU,SAAUC,WAAY,SAChDwB,KAAMkN,EACNvM,QAAS,WACPwM,GAAa,IAEfiB,aAAc,CACZtN,UAAW,EACXhC,MAAO,CACLjC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1CkB,OAAQoQ,GAAkBrM,EAAOzG,KAGrC+S,QACE,kBAAC1J,EAAA,EAAD,CAAU/F,UAAWtC,EAAQsQ,UAC3B,kBAAC0B,GAAA,EAAD,KACE,kBAAC,KAAD,CAAa1P,UAAWtC,EAAQyQ,WAGlC,kBAAC1H,EAAA,EAAD,CACE1I,QAASoF,EACTyD,UAAW9I,EACX4I,uBAAwB,CACtBzG,MAAO,CAAE5M,MAAOqJ,EAAMmB,QAAQC,KAAKC,QAASd,WAAY,MAE1D6J,yBAA0B,CACxB7G,MAAO,CAAE5M,MAAOqJ,EAAMmB,QAAQC,KAAK8I,eAK3C+I,iBAAkB,O,8CAK1B,4BAAAzW,EAAA,sEAC0BgW,UAAUU,YAAYC,MAAM,CAClDC,KAAM,mBAFV,UAI0B,aAHlBC,EADR,QAIgB7L,OAA2C,WAApB6L,EAAU7L,MAJjD,yCAKWgL,UAAUC,UAAUa,YAL/B,iCAOS,GAPT,4C,sBASA,SAASR,GAAkBrM,EAAOzG,GAChC,OAAQyG,GACN,IAAK,gBACH,MAAO,OACT,IAAK,cACH,MAAM,aAAN,OAAoBzG,EAAMmB,QAAQwB,SAASyD,KAC7C,IAAK,oBACH,MAAM,aAAN,OAAoBpG,EAAMmB,QAAQwB,SAASC,KAC7C,QACE,MAAO,QE/Hb,IAAM9C,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCuT,UAAW,CACTrT,MAAO,EACPM,WAAYR,EAAMS,YAAYC,OAAO,QAAS,CAC5CC,OAAQX,EAAMS,YAAYE,OAAOC,MACjCC,SAAUb,EAAMS,YAAYI,SAAS2S,iBAEvCC,SAAU,UAEZC,WAAY,CACVxT,MAAO,IACPyT,SAAU,MACVnT,WAAYR,EAAMS,YAAYC,OAAO,QAAS,CAC5CC,OAAQX,EAAMS,YAAYE,OAAOC,MACjCC,SAAUb,EAAMS,YAAYI,SAAS2S,iBAEvCC,SAAU,UAEZG,YAAa,CACX1T,MAAO,GACPM,WAAYR,EAAMS,YAAYC,OAAO,QAAS,CAC5CC,OAAQX,EAAMS,YAAYE,OAAOC,MACjCC,SAAUb,EAAMS,YAAYI,SAASC,gBAEvC2S,SAAU,UAEZI,aAAc,CACZhM,SAAU,WACVjE,IAAK,EACLxD,MAAO,EACPkB,gBAAiBtB,EAAMmB,QAAQkD,OAAOyP,YACtC7P,aAAc,EACd8P,QAAS,EACT,UAAW,CACTzS,gBAAiBtB,EAAMmB,QAAQI,WAAWC,QAG9CwS,cAAe,CACbnM,SAAU,WACVxH,OAAQ,EACRD,MAAO,EACPkB,gBAAiBtB,EAAMmB,QAAQkD,OAAOyP,YACtCG,OAAQ,EACRhQ,aAAc,EACd,UAAW,CACT3C,gBAAiBtB,EAAMmB,QAAQI,WAAWC,QAI9C0S,MAAO,CACLhU,MAAO,OACPiU,UAAW,SACXC,UAAW,OACXC,cAAe,GACfC,aAAc,QAILC,GAAuB,CAClC1K,MAAM,EACN2K,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,YAAY,GAGd,SAASC,GAAuBtN,EAAOnD,GACrC,OAAQA,EAAOhJ,MACb,IAAK,QACH,OAAOkZ,GACT,QACE,OAAO,eACF/M,EADL,eAEGnD,EAAOhJ,MAAO,KAKR,SAAS0Z,GAAcze,GACpC,IAAM0K,EAAUlB,KAD2B,EAGDoB,oBAAS,GAHR,mBAGpCmN,EAHoC,KAGrB4D,EAHqB,OAIQ+C,qBACjDF,GACAP,IANyC,mBAIpCU,EAJoC,KAInBpG,EAJmB,KASrCqG,EAAWtQ,iBAAO,MAwCxB,OAtCApC,qBAAU,WAEH9K,OAAOG,OAAOod,GAAiBhc,UAAS,IAC3CgZ,GAAiB,KAElB,CAACgD,IAEJzS,qBAAU,WAAO,IAAD,EACR2S,EAAaC,KAAKC,MAAMC,aAAaC,QAAb,UAAwBjf,EAAMkf,IAA9B,WACxBC,EAAWH,aAAaC,QAAb,UAAwBjf,EAAMkf,IAA9B,SAEb,OAACL,QAAD,IAACA,GAAD,UAACA,EAAYtb,YAAb,aAAC,EAAkBkE,SAAW0X,IAElCnf,EAAMtB,MAAMO,IAAZ,iBAA0B4f,EAAWtb,KAAKkE,QAAUoX,EAAWtb,MAC/DtC,EAAI6C,SACF+a,GACA,SAAC5c,GAAU,IAAD,KACH,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,aAAC,EAAYuF,SAChBzH,EAAMtB,MAAMO,IAAZ,iBAA0BgD,EAAKC,KAAKuF,QAAUxF,EAAKC,OAChD,OAACD,QAAD,IAACA,GAAD,UAACA,EAAME,cAAP,aAAC,EAAcsF,SAClBzH,EAAMtB,MAAMO,IAAZ,iBAA0BgD,EAAKE,OAAOsF,QAAUxF,EAAKE,UAEzD,CACEmB,UAAW,CACTE,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,YAAY,KAKlB8X,EAAiBwD,GACjB5G,EAAwB,CAAExT,KAAM,aAC/B,IAGD,kBAAC,IAAMwJ,SAAP,KACE,kBAAC6Q,EAAA,EAAD,CACE/Q,OAAO,OACPF,KAAMnO,EAAMmO,KACZxC,QAAQ,YACRjB,QAAS,CACPQ,MAAOR,EAAQ2U,GAAiBrf,MAGlC,kBAACsf,EAAA,EAAD,KACE,kBAAClE,GAAD,CACEiB,cAAerc,EAAMqc,cACrBV,iBAAkBA,EAClBpD,wBAAyBA,EACzB7Z,MAAOsB,EAAMtB,SAGjB,kBAACmP,EAAA,EAAD,CACEb,UAAWtC,EAAQ6S,aACnBrQ,QAAS,kBAAMlN,EAAMuf,WAAWvf,EAAMwf,UAEnCxf,EAAMwf,OAAS,kBAAC,KAAD,MAAsB,kBAAC,KAAD,OAG1C,yBAAKxS,UAAWtC,EAAQkT,OACtB,yBAAKpP,IAAKoQ,GACP,CACC,OACA,YACA,YACA,WACA,WACA,WACA,cACAhd,KAAI,SAAC+J,GACL,OACE,kBAACmL,GAAD,eACEhY,IAAK6M,EACLoM,cAAeA,EACf4G,gBAAiBA,EACjBpG,wBAAyBA,EACzB5M,QAASA,EACToL,UAAWkD,GAAaja,EAAM+D,IAAK4H,IAC/B3L,SAOd,kBAAC6N,EAAA,EAAD,CACEb,UAAWtC,EAAQgT,cACnBxQ,QAAS,WACPlN,EAAM4L,kBAAkB,CAAE7G,KAAM,UAChC/E,EAAMoO,SAAQ,KAGhB,kBAAC,KAAD,SAMV,SAASiR,GAAiBrf,GACxB,OAAKA,EAAMmO,KACNnO,EAAMwf,OACJ,aADmB,cADF,YAInB,SAASvF,GAAa7V,EAAOuH,GAAU,IAAD,QAC3C,GAAgB,SAAZA,EAAoB,OAAO,EAC/B,IAAKvH,EAAMb,OAASa,EAAMb,KAAKyB,oBAAqB,OAAO,EAE3D,IAAMzB,EAAOa,EAAMb,KACbkc,EAAQlc,EAAKyB,oBACnB,OAAQ2G,GACN,IAAK,YACH,OAAQpI,EAAKX,SAEX,KAAK,IACH,OAAO,EAET,KAAK,KACH,OAAO,EACT,QACE,OAAO,EAEb,IAAK,YACH,iBAAO6c,EAAM3W,MAAK,SAACtG,GAAD,OAA+B,KAArBA,EAAK0C,sBAAjC,aAAO,EAA+CnG,MACxD,IAAK,WACH,iBAAO0gB,EAAM3W,MAAK,SAACtG,GAAD,OAA+B,KAArBA,EAAK0C,sBAAjC,aAAO,EAA+CnG,MACxD,IAAK,WACH,iBAAO0gB,EAAM3W,MAAK,SAACtG,GAAD,OAA+B,KAArBA,EAAK0C,sBAAjC,aAAO,EAA+CnG,MACxD,IAAK,WACH,iBAAO0gB,EAAM3W,MAAK,SAACtG,GAAD,OAA+B,OAArBA,EAAK0C,sBAAjC,aAAO,EAAiDnG,MAC1D,IAAK,aACH,OAGN,SAA2BqF,GAEzB,OADuB8P,GAAkB9P,EAAMb,KAAM,MAGhDa,EAAMP,WACJO,EAAMP,WAAWrC,QAAO,SAACC,EAAKQ,EAAMwE,GACzC,OAAMxE,EAAKC,KAAauE,EAAQ,EACzBhF,IACN,GAJ2B,EAFF,EALjBie,CAAkBtb,I,2CC3OhB,SAASub,GAAc3f,GACpC,OACE,yBACEiN,MAAO,CACL0E,UAAW,EACX/H,MAAO,QAGT,kBAACgW,GAAA,EAAD,CACE3S,MAAO,CAAErD,MAAO,QAChBiW,MACE,kBAACC,GAAA,EAAD,CAAYnM,QAAM,EAAC1G,MAAO,CAAErD,MAAO,SAC9BmW,GAAW/f,EAAMwC,KAAKwd,QAAxB,UACMhgB,EAAMwC,KAAKyd,cADjB,aACmCF,GAAW/f,EAAMwC,KAAKwd,QADzD,KAEGhgB,EAAMwC,KAAKyd,eAGnBC,aAAclgB,EAAMwC,KAAKzD,MACzBohB,WAAY,CACVC,UAAU,EACVC,kBAAkB,MAM5B,SAASN,GAAWC,GAClB,IAAKA,EAAQ,OAAO,EAEpB,IAAMM,EAAOC,GAAQzX,MAAK,SAACwX,GAAD,OAAUA,EAAKN,SAAWA,KAMpD,YALatgB,IAAT4gB,GACFlb,QAAQC,IACN,QADF,iBAEY2a,EAFZ,uDAIF,OAAOM,QAAP,IAAOA,OAAP,EAAOA,EAAME,YAEf,IAAMD,GAAU,CACd,CAAEP,OAAQ,EAAGQ,YAAa,KAC1B,CAAER,OAAQ,EAAGQ,YAAa,MAC1B,CAAER,OAAQ,EAAGQ,YAAa,OAC1B,CAAER,OAAQ,EAAGQ,YAAa,KAC1B,CAAER,OAAQ,EAAGQ,YAAa,KAC1B,CAAER,OAAQ,EAAGQ,YAAa,OAC1B,CAAER,OAAQ,EAAGQ,YAAa,MAC1B,CAAER,OAAQ,EAAGQ,YAAa,MAC1B,CAAER,OAAQ,EAAGQ,YAAa,MAC1B,CAAER,OAAQ,GAAIQ,YAAa,SAC3B,CAAER,OAAQ,GAAIQ,YAAa,SAC3B,CAAER,OAAQ,GAAIQ,YAAa,OAC3B,CAAER,OAAQ,GAAIQ,YAAa,SAC3B,CAAER,OAAQ,GAAIQ,YAAa,SAC3B,CAAER,OAAQ,GAAIQ,YAAa,QAC3B,CAAER,OAAQ,GAAIQ,YAAa,OAC3B,CAAER,OAAQ,GAAIQ,YAAa,UAC3B,CAAER,OAAQ,GAAIQ,YAAa,SAC3B,CAAER,OAAQ,GAAIQ,YAAa,aAC3B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,eAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,WAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,WAC5B,CAAER,OAAQ,IAAKQ,YAAa,UAC5B,CAAER,OAAQ,IAAKQ,YAAa,aAC5B,CAAER,OAAQ,IAAKQ,YAAa,aAC5B,CAAER,OAAQ,IAAKQ,YAAa,eAC5B,CAAER,OAAQ,IAAKQ,YAAa,UAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,iBAC5B,CAAER,OAAQ,IAAKQ,YAAa,OAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,YAC5B,CAAER,OAAQ,IAAKQ,YAAa,SAC5B,CAAER,OAAQ,IAAKQ,YAAa,OAC5B,CAAER,OAAQ,IAAKQ,YAAa,WAC5B,CAAER,OAAQ,IAAKQ,YAAa,MAC5B,CAAER,OAAQ,IAAKQ,YAAa,QAC5B,CAAER,OAAQ,IAAKQ,YAAa,WAC5B,CAAER,OAAQ,IAAKQ,YAAa,SAC5B,CAAER,OAAQ,IAAKQ,YAAa,KAC5B,CAAER,OAAQ,IAAKQ,YAAa,SAC5B,CAAER,OAAQ,IAAKQ,YAAa,cAC5B,CAAER,OAAQ,IAAKQ,YAAa,4BAC5B,CAAER,OAAQ,IAAKQ,YAAa,aC5Ff,SAASC,GAAKzgB,GAAQ,IAAD,EACV4K,oBAAS,GADC,mBAC3B7F,EAD2B,KACrB2b,EADqB,OAEsB9V,oBAAS,GAF/B,mBAE3B+V,EAF2B,KAELC,EAFK,OAIFhW,oBAAS,GAJP,mBAI3BhD,EAJ2B,KAIjBiZ,EAJiB,OAKLjW,oBAAS,GALJ,mBAK3BkW,EAL2B,KAKhBC,EALgB,KAuBlC,OAhBA7U,qBAAU,WACRlM,EAAMtB,MAAMuZ,KAAK,yBAAyB5Y,MAAK,SAACsa,GAC9CiH,EAAwBjH,QAEzB,IAEHzN,qBAAU,WACRwU,EAAQ1gB,EAAM+E,QACb,CAAC/E,EAAM+E,OAEVmH,qBAAU,WACFnH,GAAU4b,IACdE,EAAY9b,EAAK6C,UACjBmZ,EAuBN,SAAwB7e,EAAMye,GAC5B,IAAMK,EAAM,CAAC,gBAAiB,kBAAmB,WAAY,QACvDC,EA+CR,SAA0Blc,EAAM4b,GAC9B,IAAK5b,IAASA,EAAKC,oBAAqB,OACxC,IAAMA,EAAsBD,EAAKC,oBAE3Bkc,EAAqB,IAAI1Z,MAAM,IAClC/G,UAAKf,GACLkC,KAAI,SAACY,EAAMiE,GAAP,YAAkB,CACrBqW,KAAI,UAAE6D,EAAqBla,UAAvB,aAAE,EAA6BqW,KACnCqE,WAAY,OAQhB,OALAnc,EAAoBN,SAAQ,SAAClC,GACtBA,EAAK4e,oBACLF,EAAmB1e,EAAK4e,qBAAqBD,WAAWtc,KAAKrC,GADnC0e,EAAmB,GAAGC,WAAWtc,KAAKrC,MAIhE0e,EA/DmBG,CAAiBnf,EAAMye,GAAsBnf,QACrE,SAACC,EAAK6f,GAIJ,OAHIN,EAAIre,SAAS2e,EAASxE,MACxBrb,EAAIuf,IAAIA,EAAI3M,QAAQiN,EAASxE,OAASwE,EACnC7f,EAAI8f,KAAK1c,KAAKyc,GACZ7f,IAET,CAAE8f,KAAM,GAAIP,IAAK,IAAIxZ,MAAMwZ,EAAIte,QAAQjC,UAAKf,KAG9C,MAAO,sBAAIuhB,EAAkBM,MAAtB,YAA+BN,EAAkBD,MAAKpf,KAC3D,SAAC0f,GACC,GAAKA,GAAaA,EAASxE,MAAuC,IAA/BwE,EAASH,WAAWze,OAAvD,CAGA,IAAM+c,EAAQ6B,EAASH,WACjBrE,EAAOwE,EAASxE,KAChB0E,EAAY,GAElB,OACE,kBAAC,IAAMjT,SAAP,CAAgBzP,IAAKge,GACnB,kBAACgD,GAAA,EAAD,CACE7S,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZwX,eAAgB,IAChBC,WAAY,EACZ7P,YAAa,GACbF,UAAW,IAEbhG,QAAQ,KACRgW,MAAM,SAEL7E,GAEF2C,EAAM7d,KAAI,SAACY,GACV,IAAM1D,EAAG,UAAM0D,EAAKyd,cAAX,YAA4Bzd,EAAKzD,OAC1C,IAAKyiB,EAAU7e,SAAS7D,GAEtB,OADA0iB,EAAU3c,KAAK/F,GACR,kBAAC6gB,GAAD,CAAe7gB,IAAKA,EAAK0D,KAAMA,YAhEtCof,CAAe7c,EAAM4b,OAE9B,CAACA,EAAsB5b,IAExB,kBAAC,IAAMwJ,SAAP,KACE,kBAACuR,GAAA,EAAD,CACE7S,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZwX,eAAgB,IAChBC,WAAY,EACZ7P,YAAa,GACbgQ,eAAgB,aAElBlW,QAAQ,KACRgW,MAAM,SAEL/Z,GAEH,yBAAKqF,MAAO,CAAE0E,UAAW,KAAOmP,IChCtC,IAAMtX,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCoY,UAAW,CACTlY,MAAO,IACPyT,SAAU,MACVxT,OAAQ,OACRsT,SAAU,UAEZS,MAAO,CACLhU,MAAO,OACPC,OAAQ,OACRiU,UAAW,SACX7C,QAAS,qBACT8G,aAAc,GACdlE,UAAW,UAEbH,cAAe,CACbnM,SAAU,WACVxH,OAAQ,EACRD,MAAO,EACPkB,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,MACtCL,aAAc,GAEhB6B,WAAY,CACVwO,aAAc,QAIH,SAASgE,GAAWhiB,GAAQ,IAAD,QAClC0K,EAAUlB,KACVE,EAAQiB,cAF0B,EAIRC,mBAAS,GAJD,mBAIjCqX,EAJiC,KAIvBC,EAJuB,KAMlCC,EAAc3W,uBAClB,SAAC/E,GACC,IAAIuE,EAAkBtB,EAAMmB,QAAQkD,OAAOC,MACvC3N,EAAQqJ,EAAMmB,QAAQC,KAAKgD,SAM/B,OAJImU,IAAaxb,IACfuE,EAAkBtB,EAAMmB,QAAQkD,OAAOqU,SACvC/hB,EAAQqJ,EAAMmB,QAAQC,KAAKC,SAEtB,CACLC,gBAAiBA,EACjB3K,MAAOA,EACP0hB,aAAc,MAGlB,CAACE,IAGH,OACE,kBAAC7C,EAAA,EAAD,CACE/Q,OAAUrO,EAAMqO,OAASrO,EAAMqO,OAAS,QACxCF,KAAMnO,EAAMmO,KACZxC,QAAQ,YACRjB,QAAS,CAAEQ,MAAOR,EAAQoX,WAC1BhT,QAAS,WACP9O,EAAM4L,kBAAkB,CACtB7G,KAAM,OACN8G,QAAS,CACPsC,MAAM,KAGV+T,EAAY,KAGd,yBAAKlV,UAAWtC,EAAQkT,QACrB,UAAA5d,EAAMiC,YAAN,eAAYE,SACX,kBAACmd,EAAA,EAAD,CAAa+C,WAAS,EAAC1W,QAAQ,QAC7B,kBAACkC,EAAA,EAAD,CAAQZ,MAAOkV,EAAY,GAAIjV,QAAS,kBAAMgV,EAAY,KAA1D,QAGA,kBAACrU,EAAA,EAAD,CAAQZ,MAAOkV,EAAY,GAAIjV,QAAS,kBAAMgV,EAAY,KAA1D,WAKJ,yBAAKI,OAAqB,IAAbL,GACX,kBAAC,GAAD,CACEld,UACyBrF,KAAvB,UAAAM,EAAMiC,YAAN,eAAYwF,QAAuBzH,EAAMiC,KAAzC,UAAgDjC,EAAMiC,YAAtD,aAAgD,EAAYC,KAE9DxD,MAAOsB,EAAMtB,SAGjB,yBAAK4jB,OAAqB,IAAbL,GACX,kBAAC,GAAD,CAAMld,KAAI,UAAE/E,EAAMiC,YAAR,aAAE,EAAYE,OAAQzD,MAAOsB,EAAMtB,UAGjD,kBAACmP,EAAA,EAAD,CACEb,UAAWtC,EAAQgT,cACnBxQ,QAAS,kBAAMlN,EAAM4L,kBAAkB,CAAE7G,KAAM,YAE/C,kBAAC,KAAD,Q,yEC9FFyE,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,OACPoB,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1C+P,QAAS,EACTsH,OAAQ,GAEV/C,OAAQ,CACNgD,UAAW,eACX1Y,MAAO,MACPI,WAAYR,EAAMS,YAAYC,OAAO,YAAa,CAChDG,SAAUb,EAAMS,YAAYI,SAASkY,YAGzCC,WAAY,CACV5Y,MAAO,MACP0Y,UAAW,kBAEbG,OAAQ,CACN1H,QAAS,EACTsH,OAAQ,EACRK,YAAalZ,EAAMmZ,QAAQ,GAC3B7X,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,WAI3B,SAAS8U,GAAW9iB,GACjC,IAAM0K,EAAUlB,KADwB,EAEhBuZ,IAAMnY,SAAS5K,EAAMgjB,QAFL,mBAEjC7U,EAFiC,KAE3BC,EAF2B,OAGd2U,IAAMnY,SAAS,IAHD,mBAGjCqY,EAHiC,KAG1BC,EAH0B,KAKlCC,EAAc,WAClB/U,GAASD,IAmCX,OAhCAjC,qBAAU,WAGR,OAFqB,IAAjBlM,EAAMgjB,QAAiB5U,GAAQ,GAE5B,WACLA,GAAQ,MAET,CAACpO,EAAMgjB,SAEV9W,qBAAU,WACR,IAkDgBkX,EAlDZC,GAAY,EAkBhB,OAhBkC,OAA9BrjB,EAAMojB,SAASE,WAEjBtjB,EAAMtB,MACHM,IADH,iBACiBgB,EAAMojB,SAASG,eAAgB,WAC5C,OAAOC,GACJhV,IADI,mBACYxO,EAAMojB,SAASG,eAC/BE,iBACApkB,KAHI,uCAGC,WAAOqkB,GAAP,SAAAxd,EAAA,sEACSyd,MAAMD,GAChBrkB,MAAK,SAACsa,GAAD,OAAUA,EAAKiK,iBACpBvkB,MAAK,SAACukB,GAAD,OAAiBC,GAA2BD,MAHhD,mFAHD,0DASRvkB,MAAK,SAACsa,GAAD,QAAY0J,GAAaH,EAASvJ,MACvCuJ,GAkCWE,EAlCSpjB,EAAMojB,SAmC3B,oCAAN,cAA2CA,QAA3C,IAA2CA,OAA3C,EAA2CA,EAAUE,WAArD,mBAjCS,WACLD,GAAY,KAEb,CAACrjB,EAAMtB,MAAOsB,EAAMojB,WAGrB,kBAACU,GAAA,EAAD,CAAM9W,UAAWtC,EAAQgD,KAAMsF,OAAK,GAClC,kBAACD,EAAA,EAAD,CAAUxC,QAAM,EAACrD,QAASiW,GACxB,kBAACY,GAAA,EAAD,KACE,kBAAChX,EAAA,EAAD,CAAQE,MAAO,CAAErD,MAAO,GAAIC,OAAQ,IAAMwJ,IAAK4P,GAA/C,MAIF,kBAACxP,EAAA,EAAD,CACE1I,QAAS/K,EAAMojB,SAASY,gBACxBtQ,uBAAwB,CAAE/H,QAAS,eAErC,kBAACsY,GAAA,EAAD,CACEjX,UAAWkX,aAAKxZ,EAAQ8U,OAAT,eACZ9U,EAAQgY,WAAavU,IAExBjB,QAASiW,GAET,kBAAC,KAAD,QAGJ,kBAACgB,GAAA,EAAD,CAAUC,GAAIjW,EAAMkW,QAAQ,OAAOC,eAAa,GAC9C,kBAACR,GAAA,EAAD,CAAM9W,UAAWtC,EAAQiY,QAAS3iB,EAAMmN,YAQhD,SAAS0W,GAA2BD,GAClC,IAEIW,EAAS,GAGb,MAFc,GAAGnQ,MAAMoQ,KAAK,IAAIC,WAAWb,IACrClf,SAAQ,SAACyB,GAAD,OAAQoe,GAAUG,OAAOC,aAAaxe,MAJjC,0BAKClI,OAAO2mB,KAAKL,GC3GlC,IAAMlX,GAAW5D,aAAW,SAACC,GAAD,MAAY,CACtCgE,KAAM,CACJuN,QAAS,oBACTjQ,gBAAiB,oBAEnBrB,WAAY,CACVC,MAAO,GACPC,OAAQ,GACRgI,YAAa,QAIF,SAASgT,GAAc7kB,GACpC,IAAM0K,EAAU2C,KACV3D,EAAQiB,cAEd,OACE,kBAACoI,EAAA,EAAD,CACE/F,UAAWtC,EAAQgD,KACnB5O,IAAKkB,EAAMojB,SAASxb,SACpB2I,QAAM,EACNrD,QAAS4X,GAAgB9kB,IAEzB,kBAAC+M,EAAA,EAAD,CACEE,MAAO,CACLjC,gBAAiBwC,GAAaxN,EAAMojB,SAAU1Z,IAEhDsD,UAAWtC,EAAQf,YAElB,IAGH,kBAAC8J,EAAA,EAAD,CACE1I,QAAS/K,EAAMojB,SAASxb,SACxB8L,uBAAwB,CAAE/H,QAAS,cAK3C,IAAMmZ,GAAkB,SAAC9kB,GAAD,OAAW,WACjCA,EAAMqS,SAAWrS,EAAMqS,QAAQrS,EAAMojB,UACrCpjB,EAAM+kB,iBAAmB/kB,EAAM+kB,gBAAgB/kB,EAAMojB,YAGvD,SAAS5V,GAAatL,EAAMwH,GAC1B,GAAKxH,EAGL,OADwBA,EAAK8iB,iBAG3B,KAAK,EACH,OAAOtb,EAAMmB,QAAQkD,OAAOC,MAE9B,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,EACH,MAAO,UAET,KAAK,GACH,MAAO,UAET,KAAK,GACH,MAAO,UACT,QACE,OAAOtE,EAAMmB,QAAQkD,OAAOC,O,cCnFnB,SAASiX,GAAwBjlB,GAC9C,GAAKA,EAAMklB,MAAMC,cAAjB,CAEA,IAAMC,EAAoBplB,EAAMyC,OAAO2iB,kBAEvC,GAAIA,EAAkBjkB,cAAgBqG,MAAO,CAC3C,IAAI2d,EAAgBnlB,EAAMklB,MAAMC,cAMhC,OAJAC,EAAkB1gB,SAAQ,SAACqE,GACzBoc,EASN,SAAiCE,EAAkBF,GACjD,OAAKE,EAAiBpF,cAEfkF,EAAc1iB,QAAO,SAACsG,GAAW,IAAD,EACrC,cAAQsc,QAAR,IAAQA,GAAR,UAAQA,EAAkBtmB,aAA1B,aAAQ,EAAyBoC,aAC/B,KAAKnD,QACL,KAAKmO,OACH,OAAOpD,EAAMsc,EAAiBpF,iBAAmBoF,EAAiBtmB,MACpE,KAAKyI,MACH,OAAO6d,EAAiBtmB,MAAM4D,SAC5BoG,EAAMsc,EAAiBpF,gBAE3B,KAAKyE,OACH,OAAO3b,EAAMsc,EAAiBpF,eAC3BqF,cACA3iB,SAAS0iB,EAAiBtmB,MAAMumB,eACrC,QACE,OAAO,MAhB+BH,EAVxBI,CAAwBxc,EAAOoc,MAG1CA,EAGT,OAAOnlB,EAAMklB,MAAMC,eCLN,SAASK,GAAkBxlB,GACxC,GAAKA,EAAMylB,kBAKX,OAHAzlB,EAAMklB,MAAMC,cAAgBO,GAAoB1lB,GAC5CA,EAAMklB,MAAMC,cAAcziB,OAAS,KAAI1C,EAAMgjB,QAAS,GAEtDhjB,EAAMylB,kBAAkBtkB,cAAgBgL,OACnCwZ,GAAkB3lB,GAEvBA,EAAMylB,kBAAkBtkB,cAAgBqG,MACnCxH,EAAMylB,kBAAkB7jB,KAAI,SAACmH,GAClC,OAAO4c,GAAkB,eACpB3lB,EADmB,CAEtBylB,kBAAmB1c,aAJzB,EAUF,SAAS4c,GAAkB3lB,GACzB,QA8CF,SAAwBA,GACtB,SAAMA,EAAMklB,MAAMU,mBAAsB5lB,EAAMklB,MAAMC,eA/C/CU,CAAe7lB,KC9BP,SAAyBA,GACtC,GAAKA,EAAMklB,MAAMU,uBAAgDlmB,IAA5BM,EAAMylB,kBAK3C,OAHuBzlB,EAAMklB,MAAMU,iBAAiB9c,MAClD,SAACC,GAAD,OAAWA,EAAM+c,gBAAkB9lB,EAAMylB,qBAErBM,SD0BlBC,CAAgBhmB,GAOtB,SAAgCA,GAE9B,OEzCa,SAA8BA,GAC3C,IAAKA,EAAMklB,MAAMC,cAAe,MAAO,GAEvC,IAAMA,EAAgBnlB,EAAMklB,MAAMC,cAC5BW,EAAgB9lB,EAAMylB,kBAM5B,OAEF,SAA+BQ,GAC7B,IAEIC,EAFAC,EAAMF,EAAgBvjB,OAG1B,EAAG,CACDwjB,GAAU,EACV,IAAK,IAAIE,EAAI,EAAGA,EAAID,EAAM,EAAGC,IAC3B,GACEH,EAAgBG,GAAGpB,gBACnBiB,EAAgBG,EAAI,GAAGpB,gBACvB,CACA,IAAIqB,EAAMJ,EAAgBG,GAC1BH,EAAgBG,GAAKH,EAAgBG,EAAI,GACzCH,EAAgBG,EAAI,GAAKC,EACzBH,GAAU,SAGPA,GACT,OAAOD,EAxBWK,CAChBnB,EAAc1iB,QAAO,SAACsG,GAAD,OAAWA,EAAM+c,gBAAkBA,MFiCjCS,CAAqBvmB,GACtB4B,KAAI,SAACmH,GAC3B,OACE,kBAAC8b,GAAD,CACExS,QAASrS,EAAMkR,MAAMmB,QACrB0S,gBAAiB/kB,EAAMkR,MAAM6T,gBAC7BjmB,IAAKiK,EAAMnB,SACXwb,SAAUra,OAdPyd,CAAuBxmB,GAmBlC,SAAmCA,GAEjC,OGtDa,SAAiCA,GAC9C,OAAKA,EAAMklB,MAAMU,iBAEV5lB,EAAMklB,MAAMU,iBAAiBnjB,QAAO,SAACsG,GAC1C,OAAOA,EAAM0d,gBAAkBzmB,EAAMylB,qBAHG,GHoDdiB,CAAwB1mB,GACzB4B,KAAI,SAACmH,GAC9B,IAAM4d,EAA+BhB,GAAkB,eAClD3lB,EADiD,CAEpDylB,kBAAmB1c,EAAM+c,iBAG3B,OI5DW,SAAsBc,GACnC,GAA2C,IAAvCA,EAA4BlkB,OAAc,OAAO,EADW,qBAG9CkkB,GAH8C,IAGhE,2BAA+C,CAC7C,QAAclnB,IAD+B,QACpB,OAAO,GAJ8B,8BAMhE,OAAO,EJsDAmnB,CAAaF,GAGd,kBAAC7D,GAAD,CACEE,SAAUhjB,EAAMgjB,OAChBlkB,IAAKiK,EAAMib,gBACXZ,SAAUra,EACV+d,cAAe9mB,EACftB,MAAOsB,EAAMtB,OAEZioB,QAV0C,KAzB1CI,CAA0B/mB,IA+C9B,IAAMgnB,GAAgC,CAC3ChE,QAAQ,EACRyC,kBAAmB,EACnBP,MAAO,CACLU,kBAAkB,EAClBT,eAAe,GAEjB1iB,OAAQ,CACN2iB,kBAAmB,CACjB,CACEnF,eAAe,EACflhB,OAAO,KAIbmS,MAAO,CACLhP,MAAM,EACNmQ,SAAS,EACT0S,iBAAiB,IK5Ffvb,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,OACP6F,SAAU,IACV5F,OAAQ,OACRmB,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1C+b,WAAY,OAIDlE,OAAMmE,MAAK,SAAgClnB,GACxD,IAAM0K,EAAUlB,KAD+C,EAGvCoB,oBAAS,GAH8B,mBAGxD1I,EAHwD,KAGlDmQ,EAHkD,OAKfzH,oBAAS,GALM,mBAKxDgb,EALwD,KAKtCuB,EALsC,OAMrBvc,oBAAS,GANY,mBAMxDua,EANwD,KAMzCiC,EANyC,OAQXxc,wBAASlL,GARE,mBAQxD2nB,EARwD,KAQpCC,EARoC,OASvC1c,mBAAS,eAC5Boc,GAD2B,GAE3BhnB,EAAM8mB,cAFqB,CAG9B5V,MAAO,CACLhP,KAAMA,EACNmQ,QAASA,EACT0S,gBAAiB/kB,EAAM8mB,cAAc5V,MAAM6T,oBANxC+B,EATwD,oBA4E/D,OAzDA5a,qBAAU,WACRlM,EAAMtB,MAAMuZ,KAAK,qBAAqB5Y,MAAK,SAACsa,GAC1CwN,EAAoBxN,QAErB,IAEHzN,qBAAU,WACRlM,EAAMtB,MAAMuZ,KAAK,iBAAiB5Y,MAAK,SAACsa,GAAD,OAAUyN,EAAiBzN,QACjE,IAEHzN,qBAAU,YACH,OAAChK,QAAD,IAACA,OAAD,EAACA,EAAMuF,SACVzH,EAAMtB,MACHM,IADH,iBACiBkD,EAAKuF,SAAU,WAC5B,OAAOqU,GACJtN,IADI,mBACYtM,EAAKuF,SACrBsU,KAAK,SACL1c,MAAK,SAACsa,GAAD,OAAUA,EAAKqC,YAExB3c,MAAK,SAACsa,GACLtH,EAAQsH,QAIb,QAACzX,QAAD,IAACA,OAAD,EAACA,EAAMuF,SAEVyE,qBAAU,WACR,IAAMqb,EAAqB,eACtBT,EADsB,CAEzBrB,kBAAmBzlB,EAAM8mB,cAAcrB,kBACvChjB,OAAQzC,EAAM8mB,cAAcrkB,OAC5ByiB,MAAO,CACLU,iBAAkBA,EAClBT,cAAeA,GAEjBzmB,MAAOsB,EAAMtB,QAGTknB,GAAsBT,IACrBnlB,EAAMwnB,OAcNF,EAAsBG,GAAcF,IAbvCvnB,EAAMtB,MACHM,IADH,wBAGqB8f,KAAK4I,UAAU1nB,EAAM8mB,eAH1C,MAII,WACE,OAAO,IAAI3nB,SAAQ,SAACC,GAClBA,EAAQqoB,GAAcF,UAI3BloB,MAAK,SAACsa,GACL2N,EAAsB3N,SAI7B,CAACiM,EAAkBT,EAAewC,GAAW3nB,EAAM8mB,iBAGpD,kBAAChD,GAAA,EAAD,CAAM9W,UAAWtC,EAAQgD,KAAMsF,OAAK,GAClC,kBAACmR,GAAA,EAAD,CAAUC,IAAE,EAACC,QAAQ,QAClBgD,OAKT,SAASM,GAAWb,GAClB,IAAMrB,EAAoBqB,EAAcrB,kBAGxC,OAF0BqB,EAAcrkB,OAAO2iB,kBAG5CxjB,KAAI,SAACY,GAAD,MAAU,CAACA,EAAKyd,cAAezd,EAAKzD,OAAOsX,KAAK,QACpDA,KAAK,KACL1U,OAAO8jB,G,uHChGNjc,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCke,aAAc,CACZhe,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASC,IACxCjM,MAAOqJ,EAAMmB,QAAQ0F,OAAOlQ,OAE9BwnB,iBAAkB,CAChBje,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASyb,OACxCznB,MAAOqJ,EAAMmB,QAAQ0F,OAAOlQ,OAE9B0nB,eAAgB,CACdne,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAAS2b,KACxC3nB,MAAOqJ,EAAMmB,QAAQ0F,OAAOlQ,OAE9B4nB,UAAW,CACTre,MAAO,OACP6F,SAAU,GACVzE,gBAAiBtB,EAAMmB,QAAQwB,SAASuD,MACxCvP,MAAOqJ,EAAMmB,QAAQ0F,OAAOlQ,OAE9B6nB,gBAAiB,CACfte,MAAO,OACP6F,SAAU,GACVpP,MAAOqJ,EAAMmB,QAAQ0F,OAAOlQ,WAI1B8nB,GAAe,SAAUnoB,GAAQ,IAAD,EAC9B0K,EAAUlB,KAEhB,OACE,kBAAC0G,EAAA,EAAD,CAASC,MAAM,SAASC,UAAU,SAASC,OAAK,GAC9C,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQkd,aACnB1a,QAAS,kBAAMlN,EAAMqS,QAAQ,QAC7BvE,WAAU,UAAC9N,EAAM8Q,kBAAP,aAAC,EAAkBrJ,SAE7B,kBAAC,KAAD,UAMJ2gB,GAAmB,SAAUpoB,GAAQ,IAAD,EAClC0K,EAAUlB,KAEhB,OACE,kBAAC0G,EAAA,EAAD,CAASC,MAAM,cAAcC,UAAU,SAASC,OAAK,GACnD,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQmd,iBACnB3a,QAAS,WACPlN,EAAMsQ,kBAAkB,CAAEvL,KAAM,OAAQ8G,QAAS,SAEnDiC,WAAU,UAAC9N,EAAMqoB,oBAAP,aAAC,EAAoB5gB,SAE/B,kBAAC,IAAD,UAMJ6gB,GAAiB,SAAUtoB,GAAQ,IAAD,EAChC0K,EAAUlB,KAEhB,OACE,kBAAC0G,EAAA,EAAD,CAASC,MAAM,cAAcC,UAAU,SAASC,OAAK,GACnD,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQqd,eACnB7a,QAAS,WACPlN,EAAM4L,kBAAkB,CACtB7G,KAAM,OACN8G,QAAS,CACPsC,MAAM,EACNrC,YAAa9L,EAAMuoB,WAAWxjB,KAC9ByjB,WAAYxoB,EAAMuoB,WAAW9hB,UAInCqH,WAAU,UAAC9N,EAAM8Q,kBAAP,aAAC,EAAkBrJ,SAE7B,kBAAC,KAAD,UAMJghB,GAAY,SAAUzoB,GAAQ,IAAD,EAC3B0K,EAAUlB,KAEhB,OACE,kBAAC0G,EAAA,EAAD,CAASC,MAAM,YAAYC,UAAU,SAASC,OAAK,GACjD,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQud,UACnB/a,QAAS,WACPlN,EAAMsQ,kBAAkB,CACtBvL,KAAM,aACN8G,QAAS,SAGbiC,WAAU,UAAC9N,EAAM8Q,kBAAP,aAAC,EAAkBrJ,SAE7B,kBAAC,KAAD,UAMJihB,GAAkB,SAAU1oB,GAAQ,IAAD,EACX4K,oBAAS,GADE,mBAChC8M,EADgC,KACxBC,EADwB,KAEjCjN,EAAUlB,KACVE,EAAQiB,cAMd,OAJAuB,qBAAU,WACJlM,EAAM2oB,eAAiBjR,GAAQC,EAAU3X,EAAM2oB,gBAClD,CAAC3oB,EAAM2oB,eAGR,kBAACzY,EAAA,EAAD,CAASC,MAAM,qBAAqBC,UAAU,SAASC,OAAK,GAC1D,6BACE,kBAACzC,GAAD,CACEZ,UAAWtC,EAAQwd,gBACnBjb,MAAO,CACLjC,gBAAiB0M,EACbhO,EAAMmB,QAAQwB,SAASuD,MACvBlG,EAAMmB,QAAQwB,SAASC,KAE7BY,QAAS,WACPlN,EAAMqS,QAAQ,YACdrS,EAAM4oB,iBAAiBlR,GACvBC,GAAWD,KAGZA,EAAS,kBAAC,KAAD,MAAe,kBAAC,KAAD,UAOpB,SAASmR,GAAkB7oB,GACxC,OACE,kBAAC8oB,GAAA,EAAD,CAAM3Z,WAAS,GACb,kBAAC2Z,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAiB/oB,IAEpB,kBAAC8oB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAqB/oB,IAExB,kBAAC8oB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAmB/oB,IAEtB,kBAAC8oB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACpY,GAAiB3Q,IAED,eAAlBA,EAAM2L,QACL,kBAACmd,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAc/oB,IAGjB,kBAAC8oB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,IAGjB,kBAACD,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAoB/oB,K,0CC9KvBwJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCsf,UAAW,CACTzG,OAAQ,qBAEV0G,oBAAqB,CACnBhf,WAAY,IACZD,SAAU,QAEZkf,oBAAqB,CACnBjf,WAAY,IACZgR,QAAS,kBACTpR,OAAQ,IAEVsf,cAAe,CACbjf,WAAW,GAAD,OAAKR,EAAMS,YAAYC,OAAO,CAAC,WAAY,CACnDG,SAAU,QAGd6e,aAAc,CACZlf,WAAW,GAAD,OAAKR,EAAMS,YAAYC,OAAO,CAAC,WAAY,CACnDG,SAAU,MADF,YAEJb,EAAMS,YAAYC,OAAO,CAAC,WAAY,CAC1CG,SAAU,QAGd8e,YAAa,CACXzf,MAAO,IACPuT,SAAU,UAEZmM,YAAa,CACX1f,MAAO,OACPC,OAAQ,OACR0f,UAAW,IACXzL,UAAW,OACXE,aAAc,GACdH,UAAW,cAIT2L,GAAkBC,aAAW,CACjC/b,KAAM,CACJ,2BAA4B,CAC1Bgc,YAAa,GAEf,6BAA8B,CAC5BA,YAAa,GAEf,iCAAkC,CAChCC,gBAAiB,EACjB1O,QAAS,kBAEXrR,MAAO,QAZa6f,CAcrB7J,MAEY,SAASgK,GAAoB5pB,GAC1C,IAAM0K,EAAUlB,KACVmF,EAAWL,iBAAO,MAFyB,EAIb1D,oBAAS,GAJI,mBAI1Cif,EAJ0C,KAI9BC,EAJ8B,OAKPlf,oBAAS,GALF,mBAK1Cmf,EAL0C,KAK3BC,EAL2B,OAMbpf,mBAAS,IANI,mBAM1Cqf,EAN0C,KAM9BC,EAN8B,KAQ3CC,EAAyB3e,uBAAY,SAACC,GAC1Cye,EAAcze,EAAE2e,OAAOrrB,OACjB0M,EAAE2e,OAAOrrB,QACb+qB,GAAc,GACdE,GAAiB,OAIrB,OACE,kBAACK,GAAA,EAAD,CACEC,YAAa,WACXN,GAAiB,KAGnB,6BACE,kBAACR,GAAD,CACEhb,IAAKG,EACL3B,UAAWtC,EAAQse,UACnBuB,gBAAiB,CACfvd,UAAWtC,EAAQue,qBAErBuB,WAAY,CACVxd,UAAWtC,EAAQwe,qBAErBrJ,MAAM,SACN4K,SAAUN,EACVO,QAASP,IAGX,kBAACQ,GAAA,EAAD,CACE1d,MAAO,CACLwQ,QAASsM,EAAgB,EAAI,EAC7BpM,OAAQoM,EAAgB,KAAQ,KAElC/c,UACE+c,EAAgBrf,EAAQye,cAAgBze,EAAQ0e,aAElDjb,KAAM0b,EACNlb,SAAUA,EAASC,QACnBwB,UAAU,gBAEV,kBAACwa,GAAA,EAAD,CAAO5d,UAAWtC,EAAQ2e,YAAapa,UAAW,GAChD,yBAAKjC,UAAWtC,EAAQ4e,aACtB,kBAAC,GAAD,CACExC,cAAe+D,GACb7qB,EAAM8mB,cACNmD,GAEFvrB,MAAOsB,EAAMtB,MACb8oB,QAAM,SAStB,SAASqD,GAAoB/D,EAAemD,GAC1C,IAAKA,EAAY,OAAOnD,EAExB,IAAMgE,EAAwB,YAAOhE,EAAcrkB,OAAO2iB,mBAM1D,OALA0F,EAAyBjmB,KAAK,CAC5Bob,cAAe,WACflhB,MAAOkrB,IAGF,eACFnD,EADL,CAEE9D,QAAQ,EACRvgB,OAAQ,CACN2iB,kBAAmB0F,KCtIzB,IAAMthB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCoY,UAAW,CACTlY,MAAO,IACPC,OAAQ,OACRsT,SAAU,UAEZS,MAAO,CACLhU,MAAO,OACPC,OAAQ,OACRiU,UAAW,OACXE,aAAc,GACdH,UAAW,UAEbH,cAAe,CACbnM,SAAU,WACVxH,OAAQ,EACRD,MAAO,EACPkB,gBAAiBtB,EAAMmB,QAAQkD,OAAOyP,YACtC7P,aAAc,EACd,UAAW,CACT3C,gBAAiBtB,EAAMmB,QAAQI,WAAWC,YAKjC,SAAS6f,GAAW/qB,GACjC,IAgImBgrB,EAhIbtgB,EAAUlB,KADwB,EAGhBoB,oBAAS,GAHO,mBAGjC1I,EAHiC,KAG3BmQ,EAH2B,OAIdzH,mBAAS,GAJK,mBAIjChB,EAJiC,KAI1BqhB,EAJ0B,KAMlCC,EAAmB1f,uBAAY,WACnC,MAAO,CACLia,kBAAmB0F,GAAqBnrB,EAAMoE,MAAOpE,EAAM2L,SAC3DuF,MAAO,CACL6T,gBAAiB1S,GAEnB5P,OAAQ,CACN2iB,kBAAkB,GAAD,mBACZA,GAAkBplB,EAAM2L,UADZ,YAEZ3L,EAAMyC,UAGbyc,IAAKlf,EAAMkf,OAEZ,CACDlf,EAAM2L,SA4GWqf,EA3GLhrB,EAAMyC,OA4GbuoB,EACJppB,KAAI,SAACa,GAAD,gBAAeA,EAAOwd,cAAtB,YAAuCxd,EAAO1D,UAClDsX,KAAK,MA7GN8U,GAAqBnrB,EAAMoE,MAAOpE,EAAM2L,WAqB1C,OAlBAO,qBAAU,WACR+e,EAAShtB,OAAOmtB,YAChB,IAAMC,EAAe,SAAC5f,GACpBwf,EAAShtB,OAAOmtB,aAGlB,OADAntB,OAAOqtB,iBAAiB,SAAUD,GAC3B,WACLptB,OAAOstB,oBAAoB,SAAUF,MAEtC,IAEHnf,qBAAU,WACFhK,IACJlC,EAAMsQ,kBAAkB,CAAEvL,KAAM/E,EAAM2L,QAASE,QAAS3J,IACxDmQ,GAAQ,MAET,CAACnQ,IAGF,kBAACkd,EAAA,EAAD,CACE1U,QAAS,CAAEQ,MAAOR,EAAQoX,WAC1B/S,WAAY,CACV9B,MAAO,CACLyE,YAA6B,IAAjB1R,EAAMwf,OAAkB,IAAM,KAG9CnR,OAAQzE,EAAQ,IAAO,QAAU,OACjCuE,KAAMnO,EAAMmO,KACZxC,QAAQ,cAER,kBAACkd,GAAD,eAAmBxW,QAASA,GAAarS,IACzC,kBAAC4pB,GAAD,CACE9C,cAAeoE,IACfxsB,MAAOsB,EAAMtB,QAEf,yBAAKsO,UAAWtC,EAAQkT,OACtB,kBAAC,GAAD,CACEkJ,cAAeoE,IACfxsB,MAAOsB,EAAMtB,SAGjB,kBAACmP,EAAA,EAAD,CACEb,UAAWtC,EAAQgT,cACnBxQ,QAAS,SAACzB,GAAD,OAAOzL,EAAM4L,kBAAkB,CAAE7G,KAAM,YAE/C6E,EAAQ,IAAO,kBAAC,KAAD,MAAmB,kBAAC,KAAD,QAM3C,SAASuhB,GAAqB/mB,EAAOuH,GACnC,OAAQA,GACN,IAAK,OACH,OAAO,EACT,IAAK,YACH,OAyBN,SAAkCvH,GAAQ,IAAD,EACvC,iBAAQA,EAAMb,YAAd,aAAQ,EAAYkE,QAClB,KAAK,MACH,OAAO,MACT,KAAK,MACH,OAAO,MACT,KAAK,MACH,OAAO,MACT,KAAK,MACH,OAAO,MACT,KAAK,MACH,OAAO,KACT,KAAK,MACH,OAAO,KACT,KAAK,MACH,OAAO,KACT,KAAK,MACH,OAAO,KACT,QACE,OAAO,GA5CA+jB,CAAyBpnB,GAClC,IAAK,YACL,IAAK,WACL,IAAK,WACH,OAAO,EACT,IAAK,WACH,OAAO,KACT,IAAK,OACH,OAAO,GACT,IAAK,aACH,OAAO,KAGb,SAASghB,GAAkBzZ,GACzB,OAAQA,GACN,IAAK,YACH,MAAO,CAAC,CAAEsU,cAAe,gBAAiBlhB,OAAO,IACnD,IAAK,WACH,MAAO,CAAC,CAAEkhB,cAAe,iBAAkBlhB,OAAO,IACpD,IAAK,WACH,MAAO,CAAC,CAAEkhB,cAAe,gBAAiBlhB,OAAO,IACnD,QACE,MAAO,ICtIEgkB,WAAMmE,MAAK,SAAqBlnB,GAAQ,IAAD,EAChB4K,oBAAS,GADO,mBAC7CkG,EAD6C,KACjC2a,EADiC,OAEZ7gB,oBAAS,GAFG,mBAE7Cyd,EAF6C,KAE/BqD,EAF+B,OAIZ9gB,oBAAS,GAJG,mBAI7C+d,EAJ6C,KAI/BC,EAJ+B,KAYpD,OANA1c,qBAAU,WACR,IAAMqc,EA0EH,SAAuBxkB,EAAKwkB,GACjC,OAAwB,IAApBA,EAAWxjB,OAAuC,IAArBwjB,EAAW9hB,MACnC,CAAEvE,MAAM,EAAOC,QAAQ,GACR,SAApBomB,EAAWxjB,KAAwB,CAAE7C,KAAM6B,EAAIR,MAE5CQ,EAAIuU,GAAiBiQ,EAAWxjB,OAAOwjB,EAAW9hB,OA/EpCklB,CAAc3rB,EAAM+D,IAAK/D,EAAMuoB,YAClDkD,EAAa,OAAClD,QAAD,IAACA,OAAD,EAACA,EAAYrmB,MAC1BwpB,EAAe,OAACnD,QAAD,IAACA,OAAD,EAACA,EAAYpmB,UAC3B,CAACnC,EAAM4rB,MAAO5rB,EAAMuoB,aAGrB,kBAAC,IAAMha,SAAP,KACG,CACC,OACA,YACA,YACA,WACA,WACA,WACA,OACA,cACA3M,KAAI,SAAC+J,GACL,OACE,kBAACof,GAAD,eACE7L,IAAKlf,EAAMkf,IACXpgB,IAAK6M,EACLA,QAASA,EACTmF,WAAYA,EACZuX,aAAcA,EACdM,aAAcA,EACdC,gBAAiBA,EACjBpJ,OAAQxf,EAAMwf,OACdrR,KAAMnO,EAAM+Q,UAAUpF,GAASwC,KAC/B1L,OAAQopB,GAAe7rB,EAAMoE,MAAOpE,EAAM+Q,UAAWpF,IACjD3L,WAOhB,SAAS6rB,GAAeznB,EAAO2M,EAAWpF,GACxC,OAAQA,GACN,IAAK,OACH,IAAMlJ,EAASsO,EAAUwI,KAAK9W,OAC9B,OAAKA,EAAOoK,OAAiC,IAAxBpK,EAAOoK,MAAMnK,OAC3B,CACL,CACEud,cAAe,cACflhB,MAAO0D,EAAOoK,OAEhB,CAAEoT,cAAe,iBAAkBlhB,MAAO0D,EAAO2K,OANI,GASzD,IAAK,WACH,IAAM3K,EAASsO,EAAUuN,SAAS7b,OAClC,OAAKA,GAAWA,EAAO2K,KAChB,CACL,CACE6S,cAAe,cACflhB,MAAO0D,EAAO2K,OAJkB,GAQtC,IAAK,aACH,IAAM3K,EAASsO,EAAUwN,WAAW9b,OACpC,OAAoB,IAAhBA,EAAO2K,WAAkC1N,IAAhB+C,EAAO2K,KAA2B,GACxD,CACL,CACE6S,cAAe,gBACflhB,MAAM,YAAK,IAAIyI,MAAM/E,EAAO2K,KAAO,GAAGxN,UAK5C,QACE,MAAO,I,ICpFQksB,G,sHACaC,EAAMC,EAAMC,GAC1C,OAAS,GAAKF,EAAQE,GAAS9oB,KAAK+oB,KAAKF,EAAOD,GAAQC,EAAOD,IAAS,I,wCAEjDI,EAASC,EAAOhC,GACvC,IAAMiC,EAAgBD,EAAMD,QAAQG,UAAUC,OACxCC,EAAgBpC,EAAO+B,QAAQG,UAAUC,OACzCE,EAAiB,CACrBC,EACEtC,EAAO+B,QAAQG,UAAUK,QAAQC,SACjCR,EAAMD,QAAQG,UAAUK,QAAQC,SAClCC,EACEzC,EAAO+B,QAAQG,UAAUK,QAAQG,SACjCV,EAAMD,QAAQG,UAAUK,QAAQG,UAE9BC,EACJ5pB,KAAK+oB,KAAK/oB,KAAKmG,IAAImjB,EAAeC,EAAG,GAAKvpB,KAAKmG,IAAImjB,EAAeI,EAAG,IACrE,IAEIG,EACJb,EAAQc,MAAMC,UAAY,IAAQf,EAAQc,MAAME,qBAC5CC,EAAkBhD,EAAO+B,QAAQrpB,SAASuqB,KAAKD,gBAE/CE,EAAmB,YAAAxB,EAAO,IAAP,IACvBiB,EACAN,EACAJ,EACAG,GAEIe,EAAgB,YAAAzB,EAAO,IAAP,IACpBwB,EACAN,EACAI,GAMF,OAHyBjqB,KAAKmG,IAAI,GAAKikB,GACjBzB,EAAQ0B,iBAAiBrB,EAASC,EAAOhC,IAErBqD,QAAQ,K,0CAEzBtB,EAASC,EAAOhC,GACzC,IAAMqC,EAAiB,CACrBC,EACEtC,EAAO+B,QAAQG,UAAUK,QAAQC,SACjCR,EAAMD,QAAQG,UAAUK,QAAQC,SAClCC,EACEzC,EAAO+B,QAAQG,UAAUK,QAAQG,SACjCV,EAAMD,QAAQG,UAAUK,QAAQG,UAE9BC,EACJ5pB,KAAK+oB,KAAK/oB,KAAKmG,IAAImjB,EAAeC,EAAG,GAAKvpB,KAAKmG,IAAImjB,EAAeI,EAAG,IACrE,IAEF,OAAOV,EAAQc,MAAMS,aAA0B,IAAXX,EAAkB,EAAI,I,sCAErCZ,EAASC,EAAOhC,GAErC,GAAI+B,EAAQwB,SACV,OAAO7B,EAAQ8B,kBAAkBzB,EAASC,EAAOhC,GAEnD,IAAMyD,EAAmB,YAAA/B,EAAO,IAAP,IACvB1B,EAAO+B,QAAQG,UAAUC,QAErBuB,EAIA,EAHJ3qB,KAAK+oB,KACH/oB,KAAKmG,IAAI8gB,EAAO+B,QAAQG,UAAUC,OAAOG,EAAG,GAC1CvpB,KAAKmG,IAAI8gB,EAAO+B,QAAQG,UAAUC,OAAOM,EAAG,IAIlD,GADEV,EAAQrpB,SAASirB,WAAWC,cAAgBF,EAC/B,CACb,IAAMG,EAAwB,YAAAnC,EAAO,IAAP,IAC5BK,EACA2B,GAEII,EAAmB/B,EAAQrpB,SAASirB,WAAWC,cAC/CG,EAAc,CAClBzB,EAAGmB,EAAiBnB,GAAKwB,EAAmB,GAC5CrB,EAAGgB,EAAiBhB,GAAKqB,EAAmB,IAExCE,EAAwB,CAC5BjC,QAAS,CACPG,UAAW,CACTK,QAAS,CACPC,SACExC,EAAO+B,QAAQG,UAAUK,QAAQC,SAChCiB,EAAiBnB,EAAIP,EAAQrpB,SAASirB,WAAWM,WAChD,GACJvB,SACE1C,EAAO+B,QAAQG,UAAUK,QAAQG,SAChCe,EAAiBhB,EAAIV,EAAQrpB,SAASirB,WAAWM,WAChD,IAEN9B,OAAQ4B,KAId,OACErC,EAAQ8B,kBAAkBzB,EAASiC,EAAuBhE,GAC1D6D,EAGF,IAAMC,EACJ/B,EAAQrpB,SAASirB,WAAWC,cAAgBF,EACxCK,EAAc,CAClBzB,EAAGmB,EAAiBnB,GAAKwB,EAAmB,GAC5CrB,EAAGgB,EAAiBhB,GAAKqB,EAAmB,IAExCE,EAAwB,CAC5BjC,QAAS,CACPG,UAAW,CACTK,QAAS,CACPC,SACExC,EAAO+B,QAAQG,UAAUK,QAAQC,SAChCiB,EAAiBhB,EAAIV,EAAQrpB,SAASirB,WAAWM,WAChD,GACJvB,SACE1C,EAAO+B,QAAQG,UAAUK,QAAQG,SAChCe,EAAiBnB,EAAIP,EAAQrpB,SAASirB,WAAWM,WAChD,IAEN9B,OAAQ4B,KAId,OAAOrC,EAAQ8B,kBAAkBzB,EAASiC,EAAuBhE,K,gDAWpC+B,EAAS/B,GACxC,IAAMgD,EAAkBhD,EAAO+B,QAAQrpB,SAASuqB,KAAKD,gBAC/CkB,EAAkBnC,EAAQc,MAAMqB,gBAChCC,EAAoBpC,EAAQc,MAAMsB,kBAClCC,EAAwBrC,EAAQc,MAAMuB,sBACtCV,EAIA,EAHJ3qB,KAAK+oB,KACH/oB,KAAKmG,IAAI8gB,EAAO+B,QAAQG,UAAUC,OAAOG,EAAG,GAC1CvpB,KAAKmG,IAAI8gB,EAAO+B,QAAQG,UAAUC,OAAOM,EAAG,IAG5C4B,EAAarB,EAAkBkB,EAC/BI,EAAcvrB,KAAKmG,IACtB8jB,EAAkBmB,GAChBD,EAAkBR,GACrBU,GAGF,OAAOrrB,KAAKwrB,IAAI,EAAGF,EAAYC,K,sDAG/B,IAAME,EAAuBzrB,KAAK0rB,SAClC,OAAOD,EAAuB,IAAO,EAAIA,EAAuB,M,uCAE1CzC,EAASC,EAAOhC,GACtC,IAAMqC,EAAiB,CACrBC,EACEtC,EAAO+B,QAAQG,UAAUK,QAAQC,SACjCR,EAAMD,QAAQG,UAAUK,QAAQC,SAClCC,EACEzC,EAAO+B,QAAQG,UAAUK,QAAQG,SACjCV,EAAMD,QAAQG,UAAUK,QAAQG,UAE9BC,EACJ5pB,KAAK+oB,KAAK/oB,KAAKmG,IAAImjB,EAAeC,EAAG,GAAKvpB,KAAKmG,IAAImjB,EAAeI,EAAG,IACrE,IAEIiC,EAAU3C,EAAQc,MAAMS,aACxBqB,EAAU5C,EAAQc,MAAM+B,aAC9B,GAAe,IAAXjC,EAAkB+B,EAAU,EAAIC,EAAS,OAAO,EAEpD,IAAME,EAAcF,EACdG,EAAY/rB,KAAKgsB,IAAI,EAAc,IAAXpC,EAAkB+B,GAC1CM,EAAgBjsB,KAAKmG,IAAI4lB,EAAYD,EAAa,GAExD,OAAO9rB,KAAKmG,IAAI,GAAK8lB,O,mXArLJtD,G,sBAgI2B,SAACK,EAAS2B,GAGtD,IAAM/uB,EAAQ,EAAG+uB,GACV3B,EAAQrpB,SAASirB,WAAWsB,gBAAkBlD,EAAQrpB,SAASirB,WAAWC,eACjF,OAAIjvB,GAAS,EAAU,EAChBA,GAAS,EAAIA,EAAQ,O,sBAtIX+sB,G,sBAwLsB,SACvCwD,EACAtC,EACAI,GAEA,IAAM6B,EAAcjC,EAAgBI,EAC9B8B,EAA8B,IAAlBI,EAClB,OAAOnsB,KAAKmG,IAAI4lB,EAAYD,EAAa,M,sBA/LxBnD,G,sBAiMsB,SAACgD,EAASS,EAASxC,GAC1D,IAAMkC,EAAcM,EACdL,EAAY/rB,KAAKgsB,IAAI,EAAc,IAAXpC,EAAkB+B,GAChD,OAAO3rB,KAAKmG,IAAI4lB,EAAYD,EAAa,M,sBApMxBnD,G,sBAsMyB,SAC1CiB,EACAN,EACAJ,EACAG,GAEA,GACE,YAAAV,GAAO,IAAP,IAA0CW,IAC1C,YAAAX,GAAO,IAAP,IAA0CO,IAC1C,YAAAP,GAAO,IAAP,IAA0CU,GAC1C,CACA,IAAMgD,EAAsB,CAAE9C,GAAID,EAAeI,EAAGA,EAAGJ,EAAeC,GAChE+C,EAA0B,YAAA3D,GAAO,IAAP,IAC9B0D,GAYF,OADsD,GATvB,YAAA1D,GAAO,IAAP,IAC7B2D,EACAjD,GAE6B,YAAAV,GAAO,IAAP,IAC7B2D,EACApD,KAIsC,IAAXU,GACxB,OAAO,K,sBAhOGjB,G,sBAkOsB,SAAC4D,EAAYC,GACpD,OAAOD,EAAWhD,EAAIiD,EAAejD,EAAIgD,EAAW7C,EAAI8C,EAAe9C,K,sBAnOtDf,G,sBAqOwB,SAACS,GAC1C,YAAiB7sB,IAAb6sB,EAAOG,QAAgChtB,IAAb6sB,EAAOM,K,sBAtOpBf,G,sBAyOa,SAACS,GAC/B,IAAM7pB,EAASS,KAAK+oB,KAAK/oB,KAAKmG,IAAIijB,EAAOG,EAAG,GAAKvpB,KAAKmG,IAAIijB,EAAOM,EAAG,IACpE,MAAO,CAAEH,EAAGH,EAAOG,EAAIhqB,EAAQmqB,EAAGN,EAAOM,EAAInqB,M,sBCxO5B+d,G,kGAsEP1c,GACV,IAAM6rB,EAAgBnP,EAAKoP,UAAU9rB,GAErC,MAAO,CACL+rB,OAAQrP,EAAKqP,OAAO/rB,GACpBgsB,QAAStP,EAAKsP,QAAQhsB,GACtB8rB,UAAU,eACLD,EADI,CAEPI,YAAavP,EAAKwP,sBAAsBlsB,EAAK6rB,KAE/CM,YAAazP,EAAKyP,YAAYnsB,GAC9BosB,SAAU1P,EAAK0P,SAASpsB,GACxBqsB,cAAe3P,EAAK2P,cAAcrsB,M,6BAIxBA,GACZ,IAAKA,EAAIN,UACP,MAAO,CACL4sB,qBAAsB,CAAElB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,GACrDC,oBAAqB,GACrBC,YAAa,CAAEtB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,IAGhD,IAAMG,EAAU,YAAAjQ,EAAI,IAAJ,IAAqB1c,GAC/B4sB,EAAY,YAAAlQ,EAAI,IAAJ,IAAuB1c,GACnC6sB,EAAS,YAAAnQ,EAAI,IAAJ,IAAoB1c,GAG7B8sB,EADyB,sBAAOH,GAAP,YAAmBC,IACc/uB,KAC9D,SAACK,GACC,OAAOwe,EAAKqQ,kBAAkB7uB,EAAKC,KAAMD,EAAKE,WAG5CkuB,EAAuBQ,EAA8BrvB,QACzD,SAACC,EAAK0qB,GACJ,IAAMoE,EAAQpE,EAAQ4E,aAAaR,MAC7BS,EAAST,EAAQpE,EAAQ8E,eAAe1mB,UAAY,EACpD2mB,EAAeX,EAAQpE,EAAQ8E,eAAeE,YAAc,EAElE,MAAO,CACLhC,IAAK1tB,EAAI0tB,IAAM6B,EACfV,UAAW7uB,EAAI6uB,UAAYY,EAC3BX,MAAO9uB,EAAI8uB,MAAQA,KAGvB,CAAEpB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,IAG3BC,EAAsBK,EAA8BrvB,QACxD,SAACC,EAAK0qB,GACJ,IAAMuB,EAAevB,EAAQc,MAAMS,aAC7BsB,EAAe7C,EAAQc,MAAM+B,aAE7BoC,EAAmB3vB,EAAIqH,MAC3B,SAACmkB,GAAD,OACEA,EAAMS,eAAiBA,GACvBT,EAAM+B,eAAiBA,KAI3B,OAFMoC,EAAkBA,EAAiBtvB,MAAM+C,KAAKsnB,EAAQlqB,MACvDR,EAAIoD,KAAK,CAAE6oB,eAAcsB,eAAcltB,MAAO,CAACqqB,EAAQlqB,QACrDR,IAET,IAGI4vB,EAAiBT,EAAOhvB,KAAI,SAAC+U,GACjC,OAAO8J,EAAKqQ,kBAAkBna,EAAMzU,KAAMyU,EAAMzU,SAsBlD,MAAO,CACLmuB,uBACAG,sBACAC,YAvBkBY,EAAe7vB,QACjC,SAACC,EAAK0qB,GACJ,IAAMhZ,EAAYgZ,EAAQhZ,UACpBod,EAAQpE,EAAQ4E,aAAaR,MAC7BS,EAAST,EAAQpE,EAAQ8E,eAAe1mB,UAAY,EACpD2mB,EAAeX,EAAQpE,EAAQ8E,eAAeE,YAAc,EAClE,MAAO,CACLhC,IAAK1tB,EAAI0tB,IAAM6B,EAAS7d,EACxBmd,UAAW7uB,EAAI6uB,UAAYY,EAC3BX,MAAO9uB,EAAI8uB,MAAQA,KAGvB,CAAEpB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,IAY/Be,gBATmB,sBAChBT,GADgB,YAEhBQ,O,gCA8GUttB,GACf,IAAKA,EACH,MAAO,CACLwtB,kBAAmB,EACnBC,kBAAmB,EACnBC,kBAAmB,GAEvB,IAAM3vB,EAAQ,GAQR2vB,EAPQxwB,EAAI6C,SAASC,GAAK,SAAC9B,GAAD,OAAUA,IAAM,CAC9CqB,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,KAGkBnC,QAAO,SAACC,EAAKQ,GAC3C,IAAMyvB,EAAM,YAAAjR,EAAI,IAAJ,IAA2Bxe,GAOvC,OANIyvB,EAAM,GACR5vB,EAAM+C,KAAK,CACT+C,SAAU3F,EAAKC,KAAK0F,SACpB+pB,mBAAoBD,EACpBE,QAAS3vB,EAAKC,KAAK+E,WAEhBxF,EAAMiwB,IACZ,GACGH,EAAoB,YAAA9Q,EAAI,IAAJ,IAAqC1c,EAAK,IAC9DytB,EAAoB,YAAA/Q,EAAI,IAAJ,IAAqC1c,GAI/D,OAHAjC,EAAM+C,KAAK,CAAE4sB,oBAAmBF,oBAAmBC,sBAG5C,CAAED,oBAAmBC,oBAAmBC,uB,4CAEpB1tB,GAA6B,IAAD,EAAvB6rB,EAAuB,wDACvD,KAAI,UAAC7rB,EAAIR,YAAL,aAAC,EAAUkE,QAAQ,OAAO,EAM9B,IALA,IAAMooB,EAAcD,GAAgCnP,EAAKoP,UAAU9rB,GAC7DgoB,EAAO7X,GAAkBnQ,EAAIR,KAAM,KACnCsuB,EAAO3d,GAAkBnQ,EAAIR,KAAM,IAAM,IAEzCuuB,EAAkB,GACf1L,EAAI,IAAKA,EAAI,KAAUA,IAAK,CACnC,IAAM4F,EAAOD,GAAQ3F,EAAI,KACzB0L,EAAgBjtB,KAAK,CACnBktB,eAAgB3L,EAAI,GACpB4L,MACEvR,EAAKwR,yBAAyBlG,EAAMC,EAAM6F,GAC1ChC,EAAU2B,kBACV3B,EAAU4B,oBAGhB,IAAMS,EAAiBJ,EACpBtrB,MAAK,SAACN,EAAGC,GAAJ,OAAUD,EAAE8rB,MAAQ7rB,EAAE6rB,SAC3BvvB,QAAO,SAAC0vB,GAAD,OAAoBA,EAAeH,OAAS,KAEtD,YAA0BtyB,IAAtBwyB,EAAe,GAAyB,EAChCA,EAAe,GAAGH,iB,oDA6CK7vB,EAAMC,GACzC,OAAKD,GAASC,EAEM+R,GAAkB/R,EAAQ,IAFjB,CAAEiwB,eAAgB,K,8BAOlCruB,GACb,OAAKA,GAAQA,EAAIR,KAaV,CACL8uB,WAAY5R,EAAK6R,mBAAmBvuB,GACpCwuB,OAAQ,YAAA9R,EAAI,IAAJ,IAAqB1c,IAdtB,CACLsuB,WAAY,CACVG,MAAO,CAAEC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACzCC,OAAQ,CAAEL,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAC1CE,UAAW,CAAEN,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAE/CN,OAAQ,CACNS,YAAa,EACbC,WAAY,EACZC,eAAgB,M,kCAyHLnvB,GAAM,IAAD,EACtB,KAAI,UAACA,EAAIR,YAAL,aAAC,EAAUkE,QACb,MAAO,CACL0rB,GAAI,CAAEC,KAAM,EAAGC,OAAQ,GACvBC,IAAK,CAAEF,KAAM,EAAGC,OAAQ,IAG5B,IAAME,EAASrf,GAAkBnQ,EAAIR,KAAM,IACrCiwB,EAAWtf,GAAkBnQ,EAAIR,KAAM,IACvCkwB,EAAUvf,GAAkBnQ,EAAIR,KAAM,IACtCmwB,EAAYxf,GAAkBnQ,EAAIR,KAAM,IAE9C,MAAO,CACL4vB,GAAI,CAAEC,KAAMjnB,OAAOonB,EAAO9F,QAAQ,IAAK4F,OAAQG,GAC/CF,IAAK,CAAEF,KAAMjnB,OAAOsnB,EAAQhG,QAAQ,IAAK4F,OAAQK,M,+BAIrC3vB,GACd,IAAKA,EAAIR,OAASQ,EAAIR,KAAKyB,oBACzB,MAAO,CACLlC,SAAU,CACR6wB,OAAQ,EACRC,SAAU,EACVC,YAAa,EACbC,eAAgB,EAChBC,SAAU,EACVC,YAAa,GAEfZ,KAAM,CACJO,OAAQ,EACRC,SAAU,EACVC,YAAa,EACbC,eAAgB,EAChBC,SAAU,EACVC,YAAa,IAInB,IAAMC,EAAkB/f,GAAkBnQ,EAAIR,KAAM,KAC9C2wB,EAAoBhgB,GAAkBnQ,EAAIR,KAAM,KAChDswB,EAAc3f,GAAkBnQ,EAAIR,KAAM,MAC1C4wB,EAAgBjgB,GAAkBnQ,EAAIR,KAAM,KAC5CuwB,EAAiB5f,GAAkBnQ,EAAIR,KAAM,MAE7C6wB,EAAiBrwB,EAAIN,UAAUjC,QAAO,SAACC,EAAKQ,GAAU,IAAD,IAIzD,SAHwB,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACrD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,cAEgC,YAAxBpG,EAAKC,KAAK2E,YAA4BpF,EAAMA,IACpE,GACG4yB,EAAmBtwB,EAAIN,UAAUjC,QAAO,SAACC,EAAKQ,GAAU,IAAD,IAI3D,SAH0B,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACvD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,cAEkC,YAAxBpG,EAAKC,KAAK2E,YAC/BpF,EACFA,IACH,GACG6yB,EAAqBvwB,EAAIH,SAASpC,QAAO,SAACC,EAAKQ,GACnD,IAAM4xB,EAAc3f,GAAkBjS,EAAKC,KAAM,MACjD,OAAS2xB,GAAuC,YAAxB5xB,EAAKC,KAAK2E,UAC9BpF,EAAMoyB,EACNpyB,IACH,GACG8yB,EAAwBxwB,EAAIF,WAAWrC,QAAO,SAACC,EAAKQ,GACxD,IAAM6xB,EAAiB5f,GAAkBjS,EAAKC,KAAM,MACpD,OAAS4xB,GAA0C,eAAxB7xB,EAAKC,KAAK2E,UACjCpF,EAAMqyB,EAAiB7xB,EAAKC,KAAKiR,UACjC1R,IACH,GAaH,MAAO,CACLqB,SAAU,CACR6wB,OAAQM,EACRL,SAAUM,EACVL,YAAaA,EACbE,SAAUI,EACVL,eAAgBA,EAChBE,YAAa,GAEfZ,KAAM,CACJO,OAAQS,EACRR,SAAUS,EACVR,YAAaS,EACbP,SAzBoBhwB,EAAIF,WAAWrC,QAAO,SAACC,EAAKQ,GAClD,IAAMuyB,EAAcvyB,EAAKC,KAAKc,OAC9B,OAASwxB,GAAuC,YAAxBvyB,EAAKC,KAAK2E,UAC9BpF,EAAM+yB,EAAcvyB,EAAKC,KAAKiR,UAC9B1R,IACH,GAqBCqyB,eAAgBS,EAChBP,YArBgBjwB,EAAIF,WAAWrC,QAAO,SAACC,EAAKQ,GAC9C,MAA4B,eAAxBA,EAAKC,KAAK2E,UACLpF,GAAOQ,EAAKC,KAAKiR,WAAa,GAChC1R,IACN,O,oCAsBgBsC,GAAM,IAAD,EACxB,KAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAKR,YAAN,aAAC,EAAWkE,QACd,MAAO,CACLgtB,OAAQ,CACNC,eAAgB,EAChBC,oBAAqB,EACrBC,sBAAuB,EACvBC,SAAU,CACRC,YAAa,EACbC,cAAe,EACfC,MAAO,EACPC,MAAO,IAGXlH,WAAY,CACVmH,iBAAkB,EAClB7F,gBAAiB,EACjB8F,oBAAqB,GAEvB9H,KAAM,CACJ+H,iBAAkB,EAClBhI,gBAAiB,IAIvB,IAAM7pB,EAAOQ,EAAIR,KAEXmxB,EAAiBxgB,GAAkB3Q,EAAM,KACzC6pB,EAAkBlZ,GAAkB3Q,EAAM,KAE1C8xB,EAA4BnhB,GAAkB3Q,EAAM,KACpD+xB,EAA8BphB,GAAkB3Q,EAAM,KACtDgyB,EAAsBrhB,GAAkB3Q,EAAM,KAC9CiyB,EAAsBthB,GAAkB3Q,EAAM,KAUpD,MAAO,CACLkxB,OAAQ,CACNC,iBACAC,oBAZwBzgB,GAAkB3Q,EAAM,KAahDqxB,sBAZ0B1gB,GAAkB3Q,EAAM,IAalDsxB,SAAU,CACRC,YAAaO,EACbN,cAAeO,EACfN,MAAOO,EACPN,MAAOO,IAGXzH,WAAY,CACVmH,iBAnBqBhhB,GAAkB3Q,EAAM,IAoB7C8rB,gBAnBoB,YAAA5O,EAAI,IAAJ,IAAoC1c,GAoBxDoxB,oBAnBwBjhB,GAAkB3Q,EAAM,MAqBlD8pB,KAAM,CACJD,kBACAgI,iBArBqBlhB,GAAkB3Q,EAAKT,c,wCAsEzBZ,EAAMC,GAC7B,IAAKD,EACH,MAAO,CACLqI,SAAUkrB,IACVtE,WAAYsE,IACZC,gBAAiB,EACjBC,WAAY,EACZC,eAAgB,GAGpB,IAAMA,EAAiB1hB,GAAkBhS,EAAM,IAAM,EAC/CyzB,GAAczhB,GAAkBhS,EAAM,YAASxC,GAAa,IAC5Dm2B,GACH3hB,GAAkBhS,EAAM,KAAOgS,GAAkBhS,EAAM,KAAO,IAEjE,IAAKyzB,IAAe,YAAAlV,EAAI,IAAJ,IAAyCve,GAC3D,MAAO,CACLqI,SAAUsrB,EACV1E,WAAY0E,EACZH,gBAAiBD,IACjBE,WAAY,EACZC,kBAEJ,IAAK30B,EAAIe,mBAAmB,CAAEE,OAAMC,WAClC,MAAO,CACLoI,SAAUkrB,IACVtE,WAAYsE,IACZC,gBAAiB,EACjBC,WAAY,EACZC,kBAGJ,IAAM/yB,EAAeX,EAAKY,SACpBC,EAAeZ,EAAOa,OACtBC,EAAiBiR,GAAkBhS,EAAM,IAEzCgB,EAAuBD,EACzBF,EAAeE,EACf,EACEyyB,EAAkBvyB,KAAKC,MAAMP,EAAeK,GAOlD,MAAO,CACLqH,SAAUsrB,EACV1E,WAJsB0E,GAHpBF,GAAgB9yB,GAAkBE,EAChC4yB,EAAaD,EACb,GAMJA,kBACAC,aACAC,sB,yaAlwBenV,GACZqV,YAAc,CACnBhG,OAAQ,CACNO,qBAAsB,CAAElB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,GACrDC,oBAAqB,GACrBC,YAAa,CAAEtB,IAAK,EAAGmB,UAAW,EAAGC,MAAO,IAE9CR,QAAS,CACPsC,WAAY,CACVG,MAAO,CAAEC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACzCC,OAAQ,CAAEL,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAC1CE,UAAW,CAAEN,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAE/CN,OAAQ,CACNS,YAAa,EACbC,WAAY,EACZC,eAAgB,IAGpBrD,UAAW,CACT0B,kBAAmB,EACnBC,kBAAmB,EACnBC,kBAAmB,EACnBzB,YAAa,GAEfG,SAAU,CACRrtB,SAAU,CACR6wB,OAAQ,EACRC,SAAU,EACVC,YAAa,EACbC,eAAgB,EAChBC,SAAU,EACVC,YAAa,GAEfZ,KAAM,CACJO,OAAQ,EACRC,SAAU,EACVC,YAAa,EACbC,eAAgB,EAChBC,SAAU,EACVC,YAAa,IAGjB9D,YAAa,CACXiD,GAAI,CAAEC,KAAM,EAAGC,OAAQ,GACvBC,IAAK,CAAEF,KAAM,EAAGC,OAAQ,IAE1BjD,cAAe,CACbqE,OAAQ,CACNC,eAAgB,EAChBC,oBAAqB,EACrBC,sBAAuB,EACvBC,SAAU,CACRC,YAAa,EACbC,cAAe,EACfC,MAAO,EACPC,MAAO,IAGXlH,WAAY,CACVmH,iBAAkB,EAClB7F,gBAAiB,EACjB8F,oBAAqB,GAEvB9H,KAAM,CACJ+H,iBAAkB,EAClBhI,gBAAiB,K,sBAlEJ3M,G,sBAsKM,SAAC1c,GACxB,OAAO9C,EAAI6C,SACTC,GACA,SAAC9B,GAAU,IAAD,IACFgX,KAAkB,OAAChX,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACrD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEX0tB,EAAsC,eAAxB9zB,EAAKC,KAAK2E,UAC9B,OAAIoS,GAAkBhY,EAAIe,mBAAmBC,IAAS8zB,EAC7C9zB,OACJ,IAEP,CAAEqB,UAAW,CAAEG,WAAW,KAC1BhB,QAAO,SAACR,GAAD,QAAYA,Q,sBAnLJwe,G,sBAqLQ,SAAC1c,GAC1B,OAAO9C,EAAI6C,SACTC,GACA,SAAC9B,GAAU,IAAD,IACFiX,KAAoB,OAACjX,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,iBAAC,EAAYgG,wBAAb,aAAC,EAA8BY,MACvD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEX0tB,EAAsC,eAAxB9zB,EAAKC,KAAK2E,UAC9B,OAAIqS,GAAoBjY,EAAIe,mBAAmBC,IAAS8zB,EAC/C9zB,OACJ,IAEP,CAAEqB,UAAW,CAAEG,WAAW,KAC1BhB,QAAO,SAACR,GAAD,QAAYA,Q,sBAlMJwe,G,sBAoMK,SAAC1c,GACvB,OAAO9C,EAAI6C,SACTC,GACA,SAAC9B,GAEC,MAD4C,eAAxBA,EAAKC,KAAK2E,UACN5E,OACnB,IAEP,CAAEqB,UAAW,CAAEO,YAAY,KAC3BpB,QAAO,SAACR,GAAD,QAAYA,QA7MJwe,GA+MZqQ,kBAAoB,SAAC5uB,EAAMC,GAChC,IAAKD,EAAM,OAAO,EAElB,IAAM6uB,EAAetQ,GAAKuV,oBAAoB9zB,EAAMC,GAMpD,MAAO,CAAE8uB,eALcxQ,GAAKwV,kBAAkB/zB,EAAMC,GAK3B4uB,eAAc9D,MAJzBxM,GAAKyV,aAAah0B,EAAMC,GAIQgR,UAH5BjR,EAAKiR,UAGkClR,KAF5C,CAAEC,OAAMC,YAtNJse,GA0NZuV,oBAAsB,SAAC9zB,EAAMC,GAClC,IAAMg0B,EAAiBjiB,GAAkBhS,EAAM,KAAO,EAEhDk0B,EAAYliB,GAAkB/R,EAAQ,KACtCk0B,EAAYniB,GAAkB/R,EAAQ,KACtCm0B,EAAYpiB,GAAkB/R,EAAQ,KACtCo0B,EAAYriB,GAAkB/R,EAAQ,KAK5C,MAAO,CACLouB,MAHY4F,GAFOC,EAAYC,EAAYC,EAAYC,GAMvD7D,GAAI0D,EAAYD,EAChBxD,GAAI0D,EAAYF,EAChBvD,GAAI0D,EAAYH,EAChBtD,GAAI0D,EAAYJ,IA1OD1V,GA6OZyV,aAAe,SAACh0B,EAAMC,GAAY,IAAD,IAChC8W,KAAkB,OAAC/W,QAAD,IAACA,GAAD,UAACA,EAAMgG,wBAAP,aAAC,EAAwBY,MAC/C,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEX6Q,KAAoB,OAAChX,QAAD,IAACA,GAAD,UAACA,EAAMgG,wBAAP,aAAC,EAAwBY,MACjD,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,aAEXmuB,OAAkC92B,KAApB,OAAJwC,QAAI,IAAJA,OAAA,EAAAA,EAAM8T,eAEtB,OAAIiD,GAAkBud,EAMb,CAAE9I,aALYxZ,GAAkBhS,EAAM,IAKtB8sB,aAJF9a,GAAkBhS,EAAM,KAIRgrB,SAHpBhZ,GAAkBhS,EAAM,KAGMirB,oBAFnBjZ,GAAkBhS,EAAM,MAG3CgX,EASF,CAAEwU,aARexZ,GAAkB/R,EAAQ,KAC/B+R,GAAkB/R,EAAQ,KACQ,KAM9B6sB,aAAc,EAAGT,kBALdra,GAAkB/R,EAAQ,KAKOmsB,gBAJnCpa,GAAkB/R,EAAQ,KAI0BqsB,sBAH9Cta,GAAkB/R,EAAQ,OAI5C,CAAEurB,aAAc,EAAGsB,aAAc,I,sBAvQ9BvO,G,sBAkUY,SAACxe,GAC9B,GAA4B,eAAxBA,EAAKC,KAAK2E,UAA4B,OAAO,EAEjD,IAAM+uB,EAAiB1hB,GAAkBjS,EAAKC,KAAM,GACpD,YAAuBxC,IAAnBk2B,EAAqC,EAIlCA,EAFgBnV,GAAKwV,kBAAkBh0B,EAAKC,KAAMD,EAAKE,QAEvBgvB,c,sBA1UtB1Q,G,sBA4UsB,SAAC1c,EAAKguB,GAC7C,IAAM0E,EAAahW,GAAKiW,wBAAwB3yB,GAC1CgoB,EAAO0K,EAAWhE,GAClBxG,EAAOwK,EAAWE,UAClB3K,EAAQD,EAAOgG,EAAkB,IAEvC,OAAOtR,GAAKwR,yBAAyBlG,EAAMC,EAAMC,MAlVhCxL,GAoVZiW,wBAA0B,SAAC3yB,GAIhC,MAAO,CAAE0uB,GAHEve,GAAkBnQ,EAAIR,KAAM,MAAQ,EAGlCozB,UAFKziB,GAAkBnQ,EAAIR,KAAM,IAAM,KAAQ,I,sBAtV3Ckd,G,sBA0VsB,SAAC1c,GASxC,OARc9C,EAAI6C,SAASC,GAAK,SAAC9B,GAAD,OAAUA,IAAM,CAC9CqB,UAAW,CAAEI,UAAU,KAEEjB,QAAO,SAACR,GAAU,IAAD,EAC1C,SAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,aAAC,EAAYgG,mBACVjG,EAAKC,KAAKgG,iBAAiBY,MAAK,SAACH,GAAD,OAA4B,KAAlBA,EAAKN,eAGpC7G,QAAO,SAACC,EAAKm1B,GAE/B,IAAM3F,EAAiBxQ,GAAKwV,kBAAkBW,EAAY10B,KAAM00B,EAAYz0B,QAK5E,OAAOV,GAHgBgf,GAAKoW,8BAA8BD,EAAY10B,KAAM00B,EAAYz0B,QAC/C8uB,EAAeE,YAAc,KAGrE,MA3Wc1Q,GAwYZ6R,mBAAqB,SAACvuB,GAC3B,IAAKA,EAAIR,OAASQ,EAAIR,KAAKyB,oBACzB,MAAO,CACLwtB,MAAO,CAAEC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACzCC,OAAQ,CAAEL,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAC1CE,UAAW,CAAEN,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAGjD,IAAMiE,EAAY/yB,EAAIR,KAAKyB,oBAErB+xB,EAAUD,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACxC8xB,EAAUF,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACxC+xB,EAAUH,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACxCgyB,EAAUJ,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACxCiyB,EAAUL,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAExCkyB,EAAWN,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACzCmyB,EAAWP,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACzCoyB,EAAWR,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACzCqyB,EAAWT,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACzCsyB,EAAWV,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eACzCuyB,EACJX,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAAqBnG,MAAQ,KAAQ,EAE/D24B,EAAcZ,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,IAArBA,EAAK0C,eAC5CyyB,EAAcb,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAC5C0yB,EAAcd,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAC5C2yB,EAAcf,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAC5C4yB,EAAchB,EAAUhuB,MAAK,SAACtG,GAAD,OAA+B,MAArBA,EAAK0C,eAElD,MAAO,CACLstB,MAAO,CACLC,GAAIsE,EAAQh4B,MACZ2zB,GAAI,YAAAjS,GAAI,IAAJ,IAAqCuW,GACzCrE,GAAI,YAAAlS,GAAI,IAAJ,IAAqCwW,GACzCrE,GAAI,YAAAnS,GAAI,IAAJ,IAAqCyW,GACzCrE,GAAI,YAAApS,GAAI,IAAJ,IAAqC0W,IAE3CrE,OAAQ,CACNL,GAAI2E,EAASr4B,MACb2zB,GAAI,YAAAjS,GAAI,IAAJ,IAAqC4W,GACzC1E,GAAI,YAAAlS,GAAI,IAAJ,IAAqC6W,GACzC1E,GAAI,YAAAnS,GAAI,IAAJ,IAAqC8W,GACzC1E,GAAI,YAAApS,GAAI,IAAJ,IAAqC+W,GACzCb,UAAWc,GAEb1E,UAAW,CACTN,GAAIiF,EAAY34B,MAChB2zB,GAAI,YAAAjS,GAAI,IAAJ,IAAqCkX,GACzChF,GAAI,YAAAlS,GAAI,IAAJ,IAAqCmX,GACzChF,GAAI,YAAAnS,GAAI,IAAJ,IAAqCoX,GACzChF,GAAI,YAAApS,GAAI,IAAJ,IAAqCqX,M,sBA3b5BrX,G,sBA+bsB,SAACje,GACxC,OAAO,IAAmB,IAAbA,EAAKzD,SAhcD0hB,GAkcZsX,mBAAqB,SAAC71B,EAAMC,GACjC,QAAKD,GAME,CAAE+uB,eAJcxQ,GAAKwV,kBAAkB/zB,EAAMC,GAI3B61B,YAHLvX,GAAKwX,uBAAuB/1B,EAAMC,GAGhBF,KAFzB,CAAEC,OAAMC,YAvcJse,GA2cZwX,uBAAyB,SAAC/1B,EAAMC,GACrC,OAAKD,EAME,CAAE4wB,OAJM5e,GAAkBhS,EAAM,KAAO,EAI7BswB,MAHHte,GAAkBhS,EAAM,KAAO,EAGrB6wB,UAFN7e,GAAkBhS,EAAM,KAAO,GAJ/B,CAAE8wB,YAAa,EAAGC,WAAY,EAAGC,eAAgB,I,sBA5clDzS,G,sBAodM,SAAC1c,GACxB,IAAMwuB,EAAS,CACbS,YAAa,EACbC,WAAY,EACZC,eAAgB,GAElB,OAAKnvB,EAAIR,MAASQ,EAAIR,KAAKyB,qBAE3B/D,EAAI6C,SACFC,GACA,SAAC9B,GACC,GAAKA,EAAKC,KAAK8C,oBAAf,CACA,IAAM6wB,EAAiB3hB,GAAkBjS,EAAKC,KAAM,IAE9C8wB,EAAc9e,GAAkBjS,EAAKC,KAAM,IACjD,GAAM8wB,EACJT,EAAOS,aAAgBA,EAAc6C,EAAkB,QADzD,CAIA,IAAM5C,EAAa/e,GAAkBjS,EAAKC,KAAM,IAChD,GAAM+wB,EACJV,EAAOU,YAAeA,EAAa4C,EAAkB,QADvD,CAIA,IAAM3C,EAAiBhf,GAAkBjS,EAAKC,KAAM,IAC9CgxB,IACJX,EAAOW,gBAAmBA,EAAiB2C,EAAkB,UAIjE,CACEvyB,UAAW,CAAEI,UAAU,EAAMC,UAAU,KAGpC4uB,GA5BgDA,K,sBA1dtC9R,G,sBAkqBqB,SAAU1c,GAChD,IAAMm0B,EAA0Bj3B,EAAI6C,SAClCC,GACA,SAAC9B,GAAU,IAAD,IACFk2B,KAAsB,UAACl2B,EAAKC,YAAN,iBAAC,EAAWgG,wBAAZ,aAAC,EAA6BY,MAAK,SAACH,GAAD,MAC7D,CAAC,KAAM,MAAMhG,SAASgG,EAAKN,cAK7B,MAFyC,eAAxBpG,EAAKC,KAAK2E,WAEXsxB,EAA2Bl2B,EAAKC,UAC3C,IAEP,CAAEoB,UAAW,CAAEI,UAAU,KACzBjB,QAAO,SAACR,GAAD,QAAYA,KACfm2B,EAA0BlkB,GAAkBnQ,EAAIR,KAAM,IAC5D,GAAuC,IAAnC20B,EAAwBx1B,OAAc,OAAO01B,EAGjD,IAAMC,EAAoCnkB,GAAmBgkB,EAAwB,GAAI,IAAM,IACzFI,EAAmBpkB,GAAkBgkB,EAAwB,GAAI,KAEjEK,EAAoBD,EAAmB,EACvCE,EAAWtkB,GAAkBnQ,EAAIR,KAAM,GAmB7C,OAHE60B,GACC,EAAKC,EAAoCC,GAf1Cr3B,EAAI6C,SAASC,GAAK,SAAC9B,GAAD,OAAUA,IAAM,CAChCqB,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,KAEXnC,QAAO,SAACC,EAAKQ,GACd,OAAMA,EAAKC,KAAKu2B,KAAah3B,EAAMQ,EAAKC,KAAKu2B,KACtCh3B,IACN,GACH82B,EACAC,O,sBAtsBe/X,G,sBAqwB0B,SAAC1b,GAC5C,IAAKA,IAASA,EAAKmD,iBAAkB,OAAO,EAM5C,IAAMwwB,EAAwB,CAAC,GAAI,GAAI,IAEvC,OAAO3zB,EAAKmD,iBAAiB1G,QAAO,SAACC,EAAKkH,GACxC,QAAI+vB,EAAsB/1B,SAASgG,EAAKN,WACjC5G,KACN,MAjxBcgf,GAoxBZwR,yBAA2B,SAAClG,EAAMC,EAAMC,GAC7C,OAAS,GAAKF,EAAQE,GAAS9oB,KAAK+oB,KAAKF,EAAOD,GAAQC,EAAOD,IAAS,GCpxB5E,IAAM4M,GAAiB,CACrBC,SAAU,EACVC,YAAa,GACbC,aAAc,EACdC,aAAc,EACdC,YAAa,EACbC,2BAA4B,EAC5BC,qBAAsB,EACtBC,cAAe,EACfC,WAAY,EACZC,0BAA2B,EAC3BC,oBAAqB,EACrBC,cAAe,EACfC,eAAgB,EAChBC,qBAAsB,EACtBC,qBAAsB,GAGHC,G,uLAoXMz3B,EAAMC,GAC7B,QAAKD,GAKE,CAAE6uB,aAHYtyB,KAAKu3B,oBAAoB9zB,EAAMC,GAG7B8qB,MAFTxuB,KAAKy3B,aAAah0B,EAAMC,M,uCAIhBD,GACtB,QAAKA,GAKE,CAAE6uB,aAHYtyB,KAAKu3B,oBAAoB9zB,EAAMA,GAG7B+qB,MAFTxuB,KAAKy3B,aAAah0B,EAAMA,M,yCAIdA,EAAMC,GAC9B,QAAKD,GAIE,CAAE81B,YAAa,CAAE4B,KAFJn7B,KAAKw5B,uBAAuB/1B,EAAMC,O,2CAI5BD,EAAMC,GAChC,IAAKD,EAAM,OAAO,EAClB,IAAM23B,EAAsB3lB,GAAkB/R,EAAQ,KAAO,EACvD23B,EAAuB5lB,GAAkBhS,EAAM,KAAO,EACtD63B,EAAmB7lB,GAAkBhS,EAAM,KAAO,EAElD83B,EAAoE,IAAlC9lB,GAAkBhS,EAAM,MAC1D+3B,IAA2B/lB,GAAkBhS,EAAM,MACnDg4B,GAAeD,KAA4BH,EAYjD,MAAO,CACL9B,YAAa,CAAE4B,KAXQK,EACrB,EACAJ,EAAsBC,EASe1P,OARd6P,EACvBH,GACCA,EAAuBC,GAO1B9M,MAAO,CAAES,aALUxZ,GAAkBhS,EAAM,IAKpB8sB,aAJJ9a,GAAkBhS,EAAM,OAK3C83B,kCACAC,yBACAC,mB,GApa+BzZ,I,6EAAhBkZ,GACZQ,gBAAkB,SAACC,EAAiB9N,GACzCrrB,EAAI6C,SACFs2B,GACA,SAACn4B,GACMA,EAAKC,OAGVD,EAAKC,KAAK2E,UAAY,aAKxB,CACEvD,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,EACVE,YAAY,KAKlB,IAAME,EAAM9C,EAAIoD,MAAM+1B,GAChBC,EAAcV,GAAQW,gBAAgBv2B,EAAKuoB,GAoDjD,OAnDA+N,EAAYjH,KAAOgH,EAAgBjO,QAAQiH,KAE3ChyB,OAAOm5B,OAAOH,EAAgBjO,QAASkO,GAEvCp5B,EAAI6C,SACFC,GACA,SAAC9B,GACC,IAAKA,EAAKC,KAAM,OAAO,EAEvB,IAAMiqB,EAAU,YAAAwN,GAAO,IAAP,IAA8B13B,GACxCu4B,EAAQC,GAAOC,OAAON,EAAiBjO,EAAQwO,MACrD,IAAKxO,IAAYqO,EAAO,OAAO,EAE3BrO,EAAQyO,kBACVzO,EAAQyO,gBAAkBJ,EAAMrO,QAAQyO,iBACpCzO,EAAQiH,OAAMjH,EAAQiH,KAAOoH,EAAMrO,QAAQiH,MAGjDhyB,OAAOm5B,OAAOC,EAAMrO,QAASA,KAE/B,CACE7oB,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,KAIhB1C,EAAI6C,SACFC,GACA,SAAC9B,GACC,IAAKA,EAAKC,KAAM,OAAO,EAEvB,IAAMiqB,EAAU,YAAAwN,GAAO,IAAP,IAA6B13B,GACvCu4B,EAAQC,GAAOC,OAAON,EAAiBjO,EAAQwO,MACrD,IAAKxO,IAAYqO,EAAO,OAAO,EAE3BrO,EAAQyO,kBACVzO,EAAQyO,gBAAkBJ,EAAMrO,QAAQyO,iBACpCzO,EAAQiH,OAAMjH,EAAQiH,KAAOoH,EAAMrO,QAAQiH,MAGjDhyB,OAAOm5B,OAAOC,EAAMrO,QAASA,KAE/B,CACE7oB,UAAW,CACTO,YAAY,KAKXu2B,GA5EUT,GA+EZkB,aAAe,SAACz2B,EAAOkoB,GAC5B,IAAMwO,EAASnB,GAAQoB,4BAA4B32B,GAC7CL,EAAM9C,EAAIoD,MAAMy2B,GAsCtB,OApCMA,IAAQA,EAAM,QAAcnB,GAAQW,gBAAgBv2B,EAAKuoB,IAE/DrrB,EAAI6C,SACFC,GACA,SAAC9B,GACC,IAAKA,EAAKC,KAAM,OAAO,EAEvB,IAAMiqB,EAAU,YAAAwN,GAAO,IAAP,IAA8B13B,GAC9CkqB,EAAO,KAAW2O,EAClB,IAAMN,IAAUrO,GAAWsO,GAAOC,OAAOI,EAAQ3O,EAAQwO,MACnDH,IAAOA,EAAK,QAAcrO,KAElC,CACE7oB,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,KAIhB1C,EAAI6C,SACFC,GACA,SAAC9B,GACC,IAAKA,EAAKC,KAAM,OAAO,EAEvB,IAAMiqB,EAAU,YAAAwN,GAAO,IAAP,IAA6B13B,GAC7CkqB,EAAO,KAAW2O,EAClB,IAAMN,IAAUrO,GAAWsO,GAAOC,OAAOI,EAAQ3O,EAAQwO,MACnDH,IAAOA,EAAK,QAAcrO,KAElC,CACE7oB,UAAW,CACTO,YAAY,KAIXi3B,GAvHUnB,GAyHZoB,4BAA8B,SAAC32B,GACpC,IAAM42B,EAAcrB,GAAQsB,iCAAiC72B,GACvD02B,EAAShc,KAAKC,MAAMD,KAAK4I,UAAUtjB,IAGzC,OAFA02B,EAAOj3B,WAAam3B,EAEbF,GA9HUnB,GAiIZsB,iCAAmC,SAAC72B,GACzC,IAAI2S,EAAY,EAChB,OAAO3S,EAAMP,WAAWrC,QAAO,SAACC,EAAKQ,GACnC,IAAMi5B,EAAapc,KAAK4I,UAAUzlB,GAC5B64B,EAAS,IAAItzB,MAAMvF,EAAKC,KAAKiR,WAAa,GAAG1S,MAAK,GAAOmB,KAAI,WACjE,IAAM44B,EAAQ1b,KAAKC,MAAMmc,GAOzB,OANMV,EAAMt4B,OACVs4B,EAAMrnB,eAAYzT,EAClB86B,EAAMt4B,KAAK+E,SAAX,qBAAoC8P,EAApC,UAEFA,IAEOyjB,KAGT,OAAO/4B,EAAIE,OAAOm5B,KACjB,K,sBAjJcnB,G,sBAoJY,SAAC13B,GAAU,IAAD,EACvC,KAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,aAAC,EAAYgG,kBAAkB,OAAO,EAC1C,IAAMhG,EAAOD,EAAKC,KACZC,EAASF,EAAKE,OAEdu1B,EAAcxjB,GAAkBhS,EAAM,GAGtCi5B,EAAgB,CACpB/H,KAAM,CACJL,UAAW,CAAEN,GAAIiF,IAEnB50B,SAAU,CACRiwB,UAAW,CAAEN,GAAIiF,GACjBrK,KAAM,CAAE+N,WAROlnB,GAAkBhS,EAAM,SAYrCm5B,EAAoB1B,GAAQ2B,wBAAwBr5B,GACpD04B,EAAOz4B,EAAK+E,SAASK,MAAM,KAAK8M,MAAM,EAAG,GAAGiC,KAAK,KACjDklB,EAAgBr5B,EAAKgG,iBACxBtG,KAAI,SAAC+G,GACJ,IAAIwjB,EAAU,GACV1mB,GAAY,EAChB,OAAQkD,EAAKN,UACX,KAAK,IACL,KAAK,GACL,KAAK,GACL,KAAK,KAEH,KADA8jB,EAAUwN,GAAQ6B,kBAAkBt5B,EAAMC,IAC7B4uB,aAAaR,MAAO,OAAO,EACxC9qB,EAAY,SACZ,MACF,KAAK,EACL,KAAK,GACL,KAAK,KACL,KAAK,GACL,KAAK,KACH0mB,EAAUwN,GAAQ8B,mBAAmBv5B,EAAMC,GAC3CsD,EAAY,UACZ,MACF,KAAK,GACL,KAAK,KACL,KAAK,KACL,KAAK,KACH0mB,EAAUwN,GAAQ+B,qBAAqBx5B,EAAMC,GAC7CsD,EAAY,YACZ,MACF,KAAK,KACL,KAAK,KACL,KAAK,KACL,KAAK,KACHA,EAAY,SACZ,MACF,QACE,OAAO,EAGX,IAAMk2B,EAAqBhC,GAAQiC,sBAAsBjzB,GAKzD,OAJA0yB,EAAkBT,gBAAlB,mBAEIe,EAEG,eAAKxP,EAAZ,GAAwBkP,EAAxB,CAA2C51B,iBAE5ChD,QAAO,SAAC0pB,GAAD,QAAeA,KAEzB,KAAIoP,EAAc74B,OAAS,GAKtB,sBAAYy4B,EAAZ,GAA8BI,EAAc,GAA5C,CAAgDZ,SAJnDv1B,QAAQiC,MACN,uDACApF,M,sBA1Na03B,G,sBA8NW,SAAC13B,GAAU,IAAD,EACtC,KAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMC,YAAP,aAAC,EAAYgG,kBAAkB,OAAO,EAC1C,IAAMhG,EAAOD,EAAKC,KACZyrB,EAAkC,MAAvBzrB,EAAK4jB,cAGhBiK,EApOW4J,GAoOIrH,mBAAmB,CAAE/uB,KAAMrB,IAC1C2tB,EArOW8J,GAqOMjD,wBAAwB,CAAEnzB,KAAMrB,IAEjDmrB,EAvOWsM,GAuOCvJ,cAAc,CAAE7sB,KAAMrB,IAClC8rB,EAAgB9Z,GAAkBhS,EAAM,KACxCmsB,EAAana,GAAkBhS,EAAM,KACrCmtB,EAAkBnb,GAAkBhS,EAAM,IAChDmrB,EAAKU,WAAL,eACKV,EAAKU,WADV,CAEEC,gBACAK,aACAgB,oBAEF,IAAMwM,EAAe,CACnBzI,KAAM,CACJZ,MAAO,CAAEC,GAAI1C,EAAQyC,MAAMC,IAC3BK,OAAQ,CAAEL,GAAI1C,EAAQ+C,OAAOL,IAC7BM,UAAW,CAAEN,GAAI1C,EAAQgD,UAAUN,IACnC5C,UAAW,CAAE4C,GAAI5C,EAAU4C,KAE7B3vB,SAAS,eAAMitB,EAAP,GAAmB1C,EAAnB,CAAyBwC,eAE7B8K,EAAOz4B,EAAK+E,SAASK,MAAM,KAAK8M,MAAM,EAAG,GAAGiC,KAAK,KACjDklB,EAAgBr5B,EAAKgG,iBACxBtG,KAAI,SAAC+G,GACJ,IAAM0yB,EAAoB1B,GAAQ2B,wBAAwBr5B,GACtDkqB,EAAU,GACV1mB,GAAY,EAEhB,OAAQkD,EAAKN,UACX,KAAK,IACL,KAAK,GACL,KAAK,GACL,KAAK,KAEH,KADA8jB,EAAUwN,GAAQmC,iBAAiB55B,IACtB6uB,aAAaR,MAAO,OAAO,EACxC9qB,EAAY,SACZ,MACF,QACE,OAAO,EAEX,OAAO,eAAK0mB,EAAZ,GAAwBkP,EAAxB,CAA2C51B,iBAE5ChD,QAAO,SAAC0pB,GAAD,QAAeA,KAKzB,KAAIoP,EAAc74B,OAAS,GAMzB,sBACKm5B,EADL,GAEKN,EAAc,GAFnB,CAGEQ,qBAXF,yEAYEpO,WACA6I,SAAS,EACTmE,SAXFv1B,QAAQiC,MACN,uDACApF,MAvRa03B,GAmSZ2B,wBAA0B,SAACr5B,GAChC,IAAMgvB,EApSW0I,GAoSW1D,kBAAkBh0B,EAAKC,KAAMD,EAAKE,QAE9D,MAAO,CACL8uB,iBACA2J,gBAAiB,CACfhoB,UAAU,EACVopB,eAAgB,EAChBC,eAAgB,EAChBC,mBAAoB,EACpBC,eAAgBlL,EAAeyE,mBA7SlBiE,GAiTZiC,sBAAwB,SAACjzB,GAC9B,IAAIgzB,EAAqB,GACzB,OAAQhzB,EAAKN,UACX,KAAK,KACL,KAAK,GACHszB,EAAqBhD,GAAeC,SACpC,MACF,KAAK,IACL,KAAK,GACL,KAAK,GACL,KAAK,KACH+C,EAAqBhD,GAAeG,aACpC,MACF,KAAK,EACH6C,EAAqBhD,GAAeK,YACpC,MACF,KAAK,GACH2C,EAAqBhD,GAAea,eACpC,MACF,KAAK,KACHmC,EAAqBhD,GAAeM,2BACpC,MACF,KAAK,GACH0C,EAAqBhD,GAAeS,WACpC,MACF,KAAK,KACHuC,EAAqBhD,GAAeU,0BACpC,MACF,KAAK,KACHsC,EAAqBhD,GAAec,qBACpC,MACF,KAAK,KACHkC,EAAqBhD,GAAee,qBACpC,MACF,KAAK,KACHiC,EAAqBhD,GAAeyD,eACpC,MACF,KAAK,KACL,KAAK,KACHT,EAAqBhD,GAAeQ,cACpC,MACF,KAAK,KACHwC,EAAqBhD,GAAeY,cACpC,MACF,QACEoC,EAAqBhD,GAAeE,YAGxC,OAAO8C,GAjWUhC,GAmWZW,gBAAkB,SAACv2B,EAAKuoB,GAC7B,IAAMyD,EApWW4J,GAoWIrH,mBAAmBvuB,GAClCspB,EArWWsM,GAqWCvJ,cAAcrsB,GAC1B8rB,EAtWW8J,GAsWMjD,wBAAwB3yB,GAE/C,MAAO,CACLqvB,KAAM,CACJZ,MAAO,CAAEC,GAAI1C,EAAQyC,MAAMC,IAC3BK,OAAQ,CAAEL,GAAI1C,EAAQ+C,OAAOL,IAC7BM,UAAW,CAAEN,GAAI1C,EAAQgD,UAAUN,IACnC5C,UAAW,CAAE4C,GAAI5C,EAAU4C,KAE7B3vB,SAAS,eAAMitB,EAAP,GAAmB1C,EAAnB,CAAyBwC,cACjCvD,UAAWA,I,IAyDXmO,G,yLACuBr2B,EAAOu2B,EAAMzpB,GACtC,IAAK,CAAC,WAAY,aAAc,UAAW,WAAWvO,SAASuO,GAC7D,OAAO,EAET,IAAMmrB,EAAa59B,KAAKi8B,OAAOt2B,EAAOu2B,GACtC,SAAK0B,IAAeA,EAAWn6B,QAE/Bm6B,EAAWn6B,KAAK2E,UAAYqK,EAChBzS,KAAK4F,MAAMD,M,6BAGXA,EAAOu2B,GACnB,OAAKv2B,GAAUu2B,EACRA,EAAKrzB,MAAM,KAAK9F,QAAO,SAAC86B,EAAGC,GAAJ,OAAWD,GAAKA,EAAEC,SAAO78B,IAAW0E,GADtC,O,GAbXnD,GC3bAu7B,G,kGACPp4B,EAAOq4B,EAAMnQ,GACvB,IAAMoQ,EAAmB/C,GAAQkB,aAAaz2B,EAAOkoB,EAAUqQ,SACzDC,EAAmBjD,GAAQkB,aAAa4B,EAAMnQ,EAAUuQ,SAC9Dz3B,QAAQC,IAAIq3B,EAAkBE,GAE9B37B,EAAI6C,SACF44B,GACA,SAACz6B,GAAU,IAAD,EACR,KAAI,OAACA,QAAD,IAACA,GAAD,UAACA,EAAMkqB,eAAP,aAAC,EAAeyO,iBAAiB,OAAO,EAC5C34B,EAAKkqB,QAAQyO,gBAAgBhoB,UAAW,EACxC3Q,EAAKkqB,QAAQyO,gBAAgBsB,mBAAqB,EAClDj6B,EAAKkqB,QAAQyO,gBAAgBqB,eAAiB,IAEhD,CACE34B,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,EACVE,YAAY,KAKlBuB,QAAQC,IACN,qBACAy3B,GAAIC,gDAAgDL,IAEtD,IAAMM,EAAWF,GAAIG,aAAaP,EAAkBE,EAAkB,GACtEF,EAAiBvQ,QAAQiH,KAAKvD,UAAU4C,GAAK,GAC7CqK,GAAII,gBAAgBF,EAAUN,EAAkBpQ,EAAUqQ,a,yUA9BzCH,GAiCZW,iBAAmB,SAAC/Q,EAAOhC,EAAQgT,GACxCZ,GAAUa,mBAAmBjR,GAC7BoQ,GAAUc,gBAAgBlR,GAC1BnrB,EAAI6C,SACFC,KACA,SAAC9B,GACC,IAAKA,EAAKkqB,QAAS,OAAO,EAC1B,OAAQlqB,EAAKkqB,QAAQ1mB,WACnB,IAAK,SACH+2B,GAAUe,eAAet7B,EAAKkqB,QAASC,EAAOhC,EAAQgT,GACtD,MACF,IAAK,UACHZ,GAAUgB,gBAAgBv7B,EAAKkqB,QAASC,EAAOhC,EAAQgT,GACvD,MACF,IAAK,YACHZ,GAAUiB,kBAAkBx7B,EAAKkqB,QAASC,EAAOhC,EAAQgT,MAI/D,CACE95B,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,EACVE,YAAY,MAzDD24B,GA8DZa,mBAAqB,SAACjT,GAC3B,IAAMsT,EAAiBtT,EAAO+B,QAAQiH,KAAKvD,UACrC8N,EAAgBvT,EAAO+B,QAAQrpB,SAAS+sB,UAExC0B,EAAoBzF,GAAQmG,yBAChC0L,EAAclL,GACdiL,EAAejL,GACfkL,EAAchH,WAOhB,OAHA+G,EAAejL,IAAMlB,EACK,IAAtBmM,EAAejL,KAAUiL,EAAejL,GAAK,GAE1ClB,GA5EUiL,GA8EZc,gBAAkB,SAAClT,GACxB,IAAMwT,EAAcxT,EAAO+B,QAAQiH,KAAKN,OAClC+K,EAAazT,EAAO+B,QAAQrpB,SAASgwB,OAErCvB,EAAoBzF,GAAQmG,yBAChC4L,EAAWpL,GACXmL,EAAYnL,GACZoL,EAAWlH,WAOb,OAHAiH,EAAYnL,IAAMlB,EACK,IAAnBqM,EAAYnL,KAAUmL,EAAYnL,IAAM,GAErClB,GA5FUiL,GA+FZgB,gBAAkB,SAACrR,GACxB,IAAMC,EAAQD,EAAQze,KAOtB0e,EAAMD,QAAQiH,KAAKN,OAAOL,IAAMtG,EAAQ6L,YAAY4B,KAAK9G,OACrD1G,EAAMD,QAAQrpB,SAASgwB,OAAOL,GAAKrG,EAAMD,QAAQiH,KAAKN,OAAOL,KAC/DrG,EAAMD,QAAQiH,KAAKN,OAAOL,GAAKrG,EAAMD,QAAQrpB,SAASgwB,OAAOL,IAE/DrG,EAAMD,QAAQiH,KAAKZ,MAAMC,IAAMtG,EAAQ6L,YAAY4B,KAAKpH,MACpDpG,EAAMD,QAAQrpB,SAAS0vB,MAAMC,GAAKrG,EAAMD,QAAQiH,KAAKZ,MAAMC,KAC7DrG,EAAMD,QAAQiH,KAAKZ,MAAMC,GAAKrG,EAAMD,QAAQrpB,SAAS0vB,MAAMC,IAE7DrG,EAAMD,QAAQiH,KAAKL,UAAUN,IAAMtG,EAAQ6L,YAAY4B,KAAK7G,UACxD3G,EAAMD,QAAQrpB,SAASiwB,UAAUN,GAAKrG,EAAMD,QAAQiH,KAAKL,UAAUN,KACrErG,EAAMD,QAAQiH,KAAKL,UAAUN,GAAKrG,EAAMD,QAAQrpB,SAASiwB,UAAUN,KAjHpD+J,GAqHZe,eAAiB,SAACpR,GACvB,IAAMC,EAAQD,EAAQqK,QAAUrK,EAAUA,EAAQze,KAC5C0c,EAAS+B,EAAQ/B,OAEjB0T,EAA6B,YAAAtB,GAAS,IAAT,IAAwDrQ,EAASC,EAAOhC,GAErGmG,EAAQiM,GAAUuB,wBAAwBD,EAA4B1T,GAG5EA,EAAO+B,QAAQiH,KAAKN,OAAOL,IAAMlC,EAAMuC,OACnC1I,EAAO+B,QAAQiH,KAAKN,OAAOL,GAAK,IAAGrI,EAAO+B,QAAQiH,KAAKN,OAAOL,GAAK,GACvErI,EAAO+B,QAAQiH,KAAKZ,MAAMC,IAAMlC,EAAMiC,MAClCpI,EAAO+B,QAAQiH,KAAKZ,MAAMC,GAAK,IAAGrI,EAAO+B,QAAQiH,KAAKZ,MAAMC,GAAK,GACrErI,EAAO+B,QAAQiH,KAAKL,UAAUN,IAAMlC,EAAMwC,UACtC3I,EAAO+B,QAAQiH,KAAKL,UAAUN,GAAK,IACrCrI,EAAO+B,QAAQiH,KAAKL,UAAUN,GAAK,IApIpB+J,GAsIZuB,wBAA0B,SAAC5R,EAAS/B,GACzC,IAAK+B,EAAQ4E,aAAaR,MACxB,MAAO,CAAEuC,OAAQ,EAAGN,MAAO,EAAGO,UAAW,GAG3C,IAAMiL,EAAe,YAAAxB,GAAS,IAAT,IAA0CrQ,EAAQ4E,aAAc3G,EAAQ,UAC7F,GAAI4T,EAAaC,UAAU1N,OAAS,IAClC,MAAO,CAAEuC,OAAQkL,EAAaE,SAAS3N,MAAOiC,MAAO,EAAGO,UAAW,GAGrE,IAAMoL,EAAc,YAAA3B,GAAS,IAAT,IAA0CwB,EAAaC,UAAW7T,EAAQ,SAC9F,GAAI+T,EAAYF,UAAU1N,OAAS,IACjC,MAAO,CACLuC,OAAQkL,EAAaE,SAAS3N,MAC9BiC,MAAO2L,EAAYD,SAAS3N,MAC5BwC,UAAW,GAIf,IAAMqL,EAAkB,YAAA5B,GAAS,IAAT,IAA0C2B,EAAYF,UAAW7T,EAAQ,aACjG,MAAO,CACL0I,OAAQkL,EAAaE,SAAS3N,MAC9BiC,MAAO2L,EAAYD,SAAS3N,MAC5BwC,UAAWqL,EAAgBF,SAAS3N,Q,sBA7JrBiM,G,sBAgKsB,SAACzL,EAAc3G,EAAQrlB,GAE9D,IAAMs5B,EAAO,YAAA7B,GAAS,IAAT,IAAkCzL,EAAc3G,EAAQrlB,GAC/Du5B,EACJlU,EAAO+B,QAAQiH,KAAKruB,GAAM0tB,GAAK4L,EAAKE,eAAiB,EACjDnU,EAAO+B,QAAQiH,KAAKruB,GAAM0tB,GAAK4L,EAAKE,eACpC,EAEAC,EAAaH,EAAKI,YAAcH,EAChCI,EAAaL,EAAKM,YAAcL,EAChCM,EAAaP,EAAKQ,YAAcP,EAChCQ,EAAaT,EAAKU,YAAcT,EAChCU,EAAgBR,EAAaE,EAAaE,EAAaE,EAEvDG,EAAelO,EAAa2B,GAAK8L,EAAaH,EAAKa,WACnDC,EAAepO,EAAa4B,GAAK+L,EAAaL,EAAKe,WACnDC,EAAetO,EAAa6B,GAAKgM,EAAaP,EAAKiB,WACnDC,EAAexO,EAAa8B,GAAKiM,EAAaT,EAAKmB,WAIzD,MAAO,CACLtB,SAAU,CACR3N,MAAOyO,EACPtM,GAAI8L,EACJ7L,GAAI+L,EACJ9L,GAAIgM,EACJ/L,GAAIiM,GAENb,UAAW,CACT1N,MAXF0O,EAAeE,EAAeE,EAAeE,EAY3C7M,GAAIuM,EACJtM,GAAIwM,EACJvM,GAAIyM,EACJxM,GAAI0M,O,sBAlMS/C,G,sBAsMc,SAACzL,EAAc3G,EAAQrlB,GACtD,IAAMm6B,EACHnO,EAAa2B,GAAKtI,EAAO+B,QAAQrpB,SAASiC,GAAM2tB,GAAM,IACnD0M,EACHrO,EAAa4B,GAAKvI,EAAO+B,QAAQrpB,SAASiC,GAAM4tB,GAAM,IACnD2M,EACHvO,EAAa6B,GAAKxI,EAAO+B,QAAQrpB,SAASiC,GAAM6tB,GAAM,IACnD4M,EACHzO,EAAa8B,GAAKzI,EAAO+B,QAAQrpB,SAASiC,GAAM8tB,GAAM,IACnD4M,EAAgBP,EAAaE,EAAaE,EAAaE,EAEvDf,EAAc1N,EAAa2B,GAAKwM,EAChCP,EAAc5N,EAAa4B,GAAKyM,EAChCP,EAAc9N,EAAa6B,GAAK0M,EAChCP,EAAchO,EAAa8B,GAAK2M,EAItC,MAAO,CACLjB,eAHAE,EAAcE,EAAcE,EAAcE,EAI1CN,cACAE,cACAE,cACAE,cACAU,gBACAP,aACAE,aACAE,aACAE,iB,sBAlOehD,G,sBAqOoC,SACrDrQ,EACAC,EACAhC,GAEA,IAAMsV,EAAiB,YAAAlD,GAAS,IAAT,IACrBrQ,EACAC,EACAhC,GAGF,OAAO,eACF+B,EADL,CAEE4E,aAAc,CACZR,MAAOpE,EAAQ4E,aAAaR,MAAQmP,EACpChN,GAAIvG,EAAQ4E,aAAa2B,GAAKgN,EAC9B/M,GAAIxG,EAAQ4E,aAAa4B,GAAK+M,EAC9B9M,GAAIzG,EAAQ4E,aAAa6B,GAAK8M,EAC9B7M,GAAI1G,EAAQ4E,aAAa8B,GAAK6M,Q,sBAvPjBlD,G,sBA2PwB,SAACrQ,EAASC,EAAOhC,GAC1D,GAAI+B,EAAQqK,QAAS,CAEnB,IAAMmJ,EAAgB7T,GAAQ8T,gBAAgBzT,EAASC,EAAOhC,GAE9D,OAAOjnB,KAAK0rB,UAAY8Q,EACpB7T,GAAQ+T,gCACR,EACC,GAAM1T,EAAQc,MAAMC,SAAU,CAEnC,IAAM4S,EAAiBhU,GAAQ8B,kBAAkBzB,EAASC,EAAOhC,GAEjE,OAAOjnB,KAAK0rB,UAAYiR,EACpBhU,GAAQ+T,gCACR,EACC,GAAM1T,EAAQc,MAAMqB,gBAAiB,CAE1C,IAAMyR,EAAkBjU,GAAQkU,oBAAoB7T,EAASC,EAAOhC,GAEpE,OAAOjnB,KAAK0rB,UAAYkR,EACpBjU,GAAQmU,0BAA0B9T,EAAS/B,GAC3C,EACC,OAAO,KAjRGoS,GAoRZiB,kBAAoB,SAACtR,GAC1B,IAAMC,EAAQD,EAAQze,KAChB0c,EAAS+B,EAAQ/B,OAEjB0T,EAA6B,YAAAtB,GAAS,IAAT,IAA2DrQ,EAASC,EAAOhC,GAG9GA,EAAO+B,QAAQiH,KAAKvD,UAAU4C,IAC5BqL,EAA2B9F,YAAY5N,OACrCA,EAAO+B,QAAQiH,KAAKvD,UAAU4C,GAAK,IACrCrI,EAAO+B,QAAQiH,KAAKvD,UAAU4C,GAAK,GACjCrI,EAAO+B,QAAQrpB,SAAS+sB,UAAU4C,GAAKrI,EAAO+B,QAAQiH,KAAKvD,UAAU4C,KACvErI,EAAO+B,QAAQiH,KAAKvD,UAAU4C,GAAKrI,EAAO+B,QAAQrpB,SAAS+sB,UAAU4C,IAEvErG,EAAMD,QAAQiH,KAAKvD,UAAU4C,IAC3BqL,EAA2B9F,YAAY5L,MACrCA,EAAMD,QAAQiH,KAAKvD,UAAU4C,GAAK,IACpCrG,EAAMD,QAAQiH,KAAKvD,UAAU4C,GAAK,GAChCrG,EAAMD,QAAQrpB,SAAS+sB,UAAU4C,GAAKrG,EAAMD,QAAQiH,KAAKvD,UAAU4C,KACrErG,EAAMD,QAAQiH,KAAKvD,UAAU4C,GAAKrG,EAAMD,QAAQrpB,SAAS+sB,UAAU4C,K,sBAvSpD+J,G,sBAySuC,SACxDrQ,EACAC,EACAhC,GAEA,IAAM8V,EAAmB9T,EAAMD,QAAQiH,KAAKvD,UAAU4C,GAChD0N,EAAoB/V,EAAO+B,QAAQiH,KAAKvD,UAAU4C,GAGlDiN,EAAiB,YAAAlD,GAAS,IAAT,IAA+CrQ,EAASC,EAAOhC,GAChFgW,EAAmBjU,EAAQ6L,YAAY4B,KAAO8F,EAC9CW,EAAoBlU,EAAQ6L,YAAY5N,OAASsV,EAEvD,GAAIvT,EAAQ+N,YAAa,CACvB,IAAMoG,EAAiBn9B,KAAKwrB,IAAIyR,EAAkBD,GAC9CI,EAAuBD,EAW3B,OARGnU,EAAQ6N,iCACTmG,EAAoBE,EAAoBH,IAExCK,EAAuBp9B,KAAKgsB,IAC1BhsB,KAAKC,OAAO+8B,EAAoBD,GAAoB,GACpD,IAEJK,EAAuBp9B,KAAKwrB,IAAI2R,EAAgBC,GACzC,eACFpU,EADL,CAEE6L,YAAa,CACX4B,KAAM2G,EACNnW,QAASmW,KAKf,OAAO,eACFpU,EADL,CAEE6L,YAAa,CACX5L,MAAOgU,EACPhW,OAAQiW,Q,sBAhVK7D,G,sBAoV2B,SAACrQ,EAASC,EAAOhC,GAAY,IAAD,IAClEoW,EAAgB1U,GAAQ0B,iBAAiBrB,EAASC,EAAOhC,GAY/D,OAVwB,UAAG+B,EAAQlqB,KAAKC,YAAhB,iBAAG,EAAmBgG,wBAAtB,aAAG,EAAqC1G,QAC9D,SAACC,EAAKkH,GACJ,OAAsB,KAAlBA,EAAKN,UAGF5G,KAET,IAG0B,EAAI++B,KAjWfhE,GAoWZiE,mBAAqB,SAACtU,GAC3B,IAAMuR,EACJvR,EAAQiH,KAAKvD,WAAa1D,EAAQze,KAAKye,QAAQiH,KAAKvD,UAChD3e,EAAQib,EAAQyO,gBAChB8F,EAAOvU,EAAQ8E,eAmBrB,OAhBAyM,EAAejL,IAAMiO,EAAK9K,eAC1B1kB,EAAMirB,iBACNjrB,EAAM8qB,eAAiB9qB,EAAM+qB,eAGA,IAAzB/qB,EAAMirB,gBACRjrB,EAAM+qB,eACJ/qB,EAAM8qB,eAAiB0E,EAAKn2B,SAAWm2B,EAAK/K,WAC9CzkB,EAAMirB,eAAiBuE,EAAKhL,iBAE5BxkB,EAAM+qB,eAAiB9vB,QACpB+E,EAAM8qB,eAAiB0E,EAAKn2B,UAAUkjB,QAAQ,KAGnDvc,EAAMgrB,mBAAqB/4B,KAAKC,MAAM8N,EAAM+qB,gBAErC9P,G,IAGL2Q,G,0GACgB1C,EAAiBhQ,EAAQgT,GAE3C,OADA,YAAAN,EAAG,IAAH,IAA4B1C,EAAiBhQ,GACtCnpB,EAAI6C,SACTs2B,GACA,SAACuG,GACC,QAAKA,EAAexU,SACb,YAAA2Q,EAAG,IAAH,IAA8B6D,EAAexU,QAASiR,KAE/D,CACE95B,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,EACVE,YAAY,KAIfrC,QAAO,SAACC,EAAKm/B,GACZ,OAAKA,EACEn/B,EAAIE,OAAOi/B,GADIn/B,IAErB,IACF+E,MAAK,SAACN,EAAGC,GAAJ,OAAUD,EAAE26B,KAAO16B,EAAE06B,U,sCA8FRC,EAAWH,EAAgBrU,GAChDwU,EAAUp8B,SAAQ,SAACs4B,GACZF,EAAIiE,yBAAyB/D,EAAS7Q,WAEzC6Q,EAAS7Q,QAAQyO,gBAAgBhoB,UAAW,EACT,WAA/BoqB,EAAS7Q,QAAQ1mB,WACnBk0B,GAAQQ,gBAAgBwG,EAAgBrU,IAG5C,YAAAwQ,EAAG,IAAH,IAAqCE,Q,+CAkBT7Q,GAC9B,IAAKA,IAAYA,EAAQyO,gBAAgBhoB,SAAU,OAAO,EAE1D,IAAMouB,EAAuBlE,EAAImE,kCAAkC9U,GAC7D+U,EAAuBpE,EAAIqE,kCAAkChV,GACnE,SAAK6U,IAAyBE,K,wDAIS/U,GAAU,IAAD,EAC1C8E,EAAiB9E,EAAQ8E,eAI/B,UAFS,OAAP9E,QAAO,IAAPA,GAAA,UAAAA,EAASiH,YAAT,eAAevD,YAAa1D,EAAQze,KAAKye,QAAQiH,KAAKvD,WAErC4C,GAAKxB,EAAe2E,kB,wDAGAzJ,GAAU,IAAD,IAC1CuL,EAAW,OAAGvL,QAAH,IAAGA,GAAH,UAAGA,EAASiH,YAAZ,iBAAG,EAAeL,iBAAlB,aAAG,EAA0BN,GACxC2O,EAAkBjV,EAAQze,KAAKye,QAAQiH,KAAKL,UAAUN,GAE5D,QAAIiF,GAAe,GAAK0J,GAAmB,K,uCAIrBhH,EAAiB4C,M,sEACc5C,GACrD,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAIx4B,KAAI,SAAC+5B,GAC7C,IAAI0F,EAA0B,EAoB9B,OAnBApgC,EAAI6C,SACFs2B,GACA,SAACn4B,GAAU,IAAD,IACFy+B,EAAI,OAAGz+B,QAAH,IAAGA,GAAH,UAAGA,EAAMkqB,eAAT,aAAG,EAAe8E,eACtB/f,EAAK,OAAGjP,QAAH,IAAGA,GAAH,UAAGA,EAAMkqB,eAAT,aAAG,EAAeyO,gBAC7B,IAAK8F,IAASxvB,GAASA,EAAMyqB,mBAAqBA,EAChD,OAAO,EACT,IAAM2F,EAAeZ,EAAK9K,eAAiB8K,EAAKn2B,UAAY,EAC5D82B,GAA2BC,IAE7B,CACEh+B,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,KAKT,CAAEg4B,qBAAoB2F,aAAcD,U,gQA/L3CvE,G,sBAwB6B,SAAC1C,EAAiBhQ,GACjDnpB,EAAI6C,SACFs2B,GACA,SAACuG,GAAoB,IAAD,EAClB,IAAKA,EAAexU,QAAS,OAAO,EACpC,IAAIoV,GAAU,EACd,cAAQZ,QAAR,IAAQA,GAAR,UAAQA,EAAgBxU,eAAxB,aAAQ,EAAyB1mB,WAC/B,IAAK,SACL,IAAK,UACL,IAAK,YACH87B,EAAUnX,EACV,MACF,QACEmX,GAAU,EAGdZ,EAAexU,QAAf,OAAmCoV,IAErC,CACEj+B,UAAW,CACTG,WAAW,EACXC,UAAU,EACVC,UAAU,EACVE,YAAY,Q,sBA/ChBi5B,G,sBAoD+B,SAAC3Q,EAASiR,GAC3C,IAAMoE,EAAW,YAAA1E,GAAG,IAAH,IAA8B3Q,GAE/C,OADiB,YAAA2Q,GAAG,IAAH,IAAuC0E,EAAUpE,GAClDx7B,KAAI,SAACo7B,GAEnB,OADAA,EAAQ,QAAc7Q,EACf6Q,Q,sBAzDPF,G,sBA4D+B,SAAC3Q,GAClC,IAAMqV,EAAW1iB,KAAKC,MACpBD,KAAK4I,UAAL,eAAoByE,EAApB,CAA6Bze,UAAMhO,EAAW0qB,YAAQ1qB,MAexD,OAbK,OAAC8hC,QAAD,IAACA,OAAD,EAACA,EAAU5G,kBACdx5B,OAAOxB,KAAK4hC,EAAS5G,iBAAiBl2B,SAAQ,SAAC5F,GACP,OAAlC0iC,EAAS5G,gBAAgB97B,KAE3B0iC,EAAS5G,gBAAgB97B,GAAO22B,SAEjC,OAAC+L,QAAD,IAACA,OAAD,EAACA,EAAUvQ,iBACd7vB,OAAOxB,KAAK4hC,EAASvQ,gBAAgBvsB,SAAQ,SAAC5F,GACP,OAAjC0iC,EAASvQ,eAAenyB,KAE1B0iC,EAASvQ,eAAenyB,GAAO22B,QAG9B+L,K,sBA7EL1E,G,sBA+EwC,SAAC3Q,EAASiR,GAAU,IAAD,IAC7D,KACE,OAACjR,QAAD,IAACA,GAAD,UAACA,EAASyO,uBAAV,aAAC,EAA0BhoB,YACpB,OAAPuZ,QAAO,IAAPA,GAAA,UAAAA,EAASyO,uBAAT,eAA0BsB,sBAAuBkB,EAEjD,MAAO,GACT,IAAMqE,EAActV,EAAQyO,gBAAgBqB,eACtC/qB,EAAQib,EAAQyO,gBAChB8F,EAAOvU,EAAQ8E,eAEjB/f,EAAM0B,UAAY1B,EAAMgrB,mBAAqBkB,GAC/Ch4B,QAAQs8B,KAAK,4BAGfxwB,EAAMirB,iBACNjrB,EAAM8qB,eAAiB9qB,EAAM+qB,eAGA,IAAzB/qB,EAAMirB,gBACRjrB,EAAM+qB,eACJ/qB,EAAM8qB,eAAiB0E,EAAKn2B,SAAWm2B,EAAK/K,WAC9CzkB,EAAMirB,eAAiBuE,EAAKhL,iBAE5BxkB,EAAM+qB,eAAiB9vB,QACpB+E,EAAM8qB,eAAiB0E,EAAKn2B,UAAUkjB,QAAQ,KAGnDvc,EAAMgrB,mBAAqB/4B,KAAKC,MAAM8N,EAAM+qB,gBAG5C,IAAI0F,EAAiB,GAIrB,OAHIzwB,EAAMgrB,qBAAuBkB,IAC/BuE,EAAiB,YAAA7E,GAAG,IAAH,IAAuC3Q,EAASiR,IAE7D,CAAE,CAAEyD,KAAMY,IAAhB,mBAAkCE,O,sBAjHhC7E,G,sBAgIsC,SAACE,GACzC,OAAQA,EAAS7Q,QAAQ1mB,WACvB,IAAK,SACH+2B,GAAUe,eAAeP,EAAS7Q,SAClC,MACF,IAAK,UACHqQ,GAAUgB,gBAAgBR,EAAS7Q,SACnC,MACF,IAAK,YACHqQ,GAAUiB,kBAAkBT,EAAS7Q,aChgB7C,IAAMyV,GAAe,CACnBr6B,QAAQ,EACRhE,MAAM,EACNC,UAAW,GACXG,SAAU,GACVD,SAAU,GACVD,UAAW,GACXG,SAAU,GACVC,WAAY,IAEd,SAASg+B,GAAa3wB,EAAOnD,GAAS,IAAD,EACnC,OAAQA,EAAOhJ,MACb,IAAK,QACH,OAAO,eACFmM,EADL,CAEE3J,OAAQwG,EAAOlC,UAEnB,IAAK,OACH,OAAO,eACFqF,EADL,CAEE3N,UAE8B7D,KAA5B,UAAAqO,EAAOlC,QAAQ,UAAf,eAAmB3J,OAAqB6L,EAAOlC,QAAQ,GAAG3J,OAEhE,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,YACL,IAAK,WACL,IAAK,aACH,OAAO,eACFgP,EADL,eAEGoH,GAAiBvK,EAAOhJ,MAAQgJ,EAAOlC,UAE5C,QACE,OAAOqF,GAIb,IAAM4wB,GAAmB,CACvBvuB,KAAM,CAAEpF,MAAM,GACd+P,UAAW,CAAE/P,MAAM,GACnBgQ,UAAW,CAAEhQ,MAAM,GACnBiQ,SAAU,CAAEjQ,MAAM,GAClBkQ,SAAU,CAAElQ,MAAM,GAClBmQ,SAAU,CAAEnQ,MAAM,EAAO1L,QAAQ,GACjC8b,WAAY,CAAEpQ,MAAM,EAAO1L,QAAQ,GAEnC8W,KAAM,CAAEpL,MAAM,EAAOrC,aAAa,EAAOrJ,QAAQ,GACjDs/B,KAAM,CAAE5zB,MAAM,EAAOrC,aAAa,EAAO0c,YAAY,EAAO/lB,QAAQ,IAGtE,SAASu/B,GAAiB9wB,EAAOnD,GAC/B,OAAQA,EAAOhJ,MACb,IAAK,OACL,IAAK,YACL,IAAK,YACL,IAAK,WACL,IAAK,WACH,OAAO,eAAK+8B,GAAZ,eAA+B/zB,EAAOhJ,KAAO,CAAEoJ,MAAM,KACvD,IAAK,aACH,OAAO,eACF2zB,GADL,CAEEvjB,WAAY,CACVpQ,MAAM,EACN1L,OAAQsL,EAAOlC,QAAQpJ,UAG7B,IAAK,WACH,OAAO,eACFq/B,GADL,CAEExjB,SAAU,CACRnQ,MAAM,EACN1L,OAAQsL,EAAOlC,QAAQpJ,UAG7B,IAAK,OACH,OAAO,eACFq/B,GADL,CAEEvoB,KAAM,CACJpL,MAAM,EACNrC,YAAaiC,EAAOlC,QAAQC,YAC5BrJ,OAAQsL,EAAOlC,QAAQpJ,UAG7B,IAAK,OACH,OAAO,eACFyO,EADL,CAEE6wB,KAAM,CACJ5zB,KAAMJ,EAAOlC,QAAQsC,KACrBrC,YAAaiC,EAAOlC,QAAQC,YAC5B0c,WAAYza,EAAOlC,QAAQ2c,WAC3B/lB,OAAQsL,EAAOlC,QAAQpJ,UAG7B,IAAK,QACL,QACE,OAAOq/B,IAIb,IAAMG,GAAmB,CACvB1uB,MAAM,EACN2K,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,YAAY,EACZhF,MAAM,GAER,SAAS2oB,GAAiBhxB,EAAOnD,GAC/B,OAAQA,EAAOhJ,MACb,IAAK,OACL,IAAK,YACL,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,WACL,IAAK,aACL,IAAK,OACH,OAAO,eAAKmM,EAAZ,eAAoBnD,EAAOhJ,KAAOgJ,EAAOlC,UAC3C,QACE,OAAOqF,GAIE,SAASixB,GAAQniC,GAAO,MAED4K,mBAAS,CAAE7F,MAAM,EAAO0B,OAAO,IAF9B,mBAE9B8hB,EAF8B,KAElBtc,EAFkB,OAINyS,qBAAWmjB,GAAcD,IAJnB,mBAI9Bx9B,EAJ8B,KAIvBqW,EAJuB,OAKEiE,qBACrCsjB,GACAF,IAPmC,mBAK9B/wB,EAL8B,KAKnBnF,EALmB,OASE8S,qBACrCwjB,GACAD,IAXmC,mBAS9BxpB,EAT8B,KASnBnI,EATmB,OAcf1F,oBAAS,GAdM,mBAc9B7G,EAd8B,KAczBq+B,EAdyB,OAeKx3B,oBAAS,GAfd,mBAe9ByR,EAf8B,KAefgmB,EAfe,KAsDrC,OArCAn2B,qBAAU,WACRlM,EAAMtB,MACHuZ,KAAK,sBACL5Y,MAAK,SAACsa,GAAD,OAAUc,EAAc,CAAE1V,KAAM,QAAS8G,QAAS8N,SACzD,IAEHzN,qBAAU,YACW,IAAflM,EAAMmO,KAAevC,EAAkB,CAAE7G,KAAM,SAC9C6G,EAAkB,CAAE7G,KAAM,YAC9B,CAAC/E,EAAMmO,OAEVjC,qBAAU,WAKR,IAAMo2B,EAAarhC,EAAIoD,MAAMD,GAM7Bg+B,EAAOE,GACPtiC,EAAMoiC,OAAOE,GACbtiC,EAAMuiC,SAASxuB,GAAI0C,wBAAwBrS,IAC3CpE,EAAMwiC,SAASp+B,GAEf,IAAMq+B,EAAuB1uB,GAAIqC,iBAAiBksB,GAC5CI,EAAoB,eAAQt+B,EAAR,CAAemD,YAAQ7H,IACjD2iC,EAAiBI,GACjBzjB,aAAa3M,QAAb,UACKrS,EAAMkf,IADX,SAEEJ,KAAK4I,UAAUgb,IAEjB1jB,aAAa3M,QAAb,UAAwBrS,EAAMkf,IAA9B,OAAwCujB,KACvC,CAAC1uB,GAAI0C,wBAAwBrS,KAG9B,kBAAC,IAAMmK,SAAP,KACE,kBAAC,GAAD,CACE2Q,IAAKlf,EAAMkf,IACXM,OAAQxf,EAAMwf,OACdzO,UAAWA,EACXhN,IAAKA,EACLK,MAAOA,EACPmkB,WAAYA,EACZjY,kBAAmBA,EACnB1E,kBAAmBA,EACnBggB,MAAO5rB,EAAM4rB,MACbltB,MAAOsB,EAAMtB,QAGf,kBAAC+f,GAAD,CACES,IAAKlf,EAAMkf,IACXnb,IAAKA,EACLK,MAAOA,EACP+J,KAAMnO,EAAMmO,KACZC,QAASpO,EAAMoO,QACfoR,OAAQxf,EAAMwf,OACdD,UAAWvf,EAAMuf,UACjBvU,gBAAiBhL,EAAMgL,gBACvBqR,cAAeA,EACftL,UAAWA,EACXnF,kBAAmBA,EACnB6M,UAAWA,EACXnI,kBAAmBA,EACnBmK,cAAeA,EACfxO,cAAeA,EACfvN,MAAOsB,EAAMtB,QAEf,kBAACsjB,GAAD,CACE7T,KAAM4C,EAAUgxB,KAAK5zB,KACrBvC,kBAAmBA,EACnB3J,KAAM0gC,GAAqB5+B,EAAKgN,EAAUgxB,MAC1CrjC,MAAOsB,EAAMtB,SAMrB,SAASikC,GAAqB5+B,EAAKg+B,GACjC,GAAKA,EAAKj2B,YACV,OAAQi2B,EAAKj2B,aACX,IAAK,OACH,OAAO/H,EAAIR,KACb,IAAK,YACL,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,WACH,OAAOQ,EAAIuU,GAAiBypB,EAAKj2B,cAAci2B,EAAKvZ,YACtD,QACE,QAGC,SAASlQ,GAAiB3M,GAC/B,OAAQA,GACN,IAAK,OACH,MAAO,OACT,IAAK,YACH,MAAO,YACT,IAAK,YACH,MAAO,YACT,IAAK,WACH,MAAO,WACT,IAAK,WACH,MAAO,WACT,IAAK,WACH,MAAO,WACT,IAAK,aACH,MAAO,aACT,QACE,Q,cCxQOi3B,GAAY,SAAC5iC,GAAD,OACvB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,wnBACFO,KAAMT,EAAMK,OAAS,cAIdwiC,GAAa,SAAC7iC,GAAD,OACxB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,6NACFO,KAAMT,EAAMK,OAAS,cAIdyiC,GAAgB,SAAC9iC,GAAD,OAC3B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,wMACFO,KAAK,OACLN,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,QACHC,GAAG,QACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,SACHC,GAAG,QACHC,GAAG,QACHC,GAAG,QACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,SACHC,GAAG,QACHC,GAAG,SACHC,GAAG,QACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cAIhB0iC,GAAU,SAAC/iC,GAAD,OACrB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,k7CACFO,KAAMT,EAAMK,OAAS,c,UC9CrBmJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ7D,OAAQ,GACR0H,SAAU,WACV3H,MAAO,QAETo5B,SAAU,CACRp5B,MAAO,OACPC,OAAQ,OACR0H,SAAU,WACVjE,IAAK,EACLkE,KAAM,GAERyxB,SAAU,CACRr5B,MAAO,OACPC,OAAQ,QAEVq5B,UAAW,CACTt5B,MAAO,OACPC,OAAQ,OACR0H,SAAU,WACV4xB,QAAS,OACTC,WAAY,SACZC,eAAgB,UAElBxjB,MAAO,CACL7V,SAAU,GACV3J,MAAO,WAETijC,YAAa,CACXt5B,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAK8I,eAIf,SAAS2vB,GAAoBvjC,GAC1C,IAAM0K,EAAUlB,KACVE,EAAQiB,cAER64B,EAAsBh4B,sBAC1Bie,cAAW,iBAAO,CAChB/b,KAAM,CACJ9D,MAAO,OACPC,OAAQ,OACRmB,gBAAmBhL,EAAMgL,gBACrBhL,EAAMgL,gBACNtB,EAAMmB,QAAQI,WAAWC,OAE/Bu4B,IAAK,CACHz4B,gBAAmBhL,EAAMK,MACrBL,EAAMK,MACNqJ,EAAMmB,QAAQI,WAAWC,UAXjCue,CAaIia,MACJ,CAAC1jC,EAAMgL,gBAAiBhL,EAAMK,MAAOqJ,IAGvC,OACE,kBAACof,GAAA,EAAD,CAAM9b,UAAWtC,EAAQgD,MACvB,kBAACob,GAAA,EAAD,CAAM9b,UAAWtC,EAAQs4B,UACvB,kBAACQ,EAAD,CACEx2B,UAAWtC,EAAQu4B,SACnBt3B,QAAQ,cACR5M,MAAOiB,EAAMjB,SAGjB,kBAAC+pB,GAAA,EAAD,CAAM9b,UAAWtC,EAAQw4B,WACtBljC,EAAM2jC,KACP,kBAAC7jB,GAAA,EAAD,eAAY9S,UAAWtC,EAAQmV,OAAW7f,EAAM4jC,iBAC7C5jC,EAAM6f,OAET,kBAACC,GAAA,EAAD,CACE9S,UAAWtC,EAAQ44B,YACnBr2B,MAAO,CAAE2V,YAAe5iB,EAAMsjC,YAAc,EAAI,IAE/CtjC,EAAMsjC,eCnFV,IAAMO,GAA0B9gB,IAAM+gB,YAAW,SAAC9jC,EAAOwO,GAAS,IAAD,gBAChE9E,EAAQiB,cAEd,OACE,kBAACme,GAAA,EAAD,CAAM3Z,WAAS,GACb,kBAAC2Z,GAAA,EAAD,CAAMib,SAAUv1B,EAAKtM,MAAI,EAAC6mB,GAAI,IAC5B,kBAAChW,EAAA,EAAD,CAAU9F,MAAO,CAAErD,MAAO,OAAQqR,QAAS,GAAK1K,SAAUvQ,EAAMuQ,QAC9D,kBAACgzB,GAAD,CACExkC,MAAO,EACP8gB,MAAOmkB,GAAShkC,GAChBsjC,YAAaW,GAAejkC,GAC5BgL,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1Cy4B,KAAM3jC,EAAM2jC,KACZC,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,cAOpC,kBAAC+d,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACwa,GAAD,CACExkC,MAAK,UAAEiB,EAAMqyB,kBAAR,aAAE,EAAkBK,GACzB7S,MAAK,oBAAK7f,EAAMqyB,kBAAX,aAAK,EAAkBK,GAAGjF,QAAQ,GAAlC,KACLziB,gBAAiBtB,EAAMmB,QAAQwB,SAAS63B,cACxC7jC,MAAOqJ,EAAMmB,QAAQwB,SAAS2b,QAGlC,kBAACc,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACwa,GAAD,CACExkC,MAAK,UAAEiB,EAAMqyB,kBAAR,aAAE,EAAkBM,GACzB9S,MAAK,oBAAK7f,EAAMqyB,kBAAX,aAAK,EAAkBM,GAAGlF,QAAQ,GAAlC,KACLziB,gBAAiBtB,EAAMmB,QAAQwB,SAAS83B,aACxC9jC,MAAOqJ,EAAMmB,QAAQwB,SAASC,OAGlC,kBAACwc,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACwa,GAAD,CACExkC,MAAK,UAAEiB,EAAMqyB,kBAAR,aAAE,EAAkBO,GACzB/S,MAAK,oBAAK7f,EAAMqyB,kBAAX,aAAK,EAAkBO,GAAGnF,QAAQ,GAAlC,KACLziB,gBAAiBtB,EAAMmB,QAAQwB,SAAS+3B,cACxC/jC,MAAOqJ,EAAMmB,QAAQwB,SAAS2D,QAGlC,kBAAC8Y,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACwa,GAAD,CACExkC,MAAK,UAAEiB,EAAMqyB,kBAAR,aAAE,EAAkBQ,GACzBhT,MAAK,oBAAK7f,EAAMqyB,kBAAX,aAAK,EAAkBQ,GAAGpF,QAAQ,GAAlC,KACLziB,gBAAiBtB,EAAMmB,QAAQwB,SAASg4B,aACxChkC,MAAOqJ,EAAMmB,QAAQwB,SAASyD,WAMxC,SAASm0B,GAAejkC,GAAQ,IAAD,IAiBHskC,EAAYjS,EAhBhCkS,GAgBoBD,EAhBWtkC,EAAMskC,WAgBLjS,EAhBiBryB,EAAMqyB,WAiBxDiS,GAAejS,EAGjB,KAAOiS,EAAW5R,GAAK4R,EAAW3R,GAAK2R,EAAW1R,GAAK0R,EAAWzR,KAClEyR,EAAW5R,IAAM,IAAML,EAAWK,IACjC4R,EAAW3R,IAAM,IAAMN,EAAWM,IAClC2R,EAAW1R,IAAM,IAAMP,EAAWO,IAClC0R,EAAWzR,IAAM,IAAMR,EAAWQ,KAPC,GAhBvC,OAAkB,IAAd0R,GAAoBA,EAEE,IAAtBvkC,EAAMwkC,YACF,GAAN,SAAW,UAAAxkC,EAAMqyB,kBAAN,eAAkBI,IAAK8R,GAAW9W,QAAQ,IACjD,GAAN,SAAW,UAAAztB,EAAMqyB,kBAAN,eAAkBI,IAAK8R,GAAW9W,QAAQ,GAArD,aACEztB,EAAMwkC,YAAcD,GACpB9W,QAAQ,GAFV,MAJ0C,GAQ5C,SAASuW,GAAShkC,GAAQ,IAAD,IACvB,OAAMA,EAAM6f,MAAc7f,EAAM6f,MACN,IAAtB7f,EAAMwkC,YAAyB,GAAN,QAAU,UAACxkC,EAAMqyB,kBAAP,aAAC,EAAkBI,IAAIhF,QAAQ,IAChE,GAAN,QAAU,UAACztB,EAAMqyB,kBAAP,aAAC,EAAkBI,IAAIhF,QAAQ,GAAzC,YAA+CztB,EAAMwkC,YAAY/W,QAC/D,GADF,MC/DF,IAAMgX,GAAkB,WAEtB,IAAMC,EAAQC,SAASC,cAAc,OACrCF,EAAMz3B,MAAM43B,WAAa,SACzBH,EAAMz3B,MAAMkQ,SAAW,SACvBunB,EAAMz3B,MAAM63B,gBAAkB,YAC9BH,SAASI,KAAKC,YAAYN,GAG1B,IAAMO,EAAQN,SAASC,cAAc,OACrCF,EAAMM,YAAYC,GAGlB,IAAMC,EAAkBR,EAAMS,YAAcF,EAAME,YAKlD,OAFAT,EAAMU,WAAWC,YAAYX,GAEtBQ,EAlBe,GAqBlB17B,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,QAETyf,YAAa,CACXzf,MAAO,IACPuT,SAAU,UAEZmM,YAAa,CACX1f,MAAO,IAAM66B,GACblb,UAAW,IACXzL,UAAW,OACXD,UAAW,SACXG,aAAcymB,IAEhBzpB,SAAU,CACRC,QAAS,OAIb,SAASqqB,GAAetlC,GACtB,IAAM0K,EAAUlB,KAEhB,OACE,kBAACsa,GAAA,EAAD,CAAM9W,UAAWtC,EAAQ66B,KAAMC,UAAU,OACtCC,GAAW7jC,KAAI,SAAC0iC,GACf,OACE,kBAACvxB,EAAA,EAAD,CACEjU,IAAKwlC,EAAWxnB,KAChB9P,UAAWtC,EAAQsQ,SACnBzK,QAAM,EACNrD,QAAS,WACPlN,EAAM0lC,cAAN,eAAyBpB,MAG3B,kBAACT,GAAD,CACEhkB,MAAOykB,EAAWxnB,KAClBuV,WAAYiS,SASX,SAASqB,GAAwB3lC,GAC9C,IAAM0J,EAAQiB,cACRD,EAAUlB,KAEVmF,EAAWL,iBAAO,MAJ6B,EAMD1D,oBAAS,GANR,mBAM9Cg7B,EAN8C,KAM1BC,EAN0B,KAQrD,OACE,kBAACxb,GAAA,EAAD,CACEC,YAAa,WACXub,GAAsB,KAIxB,yBAAK74B,UAAWtC,EAAQgD,MACtB,yBACEc,IAAKG,EACLzB,QAAS,WACP24B,GAAuBD,KAGzB,kBAAC/B,GAAD,CACEhkB,MAAO7f,EAAMskC,WAAWxnB,MAAQ,OAChC6mB,KACE,yBAAK12B,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAASxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,WAGvCsnB,WAAYryB,EAAMskC,WAClB/zB,QAAM,KAGV,kBAACoa,GAAA,EAAD,CACExc,KAAMy3B,EACNj3B,SAAUA,EAASC,QACnBwB,UAAU,UAEV,kBAACwa,GAAA,EAAD,CAAO5d,UAAWtC,EAAQ2e,YAAapa,UAAW,GAChD,yBAAKjC,UAAWtC,EAAQ4e,aACtB,kBAACgc,GAAD,CAAgBI,cAAe1lC,EAAM0lC,qBASnD,IAAMD,GAAa,CACjB,CAAE3oB,KAAM,OAAQ4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,IAC5C,CAAE/V,KAAM,QAAS4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC5C,CAAE/V,KAAM,WAAY4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,IAChD,CAAE/V,KAAM,UAAW4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,IAC/C,CAAE/V,KAAM,WAAY4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,IAChD,CAAE/V,KAAM,eAAgB4V,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAAIC,GAAI,IAClD,CAAE/V,KAAM,gBAAiB4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GACpD,CAAE/V,KAAM,SAAU4V,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAAIC,GAAI,IAC5C,CAAE/V,KAAM,MAAO4V,GAAI,EAAGC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC1C,CAAE/V,KAAM,WAAY4V,GAAI,EAAGC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC/C,CAAE/V,KAAM,cAAe4V,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAAIC,GAAI,GAClD,CAAE/V,KAAM,iBAAkB4V,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAAIC,GAAI,GACrD,CAAE/V,KAAM,SAAU4V,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC7C,CAAE/V,KAAM,QAAS4V,GAAI,EAAGC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAC5C,CAAE/V,KAAM,mBAAoB4V,GAAI,IAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACvD,CAAE/V,KAAM,UAAW4V,GAAI,EAAGC,GAAI,IAAKC,GAAI,EAAGC,GAAI,GAC9C,CAAE/V,KAAM,UAAW4V,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAAKC,GAAI,GAC9C,CAAE/V,KAAM,YAAa4V,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,MCvIjC,SAASiT,GAAW9lC,GACjC,IAAM0J,EAAQiB,cAD0B,EAGJC,mBAAS,CAC3C8nB,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,KAPkC,mBAGjCyR,EAHiC,KAGrBoB,EAHqB,KAUxC,OACE,kBAAC,IAAMn3B,SAAP,KACE,kBAACua,GAAA,EAAD,CAAM3Z,WAAS,GACb,kBAAC00B,GAAD,CACEl4B,QAAQ,SACRg4B,KACE,yBAAK12B,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAYxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,WAG1CsnB,WAAYryB,EAAM+lC,KAAKhW,QAAQsC,WAAWS,OAC1C0R,YAAaxkC,EAAM+lC,KAAKhW,QAAQwC,OAAOS,YACvCsR,WAAYA,IAEd,kBAACT,GAAD,CACEl4B,QAAQ,QACRg4B,KACE,yBAAK12B,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAWxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,WAGzCsnB,WAAYryB,EAAM+lC,KAAKhW,QAAQsC,WAAWG,MAC1CgS,YAAaxkC,EAAM+lC,KAAKhW,QAAQwC,OAAOU,WACvCqR,WAAYA,IAEd,kBAACT,GAAD,CACEl4B,QAAQ,YACRg4B,KACE,6BACE,kBAAC,GAAD,CAAetjC,MAAOqJ,EAAMmB,QAAQC,KAAKC,WAG7CsnB,WAAYryB,EAAM+lC,KAAKhW,QAAQsC,WAAWU,UAC1CyR,YAAaxkC,EAAM+lC,KAAKhW,QAAQwC,OAAOW,eACvCoR,WAAYA,IAEd,kBAACqB,GAAD,CACErB,WAAYA,EACZoB,cAAeA,MCzDlB,IAAMM,GAAa,SAAChmC,GAAD,OACxB,kBAACC,EAAA,EAAD,KACE,0BACEU,GAAG,QACHC,GAAG,SACHC,GAAG,SACHC,GAAG,QACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,UACvB4lC,cAAc,UAEhB,0BACE/lC,EAAE,4jBACFO,KAAMT,EAAMK,OAAS,cAId6lC,GAAe,SAAClmC,GAAD,OAC1B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,sPACFO,KAAMT,EAAMK,OAAS,cAId8lC,GAAkB,SAACnmC,GAAD,OAC7B,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,mLACFO,KAAK,OACLN,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEH,EAAE,qcACFO,KAAMT,EAAMK,OAAS,cAId+lC,GAAe,SAACpmC,GAC3B,OACE,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,4JACFO,KAAK,OACLN,YAAY,IACZ8lC,cAAc,SACd7lC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,QACHC,GAAG,QACHC,GAAG,QACHC,GAAG,QACHX,YAAY,IACZ8lC,cAAc,SACd7lC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,SACHC,GAAG,QACHC,GAAG,SACHC,GAAG,QACHX,YAAY,IACZ8lC,cAAc,SACd7lC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,QACHC,GAAG,SACHC,GAAG,QACHC,GAAG,SACHmlC,cAAc,SACd9lC,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,SACHC,GAAG,SACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZ8lC,cAAc,SACd7lC,OAAQJ,EAAMK,OAAS,cAKlBgmC,GAAqB,SAACrmC,GACjC,OACE,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,gIACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEM,GAAG,QACHC,GAAG,QACHC,GAAG,QACHC,GAAG,QACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,QACHC,GAAG,SACHC,GAAG,QACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,YAEzB,0BACEM,GAAG,SACHC,GAAG,SACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,OAAS,cC3GzBmJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJuN,QAAS,EACT8G,aAAc,EACdnY,MAAO,OACPgZ,YAAa,IAEf0jB,eAAgB,CACdt8B,SAAU,GACVC,WAAY,SAIVs8B,GAAqB,SAACvmC,GAC1B,IAAM0K,EAAUlB,KAEhB,OACE,kBAACsf,GAAA,EAAD,CAAM7b,MAAO,CAAEu5B,UAAW,IAAKnpB,SAAU,MACvC,kBAACuC,GAAA,EAAD,CACEC,MACE,kBAACC,GAAA,EAAD,CAAY9S,UAAWtC,EAAQ47B,eAAgB3yB,QAAM,GAClD3T,EAAMmN,UAGXpO,MAAOiB,EAAMjB,OAAS,EACtBohB,WAAY,CACVC,UAAU,EACVC,kBAAkB,GAEpBmK,WAAY,CACVvd,MAAO,CACLgO,QAAS,kBACTjR,SAAU,GACVC,WAAY,UAQT,SAASw8B,GAA+BzmC,GAAQ,IAAD,cACtD0K,EAAUlB,KAD4C,EAGpCoB,mBAAS6V,GAAKqV,YAAY1F,eAHU,mBAGrD/C,EAHqD,KAG/CqZ,EAH+C,KAS5D,OAJAx6B,qBAAU,WACRw6B,EAAQ1mC,EAAM+lC,KAAK3V,iBAClB,CAACpwB,EAAM+lC,KAAK3V,gBAGb,kBAACrd,EAAA,EAAD,CAAU/F,UAAWtC,EAAQgD,KAAM5O,IAAI,WACrC,kBAACgqB,GAAA,EAAD,CAAM6d,QAAQ,SAASx3B,WAAS,GAC9B,kBAAC,GAAD,CACEpQ,MAAOsuB,EAAKoH,OAAOE,qBADrB,qBAGA,kBAAC,GAAD,CACE51B,MAAOsuB,EAAKoH,OAAOG,uBADrB,2BAGA,kBAAC,GAAD,CACE71B,MAAOsuB,EAAKoH,OAAOC,gBADrB,wBAIA,kBAAC,GAAD,CACE31B,MAAK,UAAEsuB,EAAKoH,OAAOI,SAASC,mBAAvB,aAAE,EAAkCrH,QAAQ,IADnD,uBAKA,kBAAC,GAAD,CACE1uB,MAAK,UAAEsuB,EAAKoH,OAAOI,SAASE,qBAAvB,aAAE,EAAoCtH,QAAQ,IADrD,yBAKA,kBAAC,GAAD,CACE1uB,MAAK,UAAEsuB,EAAKoH,OAAOI,SAASG,aAAvB,aAAE,EAA4BvH,QAAQ,IAD7C,iBAGA,kBAAC,GAAD,CACE1uB,MAAK,UAAEsuB,EAAKoH,OAAOI,SAASI,aAAvB,aAAE,EAA4BxH,QAAQ,IAD7C,iBAIA,kBAAC,GAAD,CACE1uB,MAAK,UAAEsuB,EAAKU,WAAW6Y,gCAAlB,aAAE,EAA0CnZ,QAAQ,IAD3D,wBAGA,kBAAC,GAAD,CACE1uB,MAAK,UAAEsuB,EAAKU,WAAWmH,wBAAlB,aAAE,EAAkCzH,QAAQ,IADnD,wBAGA,kBAAC,GAAD,CACE1uB,MAAOsuB,EAAKU,WAAWoH,qBADzB,2BAGA,kBAAC,GAAD,CACEp2B,MAAK,UAAEsuB,EAAKA,KAAKD,uBAAZ,aAAE,EAA2BK,QAAQ,IAD5C,wBAGA,kBAAC3E,GAAA,EAAD,CAAM7b,MAAO,CAAEu5B,UAAW,KAAOtkC,MAAI,MClF7C,IAAM2kC,GAAkB,SAAC7mC,GACvB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb8jB,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,oBAAoBC,UAAU,OAAOC,OAAK,GACvD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAYxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAI5C64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAM9B+7B,GAAoB,SAAC9mC,GACzB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb8jB,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,sBAAsBC,UAAU,OAAOC,OAAK,GACzD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAcxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAI9C64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAM9Bg8B,GAAc,SAAC/mC,GACnB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb8jB,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,cAAcC,UAAU,OAAOC,OAAK,GACjD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAiBxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAIjD64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAM9Bi8B,GAAiB,SAAChnC,GACtB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAOiB,EAAMjB,MACb8gB,MAAO7f,EAAM6f,MACb8jB,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,kBAAkBC,UAAU,OAAOC,OAAK,GACrD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CACExJ,MACEL,EAAMinC,QACFv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,YAMjC64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOL,EAAMinC,QACTv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,aAM3Bm8B,GAAW,SAAClnC,GAChB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAOiB,EAAMjB,MACb8gB,MAAO7f,EAAM6f,MACb8jB,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,YAAYC,UAAU,OAAOC,OAAK,GAC/C,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CACExJ,MACEL,EAAMinC,QACFv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,YAMjC64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOL,EAAMinC,QACTv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,aAO3BvB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,OACPqR,QAAS,EACTsH,OAAQ,GAEV4kB,UAAW,CACTv9B,MAAO,OACPqR,QAAS,mBAEXuE,OAAQ,CACNgD,UAAW,eACX1Y,MAAO,MACPI,WAAYR,EAAMS,YAAYC,OAAO,YAAa,CAChDG,SAAUb,EAAMS,YAAYI,SAASkY,YAGzCC,WAAY,CACV5Y,MAAO,MACP0Y,UAAW,kBAEbG,OAAQ,CACN1H,QAAS,EACTsH,OAAQ,EACRvX,gBAAiBtB,EAAMmB,QAAQkD,OAAOC,WAI3B,SAASo5B,GAAWpnC,GACjC,IAAM0K,EAAUlB,KADwB,EAGhBoB,oBAAS,GAHO,mBAGjCuD,EAHiC,KAG3BC,EAH2B,OAIhBxD,mBAAS6V,GAAKqV,YAAY3F,SAASiD,MAJnB,mBAIjCA,EAJiC,KAI3BiU,EAJ2B,OAKRz8B,mBAAS6V,GAAKqV,YAAY3F,SAASrtB,UAL3B,mBAKjCA,EALiC,KAKvBwkC,EALuB,KAOxCp7B,qBAAU,WACRm7B,EAAQrnC,EAAM+lC,KAAK5V,SAASiD,MAC5BkU,EAAYtnC,EAAM+lC,KAAK5V,SAASrtB,YAC/B,CAAC9C,EAAM+lC,OAEV,IAAM5iB,EAAc3X,uBAAY,WAC9B4C,GAASD,KACR,CAACA,IAEJ,OACE,kBAAC,IAAMI,SAAP,KACE,kBAACuV,GAAA,EAAD,CAAM9W,UAAWtC,EAAQgD,MACvB,kBAACqF,EAAA,EAAD,CAAU/F,UAAWtC,EAAQy8B,UAAWn0B,OAAK,EAAC9F,QAASiW,GACrD,kBAAC2F,GAAA,EAAD,CAAM3Z,WAAS,EAACjN,MAAI,EAACqlC,aAAa,UAChC,kBAACze,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,EAAGye,GAAI,GACpB,kBAAC,GAAD,CAAiB3nB,MAAK,UAAKuT,EAAKO,OAAV,YAAoB7wB,EAAS6wB,WAErD,kBAAC7K,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,EAAGye,GAAI,GACpB,kBAAC,GAAD,CACE3nB,MAAK,UAAKuT,EAAKQ,SAAV,YAAsB9wB,EAAS8wB,aAIxC,kBAAC9K,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,EAAGye,GAAI,GACpB,kBAAC,GAAD,CACE3nB,MAAK,UAAKuT,EAAKS,YAAV,YAAyB/wB,EAAS+wB,gBAI3C,kBAAC/K,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,EAAGye,GAAI,GACpB,kBAAC,GAAD,CACEzoC,MAAOq0B,EAAKW,SAAWjxB,EAASixB,SAChClU,MAAK,UAAKuT,EAAKW,SAAV,YAAsBjxB,EAASixB,SAA/B,MACLkT,QAAS7T,EAAKW,SAAWjxB,EAASixB,YAGtC,kBAACjL,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,EAAGye,GAAI,GACpB,kBAAC,GAAD,CACEzoC,MAAOq0B,EAAKU,eAAiBhxB,EAASgxB,eACtCjU,MAAK,UAAKuT,EAAKU,eAAV,YAA4BhxB,EAASgxB,eAArC,UACLmT,QAAS7T,EAAKU,eAAiBhxB,EAASgxB,oBAKhD,kBAAC3P,GAAA,EAAD,CAAUC,GAAIjW,EAAMkW,QAAQ,QAC1B,kBAACoiB,GAAD,CAAgCV,KAAM/lC,EAAM+lC,UC9O/C,IAAM0B,GAAY,SAACznC,GAAD,OACvB,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,wvDACFO,KAAMT,EAAMK,OAAS,cAIdqnC,GAAiB,SAAC1nC,GAC7B,OACE,kBAACC,EAAA,EAAD,KACE,0BACEU,GAAG,QACHC,GAAG,QACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,QAEhB,0BACEM,GAAG,SACHC,GAAG,QACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,QAEhB,0BACEM,GAAG,SACHC,GAAG,SACHC,GAAG,QACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,QAEhB,0BACEM,GAAG,SACHC,GAAG,SACHC,GAAG,SACHC,GAAG,SACHX,YAAY,IACZC,OAAQJ,EAAMK,QAEhB,0BACEH,EAAE,+DACFO,KAAK,uBC3CP+I,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCi+B,WAAY,CACVp2B,SAAU,WACVC,KAAM,GAER9D,KAAM,CACJ9D,MAAO,OACPqR,QAAS,GAEX3J,QAAS,CACP2J,QAAS,EACTrR,MAAO,OACPC,OAAQ,GACR0H,SAAU,YAEZsO,MAAO,CACLtO,SAAU,WACVjE,IAAK,EACLkE,KAAM,EACNxH,SAAU,GACV3J,MAAO,UACP4J,WAAY,KAEd29B,kBAAmB,CACjB59B,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,SAE5B88B,UAAW,CACT79B,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAIxB+8B,GAAS,SAAC9nC,GACd,IAAM0K,EAAUlB,KAChB,OACE,yBACEwD,UAAWtC,EAAQi9B,WACnB16B,MAAO,CACLrD,MAAM,GAAD,OAAK5J,EAAM+nC,OAAS,EAApB,KACLl+B,OAAsB,GAAd7J,EAAMyG,MAAa,GAC3BuhC,YAAY,aAAD,OAAehoC,EAAMK,SAGlC,yBAAK4M,MAAO,CAAEjC,gBAAiBhL,EAAMK,MAAOwJ,OAAQ,MACpD,yBAAKoD,MAAO,CAAEpD,OAAsB,GAAd7J,EAAMyG,SAE3BzG,EAAMmN,WAKP86B,GAAkB,SAACjoC,GACvB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAAC,GAAD,CACEo9B,MAAO/nC,EAAM+nC,MAAMG,kBACnBzhC,MAAO,EACPpG,MAAOqJ,EAAMmB,QAAQwB,SAASuD,OAE9B,kBAACkQ,GAAA,EAAD,CAAY9S,UAAWtC,EAAQm9B,UAAWlmB,MAAM,SAAhD,WACO3hB,EAAM+nC,MAAMra,aAAe,KAAMD,QAAQ,GADhD,SAMA0a,GAAkB,SAACnoC,GACvB,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE3K,EAAM+nC,MAAM/Y,aAAe,GACzB,kBAAC,GAAD,CACE+Y,MAAO/nC,EAAM+nC,MAAMK,kBACnB3hC,MAAO,EACPpG,MAAOqJ,EAAMmB,QAAQwB,SAASyD,KAE9B,kBAACgQ,GAAA,EAAD,CAAY9S,UAAWtC,EAAQm9B,UAAWlmB,MAAM,SAAhD,YAGS3hB,EAAM+nC,MAAMra,aAAe1tB,EAAM+nC,MAAM/Y,cAAgB,KAAMvB,QAAQ,GAH9E,SAWO,SAAS4a,GAAoBroC,GAC1C,IAAM0K,EAAUlB,KACVE,EAAQiB,cAFmC,EAIrBC,mBAAS,IAJY,mBAI1C09B,EAJ0C,KAIlCC,EAJkC,KAUjD,OAJAr8B,qBAAU,WACRq8B,EAyBJ,SAAmB/X,GACjB,IAAMgY,EAAWhY,EAAoBhvB,QAAO,SAACC,EAAKwrB,GAChD,IAAMwb,EAAWxb,EAAMS,aAAeT,EAAM+B,aAC5C,OAAIyZ,EAAWhnC,EAAYgnC,EACfhnC,IACX,GAEH,OAAO+uB,EAAoB5uB,KAAI,SAACqrB,GAC9B,OAAO,eACFA,EADL,CAEEib,kBAAoBjb,EAAMS,aAAe8a,EAAY,IACrDJ,mBACInb,EAAM+B,aAAe/B,EAAMS,cAAgB8a,EAAY,SArCnDE,CAAU1oC,EAAM+lC,KAAKjW,OAAOU,wBACrC,CAACxwB,EAAM+lC,KAAKjW,OAAOU,sBAEf8X,EAAO1mC,KAAI,SAACmmC,GACjB,OACE,kBAACh1B,EAAA,EAAD,CACE/F,UAAWtC,EAAQgD,KACnB5O,IAAG,UAAKipC,EAAMG,kBAAX,YAAgCH,EAAMK,oBAEzC,yBAAKp7B,UAAWtC,EAAQ4G,SACtB,kBAAC,GAAD,CACEy2B,MAAO,IACPthC,MAAO,EACPpG,MAAOqJ,EAAMmB,QAAQwB,SAAS+3B,gBAEhC,kBAAC,GAAD,CAAiB2D,MAAOA,IACxB,kBAAC,GAAD,CAAiBA,MAAOA,IACxB,kBAACjoB,GAAA,EAAD,CAAY9S,UAAWtC,EAAQmV,OAA/B,UACMkoB,EAAMjmC,MAAM,GAAGI,KAAK0F,SAD1B,cACwCmgC,EAAMjmC,MAAM,GAAGK,OAAOyF,gBC3GxE,IAAM+gC,GAAY,SAAC3oC,GACjB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb7U,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1Cy4B,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,aAAaC,UAAU,OAAOC,OAAK,GAChD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAYxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAI5C64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAM9B69B,GAAc,SAAC5oC,GACnB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb7U,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1Cy4B,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,eAAeC,UAAU,OAAOC,OAAK,GAClD,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CAAWxJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAI3C64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,aAM9B89B,GAAW,SAAC7oC,GAChB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAO,EACP8gB,MAAO7f,EAAM6f,MACb7U,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1Cy4B,KACE,kBAACzzB,EAAA,EAAD,CAASC,MAAM,YAAYC,UAAU,OAAOC,OAAK,GAC/C,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CACExJ,MACEL,EAAMinC,QACFv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,YAMjC64B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOL,EAAMinC,QACTv9B,EAAMmB,QAAQwB,SAASC,IACvB5C,EAAMmB,QAAQC,KAAKC,aAO3BvB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,OACPqR,QAAS,EACTsH,OAAQ,GAEV4kB,UAAW,CACTt9B,OAAQ,GACRD,MAAO,OACPqR,QAAS,mBAGX0H,OAAQ,CACN1H,QAAS,EACTsH,OAAQ,OAIG,SAASumB,GAAO9oC,GAC7B,IAAM0K,EAAUlB,KADoB,GAEtBmB,cAEUC,oBAAS,IAJG,mBAI7BuD,EAJ6B,KAIvBC,EAJuB,KAM9B+U,EAAc3X,uBAAY,WAC9B4C,GAASD,KACR,CAACA,IAEJ,OACE,kBAAC2a,GAAA,EAAD,CAAM3Z,WAAS,GACb,kBAAC2U,GAAA,EAAD,CAAM9W,UAAWtC,EAAQgD,MACvB,kBAACqF,EAAA,EAAD,CAAU/F,UAAWtC,EAAQy8B,UAAWn0B,OAAK,EAAC9F,QAASiW,GACrD,kBAAC2F,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,IACf,kBAACD,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAD,CACElJ,MAAK,UAAK7f,EAAM+lC,KAAKjW,OAAOO,qBAAqBC,UAAU7C,QACzD,OAIN,kBAAC3E,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAD,CACElJ,MAAK,UAAK7f,EAAM+lC,KAAKjW,OAAOO,qBAAqBE,MAAM9C,QACrD,OAIN,kBAAC3E,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAAC,GAAD,CACElJ,MAAK,UAAK7f,EAAM+lC,KAAKjW,OAAOW,YAAYtB,IAAI1B,QAAQ,IACpDwZ,QACEjnC,EAAM+lC,KAAK5V,SAASiD,KAAKY,YACzBh0B,EAAM+lC,KAAK5V,SAASrtB,SAASkxB,eAInC,kBAAClL,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,KAEjB,kBAAC5E,GAAA,EAAD,CAAUC,GAAIjW,EAAMkW,QAAQ,QAC1B,kBAACgkB,GAAD,CAAqBtC,KAAM/lC,EAAM+lC,U,wBCzJrCgD,GAAM,SAAC/oC,GACX,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAOiqC,GAAWhpC,EAAMozB,KAAMpzB,EAAMqzB,QACpCxT,MAAK,UAAKopB,GAAOjpC,EAAMozB,MAAlB,YAA2B6V,GAAOjpC,EAAMqzB,QAAxC,MACLroB,gBAAiBtB,EAAMmB,QAAQwB,SAAS63B,cACxC7jC,MAAOqJ,EAAMmB,QAAQwB,SAAS2b,KAC9B2b,KACEqF,GAAWhpC,EAAMozB,KAAMpzB,EAAMqzB,SAAW,KACtC,kBAAC,KAAD,CAAUpmB,MAAO,CAAE5M,MAAO,WAAa2J,SAAS,aAMpDk/B,GAAY,SAAClpC,GACjB,IAAM0J,EAAQiB,cAEd,OACE,kBAAC44B,GAAD,CACExkC,MAAOiqC,GAAWhpC,EAAMozB,KAAMpzB,EAAMqzB,QACpCxT,MAAK,UAAKopB,GAAOjpC,EAAMozB,MAAlB,YAA2B6V,GAAOjpC,EAAMqzB,QAAxC,MACLroB,gBAAiBtB,EAAMmB,QAAQwB,SAAS83B,aACxC9jC,MAAOqJ,EAAMmB,QAAQwB,SAASC,IAC9Bq3B,KACEqF,GAAWhpC,EAAMozB,KAAMpzB,EAAMqzB,SAAW,KACtC,kBAAC,KAAD,CAAUpmB,MAAO,CAAE5M,MAAO,WAAa2J,SAAS,aAO3C,SAASm/B,GAAYnpC,GAClC,OACE,kBAAC,IAAMuO,SAAP,KACE,kBAACua,GAAA,EAAD,CAAM3Z,WAAS,GACb,kBAAC2Z,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,IACb,kBAAC,GAAD,CACEqK,KAAMpzB,EAAM+lC,KAAK7V,YAAYoD,IAAIF,KACjCC,OAAQrzB,EAAM+lC,KAAK7V,YAAYoD,IAAID,SAErC,kBAAC,GAAD,CACED,KAAMpzB,EAAM+lC,KAAK7V,YAAYiD,GAAGC,KAChCC,OAAQrzB,EAAM+lC,KAAK7V,YAAYiD,GAAGE,YAQ9C,SAAS2V,GAAW5V,EAAMC,GACxB,IAAKD,IAASC,EAAQ,OAAO,EAC7B,GAAID,EAAKjyB,cAAgBgL,QAAUknB,EAAOlyB,cAAgBgL,OAAQ,OAAO,EAEzE,IAAMi9B,EAAUj9B,OAAQinB,EAAOC,EAAU,KACzC,OAAI+V,GAAW,IAAY,IACfA,EAEd,SAASH,GAAOtvB,GACd,OAAKA,GAAQA,EAAKxY,cAAgBgL,OACtBwN,EADqC,ECjE5C,IAAM0vB,GAAsB,SAACrpC,GAAD,OACjC,kBAACC,EAAA,EAAD,KACE,0BACEC,EAAE,yGACFO,KAAMT,EAAMK,OAAS,YAEvB,0BACEH,EAAE,gIACFO,KAAMT,EAAMK,OAAS,UACrBF,YAAY,MACZC,OAAQJ,EAAMgL,iBAAmB,cCRjCxB,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC4/B,QAAS,CACPjsB,SAAU,QAIC,SAASksB,GAAUvpC,GAChC,IAAM0K,EAAUlB,KACVE,EAAQiB,cAEd,OACE,kBAAC,IAAM4D,SAAP,KACE,kBAACg1B,GAAD,CACExkC,MAAO,EACP8gB,MAAK,WACH7f,EAAM+lC,KAAKlW,UAAU0B,kBACrBvxB,EAAM+lC,KAAKlW,UAAU2B,kBACrBxxB,EAAM+lC,KAAKlW,UAAU4B,mBACrBhE,QAAQ,GAJL,QAKLziB,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1Cy4B,KACE,kBAACzzB,EAAA,EAAD,CACExF,QAAS,CAAE4+B,QAAS5+B,EAAQ4+B,SAE5Bn5B,MAAK,mBAAcnQ,EAAM+lC,KAAKlW,UAAU0B,kBAAkB9D,QAAQ,GAA7D,kCACKztB,EAAM+lC,KAAKlW,UAAU2B,kBAAkB/D,QAAQ,GADpD,kCAEKztB,EAAM+lC,KAAKlW,UAAU4B,kBAAkBhE,QAAQ,IACzDrd,UAAU,OACVC,OAAK,GAEL,yBAAKpD,MAAO,CAAEpD,OAAQ,KACpB,kBAAC,GAAD,CACExJ,MAAOqJ,EAAMmB,QAAQC,KAAKC,QAC1BC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,UAKlD04B,gBAAiB,CACf32B,MAAO,CACLjD,SAAU,GACVC,WAAY,IACZ5J,MAAOqJ,EAAMmB,QAAQC,KAAKC,YAIhC,kBAACw4B,GAAD,CACExkC,MAAOiB,EAAM+lC,KAAKlW,UAAUG,YAC5BnQ,MAAK,UAAK7f,EAAM+lC,KAAKlW,UAAUG,YAA1B,KACLhlB,gBAAiBtB,EAAMmB,QAAQwB,SAASg4B,aACxChkC,MAAOqJ,EAAMmB,QAAQwB,SAASyD,OC9CvB,SAAS05B,GAAaxpC,GAMnC,OALAkM,qBAAU,WACR,IAAM65B,EAAOtlB,GAAKslB,KAAK/lC,EAAM+D,KAC7B/D,EAAMypC,QAAQ1D,KACb,CAAC/lC,EAAM4rB,QAGR,kBAAC,IAAMrd,SAAP,KACE,kBAAC,GAAcvO,GACf,kBAAC8oC,GAAW9oC,GACZ,kBAACupC,GAAcvpC,GACf,kBAAC8lC,GAAe9lC,GAChB,kBAACmpC,GAAgBnpC,ICNvB,IAAMwJ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCggC,WAAY,CACV1/B,SAAU,GACVC,WAAY,IACZwX,eAAgB,IAChBC,WAAY,EACZ9X,MAAO,YAIL+/B,GAAa,SAAC3pC,GAAW,IAAD,UAiHLmO,EAAMvG,EAhHvB8C,EAAUlB,KACFmB,cAEd,OACE,kBAACkD,EAAA,EAAD,CACEZ,MAAO,CACLpD,OAAQ,GACR8D,aAAc,EACd3C,gBAAiBhL,EAAMgL,gBACvB+W,aAAc,IAEhBM,WAAS,EACTnV,QAAS,WACPlN,EAAMoO,SAASpO,EAAMmO,QAGvB,kBAAC2a,GAAA,EAAD,CAAM3Z,WAAS,EAACjN,MAAI,EAAC6mB,GAAI,EAAG4d,QAAQ,UAClC,kBAAC55B,EAAA,EAAD,CACEE,MAAO,CACLgO,QAAS,EACTrR,MAAO,GACPC,OAAQ,GACRmB,gBAAiBhL,EAAMK,SAGvB,UAACL,EAAM+D,WAAP,iBAAC,EAAWR,YAAZ,aAAC,EAAiBkE,QAClB,yBACE2L,UAAU,QACVnG,MAAO,CAAErD,MAAO,GAAIC,OAAQ,IAC5BwJ,IAAG,qDAAsCrT,EAAM+D,WAA5C,iBAAsC,EAAWR,YAAjD,aAAsC,EAAiBkE,OAAvD,oBAGL,KAIN,kBAACqhB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,IACb,kBAACjJ,GAAA,EAAD,CACE9S,UAAWtC,EAAQg/B,WACnBz8B,MAAO,CACL5M,MAAOL,EAAMK,OAEfshB,MAAM,WAsESxT,EApEEnO,EAAMmO,MAoEFvG,EApEL,UAAa5H,EAAM+D,IAAIR,YAAvB,aAAa,EAAgBqE,UAyEzCuG,EAAI,YAAQvG,EAAR,MAAuBA,EAH9BuG,EACH,kCACA,mCAjEO,SAASy7B,GAAQ5pC,GAAQ,IAAD,EACf4K,oBAAS,GADM,mBAC9B7G,EAD8B,KACzBq+B,EADyB,OAEXx3B,oBAAS,GAFE,mBAE9BghB,EAF8B,KAEvB2W,EAFuB,OAIb33B,oBAAS,GAJI,mBAI9BuD,EAJ8B,KAIxBC,EAJwB,OAKTxD,qBAAS3M,OAAOmtB,WAAa,MALpB,mBAK9B5L,EAL8B,KAKtBD,EALsB,OAOb3U,mBAAS6V,GAAKqV,aAPD,mBAO9BiQ,EAP8B,KAOxB0D,EAPwB,KAS/BI,EAAkBv7B,kBAAO,GAC/BpC,qBAAU,WACH29B,EAAgBj7B,SAAYk7B,EAAUl7B,SAOzCi7B,EAAgBj7B,SAAU,EAC1Bk7B,EAAUl7B,SAAU,GAPpB5O,EAAM+pC,oBAAoB,CACxBhlC,KAAMoJ,EAAO,OAAS,QACtB+Q,IAAKlf,EAAMkf,IACXrT,QAASsC,MAMZ,CAACA,IAEJ,IAAM27B,EAAYx7B,kBAAO,GAMzB,OALApC,qBAAU,WACRkC,EAAQpO,EAAMgqC,YAAYhqC,EAAMkf,MAC5B/Q,IAASnO,EAAMgqC,YAAYhqC,EAAMkf,OAAM4qB,EAAUl7B,SAAU,KAC9D,CAAC5O,EAAMgqC,YAAYhqC,EAAMkf,OAG1B,kBAAC,IAAM3Q,SAAP,KACE,kBAAC07B,GAAA,EAAD,CACEh9B,MAAO,CAAErD,MAAO,MAAO6F,SAAU,IAAK4N,SAAU,KAChDpO,UAAW,GAEX,kBAAC,GAAD,CACElL,IAAKA,EACLoK,KAAMA,EACNC,QAASA,EACTpD,gBAAiBhL,EAAMgL,gBACvB3K,MAAOL,EAAMK,QAEf,kBAACmpC,GAAD,CAAczlC,IAAKA,EAAK6nB,MAAOA,EAAOma,KAAMA,EAAM0D,QAASA,KAG7D,kBAACtH,GAAD,CACEjjB,IAAKlf,EAAMkf,IACX/Q,KAAMA,EACNC,QAASA,EACTpD,gBAAiBhL,EAAMgL,gBACvBwU,OAAQA,EACRD,UAAWA,EACXqM,MAAOA,EACP2W,SAAUA,EACVH,OAAQA,EACRI,SAAUxiC,EAAMwiC,SAChB9jC,MAAOsB,EAAMtB,S,gKCjHf8K,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,MACP6F,SAAU,IACV4N,SAAU,IACVxT,OAAQ,WAINqgC,GAAuB,CAC3Bvd,QAAS,CACPC,SAAU,GACVE,SAAU,IACVqd,SAAU,GACVC,SAAU,KAEZ7d,OAAQ,CACNG,EAAG,GACHG,EAAG,EACHwd,GAAI,GACJC,GAAI,IAGR,SAASC,GAAqBr5B,EAAOnD,GACnC,OAAQA,EAAOhJ,MACb,IAAK,UAML,IAAK,UACH,OAAO,eACFmM,EADL,CAEEyb,QAAQ,eAAMzb,EAAMyb,QAAb,GAAyB5e,EAAOhP,SAG3C,IAAK,SACH,OAAO,eACFmS,EADL,CAEEqb,OAAO,eAAMrb,EAAMqb,OAAb,CAAqBG,EAAG3e,EAAOhP,MAAM2tB,EAAGG,EAAG9e,EAAOhP,MAAM8tB,MAGlE,IAAK,gBACH,OAAO,eACF3b,EADL,CAEEqb,OAAO,eAAMrb,EAAMqb,OAAb,CAAqB8d,GAAIt8B,EAAOhP,MAAMsrC,GAAIC,GAAIv8B,EAAOhP,MAAMurC,OAErE,IAAK,QACH,OAAOJ,GACT,QACE,OAAOM,SAGb,IAAMC,GAAuB,CAC3B9d,QAAS,CACPC,SAAU,GACVE,SAAU,GACVqd,SAAU,GACVC,SAAU,IAEZ7d,OAAQ,CACNG,EAAG,EACHG,EAAG,EACHwd,GAAI,EACJC,GAAI,IAGR,SAASI,GAAqBx5B,EAAOnD,GACnC,OAAQA,EAAOhJ,MACb,IAAK,UAML,IAAK,UACH,OAAO,eACFmM,EADL,CAEEyb,QAAQ,eAAMzb,EAAMyb,QAAb,GAAyB5e,EAAOhP,SAG3C,IAAK,SACH,OAAO,eACFmS,EADL,CAEEqb,OAAO,eAAMrb,EAAMqb,OAAb,CAAqBG,EAAG3e,EAAOhP,MAAM2tB,EAAGG,EAAG9e,EAAOhP,MAAM8tB,MAGlE,IAAK,gBACH,OAAO,eACF3b,EADL,CAEEqb,OAAO,eAAMrb,EAAMqb,OAAb,CAAqB8d,GAAIt8B,EAAOhP,MAAMsrC,GAAIC,GAAIv8B,EAAOhP,MAAMurC,OAErE,IAAK,QACH,OAAOG,GACT,QACE,OAAOD,SAIE,SAASG,GAAW3qC,GAAQ,IAAD,EACO0e,qBAC7C6rB,GACAL,IAHsC,mBACjCU,EADiC,KAClBC,EADkB,OAKOnsB,qBAC7CgsB,GACAD,IAPsC,mBAKjCK,EALiC,KAKlBC,EALkB,OASIngC,mBAAS,CACnD8hB,EAAGke,EAAcje,QAAQC,SAAWke,EAAcne,QAAQC,SAC1DC,EAAG+d,EAAcje,QAAQG,SAAWge,EAAcne,QAAQG,WAXpB,mBASjCL,EATiC,KASjBue,EATiB,OAaRpgC,mBAC9BzH,KAAK+oB,KAAK/oB,KAAKmG,IAAImjB,EAAeC,EAAG,GAAKvpB,KAAKmG,IAAImjB,EAAeI,EAAG,IACnE,KAfoC,mBAajCE,EAbiC,KAavBke,EAbuB,OAiBJrgC,mBAAS,GAjBL,mBAiBjCsgC,EAjBiC,KAiBrBC,EAjBqB,OAkBJvgC,mBAAS,GAlBL,mBAkBjCwgC,EAlBiC,KAkBrBC,EAlBqB,OAmBJzgC,mBAAS,CAAE8hB,EAAG,EAAGG,EAAG,IAnBhB,mBAmBjCye,EAnBiC,KAmBrBC,EAnBqB,OAoBM3gC,oBAAS,GApBf,mBAoBjC4gC,EApBiC,KAoBfC,EApBe,KAsBlC/hC,EAAQiB,cAEduB,qBAAU,WACR,IAAMw/B,EACJd,EAAcje,QAAQwd,SAAWS,EAAcje,QAAQC,SACnD+e,EACJf,EAAcje,QAAQyd,SAAWQ,EAAcje,QAAQG,SACzD+d,EAAsB,CACpB9lC,KAAM,SACNhG,MAAO,CAAE2tB,EAAGgf,EAAS7e,EAAG8e,OAEzB,CAACf,EAAcje,QAAQwd,SAAUS,EAAcje,QAAQyd,WAE1Dl+B,qBAAU,WACR,IAAMw/B,EACJZ,EAAcne,QAAQwd,SAAWW,EAAcne,QAAQC,SACnD+e,EACJb,EAAcne,QAAQyd,SAAWU,EAAcne,QAAQG,SACzDie,EAAsB,CACpBhmC,KAAM,SACNhG,MAAO,CAAE2tB,EAAGgf,EAAS7e,EAAG8e,OAEzB,CAACb,EAAcne,QAAQwd,SAAUW,EAAcne,QAAQyd,WAE1Dl+B,qBAAU,WACR,IAAM0/B,EAAkB,CACtBlf,EAAGke,EAAcje,QAAQC,SAAWke,EAAcne,QAAQC,SAC1DC,EAAG+d,EAAcje,QAAQG,SAAWge,EAAcne,QAAQG,UAEtD+e,EACJ1oC,KAAK+oB,KACH/oB,KAAKmG,IAAIsiC,EAAgBlf,EAAG,GAAKvpB,KAAKmG,IAAIsiC,EAAgB/e,EAAG,IAC3D,IACNme,EAAkBY,GAClBX,EAAYY,KACX,CACDjB,EAAcje,QAAQC,SACtBke,EAAcne,QAAQC,SACtBge,EAAcje,QAAQG,SACtBge,EAAcne,QAAQG,WAGxB5gB,qBAAU,WACR4/B,MACC,IAEH,IAAMA,EAAoBtgC,uBAAY,WACpCxL,EAAM+rC,aAAa,CACjBpP,QAAQ,eAAMmO,GACdjO,QAAQ,eAAM+N,OAEf,CAACE,EAAeF,EAAe7d,IAE5Bif,EAAmBxgC,uBAAY,WACnC+/B,EAAc,IACdR,EAAsB,CAAEhmC,KAAM,UAC9B8lC,EAAsB,CAAE9lC,KAAM,YAC7B,IAEGknC,EAAsBzgC,uBAAY,WACtC6/B,EAA2B,IAAbD,GACdD,EAA2B,IAAbC,KACb,CAACA,IAEEc,EAAqB1gC,uBAAY,WACrC6/B,EAA2B,IAAbD,GACdD,EAA2B,IAAbC,KACb,CAACA,IAEEe,EAAuB3gC,uBAAY,WACvCigC,GAAmBD,KAClB,CAACA,IAEE9gC,EAAUlB,KAEhB,OACE,kBAAC,IAAM+E,SAAP,KACE,kBAAC07B,GAAA,EAAD,CAAMj9B,UAAWtC,EAAQgD,KAAMuB,UAAW,GACxC,kBAAC6Z,GAAA,EAAD,CAAM7b,MAAO,CAAEgO,QAAS,GAAK4H,QAAS,EAAG1T,WAAS,EAACw3B,QAAQ,YACzD,kBAAC7d,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACzJ,EAAA,EAAD,CAAa+C,WAAS,EAAChiB,MAAM,WAC3B,kBAACwN,EAAA,EAAD,CAAQX,QAAS++B,GACf,kBAAC,KAAD,OAEF,kBAACp+B,EAAA,EAAD,CAAQX,QAAS8+B,GACf,kBAAC,KAAD,OAEF,kBAACn+B,EAAA,EAAD,CAAQX,QAASg/B,GACf,kBAAC,KAAD,SAIN,kBAACpjB,GAAA,EAAD,CAAM5mB,MAAI,EAAC6mB,GAAI,GACb,kBAACzJ,EAAA,EAAD,CAAa+C,WAAS,EAAChiB,MAAM,WAC3B,kBAACwN,EAAA,EAAD,CACElC,QAAS6/B,EAAmB,YAAc,WAC1Ct+B,QAASi/B,GAET,kBAAC,KAAD,UAMR,kBAAC,SAAD,CACEzf,EAAG4e,EAAW5e,EACdG,EAAGye,EAAWze,EACdjjB,MAAO3L,OAAOmtB,WACdvhB,OAAQ5L,OAAOmuC,YACfC,QAASC,GAAYnB,EAAeE,GACpCkB,OAAQrB,EACRsB,OAAQtB,EACR93B,UAAWo4B,GAEX,kBAAC,SAAD,KACE,kBAAC,QAAD,CACE9e,EAAGoe,EAAcne,QAAQC,SAAWke,EAAcve,OAAOG,EACzDG,EAAGie,EAAcne,QAAQG,SAAWge,EAAcve,OAAOM,EACzDpsB,KAAMiJ,EAAMmB,QAAQC,KAAKC,QACzBD,KAAI,WAIE,EAHJ3H,KAAK+oB,KACH/oB,KAAKmG,IAAIwhC,EAAcve,OAAOG,EAAG,GAC/BvpB,KAAKmG,IAAIwhC,EAAcve,OAAOM,EAAG,KAErCY,QAAQ,GALN,OAMJzjB,SAAU,GAAKohC,EACfqB,SAAU,IAEZ,kBAAC,QAAD,CACE/f,EAAGke,EAAcje,QAAQC,SAAWge,EAAcre,OAAOG,EACzDG,EAAG+d,EAAcje,QAAQG,SAAW8d,EAAcre,OAAOM,EACzDpsB,KAAMiJ,EAAMmB,QAAQC,KAAKC,QACzBD,KAAI,WAIE,EAHJ3H,KAAK+oB,KACH/oB,KAAKmG,IAAIshC,EAAcre,OAAOG,EAAG,GAC/BvpB,KAAKmG,IAAIshC,EAAcre,OAAOM,EAAG,KAErCY,QAAQ,GALN,OAMJzjB,SAAU,GAAKohC,EACfqB,SAAU,IAEZ,kBAAC,QAAD,CACE/f,EAAGke,EAAcje,QAAQC,SAAW,GAAKwe,EACzCve,EAAG+d,EAAcje,QAAQG,SAAW,GAAKse,EACzCphC,SAAU,GAAKohC,EACf3qC,KAAMiJ,EAAMmB,QAAQC,KAAKC,QACzBD,KAAI,UAAK4hC,GACPjgB,EACAme,EAAcre,QACdkB,QAAQ,GAHN,UAKN,kBAAC,SAAD,CACEkf,cAAe,EAAIvB,EACnBwB,aAAc,EAAIxB,EAClByB,OAAQ,CACNjC,EAAcje,QAAQC,SACtBge,EAAcje,QAAQG,SACtB8d,EAAcje,QAAQwd,SACtBS,EAAcje,QAAQyd,UAExBjqC,YAAa,EAAIirC,EACjBhrC,OAAQsJ,EAAMmB,QAAQwB,SAASC,IAC/B7L,KAAMiJ,EAAMmB,QAAQwB,SAASC,MAE/B,kBAAC,UAAD,CACEogB,EAAGke,EAAcje,QAAQC,SACzBC,EAAG+d,EAAcje,QAAQG,SACzBrsB,KAAK,UACLgd,QAAS,GACTqvB,OAAQ,GAAK1B,EACbh4B,WAAS,EACT25B,WAAYC,GACVnC,EACAD,GAEFqC,UAAWnB,IAEb,kBAAC,UAAD,CACEpf,EAAGke,EAAcje,QAAQwd,SACzBtd,EAAG+d,EAAcje,QAAQyd,SACzB3pC,KAAK,UACLgd,QAAS,GACTqvB,OAAQ,GAAK1B,EACbh4B,WAAS,EACT25B,WAAYG,GAA+BrC,GAC3CoC,UAAW,SAACxhC,IAuG1B,SAAuCo/B,EAAuBD,GAC5D,OAAO,SAACn/B,GACNo/B,EAAsB,CACpB9lC,KAAM,gBACNhG,MAAO,CACLsrC,GAAI5+B,EAAE2e,OAAO3K,MAAMiN,EAAIke,EAAcje,QAAQC,SAC7C0d,GAAI7+B,EAAE2e,OAAO3K,MAAMoN,EAAI+d,EAAcje,QAAQG,aA5GrCqgB,CACEtC,EACAD,EAFFuC,CAGE1hC,GACFqgC,OAGJ,kBAAC,SAAD,CACEa,cAAe,EAAIvB,EACnBwB,aAAc,EAAIxB,EAClByB,OAAQ,CACN/B,EAAcne,QAAQC,SACtBke,EAAcne,QAAQG,SACtBge,EAAcne,QAAQwd,SACtBW,EAAcne,QAAQyd,UAExBjqC,YAAa,EAAIirC,EACjBhrC,OAAQsJ,EAAMmB,QAAQwB,SAAS2b,KAC/BvnB,KAAMiJ,EAAMmB,QAAQwB,SAAS2b,OAE/B,kBAAC,UAAD,CACE0E,EAAGoe,EAAcne,QAAQC,SACzBC,EAAGie,EAAcne,QAAQG,SACzBggB,OAAQ,GAAK1B,EACbh4B,WAAS,EACT25B,WAAYK,GACVrC,EACAD,GAEFmC,UAAWnB,EACXuB,IAAE,IAEJ,kBAAC,UAAD,CACE3gB,EAAGoe,EAAcne,QAAQwd,SACzBtd,EAAGie,EAAcne,QAAQyd,SACzB0C,OAAQ,GAAK1B,EACbh4B,WAAS,EACT25B,WAAYO,GAA+BvC,GAC3CkC,UAAW,SAACxhC,IAmG1B,SAAuCs/B,EAAuBD,GAC5D,OAAO,SAACr/B,GACNs/B,EAAsB,CACpBhmC,KAAM,gBACNhG,MAAO,CACLsrC,GAAI5+B,EAAE2e,OAAO3K,MAAMiN,EAAIoe,EAAcne,QAAQC,SAC7C0d,GAAI7+B,EAAE2e,OAAO3K,MAAMoN,EAAIie,EAAcne,QAAQG,aAxGrCygB,CACExC,EACAD,EAFFyC,CAGE9hC,GACFqgC,OAGJ,kBAAC,QAAD,CACEe,OAAQ,CACN/B,EAAcne,QAAQC,SACtBke,EAAcne,QAAQG,SACtB8d,EAAcje,QAAQC,SACtBge,EAAcje,QAAQG,UAExB3sB,YAAa,EAAIirC,EACjBhrC,OAAQsJ,EAAMmB,QAAQE,QAAQwW,KAC9B9gB,KAAMiJ,EAAMmB,QAAQE,QAAQwW,KAC5BisB,KAAM,CAAC,EAAIpC,EAAY,EAAIA,KAE7B,kBAAC,QAAD,CAEE1e,GACCoe,EAAcne,QAAQC,SAAWge,EAAcje,QAAQC,UAAY,EAGpEC,GACCie,EAAcne,QAAQG,SAAW8d,EAAcje,QAAQG,UAAY,EAEpErsB,KAAMiJ,EAAMmB,QAAQC,KAAKC,QACzBf,SAAU,GAAKohC,EACftgC,KAAI,UAAKiiB,EAASU,QAAQ,GAAtB,MACJgf,SAAU,QASxB,SAASO,GAA+BnC,EAAuBD,GAC7D,OAAO,SAACn/B,GACNo/B,EAAsB,CACpB9lC,KAAM,UACNhG,MAAO,CAAE6tB,SAAUnhB,EAAE2e,OAAO3K,MAAMiN,EAAGI,SAAUrhB,EAAE2e,OAAO3K,MAAMoN,KAEhEge,EAAsB,CACpB9lC,KAAM,UACNhG,MAAO,CACLorC,SAAU1+B,EAAE2e,OAAO3K,MAAMiN,EAAIke,EAAcre,OAAO8d,GAClDD,SAAU3+B,EAAE2e,OAAO3K,MAAMoN,EAAI+d,EAAcre,OAAO+d,OAK1D,SAAS4C,GAA+BrC,GACtC,OAAO,SAACp/B,GACNo/B,EAAsB,CACpB9lC,KAAM,UACNhG,MAAO,CAAEorC,SAAU1+B,EAAE2e,OAAO3K,MAAMiN,EAAG0d,SAAU3+B,EAAE2e,OAAO3K,MAAMoN,MAgBpE,SAASugB,GAA+BrC,EAAuBD,GAC7D,OAAO,SAACr/B,GACNs/B,EAAsB,CACpBhmC,KAAM,UACNhG,MAAO,CAAE6tB,SAAUnhB,EAAE2e,OAAO3K,MAAMiN,EAAGI,SAAUrhB,EAAE2e,OAAO3K,MAAMoN,KAEhEke,EAAsB,CACpBhmC,KAAM,UACNhG,MAAO,CACLorC,SAAU1+B,EAAE2e,OAAO3K,MAAMiN,EAAIoe,EAAcve,OAAO8d,GAClDD,SAAU3+B,EAAE2e,OAAO3K,MAAMoN,EAAIie,EAAcve,OAAO+d,OAK1D,SAASgD,GAA+BvC,GACtC,OAAO,SAACt/B,GACNs/B,EAAsB,CACpBhmC,KAAM,UACNhG,MAAO,CAAEorC,SAAU1+B,EAAE2e,OAAO3K,MAAMiN,EAAG0d,SAAU3+B,EAAE2e,OAAO3K,MAAMoN,MAepE,SAASyf,GAAYnB,EAAeE,GAClC,OAAO,SAAC5/B,GACNA,EAAEgiC,IAAIC,iBAEN,IAEMC,EADQliC,EAAE2e,OAAOwjB,WACArB,SAEjBsB,EAAWpiC,EAAEgiC,IAAIK,OAAS,EAJhB,IAIoBH,EAAqBA,EAJzC,IAKhBtC,EAAcwC,GACd1C,EAAc0C,IAQlB,SAASE,GAAaxhB,GACpB,OAAOppB,KAAK+oB,KAAK/oB,KAAKmG,IAAIijB,EAAOG,EAAG,GAAKvpB,KAAKmG,IAAIijB,EAAOM,EAAG,IAE9D,SAAS6f,GAAuBjgB,EAAgBkD,GAC9C,IAAMqe,EATR,SAAsBvhB,EAAgBkD,GACpC,OACElD,EAAeC,EAAIiD,EAAejD,EAAID,EAAeI,EAAI8C,EAAe9C,EAQxEohB,CAAaxhB,EAAgBkD,IAC5Boe,GAAathB,GAAkBshB,GAAape,IAC/C,OAAOxsB,KAAK+qC,KAAKF,IAAa,IAAM7qC,KAAKgrC,ICre3C,IAAM3kC,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvC0kC,WAAY,CACVpjC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1C7K,MAAOqJ,EAAMmB,QAAQC,KAAKC,SAE5BsjC,iBAAkB,CAChBrjC,gBAAiBtB,EAAMmB,QAAQI,WAAWC,MAC1C7K,MAAOqJ,EAAMmB,QAAQwB,SAASyD,SAI5Bw+B,GAAQ,SAACtuC,GACb,OACE,kBAAC4qB,GAAA,EAAD,CAAO3b,UAAW,GAChB,kBAACqQ,EAAA,EAAD,CAAa3T,QAAQ,QACnB,kBAACkC,EAAA,EAAD,CACE0gC,KAAM,6CACNnkB,OAAO,SACP/pB,MAAM,WAEN,kBAAC,KAAD,OAEF,kBAACwN,EAAA,EAAD,CACE0gC,KAAM,oDACNnkB,OAAO,SACP/pB,MAAM,WAHR,cAOA,kBAACwN,EAAA,EAAD,CACE0gC,KACE,sEAEFnkB,OAAO,SACP/pB,MAAM,WALR,WAcFmuC,GAAW,SAACxuC,GAChB,IAAM0K,EAAUlB,KACFmB,cAEd,OACE,kBAACigB,GAAA,EAAD,CAAO3d,MAAO,CAAEyE,WAAY,IAAMzC,UAAW,GAC3C,kBAACqQ,EAAA,EAAD,CAAa3T,QAAQ,QACnB,kBAACkC,EAAA,EAAD,CACEb,UACEhN,EAAMyuC,OAAS/jC,EAAQ0jC,WAAa1jC,EAAQ2jC,iBAE9CnhC,QAAS,WACPlN,EAAM0uC,WAAU,KAGlB,kBAAC,KAAD,OAEF,kBAAC7gC,EAAA,EAAD,CACEb,UACEhN,EAAMyuC,OAAS/jC,EAAQ2jC,iBAAmB3jC,EAAQ0jC,WAEpDlhC,QAAS,WACPlN,EAAM0uC,WAAU,KAGlB,kBAAC,KAAD,UAOJC,GAAqB,CACzB5qC,KAAK,EACL04B,MAAM,GAEFmS,GAAqB,CACzB7qC,KAAK,EACL04B,MAAM,GAER,SAASoS,GAAmB39B,EAAOnD,GACjC,KAAI,OAACA,QAAD,IAACA,OAAD,EAACA,EAAQmR,KAAK,OAAO0vB,GACzB,OAAQ7gC,EAAOhJ,MACb,IAAK,OACH,OAAO,eAAK6pC,GAAZ,eAAiC7gC,EAAOmR,IAAMnR,EAAOlC,UACvD,IAAK,QACH,OAAO,eAAK+iC,IACd,QACE,OAAOA,IAIE,SAASE,GAAY9uC,GAClC,IAAM0J,EAAQiB,cAD2B,EAEfC,mBAAS,GAFM,mBAElChB,EAFkC,KAE3BqhB,EAF2B,OAIEvM,qBACzCmwB,GACAF,IANuC,mBAIlC3E,EAJkC,KAIrBD,EAJqB,OASPn/B,qBATO,mBASlC0hB,EATkC,KASvByf,EATuB,OAUfnhC,qBAVe,mBAUlCxG,EAVkC,KAU3Bo+B,EAV2B,OAWb53B,qBAXa,mBAWlCmkC,EAXkC,KAW1BC,EAX0B,KAwBzC,OAXA9iC,qBAAU,WACR+e,EAAShtB,OAAOmtB,YAChB,IAAMC,EAAe,SAAC5f,GACpBwf,EAAShtB,OAAOmtB,aAGlB,OADAntB,OAAOqtB,iBAAiB,SAAUD,GAC3B,WACLptB,OAAOstB,oBAAoB,SAAUF,MAEtC,IAGD,yBAAKpe,MAAO,CAAEk2B,QAAS,OAAQ8L,cAAe,gBAC5C,kBAACnmB,GAAA,EAAD,CACE7b,MAAO,CACLrD,MAAOA,EAAQ,IAAO,OAASA,EAAQ,IACvC2Y,OAAQ,GAEVpT,WAAS,EACT0T,QAAS,GAET,kBAACiG,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,WACrC,kBAAC7d,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,UACnC,kBAACiD,GAAD,CACEpH,SAAUA,EACVx3B,gBAAiBtB,EAAMmB,QAAQwB,SAAS2b,KACxC3nB,MAAOqJ,EAAMmB,QAAQI,WAAWC,MAChCgU,IAAK,MACL8qB,YAAaA,EACbD,oBAAqBA,EACrBrrC,MAAOsB,EAAMtB,SAGjB,kBAACoqB,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,UACnC,kBAACiD,GAAD,CACEpH,SAAUwM,EACVhkC,gBAAiBtB,EAAMmB,QAAQwB,SAASC,IACxCjM,MAAOqJ,EAAMmB,QAAQI,WAAWC,MAChCgU,IAAK,OACL8qB,YAAaA,EACbD,oBAAqBA,EACrBrrC,MAAOsB,EAAMtB,SAGjB,kBAACoqB,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,UACnC,kBAAC94B,EAAA,EAAD,CACEX,QAAS,WACD9I,GAAW2qC,GAAQvS,GAAU0S,KAAK9qC,EAAO2qC,EAAQziB,IAEzDjK,WAAS,EACTvU,UAAQ,GALV,aAUF,kBAACgb,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,UACnC,kBAACgE,GAAD,CAAYoB,aAAcA,KAE5B,kBAACjjB,GAAA,EAAD,CAAMC,GAAI,GAAI5Z,WAAS,EAACjN,MAAI,EAACykC,QAAQ,UACnC,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAU8H,OAAQzuC,EAAMyuC,OAAQC,UAAW1uC,EAAM0uC,eChL3D,IACMhwC,GAAQ,IAAIH,EADN,MAGNiL,GAAYC,aAAW,SAACC,GAAD,MAAY,CACvCgE,KAAM,CACJ9D,MAAO,OACPC,OAAQ,OACR0H,SAAU,QACVjE,IAAK,EACLkE,KAAM,EACN7D,aAAc,EACdwP,SAAU,YAIC,SAASgyB,GAASnvC,GAC/B,IAAM0K,EAAUlB,KAsDhB,OApDA0C,qBAAU,WACRxN,GAAMM,IAAI,qBAAqB,WAC7B,OAAOwkB,GACJhV,IAAI,0BACJiV,iBACApkB,KAHI,uCAGC,WAAOqkB,GAAP,SAAAxd,EAAA,sEACSyd,MAAMD,GAChBrkB,MAAK,SAACsa,GAAD,OAAUA,EAAKy1B,UACpB/vC,MAAK,SAACsa,GAAD,OAAU01B,IAAMC,WAAW31B,MAH/B,mFAHD,4DASR,IAEHzN,qBAAU,WACRxN,GAAMM,IAAI,iBAAiB,WACzB,OAAOwkB,GACJhV,IAAI,2BACJiV,iBACApkB,KAHI,uCAGC,WAAOqkB,GAAP,SAAAxd,EAAA,sEACSyd,MAAMD,GAChBrkB,MAAK,SAACsa,GAAD,OAAUA,EAAKy1B,UACpB/vC,MAAK,SAACsa,GAAD,OAAU01B,IAAMC,WAAW31B,MAH/B,mFAHD,4DASR,IAEHzN,qBAAU,WACRxN,GAAMM,IAAI,sBAAsB,WAC9B,OAAOwkB,GACJhV,IAAI,2BACJiV,iBACApkB,KAHI,uCAGC,WAAOqkB,GAAP,SAAAxd,EAAA,sEACSyd,MAAMD,GAChBrkB,MAAK,SAACsa,GAAD,OAAUA,EAAKy1B,UACpB/vC,MAAK,SAACsa,GAAD,OAAU01B,IAAMC,WAAW31B,MAH/B,mFAHD,4DASR,IAEHzN,qBAAU,WACRxN,GAAMM,IAAI,yBAAyB,WACjC,OAAOwkB,GACJhV,IAAI,8BACJiV,iBACApkB,KAHI,uCAGC,WAAOqkB,GAAP,SAAAxd,EAAA,sEACSyd,MAAMD,GAChBrkB,MAAK,SAACsa,GAAD,OAAUA,EAAKy1B,UACpB/vC,MAAK,SAACsa,GAAD,OAAU01B,IAAMC,WAAW31B,MAH/B,mFAHD,4DASR,IAGD,kBAACiR,GAAA,EAAD,CAAO5d,UAAWtC,EAAQgD,KAAMuB,UAAW,GACzC,kBAAC6/B,GAAD,CACEL,OAAQzuC,EAAMyuC,OACdC,UAAW1uC,EAAM0uC,UACjBhwC,MAAOA,M,sEC9ET6wC,GAAaC,aAAe,CAChC3kC,QAAS,CACPE,QAAS,CACP0kC,MAAO,UACPluB,KAAM,UACNmuB,KAAM,WAER3hC,OAAQ,CACNyP,YAAa,WAEfjN,OAAQ,CACNlQ,MAAO,WAETgM,SAAU,CACR2b,KAAMA,KAAK,KACXkc,cAAelc,KAAK,KACpB1b,IAAKA,KAAI,KACT63B,aAAc73B,KAAI,KAClB0D,KAAM2/B,KAAS,KACfvL,cAAeuL,KAAS,KACxB7/B,IAAKgY,KAAO,KACZuc,aAAcvc,KAAO,KACrBlY,MAAOA,KAAM,SAKbggC,GAAYJ,aAAe,CAC/B3kC,QAAS,CACP9F,KAAM,OACNgG,QAAS,CACP0kC,MAAO,UACPluB,KAAM,UACNmuB,KAAM,WAER3hC,OAAQ,CACNyP,YAAa,WAEfjN,OAAQ,CACNlQ,MAAO,WAETgM,SAAU,CACR2b,KAAM,UACNkc,cAAe,UACf53B,IAAK,UACL63B,aAAc,UACdn0B,KAAM2/B,KAAS,KACfvL,cAAeuL,KAAS,KACxB7/B,IAAK,UACLu0B,aAAc,UACdz0B,MAAOA,KAAM,OAGjBigC,UAAW,CACTC,SAAU,CACRC,WAAY,CACVC,UAAW,GACX5jC,OAAQ,2BAMD,SAAS6jC,GAAejwC,GAAQ,IAAD,EAChB4K,oBAAS,GADO,mBACrC6jC,EADqC,KAC7BC,EAD6B,KAG5C,OACE,kBAAC,KAAD,CAAkBhlC,MAAO+kC,EAASmB,GAAYL,IAC5C,kBAAC,GAAD,CAAcd,OAAQA,EAAQC,UAAWA,KC9D/CwB,gB1DXe,CACbC,OAAQ,0CACRC,WAAY,+BACZC,YAAa,sCACbC,UAAW,eACXC,cAAe,2BACfC,kBAAmB,cACnBC,MAAO,2CACPC,cAAe,iB0DIV,IAAM50B,GAAWo0B,aACXS,GAAYT,cACZ1sB,GAAU0sB,YAEvBS,GAAUC,SAAS,WAAY,CAAE7rC,KAAM,QAEvC8rC,IAASC,OAAO,kBAACb,GAAD,MAAoBtL,SAASoM,eAAe,S3DiHtD,kBAAmB70B,WACrBA,UAAU80B,cAAcC,MACrB5xC,MAAK,SAAA6xC,GACJA,EAAaC,gBAEdC,OAAM,SAAA/pC,GACLjC,QAAQiC,MAAMA,EAAMoV,c","file":"static/js/main.3f8ce99b.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export default {\r\n  apiKey: \"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc\",\r\n  authDomain: \"evefittingjs.firebaseapp.com\",\r\n  databaseURL: \"https://evefittingjs.firebaseio.com\",\r\n  projectId: \"evefittingjs\",\r\n  storageBucket: \"evefittingjs.appspot.com\",\r\n  messagingSenderId: \"50378609544\",\r\n  appId: \"1:50378609544:web:a183550dc926c774d4a03d\",\r\n  measurementId: \"G-9WGWL8V4F4\",\r\n};\r\n","const NodeCache = require(\"node-cache\");\r\n\r\nexport default class cacheService {\r\n  constructor(ttlSeconds) {\r\n    this.cache = new NodeCache({\r\n      stdTTL: ttlSeconds,\r\n      checkperiod: ttlSeconds * 0.2,\r\n      useClones: false,\r\n    });\r\n  }\r\n  set(key, value) {\r\n    if (!this.cache.get(key)) this.cache.set(key, value);\r\n    /* console.log(key, \": Cache Operation[SET]\"); */\r\n  }\r\n\r\n  get(key, storeFunction) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[GET]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n\r\n    return storeFunction().then((result) => {\r\n      /* console.log(`${key}: Cache set[GET_NETWORK]`); */\r\n      this.cache.set(key, result);\r\n      return result;\r\n    });\r\n  }\r\n  wait(key) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[WAIT]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      function check(count, cache) {\r\n        return () => {\r\n          const value = cache.get(key);\r\n          if (value !== undefined || count > 120) {\r\n            /*  console.log(`${key}: Cache Operation[WAIT]`); */\r\n            return resolve(value);\r\n          }\r\n          /* console.log(key, count); */\r\n          setTimeout(check(count++, cache), 100);\r\n        };\r\n      }\r\n      check(0, this.cache)();\r\n    });\r\n  }\r\n\r\n  del(keys) {\r\n    this.cache.del(keys);\r\n  }\r\n\r\n  flush() {\r\n    this.cache.flushAll();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const HighSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.949456,5.46298l0,5.560755\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m4.974388,17.593532l4.953309,-2.93155\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m14.038607,14.695678l5.020701,2.864158\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const MidSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m5.041085,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.477731,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const LowSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.983486,6.352277l0,11.23114\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const RigSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5\"\r\n      y1=\"5\"\r\n      x2=\"10\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"19\"\r\n      y1=\"5\"\r\n      x2=\"14\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"10\"\r\n      y1=\"14\"\r\n      x2=\"5\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"14\"\r\n      y1=\"14\"\r\n      x2=\"19\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ammoSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      id=\"svg_3\"\r\n      d=\"m9.784363,5.661415l0,17.46132\"\r\n      transform=\"rotate(45 9.784362792968757,14.392076492309569) \"\r\n      strokeWidth=\"5\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      transform=\"rotate(45 17.253654479980472,6.930145263671872) \"\r\n      stroke=\"#e5e5e5\"\r\n      id=\"svg_4\"\r\n      d=\"m17.205661,6.96214l0.017997,-0.06399l0.05999,0l0.017997,0.06399l-0.095984,0z\"\r\n      strokeWidth=\"3.72\"\r\n    />\r\n    <path\r\n      id=\"svg_6\"\r\n      d=\"m18.638913,4.001311l0,3.104507\"\r\n      transform=\"rotate(45 18.638912200927738,5.553564071655272) \"\r\n      strokeWidth=\"3.7\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      id=\"svg_7\"\r\n      d=\"m17.71106,4.705191c0,-2.952 0.78034,-5.34312 1.74371,-5.34312c0.96338,0 1.74372,2.39112 1.74372,5.34312c0,2.95201 -0.78034,5.34313 -1.74372,5.34313c-0.96337,0 -1.74371,-2.39112 -1.74371,-5.34313z\"\r\n      transform=\"rotate(45 19.454774856567386,4.705195426940916) \"\r\n      strokeWidth=\"0\"\r\n      stroke=\"#333333\"\r\n      fill=\"#e5e5e5\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const MiscIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CapsuleIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","export default class Fit {\r\n  static validateChargeSlot = function (slot) {\r\n    if (!slot || !slot.item || !slot.charge) return false;\r\n\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    // Charge size[attributeID] = 128\r\n    const itemChargeSize = Fit.#common_findAttributeByID(item, 128);\r\n    const chargeChargeSize = Fit.#common_findAttributeByID(charge, 128);\r\n    if (\r\n      !!itemChargeSize &&\r\n      !!chargeChargeSize &&\r\n      itemChargeSize.value !== chargeChargeSize.value\r\n    )\r\n      return false;\r\n\r\n    // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n    const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n      .map((ID) => {\r\n        const attr = Fit.#common_findAttributeByID(item, ID);\r\n        if (!attr) return undefined;\r\n        else return attr.value;\r\n      })\r\n      .filter((value) => value);\r\n    if (loadableGroupIDs.length === 0) return false;\r\n\r\n    if (!loadableGroupIDs.includes(charge.groupID)) return false;\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = Fit.#common_findAttributeByID(item, 56)?.value; //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    if (activationLimit <= 0) return false;\r\n\r\n    return true;\r\n  };\r\n\r\n  static mapSlots_CONFIG = {\r\n    isIterate: {\r\n      ship: false,\r\n      miscSlots: false,\r\n      highSlots: false,\r\n      midSlots: false,\r\n      lowSlots: false,\r\n      rigSlots: false,\r\n      droneSlots: false,\r\n    },\r\n  };\r\n  static mapSlots = function (fit, callback, partialConfig) {\r\n    const config = {\r\n      isIterate: {\r\n        ...Fit.mapSlots_CONFIG.isIterate,\r\n        ...partialConfig.isIterate,\r\n      },\r\n    };\r\n\r\n    return [\r\n      \"ship\",\r\n      \"miscSlots\",\r\n      \"highSlots\",\r\n      \"midSlots\",\r\n      \"lowSlots\",\r\n      \"rigSlots\",\r\n      \"droneSlots\",\r\n    ].reduce((acc, slotName) => {\r\n      if (config.isIterate[slotName] === true)\r\n        return acc.concat(Fit.#mapSlots_slots(fit[slotName], callback));\r\n      else return acc;\r\n    }, []);\r\n  };\r\n  static #mapSlots_slots = function (slots, callback) {\r\n    if (!slots) return [];\r\n    return slots.map((slot) => {\r\n      return callback(slot);\r\n    });\r\n  };\r\n\r\n  static apply = function (fit) {\r\n    const fitWithDomainID = Fit.#giveDomainID(fit);\r\n\r\n    const board = Fit.#createBoard(fitWithDomainID);\r\n    const staticBoard = Fit.#applyBoard_createStaticBoard(board);\r\n\r\n    return Fit.#applyBoard(fitWithDomainID, staticBoard);\r\n  };\r\n\r\n  static #applyBoard = function (fit, staticBoard) {\r\n    const ship = Fit.#applyBoard_type(fit.ship, staticBoard);\r\n    const miscSlots = Fit.#applyBoard_slots(fit.miscSlots, staticBoard);\r\n    const highSlots = Fit.#applyBoard_slots(fit.highSlots, staticBoard);\r\n    const midSlots = Fit.#applyBoard_slots(fit.midSlots, staticBoard);\r\n    const lowSlots = Fit.#applyBoard_slots(fit.lowSlots, staticBoard);\r\n    const rigSlots = Fit.#applyBoard_slots(fit.rigSlots, staticBoard);\r\n    const droneSlots = Fit.#applyBoard_slots(fit.droneSlots, staticBoard);\r\n\r\n    return {\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #applyBoard_createStaticBoard = function (board) {\r\n    const staticBoard = {};\r\n    const passiveBoard = Fit.#applyBoard_createPassiveBoard(board);\r\n\r\n    board.forEach((mod) => {\r\n      if (!staticBoard[mod.modifiedAttributeID])\r\n        staticBoard[mod.modifiedAttributeID] = [];\r\n      if (mod.isStatic === true) staticBoard[mod.modifiedAttributeID].push(mod);\r\n      else {\r\n        const appliedMod = Fit.#applyBoard_mod(mod, passiveBoard);\r\n        appliedMod[\"isStatic\"] = true;\r\n        staticBoard[mod.modifiedAttributeID].push(appliedMod);\r\n      }\r\n    });\r\n\r\n    return staticBoard;\r\n  };\r\n  static #applyBoard_createPassiveBoard = function (board) {\r\n    const passiveBoard = {};\r\n\r\n    board.forEach((mod) => {\r\n      if (!passiveBoard[mod.modifiedAttributeID])\r\n        passiveBoard[mod.modifiedAttributeID] = [];\r\n      passiveBoard[mod.modifiedAttributeID].push(mod);\r\n    });\r\n\r\n    return passiveBoard;\r\n  };\r\n  static #applyBoard_slots = function (slots, passiveBoard) {\r\n    return slots.map((slot) => {\r\n      const item = slot.item;\r\n      const charge = slot.charge;\r\n      return {\r\n        ...slot,\r\n        item: Fit.#applyBoard_type(item, passiveBoard),\r\n        charge: Fit.#applyBoard_type(charge, passiveBoard),\r\n      };\r\n    });\r\n  };\r\n  static #applyBoard_type = function (type, passiveBoard) {\r\n    if (!type || !type.typeAttributesStats) return type;\r\n\r\n    const typeAttributesStats = type.typeAttributesStats.map((attribute) => {\r\n      return Fit.#applyBoard_attribute(type, attribute, passiveBoard);\r\n    });\r\n\r\n    return { ...type, typeAttributesStats: typeAttributesStats };\r\n  };\r\n  static #applyBoard_attribute = function (type, attr, passiveBoard) {\r\n    const mods = passiveBoard[attr.attributeID];\r\n    if (!mods || mods.length === 0) return attr;\r\n\r\n    let value = attr.value;\r\n    let penCount = 0;\r\n    if (!!attr.debug || !!attr.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((mod) => {\r\n      if (Fit.#applyBoard_modIsTypeApplicable(type, mod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          mod.modifyingAttributeValue,\r\n          mod.operation,\r\n          penCount\r\n        );\r\n        debug.push({\r\n          ...mod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              mod.modifyingAttributeValue,\r\n              mod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (mod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(mod);\r\n    });\r\n\r\n    return { ...attr, value: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_mod = function (mod, passiveBoard) {\r\n    if (\r\n      mod.modifyingAttributeID === mod.modifiedAttributeID ||\r\n      mod.isStatic === true\r\n    )\r\n      return mod;\r\n\r\n    const mods = passiveBoard[mod.modifyingAttributeID];\r\n    if (!mods || mods.length === 0) return mod;\r\n\r\n    let value = mod.modifyingAttributeValue;\r\n    let penCount = 0;\r\n    if (!!mod.debug || !!mod.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((appliedMod) => {\r\n      if (Fit.#applyBoard_modIsModApplicable(mod, appliedMod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          appliedMod.modifyingAttributeValue,\r\n          appliedMod.operation,\r\n          penCount\r\n        );\r\n\r\n        debug.push({\r\n          ...appliedMod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              appliedMod.modifyingAttributeValue,\r\n              appliedMod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (appliedMod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(appliedMod);\r\n    });\r\n\r\n    return { ...mod, modifyingAttributeValue: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_sortMods = function (mods) {\r\n    const sampleMod = mods[0];\r\n\r\n    let compareFunc = () => true;\r\n    const highIsGood = sampleMod.modifiedAttributeHighIsGood;\r\n    if (highIsGood === true)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue - 1;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return 1 + b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n      };\r\n    else if (highIsGood === false)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return 1 + a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue - 1;\r\n      };\r\n    const modStackables = [];\r\n    const modNotStackables = [];\r\n    mods.forEach((mod) => {\r\n      if (\r\n        mod.operation === \"modAdd\" ||\r\n        mod.operation === \"modSub\" ||\r\n        mod.operation === \"postDiv\" ||\r\n        mod.isStackException === true\r\n      )\r\n        modStackables.push(mod);\r\n      else modNotStackables.push(mod);\r\n    });\r\n\r\n    const isModstackable = sampleMod.modifiedAttributeStackable;\r\n\r\n    if (isModstackable === false) {\r\n      modNotStackables.sort(compareFunc);\r\n      modNotStackables.forEach((mod, index, array) => {\r\n        array[index] = { ...mod, isPenalized: true };\r\n      });\r\n    }\r\n    return modStackables.concat(modNotStackables);\r\n  };\r\n  static #applyBoard_modIsModApplicable = function (targetMod, applyMod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(applyMod)) {\r\n      if (\r\n        !(\r\n          applyMod.typeState === \"activation\" &&\r\n          applyMod.effectCategory === \"overload\"\r\n        )\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${applyMod.typeState} <-/- ${applyMod.effectCategory}`,\r\n          targetMod,\r\n          \"<-\",\r\n          applyMod\r\n        ); //TESTETS\r\n      return false;\r\n    }\r\n    switch (applyMod.domain) {\r\n      case \"itemID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === applyMod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return targetMod.typeGroupID === applyMod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (applyMod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n        }\r\n      /*    case \"structureID\":\r\n        return false; */\r\n      default:\r\n        console.error(\"MOD_APPLICABLE_UNKNOWN\", targetMod, \"<-\", applyMod);\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsTypeApplicable = function (type, mod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(mod)) {\r\n      if (\r\n        !(mod.typeState === \"activation\" && mod.effectCategory === \"overload\")\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${mod.typeState} <-/- ${mod.effectCategory}`,\r\n          type,\r\n          \"<-\",\r\n          mod\r\n        ); //TESTETS\r\n      return false;\r\n    }\r\n    if (type.domainID === undefined) console.log(\"domainID missing\", type);\r\n    switch (mod.domain) {\r\n      case \"itemID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === mod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return type.groupID === mod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (mod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          case \"ItemModifier\":\r\n            return true;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"otherID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return (\r\n              type.domainID.split(\".\")[0] === mod.domainID.split(\".\")[0] &&\r\n              type.domainID.split(\".\")[1] === mod.domainID.split(\".\")[1]\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"structureID\":\r\n        return false;\r\n      default:\r\n        console.error(\"TYPE_APPLICABLE_UNKNOWN\", type, \"<-\", mod); //TESTETS\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsStateApplicable = function (mod) {\r\n    switch (mod.typeState) {\r\n      case \"overload\":\r\n        return true;\r\n      case \"activation\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"passive\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n          case \"target\":\r\n          case \"activation\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"offline\":\r\n        switch (mod.effectCategory) {\r\n          default:\r\n            return false;\r\n        }\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  static #giveDomainID = function (fit) {\r\n    const skills = Fit.#giveDomainID_skills(fit.skills);\r\n    const ship = { ...fit.ship, domainID: \"ship\" };\r\n    const miscSlots = Fit.#giveDomainID_slots(fit.miscSlots, \"miscSlots\");\r\n    const lowSlots = Fit.#giveDomainID_slots(fit.lowSlots, \"lowSlots\");\r\n    const midSlots = Fit.#giveDomainID_slots(fit.midSlots, \"midSlots\");\r\n    const highSlots = Fit.#giveDomainID_slots(fit.highSlots, \"highSlots\");\r\n    const rigSlots = Fit.#giveDomainID_slots(fit.rigSlots, \"rigSlots\");\r\n    const droneSlots = Fit.#giveDomainID_slots(fit.droneSlots, \"droneSlots\");\r\n\r\n    return {\r\n      skills,\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #giveDomainID_slots = function (slots, slotName) {\r\n    if (!slots || slots.constructor !== Array) return undefined;\r\n\r\n    return slots.map((slot, index) => {\r\n      const item = !!slot.item.typeID\r\n        ? { ...slot.item, domainID: `${slotName}.${index}.item` }\r\n        : false;\r\n      const charge = !!slot.charge.typeID\r\n        ? { ...slot.charge, domainID: `${slotName}.${index}.charge` }\r\n        : false;\r\n      return { item, charge };\r\n    });\r\n  };\r\n  static #giveDomainID_skills = function (skillsBoard) {\r\n    if (!skillsBoard || skillsBoard.constructor !== Array) {\r\n      const dogmaSkills = skillsBoard;\r\n      return dogmaSkills;\r\n    } else if (skillsBoard[0].domainID !== undefined) {\r\n      const skillsStaticBoardPlane = skillsBoard;\r\n      return skillsStaticBoardPlane;\r\n    }\r\n    return skillsBoard.map((skill) => ({\r\n      ...skill,\r\n      domainID: `skill:${skill.typeName}`,\r\n    }));\r\n  };\r\n\r\n  static #createBoard = function (fit) {\r\n    // skills will be two type: skills(Object) or pre made skills_modifiers(Array)\r\n    const skills = Fit.#createBoard_skills(fit.skills);\r\n    const ship = Fit.#createBoard_singleType(fit.ship, true);\r\n    const miscSlots = Fit.#createBoard_slots(fit.miscSlots, true);\r\n    const lowSlots = Fit.#createBoard_slots(fit.lowSlots);\r\n    const midSlots = Fit.#createBoard_slots(fit.midSlots);\r\n    const highSlots = Fit.#createBoard_slots(fit.highSlots);\r\n    const rigSlots = Fit.#createBoard_slots(fit.rigSlots);\r\n    const droneSlots = Fit.#createBoard_slots(fit.droneSlots);\r\n\r\n    return [\r\n      ...skills,\r\n      ...ship,\r\n      ...miscSlots,\r\n      ...lowSlots,\r\n      ...midSlots,\r\n      ...highSlots,\r\n      ...rigSlots,\r\n      ...droneSlots,\r\n    ];\r\n  };\r\n  static #createBoard_slots = function (slots, isStackException = false) {\r\n    if (!slots || slots.constructor !== Array) return [];\r\n\r\n    const mods = [];\r\n    slots.forEach((slot) => {\r\n      const itemMods = Fit.#createBoard_singleType(slot.item, isStackException);\r\n      const chargeMods = Fit.#createBoard_singleType(slot.charge, true);\r\n      if (!!itemMods) itemMods.forEach((mod) => mods.push(mod));\r\n      if (!!chargeMods) chargeMods.forEach((mod) => mods.push(mod));\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static extractSkillsStaticPlaneBoard(dogmaSkills) {\r\n    if (dogmaSkills.constructor !== Object) return [];\r\n\r\n    const skillBoard = Fit.#createBoard_skills(dogmaSkills);\r\n    const skillsStaticBoardMax = Fit.#applyBoard_createStaticBoard(skillBoard);\r\n    const skillsStaticBoardMed = Object.values(skillsStaticBoardMax)\r\n      .reduce((acc, mods) => acc.concat(mods), [])\r\n      .map((mod) => ({ ...mod, debug: undefined, falseDebug: undefined }));\r\n\r\n    return skillsStaticBoardMed;\r\n  }\r\n  static #createBoard_skills = function (dogmaSkills) {\r\n    if (dogmaSkills.constructor === Array) {\r\n      const skillsBoard = dogmaSkills;\r\n      return skillsBoard;\r\n    }\r\n\r\n    return Object.values(dogmaSkills).reduce((acc, dogmaSkill) => {\r\n      const mods = Fit.#createBoard_singleType(dogmaSkill, true);\r\n      const board = mods.map((mod) => ({\r\n        ...mod,\r\n        domainID: `skill:${mod.typeName}`,\r\n      }));\r\n      return acc.concat(board);\r\n    }, []);\r\n  };\r\n  static #createBoard_singleType = function (type, isStackException = false) {\r\n    if (!type) return [];\r\n\r\n    // effectID: 132,effectName: \"skillEffect\",\r\n    const invalidEffectIDs = [132];\r\n    // ExtrovertEffect is effect have modifierInfo\r\n    // Existence of modifierInfo ensures effect affect anonymous attribute with given value\r\n    const extrovertEffects = !!type.typeEffectsStats\r\n      ? type.typeEffectsStats.filter(\r\n          (effect) =>\r\n            effect.modifierInfo !== undefined &&\r\n            !invalidEffectIDs.includes(effect.effectID)\r\n        )\r\n      : [];\r\n\r\n    const mods = [];\r\n    extrovertEffects.forEach((effect) => {\r\n      effect.modifierInfo.forEach((mod) => {\r\n        const modifyingAttribute = Fit.#common_findAttributeByID(\r\n          type,\r\n          mod.modifyingAttributeID\r\n        );\r\n        const modifyingAttributeValue = !!mod.modifyingAttributeValue\r\n          ? mod.modifyingAttributeValue\r\n          : modifyingAttribute?.value;\r\n\r\n        mods.push({\r\n          domainID: type.domainID,\r\n          typeName: type.typeName,\r\n          ...mod,\r\n          effectName: effect.effectName,\r\n          effectCategory: effect.effectCategory,\r\n          modifyingAttributeValue: modifyingAttributeValue,\r\n          typeID: type.typeID,\r\n          typeState: type.iconID !== 33 ? type.typeState : \"passive\",\r\n          typeGroupID: type.groupID,\r\n          typeSkills: type.typeSkills,\r\n          isStackException:\r\n            mod.isStackException !== undefined\r\n              ? mod.isStackException\r\n              : isStackException,\r\n        });\r\n      });\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static getCurrentState = function (type) {\r\n    return Fit.#createBoard_setState(type);\r\n  };\r\n  static getInitialState = function (type) {\r\n    if (!type || !type.typeEffectsStats) return undefined;\r\n    if (type.iconID === 33) return \"passive\"; // if type is skill\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n  };\r\n  static #createBoard_setState = function (type) {\r\n    if (!type && type !== 0) return undefined;\r\n    if (!type.typeEffectsStats || type.iconID === 33) return \"passive\"; // if type is skill\r\n    const initialState = type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n    const currentState = type.typeState;\r\n\r\n    if (currentState === undefined) return initialState;\r\n    if (initialState === \"passive\" && currentState === \"activation\")\r\n      return \"passive\";\r\n    return currentState;\r\n  };\r\n\r\n  static #common_findAttributeByID = function (type, attributeID) {\r\n    if (!type || !type.typeAttributesStats) return undefined;\r\n    if (type.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n    const attribute = type.typeAttributesStats.find(\r\n      (entry) => entry.attributeID === attributeID\r\n    );\r\n\r\n    return attribute;\r\n  };\r\n  static #common_operation = function (\r\n    baseValue,\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    //TODO: findout why does eve developers make shit like this typeID=31760 effect is weird\r\n    if (applyValue === undefined) return baseValue;\r\n\r\n    let value = baseValue;\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        value = Fit.#oepration_mul(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        value = Fit.#oepration_per(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"modAdd\":\r\n        value = Fit.#operation_add(baseValue, applyValue);\r\n        break;\r\n      case \"modSub\":\r\n        value = Fit.#operation_sub(baseValue, applyValue);\r\n        break;\r\n      case \"postDiv\":\r\n        value = Fit.#operation_div(baseValue, applyValue);\r\n        break;\r\n      case \"postAssignment\":\r\n        return applyValue;\r\n      default:\r\n        break;\r\n    }\r\n    return value;\r\n  };\r\n  static #oepration_mul = function (baseValue, mulValue, penCount = 0) {\r\n    return baseValue * ((mulValue - 1) * Fit.#common_penaltyMul(penCount) + 1);\r\n  };\r\n  static #oepration_per = function (baseValue, perValue, penCount = 0) {\r\n    return (\r\n      baseValue * ((perValue / 100) * Fit.#common_penaltyMul(penCount) + 1)\r\n    );\r\n  };\r\n  static #operation_add = function (baseValue, addValue) {\r\n    return baseValue + addValue;\r\n  };\r\n  static #operation_sub = function (baseValue, subValue) {\r\n    return baseValue - subValue;\r\n  };\r\n  static #operation_div = function (baseValue, divValue) {\r\n    return baseValue / divValue;\r\n  };\r\n  static #common_penaltyMul = function (penCount) {\r\n    return Math.pow(Math.E, -0.140274 * penCount * penCount);\r\n  };\r\n  static #common_penalizedModifyingValue = function (\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        return 1 + Fit.#common_penaltyMul(penCount) * (applyValue - 1);\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        return Fit.#common_penaltyMul(penCount) * applyValue;\r\n      case \"modAdd\":\r\n      case \"modSub\":\r\n        return applyValue;\r\n      case \"postDiv\":\r\n        return applyValue / Fit.#common_penaltyMul(penCount);\r\n      default:\r\n        return applyValue;\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Badge, Avatar, makeStyles, useTheme } from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport AdjustIcon from \"@material-ui/icons/Adjust\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 20,\r\n    height: 20,\r\n    right: 15,\r\n    bottom: 3,\r\n    fontSize: 12,\r\n    fontWeight: 700,\r\n    transition: theme.transitions.create(\"color\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function SlotChargeBadge(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [badgeColor, setBadgeColor] = useState({\r\n    color: theme.palette.text.primary,\r\n    backgroundColor: theme.palette.background.paper,\r\n  });\r\n  const [badgeIcon, setBadgeIcon] = useState(false);\r\n\r\n  const handleBadgeClick = useCallback(\r\n    (e) => {\r\n      e.stopPropagation();\r\n      if (props.variant !== \"DRONE_SLOT\")\r\n        props.dispatchSlotsOpen({\r\n          type: \"AMMO\",\r\n          payload: {\r\n            slotVariant: props.variant,\r\n            filter: getLoadableGroup(props.item),\r\n          },\r\n        });\r\n      props.setActiveSlotNumber(props.index);\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    },\r\n    [props.index, props.variant, props.item]\r\n  );\r\n  useEffect(() => {\r\n    if (props.count !== undefined && props.count.constructor === Number) {\r\n      // count of item\r\n      setBadgeIcon(`${props.count}`);\r\n    } else if (!props.charge) {\r\n      // No charge loaded\r\n      setBadgeIcon(<AddCircleOutlineIcon fontSize=\"small\" />);\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n    } else if (\r\n      !Fit.validateChargeSlot({ item: props.item, charge: props.charge })\r\n    ) {\r\n      // Charge not compatible\r\n      setBadgeColor({\r\n        color: theme.palette.background.paper,\r\n        backgroundColor: theme.palette.property.red,\r\n      });\r\n      setBadgeIcon(<HighlightOffIcon fontSize=\"small\" />);\r\n    } else {\r\n      // Charge loaded\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n      setBadgeIcon(<AdjustIcon fontSize=\"small\" />);\r\n    }\r\n  }, [props.charge?.typeID, props.item?.typeID, props.count, theme]);\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"right\",\r\n      }}\r\n      badgeContent={\r\n        getLoadableGroup(props.item).group.length > 0 ||\r\n        isDisplyCount(props.count) ? (\r\n          <Avatar\r\n            className={classes.rootAvatar}\r\n            style={{\r\n              ...badgeColor,\r\n            }}\r\n            onClick={handleBadgeClick}\r\n          >\r\n            {badgeIcon}\r\n          </Avatar>\r\n        ) : undefined\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction isDisplyCount(count) {\r\n  if (count !== undefined && count.constructor === Number) return true;\r\n  return false;\r\n}\r\n\r\nexport function getLoadableGroup(item) {\r\n  if (!item || !item.typeAttributesStats) return { group: [], size: false };\r\n\r\n  const typeAttributesStats = item.typeAttributesStats;\r\n\r\n  // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n  const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n    .map((ID) => {\r\n      const attr = typeAttributesStats.find((attr) => attr.attributeID === ID);\r\n      if (!attr) return undefined;\r\n      else return attr.value;\r\n    })\r\n    .filter((value) => value);\r\n\r\n  // Charge size[attributeID] = 128\r\n  const loadableSize = typeAttributesStats.find(\r\n    (attr) => attr.attributeID === 128\r\n  )?.value;\r\n\r\n  return {\r\n    group: loadableGroupIDs,\r\n    size: loadableSize,\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    right: 15,\r\n    top: 3,\r\n    fontSize: 1,\r\n  },\r\n}));\r\n\r\nexport default function SlotMetaBadge(props) {\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      badgeContent={\r\n        getTechColor(props.item) && (\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: getTechColor(props.item),\r\n            }}\r\n            className={classes.rootAvatar}\r\n          >\r\n            {\"\"}\r\n          </Avatar>\r\n        )\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction getTechColor(item) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.metaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return undefined;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Button, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: 0,\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nexport default function RecButton(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      {...props}\r\n      classes={{ root: classes.root }}\r\n      variant=\"contained\"\r\n      style={\r\n        props.disabled === true\r\n          ? {\r\n              ...props.style,\r\n              backgroundColor: theme.palette.action.hover,\r\n              color: theme.palette.background.paper,\r\n            }\r\n          : { ...props.style }\r\n      }\r\n      disableElevation\r\n    >\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function RecMenu(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const anchor = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!props.open && open === true) setOpen(false);\r\n  }, [props.open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        ref={anchor}\r\n        onClick={() => {\r\n          if (props.menuButton.props.disabled !== true) setOpen(!open);\r\n        }}\r\n      >\r\n        {props.menuButton}\r\n      </div>\r\n\r\n      <Popover\r\n        open={props.open && open}\r\n        anchorEl={anchor.current}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        onClose={() => setOpen(false)}\r\n        PaperProps={{\r\n          style: { width: anchor.current?.clientWidth },\r\n          elevation: 0,\r\n          square: true,\r\n        }}\r\n        container={anchor.current}\r\n      >\r\n        {props.children}\r\n      </Popover>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const OverloadIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ActivationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const OfflineIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"14.742\"\r\n      y1=\"6.625\"\r\n      x2=\"14.742\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n    <line\r\n      x1=\"9.258\"\r\n      y1=\"6.625\"\r\n      x2=\"9.258\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const PassiveIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport RecButton from \"../RecButton\";\r\nimport RecMenu from \"../RecMenu\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport {\r\n  PassiveIcon,\r\n  ActivationIcon,\r\n  OverloadIcon,\r\n  OfflineIcon,\r\n} from \"../../Icons/stateIcons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n  },\r\n  overloadButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n  },\r\n  activationButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n  },\r\n  passiveButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.org,\r\n  },\r\n  offlineButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.grey,\r\n  },\r\n}));\r\n\r\nconst OverloadButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Overload\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.overloadButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"overload\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OverloadIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ActivationButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Active\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.activationButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"activation\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <ActivationIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst PassiveButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Online\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.passiveButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"passive\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <PassiveIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst OfflineButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Offline\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.offlineButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"offline\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OfflineIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function SetStateMenu(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [isActiveModule, setIsActiveModule] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const initialState = Fit.getInitialState(props.activeItem);\r\n    switch (initialState) {\r\n      case \"activation\":\r\n        setIsActiveModule(true);\r\n        break;\r\n      case \"passive\":\r\n        setIsActiveModule(false);\r\n        break;\r\n      default:\r\n        setIsActiveModule(undefined);\r\n    }\r\n  }, [props.activeItem?.typeID]);\r\n\r\n  return (\r\n    <RecMenu\r\n      open={props.slotsOpen[props.variant].open}\r\n      menuButton={\r\n        <RecButton\r\n          className={classes.rootButton}\r\n          style={{\r\n            backgroundColor: getCurrentStateColor(\r\n              props.activeItem?.typeState,\r\n              props.variant === \"AMMO\",\r\n              theme\r\n            ),\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <Tooltip title=\"Item state\" placement=\"bottom\" arrow>\r\n            <div style={{ height: 24 }}>\r\n              {getCurrentStateIcon(\r\n                props.activeItem?.typeState,\r\n                props.variant === \"AMMO\",\r\n                !props.activeItem?.typeID,\r\n                theme\r\n              )}\r\n            </div>\r\n          </Tooltip>\r\n        </RecButton>\r\n      }\r\n    >\r\n      <OverloadButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={\r\n          !isActiveModule ||\r\n          props.variant === \"DRONE_SLOT\" ||\r\n          props.variant === \"AMMO\"\r\n        }\r\n      />\r\n      <ActivationButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={!isActiveModule || props.variant === \"AMMO\"}\r\n      />\r\n      <PassiveButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n      />\r\n      <OfflineButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={props.variant === \"AMMO\"}\r\n      />\r\n    </RecMenu>\r\n  );\r\n}\r\nexport function getCurrentStateColor(state, isAmmo = false, theme) {\r\n  if (isAmmo === true) return theme.palette.property.org;\r\n  switch (state) {\r\n    case \"overload\":\r\n      return theme.palette.property.red;\r\n    case \"activation\":\r\n      return theme.palette.property.green;\r\n    case \"passive\":\r\n      return theme.palette.property.org;\r\n    case \"offline\":\r\n      return theme.palette.property.grey;\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\nfunction getCurrentStateIcon(state, isAmmo, isDisabled, theme) {\r\n  if (isAmmo === true)\r\n    return (\r\n      <PassiveIcon\r\n        color={\r\n          isDisabled\r\n            ? theme.palette.background.paper\r\n            : theme.palette.button.color\r\n        }\r\n      />\r\n    );\r\n  switch (state) {\r\n    case \"overload\":\r\n      return (\r\n        <OverloadIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"activation\":\r\n      return (\r\n        <ActivationIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"passive\":\r\n      return (\r\n        <PassiveIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"offline\":\r\n    default:\r\n      return (\r\n        <OfflineIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  ListItemText,\r\n  Avatar,\r\n  Tooltip,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  HighSlotIcon,\r\n  MidSlotIcon,\r\n  LowSlotIcon,\r\n  RigSlotIcon,\r\n  DroneIcon,\r\n  CapsuleIcon,\r\n  MiscIcon,\r\n} from \"../../Icons/slotIcons.jsx\";\r\nimport SlotChargeBadge from \"./SlotChargeBadge.jsx\";\r\nimport { useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport SlotMetaBadge from \"./SlotMetaBadge.jsx\";\r\nimport { getCurrentStateColor } from \"../ListDrawer/SetStateMenu.jsx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n  },\r\n  rootActive: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n  rootDiv: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n  rootAvatarHover: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.action.hover,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  rootAvatarDefault: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  stateArcBorder: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: \"50%\",\r\n    border: \"3px solid\",\r\n    borderLeftColor: \"transparent\",\r\n    borderRightColor: \"transparent\",\r\n    borderTopColor: \"transparent\",\r\n    borderBottomColor: \"transparent\",\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 7,\r\n  },\r\n}));\r\n\r\nexport default function Slot(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [charge, setCharge] = useState(false);\r\n\r\n  const [isHover, setIsHover] = useState(false);\r\n\r\n  const handlePressOpen = useCallback(() => {\r\n    props.setActiveSlotNumber(props.index);\r\n    switch (props.variant) {\r\n      case \"RIG_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"RIG_SLOT\",\r\n          payload: {\r\n            filter: getLoadableRig(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      case \"DRONE_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"DRONE_SLOT\",\r\n          payload: {\r\n            filter: getLoadableDrone(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      default:\r\n        props.dispatchSlotsOpen({ type: props.variant });\r\n        break;\r\n    }\r\n  }, [props.slots.ship?.typeID, props.variant, props.index]);\r\n\r\n  useEffect(() => {\r\n    if (props.isActive === true || props.isActive.open === true) {\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    }\r\n  }, [props.isActive]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedItem;\r\n    if (!type || !type.typeID) setItem(false);\r\n    else setItem(props.fetchedItem);\r\n  }, [props.fetchedItem?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedCharge;\r\n    if (!type || !type.typeID) setCharge(false);\r\n    else setCharge(props.fetchedCharge);\r\n  }, [props.fetchedCharge?.typeID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        className={props.isActive ? classes.rootActive : classes.root}\r\n        onClick={handlePressOpen}\r\n        dense\r\n        button\r\n      >\r\n        <div\r\n          className={classes.rootDiv}\r\n          onMouseEnter={() => {\r\n            setIsHover(true);\r\n          }}\r\n          onMouseLeave={() => {\r\n            setIsHover(false);\r\n          }}\r\n        >\r\n          <SlotChargeBadge\r\n            {...props}\r\n            item={item}\r\n            charge={charge}\r\n            count={props.fetchedItem?.typeCount}\r\n          >\r\n            <SlotMetaBadge item={item}>\r\n              <div\r\n                className={classes.stateArcBorder}\r\n                style={{\r\n                  borderLeftColor: getCurrentStateColor(\r\n                    props?.fetchedItem?.typeState,\r\n                    false,\r\n                    theme\r\n                  ),\r\n                }}\r\n              />\r\n              <Avatar\r\n                className={\r\n                  isHover ? classes.rootAvatarHover : classes.rootAvatarDefault\r\n                }\r\n              >\r\n                {!!item ? feedSource(item, charge) : slotIcon(props, theme)}\r\n              </Avatar>\r\n            </SlotMetaBadge>\r\n          </SlotChargeBadge>\r\n        </div>\r\n\r\n        <ListItemText\r\n          style={{ marginLeft: 50 }}\r\n          primary={item?.typeName}\r\n          primaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n          secondary={\r\n            !!charge &&\r\n            `${charge?.typeName} ${getChageCountString(item, charge)}`\r\n          }\r\n          secondaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n        />\r\n      </ListItem>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction feedSource(item, charge) {\r\n  if (!!item && !charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${item?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n  else if (!!item && !!charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        src={`https://images.evetech.net/types/${charge?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n}\r\nfunction getChageCountString(item, charge) {\r\n  const count = item.capacity / charge.volume || 1;\r\n  if (count === 1) return \"\";\r\n  else return `x${Math.floor(count)}`;\r\n}\r\nfunction getLoadableRig(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const rigSize = attrs.find((attr) => attr.attributeID === 1547)?.value;\r\n  return { size: rigSize };\r\n}\r\nfunction getLoadableDrone(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const droneSize = attrs.find((attr) => attr.attributeID === 1271)?.value; //attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  return { size: droneSize };\r\n}\r\n\r\nfunction slotIcon(props, theme) {\r\n  switch (props.variant) {\r\n    case \"SHIP\":\r\n      return (\r\n        <Tooltip\r\n          open={props.open && !props.slotsOpen.SHIP.open}\r\n          title=\"Click here to choose ship\"\r\n          placement=\"right\"\r\n          arrow\r\n        >\r\n          <div style={{ height: 24 }}>\r\n            <CapsuleIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    case \"MISC_SLOT\":\r\n      return <MiscIcon color={theme.palette.text.primary} />;\r\n    case \"HIGH_SLOT\":\r\n      return <HighSlotIcon color={theme.palette.text.primary} />;\r\n    case \"MID_SLOT\":\r\n      return <MidSlotIcon color={theme.palette.text.primary} />;\r\n    case \"LOW_SLOT\":\r\n      return <LowSlotIcon color={theme.palette.text.primary} />;\r\n    case \"RIG_SLOT\":\r\n      return <RigSlotIcon color={theme.palette.text.primary} />;\r\n    case \"DRONE_SLOT\":\r\n      return <DroneIcon color={theme.palette.text.primary} />;\r\n  }\r\n}\r\n","export default class EFT {\r\n  static extractIDs(fitText, typeIDs) {\r\n    if (!typeIDs) return [];\r\n\r\n    const typeNames = EFT.#extractIDs_getTypeNames(fitText);\r\n    return typeNames.reduce((acc, typeName) => {\r\n      const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n      if (!!type) acc.push(type.typeID);\r\n      else console.log(\"ERROR\", \"EFT:typeName is not found\", typeName);\r\n      return acc;\r\n    }, []);\r\n  }\r\n  static #extractIDs_getTypeNames = function (fitText) {\r\n    const shipText = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const moduleText = fitText.substring(fitText.indexOf(\"]\") + 1);\r\n\r\n    const shipName = shipText.replace(\"[\", \"\").split(\",\")[0];\r\n    const moduleNames = [\r\n      ...new Set(\r\n        moduleText.split(/\\r?\\n/).reduce((acc, moduleTextLine) => {\r\n          const dividedByComma = moduleTextLine.split(\", \");\r\n          const dividedByX = moduleTextLine.split(\" x\");\r\n\r\n          if (dividedByComma.length === 2) {\r\n            const item = dividedByComma[0];\r\n            const charge = dividedByComma[1];\r\n            return acc.concat([item, charge]);\r\n          }\r\n          if (dividedByX.length === 2) {\r\n            const item = dividedByX[0];\r\n            return acc.concat([item]);\r\n          }\r\n\r\n          if (moduleTextLine !== \"\") return acc.concat(moduleTextLine);\r\n          return acc;\r\n        }, [])\r\n      ),\r\n    ];\r\n    return [shipName, ...moduleNames];\r\n  };\r\n\r\n  static buildFitFromText = function (fitText, typeIDs) {\r\n    const shipTextLine = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const shipName = shipTextLine.replace(\"[\", \"\").split(\",\")[0];\r\n    const ship = EFT.#common_findIdByName(shipName, typeIDs);\r\n\r\n    const fitTextBlocks = fitText.split(/\\r?\\n\\r?\\n\\r?\\n/);\r\n    const moduleText = EFT.#buildFitFromText_getModuleText(fitTextBlocks);\r\n    const droneText = fitTextBlocks[1]; //At this point we dont know wether this text is drone or not\r\n\r\n    const moduleSlots = EFT.#buildFitFromText_buildModules(moduleText, typeIDs);\r\n    const droneSlots = EFT.#buildFitFromText_buildDrones(droneText, typeIDs);\r\n\r\n    return { ship, ...moduleSlots, ...droneSlots };\r\n  };\r\n  static #buildFitFromText_getModuleText = function (fitTextBlocks) {\r\n    const indexOfModuleText = fitTextBlocks[0].indexOf(\"]\") + 1;\r\n    const moduleText = fitTextBlocks[0].substring(indexOfModuleText);\r\n    return moduleText.trimStart();\r\n  };\r\n  static #buildFitFromText_buildModules = function (moduleText, typeIDs) {\r\n    const moduleTextBlocks = moduleText.split(/\\r?\\n\\r?\\n/);\r\n\r\n    const moduleSlots = {};\r\n    [\"lowSlots\", \"midSlots\", \"highSlots\", \"rigSlots\", \"miscSlots\"].forEach(\r\n      (slot, index) => {\r\n        moduleSlots[slot] = EFT.#buildFitFromText_buildModule(\r\n          moduleTextBlocks[index],\r\n          typeIDs\r\n        );\r\n      }\r\n    );\r\n\r\n    return moduleSlots;\r\n  };\r\n  static #buildFitFromText_buildModule = function (moduleTextBlock, typeIDs) {\r\n    if (!moduleTextBlock) return [];\r\n\r\n    const moduleTextLines = moduleTextBlock.split(/\\r?\\n/);\r\n    return moduleTextLines.map((moduleTextLine) => {\r\n      if (moduleTextLine.indexOf(\"Empty\") !== -1)\r\n        return { item: false, chage: false };\r\n      else {\r\n        const itemName = moduleTextLine.split(\", \")[0];\r\n        const chargeName = moduleTextLine.split(\", \")[1];\r\n        const item = EFT.#common_findIdByName(itemName, typeIDs);\r\n        const charge = EFT.#common_findIdByName(chargeName, typeIDs);\r\n        return { item, charge };\r\n      }\r\n    });\r\n  };\r\n  static #buildFitFromText_buildDrones = function (droneText, typeIDs) {\r\n    //prettier-ignore\r\n    if (EFT.#buildFitFromText_readoutTextBlock(droneText, typeIDs) !== \"droneSlots\")\r\n      return {};\r\n\r\n    const droneTextLines = droneText.split(/\\r?\\n/);\r\n    const droneSlots = droneTextLines.map((droneTextLine) => {\r\n      //prettier-ignore\r\n      const {typeName, typeCount} = EFT.#buildFitFromText_divideBy_x(droneTextLine)\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      return { item: { ...type, typeCount }, charge: false };\r\n    });\r\n\r\n    return { droneSlots };\r\n  };\r\n  static #buildFitFromText_divideBy_x = function (fitTextLine) {\r\n    const dividedBy_x = fitTextLine.split(\" x\");\r\n    const typeName = dividedBy_x[0];\r\n    const typeCount = Number(dividedBy_x[1]);\r\n\r\n    return { typeName, typeCount };\r\n  };\r\n  static #buildFitFromText_readoutTextBlock = function (textBlock, typeIDs) {\r\n    if (!textBlock) return \"undefined\";\r\n\r\n    const sampleTextLine = textBlock.slice(0, textBlock.search(/\\r?\\n/));\r\n    if (sampleTextLine.indexOf(\" x\") !== -1) {\r\n      const typeName = sampleTextLine.split(\" x\")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeDroneSize) return \"droneSlots\";\r\n      else return false;\r\n    } else if (sampleTextLine.indexOf(\",\") !== -1) {\r\n      const typeName = sampleTextLine.split(\", \")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeIsHiPower) return \"highSlots\";\r\n      else if (!!type.typeIsMedPower) return \"midSlots\";\r\n      else if (!!type.typeIsLoPower) return \"lowSlots\";\r\n      else return \"ship\";\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit]`;\r\n    const lowSlots = EFT.#buildTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const miscSlots = EFT.#buildTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Subsystem slot]\");\r\n    const moduleSlots =  [ship, lowSlots, midSlots, highSlots, rigSlots, miscSlots]\r\n      .filter(slots => !!slots)// In case for miscSlots is empty and returned as false\r\n      .join(\"\\n\\n\");\r\n\r\n    const drones =  EFT.#buildTextFromFit_droneSlots(fit?.droneSlots, \"[Empty Subsystem slot]\")\r\n\r\n    return [moduleSlots, drones].join(\"\\n\\n\\n\");\r\n  };\r\n  static #buildTextFromFit_moduleSlots = function (moduleSlots, emptyText) {\r\n    if (!moduleSlots || moduleSlots.length === 0) return false;\r\n\r\n    return moduleSlots\r\n      .map((moduleSlot) => {\r\n        if (!moduleSlot || !moduleSlot.item) return emptyText;\r\n        if (!moduleSlot.charge) return moduleSlot.item.typeName;\r\n        return moduleSlot.item.typeName.concat(\r\n          \", \",\r\n          moduleSlot.charge.typeName\r\n        );\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        if (!droneSlot || !droneSlot.item) return \"\";\r\n        return `${droneSlot.item.typeName} x${droneSlot.item.typeCount}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildCompareTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit] ${fit?.ship?.typeState}`;\r\n    const miscSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Misc slot]\");\r\n    const lowSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const drones = EFT.#buildCompareTextFromFit_droneSlots(fit?.droneSlots);\r\n\r\n    return [\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      drones,\r\n    ].join(\"\\n\\n\");\r\n  }\r\n  static #buildCompareTextFromFit_moduleSlots = function (slots, blankText) {\r\n    if (!slots) return \"\";\r\n    return slots\r\n      .map((slot) => {\r\n        if (!slot || !slot.item) return blankText;\r\n        if (!slot.charge) return `${slot.item.typeName} ${slot.item.typeState}`;\r\n        return `${slot.item.typeName}, ${slot.charge.typeName} ${slot.item.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildCompareTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        const drone = droneSlot.item;\r\n        return `${drone.typeName} x${drone.typeCount} ${drone.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  static #common_findIdByName = function (typeName, typeIDs) {\r\n    if (!typeName) return false;\r\n\r\n    const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n    return !!type ? type : false;\r\n  };\r\n}\r\n","export function findAttributesByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeName.constructor === String) {\r\n    return findAttributeByName(item, attributeName);\r\n  } else if (attributeName.constructor === Array) {\r\n    const attributes = attributeName.map((entry) =>\r\n      findAttributeByName(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nfunction findAttributeByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeName === attributeName\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n\r\nexport function findAttributesbyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeID.constructor === Number) {\r\n    return findAttributebyID(item, attributeID);\r\n  } else if (attributeID.constructor === Array) {\r\n    const attributes = attributeID.map((entry) =>\r\n      findAttributebyID(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nexport function findAttributebyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeID === attributeID\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  else if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport Slot from \"./Slot\";\r\nimport { useState, useEffect } from \"react\";\r\nimport EFT from \"../services/EFT\";\r\nimport { translateVariant } from \"../Drawers\";\r\nimport { getSlotCount } from \"../FittingDrawer/FittingDrawer.jsx\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes\";\r\nimport { Avatar, Divider, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"relative\",\r\n  },\r\n  lodingIndicator: {\r\n    position: \"absolute\",\r\n    height: 10,\r\n    width: 10,\r\n    top: 2,\r\n    left: 2,\r\n    backgroundColor: theme.palette.property.gre,\r\n  },\r\n  divider: {\r\n    width: \"200%\",\r\n  },\r\n}));\r\n\r\nexport default function Slots(props) {\r\n  const classes = useStyles();\r\n  //prettier-ignore\r\n  const [rawItems, setRawItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [rawCharges, setRawCharges] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedItems, setFetchedItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedCharges, setFetchedCharges] = useState(new Array(props.slotCount).fill(false));\r\n  const setters = {\r\n    setRawItems,\r\n    setFetchedItems,\r\n    setRawCharges,\r\n    setFetchedCharges,\r\n  };\r\n\r\n  const [activeSlotNumber, setActiveSlotNumber] = useState(0);\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const sessionRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    setRawItems(new Array(props.slotCount).fill(false));\r\n    setRawCharges(new Array(props.slotCount).fill(false));\r\n  }, [props.slots?.ship?.typeID]);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    rawItems.length = props.slotCount;\r\n    setRawItems(Array.from(rawItems, (item) => item || false));\r\n    rawCharges.length = props.slotCount;\r\n    setRawCharges(Array.from(rawCharges, (charge) => charge || false));\r\n  }, [props.slotCount]);\r\n\r\n  //Import fitText using EFT class\r\n  useEffect(() => {\r\n    if (props.importFitText !== false) importSlots(props, setters);\r\n  }, [props.importFitText]);\r\n\r\n  //Raw items, charges input [REFACTOR!!]\r\n  useEffect(() => {\r\n    switch (props.listItems[props.variant]) {\r\n      case false:\r\n      case undefined:\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawItems[activeSlotNumber] = false;\r\n        rawCharges[activeSlotNumber] = false;\r\n        break;\r\n      case \"ADD\":\r\n        const activeItem = rawItems[activeSlotNumber];\r\n        activeItem[\"typeCount\"] = loopNumber(activeItem.typeCount, 1, 6);\r\n        setRawItems([...rawItems]);\r\n        props.dispatchListItems({ type: props.variant, payload: false });\r\n        return;\r\n      case \"activation\":\r\n        changeState(rawItems[activeSlotNumber], \"activation\");\r\n        break;\r\n      case \"offline\":\r\n        changeState(rawItems[activeSlotNumber], \"offline\");\r\n        break;\r\n      case \"passive\":\r\n        changeState(rawItems[activeSlotNumber], \"passive\");\r\n        break;\r\n      case \"overload\":\r\n        changeState(rawItems[activeSlotNumber], \"overload\");\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); return;\r\n      default:\r\n        // New item is comming\r\n        if (validateHardpoints(props.fit, props.listItems[props.variant])) {\r\n          assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber);\r\n          addCountToDroneSlots(props, rawItems[activeSlotNumber]);\r\n          changeState(rawItems[activeSlotNumber], \"activation\");\r\n        }\r\n        break;\r\n    }\r\n    setRawItems([...rawItems]);\r\n    setRawCharges([...rawCharges]);\r\n    props.dispatchListItems({ type: props.variant, payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(\r\n        loopNumber(activeSlotNumber, 0, props.slotCount, props.variant)\r\n      );\r\n  }, [props.listItems[props.variant]]);\r\n\r\n  useEffect(() => {\r\n    switch (props.listItems[\"AMMO\"]) {\r\n      case false:\r\n      case undefined:\r\n      case \"activation\":\r\n      case \"offline\":\r\n      case \"passive\":\r\n      case \"overload\":\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawCharges[activeSlotNumber] = false;\r\n        setFetchedCharges([...rawCharges]);\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); break;\r\n      default:\r\n        if (props.slotsOpen.AMMO.slotVariant !== props.variant) break;\r\n        if (!rawItems[activeSlotNumber]) break;\r\n        rawCharges[activeSlotNumber] = props.listItems[\"AMMO\"];\r\n        changeState(rawCharges[activeSlotNumber], \"passive\");\r\n        setRawCharges([...rawCharges]);\r\n    }\r\n    props.dispatchListItems({ type: \"AMMO\", payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(loopNumber(activeSlotNumber, 0, props.slotCount));\r\n  }, [props.listItems[\"AMMO\"]]);\r\n\r\n  //Fetched items, charges input\r\n  useEffect(() => {\r\n    sessionRef.current = sessionRef.current + 1;\r\n    setIsLoading(true);\r\n    (async function (props, rawItems, rawCharges, session) {\r\n      const data = await Promise.all(\r\n        createFetchPromises(props, rawItems, rawCharges, session)\r\n      );\r\n\r\n      const sessionData = data[data.length - 1];\r\n      const fetchedData = data.slice(0, data.length - 1);\r\n\r\n      if (sessionData !== sessionRef.current) {\r\n        /* console.error( \"ERROR_SESSION_COUNT_DEFECTED\", props.variant, {FETCHED_SESSION: sessionData, VALID_SESSION: sessionRef.current, fetchedData} ); */\r\n        return undefined;\r\n      } else if (fetchedData === false) {\r\n        /* console.warn(\"WARN_ITEM_CHARGE_COUNT_DEFECTED\", props.variant, {rawItems, rawCharges}) */\r\n      } else {\r\n        processFetchedData(props, fetchedData, rawItems, rawCharges, setters);\r\n      }\r\n      setIsLoading(false);\r\n    })(props, rawItems, rawCharges, sessionRef.current);\r\n  }, [checkData(rawItems, rawCharges)]);\r\n\r\n  if (props.slotCount > 0)\r\n    return (\r\n      <React.Fragment>\r\n        <div className={classes.root}>\r\n          <Divider\r\n            className={classes.divider}\r\n            style={{ backgroundColor: props.backgroundColor }}\r\n          />\r\n          {new Array(props.slotCount).fill(undefined).map((slot, index) => {\r\n            return (\r\n              <Slot\r\n                key={`${props.variant}:${index}`}\r\n                variant={props.variant}\r\n                open={props.open}\r\n                slotsOpen={props.slotsOpen}\r\n                slots={props.slots}\r\n                fetchedItem={fetchedItems[index]}\r\n                fetchedCharge={fetchedCharges[index]}\r\n                dispatchSlotsOpen={props.dispatchSlotsOpen}\r\n                setActiveSlot={props.setActiveSlot}\r\n                isActive={\r\n                  activeSlotNumber === index &&\r\n                  (props.slotsOpen[props.variant].open ||\r\n                    props.slotsOpen.AMMO.slotVariant === props.variant)\r\n                }\r\n                index={index}\r\n                setActiveSlotNumber={setActiveSlotNumber}\r\n                cache={props.cache}\r\n              />\r\n            );\r\n          })}\r\n          {isLoading && (\r\n            <Avatar className={classes.lodingIndicator}>{\"\"}</Avatar>\r\n          )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  else return false;\r\n}\r\nfunction validateHardpoints(fit, listItems) {\r\n  if (\r\n    listItems.typeIsTurretFitted !== true &&\r\n    listItems.typeIsLauncherFitted !== true\r\n  )\r\n    return true;\r\n\r\n  const pointLoad = extractHardpoints(fit);\r\n\r\n  if (listItems.typeIsTurretFitted === true) {\r\n    const turretPoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    return turretPoint > pointLoad.turretPointLoad;\r\n  } else if (listItems.typeIsLauncherFitted === true) {\r\n    const launcherPoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\"\r\n    return launcherPoint > pointLoad.launcherPointLoad;\r\n  }\r\n}\r\nfunction extractHardpoints(fit) {\r\n  let turretPointLoad = 0;\r\n  let launcherPointLoad = 0;\r\n  Fit.mapSlots(\r\n    fit,\r\n    (slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      if (isTurretFitted === true) return ++turretPointLoad;\r\n      if (isLauncherFitted === true) return ++launcherPointLoad;\r\n    },\r\n    { isIterate: { highSlots: true } }\r\n  );\r\n  return { turretPointLoad, launcherPointLoad };\r\n}\r\nfunction importSlots(props, setters) {\r\n  if (!props.importFitText) return undefined;\r\n\r\n  (async (fitText) => {\r\n    const typeIDs = await props.cache.wait(\"/typeIDsTable\");\r\n    const fitFromText = EFT.buildFitFromText(fitText, typeIDs);\r\n    const ship = await props.cache.wait(`typeID/${fitFromText.ship.typeID}`);\r\n\r\n    if (props.variant === \"SHIP\") {\r\n      setters.setRawItems([fitFromText.ship]);\r\n      return undefined;\r\n    }\r\n\r\n    const slotCount = getSlotCountAtImport({ ship }, fitFromText, props);\r\n    const items = new Array(slotCount).fill(false);\r\n    const charges = new Array(slotCount).fill(false);\r\n\r\n    const slots = fitFromText[translateVariant(props.variant)] || [];\r\n\r\n    //prettier-ignore\r\n    slots.forEach((slot, index) => {\r\n      items[index] = !!slot.item && { ...slot.item, typeState: \"activation\" };\r\n      charges[index] = !!slot.charge && {...slot.charge, typeState: \"passive\",};\r\n    });\r\n\r\n    setters.setRawItems(items);\r\n    setters.setRawCharges(charges);\r\n\r\n    props.dispatchImportStateFlag({ type: props.variant });\r\n  })(props.importFitText);\r\n}\r\nfunction getSlotCountAtImport(fit, fitFromText, props) {\r\n  const isTacCruiser = fit.ship.groupID === 963;\r\n  if (isTacCruiser === true)\r\n    return fitFromText[translateVariant(props.variant)].length;\r\n  else return getSlotCount(fit, props.variant);\r\n}\r\nfunction createFetchPromises(props, rawItems, rawCharges, session) {\r\n  if (rawItems.length !== rawCharges.length)\r\n    return [Promise.resolve(false), Promise.resolve(session)];\r\n\r\n  const promisesItem = rawItems.map((rawItem) => {\r\n    if (rawItem === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawItem?.typeID}`);\r\n  });\r\n  const promisesCharge = rawCharges.map((rawCharge) => {\r\n    if (rawCharge === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawCharge?.typeID}`);\r\n  });\r\n  const sessionPromise = Promise.resolve(session);\r\n  return [...promisesItem, ...promisesCharge, sessionPromise];\r\n}\r\nfunction processFetchedData(props, data, rawItems, rawCharges, setters) {\r\n  const items = data.slice(0, data.length / 2);\r\n  const charges = data.slice(data.length / 2);\r\n  const payload = [];\r\n  items.forEach((fetcheditem, index) => {\r\n    const itemState = !!rawItems[index]\r\n      ? Fit.getCurrentState({\r\n          ...rawItems[index],\r\n          ...fetcheditem,\r\n        })\r\n      : undefined;\r\n    const item = !!rawItems[index]\r\n      ? { ...rawItems[index], ...fetcheditem, typeState: itemState }\r\n      : false;\r\n    const charge = Fit.validateChargeSlot({ item, charge: charges[index] })\r\n      ? { ...rawCharges[index], ...charges[index] }\r\n      : false;\r\n    rawItems[index] = item;\r\n    rawCharges[index] = charge;\r\n    payload.push({ item, charge });\r\n    // If validation of charge fails, set rawCharge as false value\r\n    if (charge === false) rawCharges[index] = false;\r\n    // Set rawItems state as fetch complete(initial value was activation)\r\n    if (!!rawItems[index] && !!itemState)\r\n      rawItems[index][\"typeState\"] = itemState;\r\n  });\r\n\r\n  props.dispatchSlots({ type: props.variant, payload: payload });\r\n  setters.setFetchedCharges([...rawCharges]); // If validation of charge fails, set rawCharge as false value\r\n  setters.setFetchedItems([...rawItems]);\r\n}\r\n\r\nfunction assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber) {\r\n  rawItems[activeSlotNumber] = { ...props.listItems[props.variant] };\r\n\r\n  //Sync chargeSlots count to itemSlots count\r\n  if (rawCharges[activeSlotNumber] === undefined)\r\n    rawCharges[activeSlotNumber] = false;\r\n}\r\nfunction addCountToDroneSlots(props, activeItem) {\r\n  if (props.variant === \"DRONE_SLOT\" && activeItem.typeCount === undefined)\r\n    activeItem[\"typeCount\"] = 1;\r\n}\r\nfunction changeState(activeItem, state) {\r\n  if (activeItem.typeState === undefined)\r\n    activeItem[\"typeState\"] = \"activation\";\r\n\r\n  switch (state) {\r\n    case \"offline\":\r\n    case \"overload\":\r\n    case \"passive\":\r\n    case \"activation\":\r\n      activeItem.typeState = state;\r\n      break;\r\n    default:\r\n      activeItem.typeState = \"activation\";\r\n      break;\r\n  }\r\n}\r\nfunction checkData(rawItems, rawCharges) {\r\n  return [\r\n    ...hashTypes(rawItems),\r\n    ...hashState(rawItems),\r\n    ...hashCount(rawItems),\r\n    ...hashTypes(rawCharges),\r\n  ].join(\":\");\r\n}\r\nfunction hashTypes(types) {\r\n  return types.map((type) => !!type && type.typeName).join(\"-\");\r\n}\r\nfunction hashState(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeState).join(\"-\");\r\n}\r\nfunction hashCount(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeCount).join(\"-\");\r\n}\r\nfunction loopNumber(number, floor, ceiling, variant) {\r\n  if (variant === \"DRONE_SLOT\") {\r\n    if (number >= ceiling) return floor;\r\n    return number + 1;\r\n  }\r\n\r\n  if (number + 1 >= ceiling) return floor;\r\n  else return number + 1;\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport UnarchiveIcon from \"@material-ui/icons/Unarchive\";\r\nimport RecButton from \"../RecButton\";\r\nimport EFT from \"../services/EFT\";\r\nimport fittingLazyFetch from \"./fittingLazyFetch.js\";\r\nimport {\r\n  makeStyles,\r\n  Snackbar,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItem,\r\n  Tooltip,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { importInitializeFlag } from \"./FittingDrawer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  listItem: {\r\n    width: 300,\r\n    padding: 0,\r\n  },\r\n  listIcon: {\r\n    width: 35,\r\n    minWidth: 10,\r\n  },\r\n  warning: {\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nexport default function ImportExportButtons(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n\r\n  const [title, setTitle] = useState(\r\n    \"Something went wrong . reload the page\"\r\n  );\r\n  const [text, setText] = useState(false);\r\n\r\n  const handleImportClick = useCallback(() => {\r\n    copyTextFromClipboard().then((text) => {\r\n      setOpenAlert(true);\r\n      if (text === false) return setTitle(\"Permission denied\");\r\n      setText(text);\r\n      props.setImportFitText(text);\r\n      props.dispatchImportStateFlag({ type: \"START\" });\r\n      props.cache.wait(\"/typeIDsTable\").then((typeIDs) => {\r\n        const IDs = EFT.extractIDs(text, typeIDs);\r\n        if (!IDs || IDs.length === 0) setTitle(\"Unvalid EFT\");\r\n        else setTitle(\"Importing EFT\");\r\n        fittingLazyFetch(props.cache, IDs);\r\n      });\r\n    });\r\n  }, [props.setImportFitText, props.dispatchImportStateFlag, props.cache]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Tooltip title=\"Import\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton className={classes.button} onClick={handleImportClick}>\r\n            <ArchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Tooltip title=\"Export\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton\r\n            className={classes.button}\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(props.exportFitText);\r\n            }}\r\n          >\r\n            <UnarchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        open={openAlert}\r\n        onClose={() => {\r\n          setOpenAlert(false);\r\n        }}\r\n        ContentProps={{\r\n          elevation: 3,\r\n          style: {\r\n            backgroundColor: theme.palette.background.paper,\r\n            border: getSnackbarBorder(title, theme),\r\n          },\r\n        }}\r\n        message={\r\n          <ListItem className={classes.listItem}>\r\n            <ListItemIcon>\r\n              <ArchiveIcon className={classes.warning} />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={title}\r\n              secondary={text}\r\n              primaryTypographyProps={{\r\n                style: { color: theme.palette.text.primary, fontWeight: 700 },\r\n              }}\r\n              secondaryTypographyProps={{\r\n                style: { color: theme.palette.text.secondary },\r\n              }}\r\n            />\r\n          </ListItem>\r\n        }\r\n        autoHideDuration={5000}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nasync function copyTextFromClipboard() {\r\n  const permisson = await navigator.permissions.query({\r\n    name: \"clipboard-read\",\r\n  });\r\n  if (permisson.state === \"granted\" || permisson.state === \"prompt\") {\r\n    return navigator.clipboard.readText();\r\n  }\r\n  return false;\r\n}\r\nfunction getSnackbarBorder(title, theme) {\r\n  switch (title) {\r\n    case \"Importing EFT\":\r\n      return \"none\";\r\n    case \"Unvalid EFT\":\r\n      return `solid 3px ${theme.palette.property.org}`;\r\n    case \"Permission denied\":\r\n      return `solid 3px ${theme.palette.property.red}`;\r\n    default:\r\n      return \"none\";\r\n  }\r\n}\r\n","import { database } from \"../../../index\";\r\n\r\nexport default function lazyFetch(cache, typeIDs) {\r\n  typeIDs.forEach((typeID) => {\r\n    cache.get(`typeID/${typeID}`, () => {\r\n      return database\r\n        .ref(`typeIDs/${typeID}`)\r\n        .once(\"value\")\r\n        .then((data) => data.val());\r\n    });\r\n  });\r\n}\r\n","import React, { useReducer } from \"react\";\r\nimport { Drawer, Button, makeStyles, ButtonGroup } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport Slots from \"../Slots/Slots.jsx\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport ImportExportButtons from \"./ImportExportButtons.jsx\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes.js\";\r\nimport Fit from \"../../../fitter/src/Fit.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootClose: {\r\n    width: 0,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootExpand: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootRetract: {\r\n    width: 60,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  expandButton: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    opacity: 1,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    zIndex: 1,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n\r\n  child: {\r\n    width: \"100%\",\r\n    overflowX: \"hidden\",\r\n    overflowY: \"auto\",\r\n    paddingBottom: 35,\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport const importInitializeFlag = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n};\r\n\r\nfunction importStateFlagReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"START\":\r\n      return importInitializeFlag;\r\n    default:\r\n      return {\r\n        ...state,\r\n        [action.type]: true,\r\n      };\r\n  }\r\n}\r\n\r\nexport default function FittingDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [importFitText, setImportFitText] = useState(false);\r\n  const [importStateFlag, dispatchImportStateFlag] = useReducer(\r\n    importStateFlagReducer,\r\n    importInitializeFlag\r\n  );\r\n\r\n  const childRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    //If import is finished\r\n    if (!Object.values(importStateFlag).includes(false)) {\r\n      setImportFitText(false);\r\n    }\r\n  }, [importStateFlag]);\r\n\r\n  useEffect(() => {\r\n    const savedSlots = JSON.parse(localStorage.getItem(`${props.tag}SLOTS`));\r\n    const savedEFT = localStorage.getItem(`${props.tag}EFT`);\r\n    /* console.log(props.tag, savedSlots, savedEFT); */\r\n    if (!savedSlots?.ship?.typeID || !savedEFT) return;\r\n\r\n    props.cache.set(`typeID/${savedSlots.ship.typeID}`, savedSlots.ship);\r\n    Fit.mapSlots(\r\n      savedSlots,\r\n      (slot) => {\r\n        if (!!slot?.item?.typeID)\r\n          props.cache.set(`typeID/${slot.item.typeID}`, slot.item);\r\n        if (!!slot?.charge?.typeID)\r\n          props.cache.set(`typeID/${slot.charge.typeID}`, slot.charge);\r\n      },\r\n      {\r\n        isIterate: {\r\n          miscSlots: true,\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          rigSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    setImportFitText(savedEFT);\r\n    dispatchImportStateFlag({ type: \"START\" });\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={props.open}\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: classes[switchExpandOpen(props)],\r\n        }}\r\n      >\r\n        <ButtonGroup>\r\n          <ImportExportButtons\r\n            exportFitText={props.exportFitText}\r\n            setImportFitText={setImportFitText}\r\n            dispatchImportStateFlag={dispatchImportStateFlag}\r\n            cache={props.cache}\r\n          />\r\n        </ButtonGroup>\r\n        <Button\r\n          className={classes.expandButton}\r\n          onClick={() => props.setExpand(!props.expand)}\r\n        >\r\n          {!!props.expand ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n        </Button>\r\n\r\n        <div className={classes.child}>\r\n          <div ref={childRef}>\r\n            {[\r\n              \"SHIP\",\r\n              \"MISC_SLOT\",\r\n              \"HIGH_SLOT\",\r\n              \"MID_SLOT\",\r\n              \"LOW_SLOT\",\r\n              \"RIG_SLOT\",\r\n              \"DRONE_SLOT\",\r\n            ].map((variant) => {\r\n              return (\r\n                <Slots\r\n                  key={variant}\r\n                  importFitText={importFitText}\r\n                  importStateFlag={importStateFlag}\r\n                  dispatchImportStateFlag={dispatchImportStateFlag}\r\n                  variant={variant}\r\n                  slotCount={getSlotCount(props.fit, variant)}\r\n                  {...props}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          className={classes.retractButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({ type: \"RESET\" });\r\n            props.setOpen(false);\r\n          }}\r\n        >\r\n          <FirstPageIcon />\r\n        </Button>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction switchExpandOpen(props) {\r\n  if (!props.open) return \"rootClose\";\r\n  if (!props.expand) return \"rootRetract\";\r\n  return \"rootExpand\";\r\n}\r\nexport function getSlotCount(slots, variant) {\r\n  if (variant === \"SHIP\") return 1;\r\n  if (!slots.ship || !slots.ship.typeAttributesStats) return 0;\r\n\r\n  const ship = slots.ship;\r\n  const attrs = ship.typeAttributesStats;\r\n  switch (variant) {\r\n    case \"MISC_SLOT\":\r\n      switch (ship.groupID) {\r\n        // groupID: 963, name.en: Strategic Cruiser\r\n        case 963:\r\n          return 4;\r\n        // groupID: 1305, name.en: Tactical Destroyer\r\n        case 1305:\r\n          return 1;\r\n        default:\r\n          return 0;\r\n      }\r\n    case \"HIGH_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 14)?.value;\r\n    case \"MID_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 13)?.value;\r\n    case \"LOW_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 12)?.value;\r\n    case \"RIG_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 1137)?.value; //rigslot count is not sure 1137 or 1154\r\n    case \"DRONE_SLOT\":\r\n      return getDroneSlotCount(slots);\r\n  }\r\n}\r\nfunction getDroneSlotCount(slots) {\r\n  const droneBandwidth = findAttributebyID(slots.ship, 1271); // attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  if (!droneBandwidth) return 0;\r\n\r\n  if (!slots.droneSlots) return 1;\r\n  return slots.droneSlots.reduce((acc, slot, index) => {\r\n    if (!!slot.item) return index + 2;\r\n    return acc;\r\n  }, 1);\r\n}\r\n","import React from \"react\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\n\r\nexport default function StatTextField(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 4,\r\n        width: \"70%\",\r\n      }}\r\n    >\r\n      <TextField\r\n        style={{ width: \"100%\" }}\r\n        label={\r\n          <Typography noWrap style={{ width: \"100%\" }}>\r\n            {!!switchUnit(props.attr.unitID)\r\n              ? `${props.attr.attributeName} (${switchUnit(props.attr.unitID)})`\r\n              : props.attr.attributeName}\r\n          </Typography>\r\n        }\r\n        defaultValue={props.attr.value}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nfunction switchUnit(unitID) {\r\n  if (!unitID) return false;\r\n\r\n  const unit = eveUnit.find((unit) => unit.unitID === unitID);\r\n  if (unit === undefined)\r\n    console.log(\r\n      \"ERROR\",\r\n      `unitID:${unitID} not found. dear developer please update database!`\r\n    );\r\n  return unit?.displayName;\r\n}\r\nconst eveUnit = [\r\n  { unitID: 1, displayName: \"m\" },\r\n  { unitID: 2, displayName: \"kg\" },\r\n  { unitID: 3, displayName: \"sec\" },\r\n  { unitID: 4, displayName: \"A\" },\r\n  { unitID: 5, displayName: \"K\" },\r\n  { unitID: 6, displayName: \"mol\" },\r\n  { unitID: 7, displayName: \"cd\" },\r\n  { unitID: 8, displayName: \"m2\" },\r\n  { unitID: 9, displayName: \"m3\" },\r\n  { unitID: 10, displayName: \"m/sec\" },\r\n  { unitID: 11, displayName: \"m/sec\" },\r\n  { unitID: 12, displayName: \"m-1\" },\r\n  { unitID: 13, displayName: \"kg/m3\" },\r\n  { unitID: 14, displayName: \"m3/kg\" },\r\n  { unitID: 15, displayName: \"A/m2\" },\r\n  { unitID: 16, displayName: \"A/m\" },\r\n  { unitID: 17, displayName: \"mol/m3\" },\r\n  { unitID: 18, displayName: \"cd/m2\" },\r\n  { unitID: 19, displayName: \"kg/kg = 1\" },\r\n  { unitID: 101, displayName: \"s\" },\r\n  { unitID: 102, displayName: \"mm\" },\r\n  { unitID: 103, displayName: \"MegaPascals\" },\r\n  { unitID: 104, displayName: \"x\" },\r\n  { unitID: 105, displayName: \"%\" },\r\n  { unitID: 106, displayName: \"tf\" },\r\n  { unitID: 107, displayName: \"MW\" },\r\n  { unitID: 108, displayName: \"%\" },\r\n  { unitID: 109, displayName: \"%\" },\r\n  { unitID: 111, displayName: \"%\" },\r\n  { unitID: 112, displayName: \"rad/sec\" },\r\n  { unitID: 113, displayName: \"HP\" },\r\n  { unitID: 114, displayName: \"GJ\" },\r\n  { unitID: 115, displayName: \"groupID\" },\r\n  { unitID: 116, displayName: \"typeID\" },\r\n  { unitID: 117, displayName: \"Sizeclass\" },\r\n  { unitID: 118, displayName: \"Ore units\" },\r\n  { unitID: 119, displayName: \"attributeID\" },\r\n  { unitID: 120, displayName: \"points\" },\r\n  { unitID: 121, displayName: \"%\" },\r\n  { unitID: 122, displayName: \"Fitting slots\" },\r\n  { unitID: 123, displayName: \"sec\" },\r\n  { unitID: 124, displayName: \"%\" },\r\n  { unitID: 125, displayName: \"N\" },\r\n  { unitID: 126, displayName: \"ly\" },\r\n  { unitID: 127, displayName: \"%\" },\r\n  { unitID: 128, displayName: \"Mbit/sec\" },\r\n  { unitID: 129, displayName: \"Hours\" },\r\n  { unitID: 133, displayName: \"ISK\" },\r\n  { unitID: 134, displayName: \"m3/hour\" },\r\n  { unitID: 135, displayName: \"AU\" },\r\n  { unitID: 136, displayName: \"Slot\" },\r\n  { unitID: 137, displayName: \"Boolean\" },\r\n  { unitID: 138, displayName: \"units\" },\r\n  { unitID: 139, displayName: \"+\" },\r\n  { unitID: 140, displayName: \"Level\" },\r\n  { unitID: 141, displayName: \"hardpoints\" },\r\n  { unitID: 142, displayName: \"1=Male 2=Unisex 3=Female\" },\r\n  { unitID: 143, displayName: \"Datetime\" },\r\n];\r\n","import React from \"react\";\r\nimport { Typography, TextField, InputAdornment } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport StatTextField from \"./StatTextField\";\r\n\r\nexport default function Stat(props) {\r\n  const [type, setType] = useState(false);\r\n  const [attributesCategories, setAttributesCategories] = useState(false);\r\n\r\n  const [typeName, setTypeName] = useState(false);\r\n  const [builtList, setList] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/attributesCategories\").then((data) => {\r\n      setAttributesCategories(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setType(props.type);\r\n  }, [props.type]);\r\n\r\n  useEffect(() => {\r\n    if (!!type && !!attributesCategories) {\r\n      setTypeName(type.typeName);\r\n      setList(createStatList(type, attributesCategories));\r\n    }\r\n  }, [attributesCategories, type]);\r\n  return (\r\n    <React.Fragment>\r\n      <Typography\r\n        style={{\r\n          fontSize: 26,\r\n          fontWeight: 1000,\r\n          letterSpacing: -1.5,\r\n          lineHeight: 1,\r\n          marginRight: 20,\r\n          textDecoration: \"underline\",\r\n        }}\r\n        variant=\"h4\"\r\n        align=\"right\"\r\n      >\r\n        {typeName}\r\n      </Typography>\r\n      <div style={{ marginTop: 20 }}>{builtList}</div>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction createStatList(item, attributesCategories) {\r\n  const etc = [\"Miscellaneous\", \"Required Skills\", \"Graphics\", \"NULL\"];\r\n  const dividedAttributes = filterAttributes(item, attributesCategories).reduce(\r\n    (acc, filtered) => {\r\n      if (etc.includes(filtered.name))\r\n        acc.etc[etc.indexOf(filtered.name)] = filtered;\r\n      else acc.main.push(filtered);\r\n      return acc;\r\n    },\r\n    { main: [], etc: new Array(etc.length).fill(undefined) }\r\n  );\r\n\r\n  return [...dividedAttributes.main, ...dividedAttributes.etc].map(\r\n    (filtered) => {\r\n      if (!filtered || !filtered.name || filtered.attributes.length === 0)\r\n        return undefined;\r\n\r\n      const attrs = filtered.attributes;\r\n      const name = filtered.name;\r\n      const nameSpace = [];\r\n\r\n      return (\r\n        <React.Fragment key={name}>\r\n          <Typography\r\n            style={{\r\n              fontSize: 20,\r\n              fontWeight: 1000,\r\n              letterSpacing: -1.5,\r\n              lineHeight: 1,\r\n              marginRight: 20,\r\n              marginTop: 20,\r\n            }}\r\n            variant=\"h4\"\r\n            align=\"right\"\r\n          >\r\n            {name}\r\n          </Typography>\r\n          {attrs.map((attr) => {\r\n            const key = `${attr.attributeName}:${attr.value}`;\r\n            if (!nameSpace.includes(key)) {\r\n              nameSpace.push(key);\r\n              return <StatTextField key={key} attr={attr} />;\r\n            }\r\n          })}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  );\r\n}\r\nfunction filterAttributes(type, attributesCategories) {\r\n  if (!type || !type.typeAttributesStats) return undefined;\r\n  const typeAttributesStats = type.typeAttributesStats;\r\n\r\n  const filteredAttributes = new Array(50)\r\n    .fill(undefined)\r\n    .map((attr, index) => ({\r\n      name: attributesCategories[index]?.name,\r\n      attributes: [],\r\n    }));\r\n\r\n  typeAttributesStats.forEach((attr) => {\r\n    if (!attr.attributeCategoryID) filteredAttributes[0].attributes.push(attr);\r\n    else filteredAttributes[attr.attributeCategoryID].attributes.push(attr);\r\n  });\r\n\r\n  return filteredAttributes;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Drawer,\r\n  makeStyles,\r\n  Button,\r\n  ButtonGroup,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport { useState } from \"react\";\r\nimport Stat from \"./Stat\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"scroll\",\r\n    padding: \"10px 20px 0px 10px\",\r\n    marginBottom: 40,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n    borderRadius: 0,\r\n  },\r\n  rootButton: {\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport default function StatDrawer(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [tabIndex, setTabIndex] = useState(0);\r\n\r\n  const styleButton = useCallback(\r\n    (index) => {\r\n      let backgroundColor = theme.palette.action.hover;\r\n      let color = theme.palette.text.disabled;\r\n\r\n      if (tabIndex === index) {\r\n        backgroundColor = theme.palette.action.selected;\r\n        color = theme.palette.text.primary;\r\n      }\r\n      return {\r\n        backgroundColor: backgroundColor,\r\n        color: color,\r\n        marginBottom: 10,\r\n      };\r\n    },\r\n    [tabIndex]\r\n  );\r\n\r\n  return (\r\n    <Drawer\r\n      anchor={!!props.anchor ? props.anchor : \"right\"}\r\n      open={props.open}\r\n      variant=\"temporary\"\r\n      classes={{ paper: classes.rootPaper }}\r\n      onClose={() => {\r\n        props.dispatchSlotsOpen({\r\n          type: \"STAT\",\r\n          payload: {\r\n            open: false,\r\n          },\r\n        });\r\n        setTabIndex(0);\r\n      }}\r\n    >\r\n      <div className={classes.child}>\r\n        {props.slot?.charge && (\r\n          <ButtonGroup fullWidth variant=\"text\">\r\n            <Button style={styleButton(0)} onClick={() => setTabIndex(0)}>\r\n              ITEM\r\n            </Button>\r\n            <Button style={styleButton(1)} onClick={() => setTabIndex(1)}>\r\n              CHARGE\r\n            </Button>\r\n          </ButtonGroup>\r\n        )}\r\n        <div hidden={tabIndex !== 0}>\r\n          <Stat\r\n            type={\r\n              props.slot?.typeID !== undefined ? props.slot : props.slot?.item\r\n            }\r\n            cache={props.cache}\r\n          />\r\n        </div>\r\n        <div hidden={tabIndex !== 1}>\r\n          <Stat type={props.slot?.charge} cache={props.cache} />\r\n        </div>\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={() => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        <LastPageIcon />\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport clsx from \"clsx\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { ListItemAvatar, Avatar } from \"@material-ui/core\";\r\nimport { storage } from \"../../../index\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    paddingLeft: theme.spacing(1),\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function NestedList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(props.opened);\r\n  const [image, setImage] = React.useState(\"\");\r\n\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.opened === true) setOpen(true);\r\n\r\n    return () => {\r\n      setOpen(false);\r\n    };\r\n  }, [props.opened]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    if (props.itemData.iconTypeID === 3584)\r\n      // description: Severed head (soaked in formaldehyde) - Unknown\r\n      props.cache\r\n        .get(`/icons/${props.itemData.iconFileName}`, () => {\r\n          return storage\r\n            .ref(`eveIcons/${props.itemData.iconFileName}`)\r\n            .getDownloadURL()\r\n            .then(async (url) => {\r\n              return await fetch(url)\r\n                .then((data) => data.arrayBuffer())\r\n                .then((arrayBuffer) => convertArrayBufferToBase64(arrayBuffer));\r\n            });\r\n        })\r\n        .then((data) => !!isMounted && setImage(data));\r\n    else setImage(feedSource(props.itemData));\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [props.cache, props.itemData]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemAvatar>\r\n          <Avatar style={{ width: 30, height: 30 }} src={image}>\r\n            ?\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={props.itemData.marketGroupName}\r\n          primaryTypographyProps={{ variant: \"subtitle2\" }}\r\n        />\r\n        <IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: open,\r\n          })}\r\n          onClick={handleClick}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <List className={classes.nested}>{props.children}</List>\r\n      </Collapse>\r\n    </List>\r\n  );\r\n}\r\nfunction feedSource(itemData) {\r\n  return `https://images.evetech.net/types/${itemData?.iconTypeID}/icon?size=32`;\r\n}\r\nfunction convertArrayBufferToBase64(arrayBuffer) {\r\n  const base64Flag = \"data:image/jpeg;base64,\";\r\n\r\n  let binary = \"\";\r\n  const bytes = [].slice.call(new Uint8Array(arrayBuffer));\r\n  bytes.forEach((b) => (binary += String.fromCharCode(b)));\r\n  return base64Flag + window.btoa(binary);\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  Avatar,\r\n  makeStyles,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  root: {\r\n    padding: \"8px 16px 8px 16px\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n  },\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    marginRight: 10,\r\n  },\r\n}));\r\n\r\nexport default function ItemSelection(props) {\r\n  const classes = useStyle();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <ListItem\r\n      className={classes.root}\r\n      key={props.itemData.typeName}\r\n      button\r\n      onClick={handleItemClick(props)}\r\n    >\r\n      <Avatar\r\n        style={{\r\n          backgroundColor: getTechColor(props.itemData, theme),\r\n        }}\r\n        className={classes.rootAvatar}\r\n      >\r\n        {\"\" /* Necessary! */}\r\n      </Avatar>\r\n\r\n      <ListItemText\r\n        primary={props.itemData.typeName}\r\n        primaryTypographyProps={{ variant: \"caption\" }}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst handleItemClick = (props) => () => {\r\n  props.setItem && props.setItem(props.itemData);\r\n  props.outboundSetItem && props.outboundSetItem(props.itemData);\r\n};\r\n\r\nfunction getTechColor(item, theme) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.typeMetaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return theme.palette.action.hover;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\n","export default function headFilterInvTypesTable(props) {\r\n  if (!props.table.invTypesTable) return undefined;\r\n\r\n  const allowedAttributes = props.filter.allowedAttributes;\r\n\r\n  if (allowedAttributes.constructor === Array) {\r\n    let invTypesTable = props.table.invTypesTable;\r\n\r\n    allowedAttributes.forEach((entry) => {\r\n      invTypesTable = bodyFilterInvTypesTable(entry, invTypesTable);\r\n    });\r\n\r\n    return invTypesTable;\r\n  }\r\n\r\n  return props.table.invTypesTable;\r\n}\r\n\r\nfunction bodyFilterInvTypesTable(allowedAttribute, invTypesTable) {\r\n  if (!allowedAttribute.attributeName) return invTypesTable;\r\n\r\n  return invTypesTable.filter((entry) => {\r\n    switch (allowedAttribute?.value?.constructor) {\r\n      case Boolean:\r\n      case Number:\r\n        return entry[allowedAttribute.attributeName] === allowedAttribute.value;\r\n      case Array:\r\n        return allowedAttribute.value.includes(\r\n          entry[allowedAttribute.attributeName]\r\n        );\r\n      case String:\r\n        return entry[allowedAttribute.attributeName]\r\n          .toLowerCase()\r\n          .includes(allowedAttribute.value.toLowerCase());\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport NestedList from \"../../components/simpleEdition/shipCardComponents/NestedListDedicated\";\r\nimport ItemSelection from \"../../components/itemSelection/ItemSelection\";\r\nimport isTerminalGroup from \"./isTerminalGroup\";\r\nimport findChildrenMarketGroup from \"./findChildrenMarketGroup\";\r\nimport findChildrenInvTypes from \"./findChildrenInvTypes\";\r\nimport isArrayEmpty from \"./isArrayEmpty\";\r\nimport filterInvTypesTable from \"./filterInvTypesTable\";\r\n\r\n// Judge creating multuple list or not by rootMaeketGroupID's condition\r\nexport default function headCreateEveList(props) {\r\n  if (!props.rootMarketGroupID) return;\r\n\r\n  props.table.invTypesTable = filterInvTypesTable(props);\r\n  if (props.table.invTypesTable.length > 50) props.opened = false;\r\n\r\n  if (props.rootMarketGroupID.constructor === Number) {\r\n    return bodyCreateEveList(props);\r\n  }\r\n  if (props.rootMarketGroupID.constructor === Array) {\r\n    return props.rootMarketGroupID.map((entry) => {\r\n      return bodyCreateEveList({\r\n        ...props,\r\n        rootMarketGroupID: entry,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction bodyCreateEveList(props) {\r\n  if (!validateTables(props)) return false;\r\n\r\n  if (isTerminalGroup(props)) {\r\n    return renderChildrenInvTypes(props);\r\n  } else {\r\n    return renderChildrenMarketGroup(props);\r\n  }\r\n}\r\n\r\nfunction renderChildrenInvTypes(props) {\r\n  const childrenInvTypes = findChildrenInvTypes(props);\r\n  return childrenInvTypes.map((entry) => {\r\n    return (\r\n      <ItemSelection\r\n        setItem={props.state.setItem}\r\n        outboundSetItem={props.state.outboundSetItem}\r\n        key={entry.typeName}\r\n        itemData={entry}\r\n      />\r\n    );\r\n  });\r\n}\r\nfunction renderChildrenMarketGroup(props) {\r\n  const childrenMarketGroup = findChildrenMarketGroup(props);\r\n  return childrenMarketGroup.map((entry) => {\r\n    const renderedChildrenMarketGroups = bodyCreateEveList({\r\n      ...props,\r\n      rootMarketGroupID: entry.marketGroupID,\r\n    });\r\n\r\n    if (!isArrayEmpty(renderedChildrenMarketGroups)) return undefined;\r\n    else\r\n      return (\r\n        <NestedList\r\n          opened={!!props.opened}\r\n          key={entry.marketGroupName}\r\n          itemData={entry}\r\n          eveListConfig={props}\r\n          cache={props.cache}\r\n        >\r\n          {renderedChildrenMarketGroups}\r\n        </NestedList>\r\n      );\r\n  });\r\n}\r\n\r\nfunction validateTables(props) {\r\n  if (!!props.table.marketGroupTable && !!props.table.invTypesTable) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport const defalutEveListConfigStructure = {\r\n  opened: false,\r\n  rootMarketGroupID: 2,\r\n  table: {\r\n    marketGroupTable: false,\r\n    invTypesTable: false,\r\n  },\r\n  filter: {\r\n    allowedAttributes: [\r\n      {\r\n        attributeName: false,\r\n        value: false,\r\n      },\r\n    ],\r\n  },\r\n  state: {\r\n    item: false,\r\n    setItem: false,\r\n    outboundSetItem: false,\r\n  },\r\n};\r\n","export default function isTerminalGroup(props) {\r\n  if (!props.table.marketGroupTable || props.rootMarketGroupID === undefined)\r\n    return undefined;\r\n  const marketCategory = props.table.marketGroupTable.find(\r\n    (entry) => entry.marketGroupID === props.rootMarketGroupID\r\n  );\r\n  return marketCategory.hasTypes;\r\n}\r\n","export default function findChildrenInvTypes(props) {\r\n  if (!props.table.invTypesTable) return [];\r\n\r\n  const invTypesTable = props.table.invTypesTable;\r\n  const marketGroupID = props.rootMarketGroupID;\r\n\r\n  const reultTEST = bubbleSortByMetaLevel(\r\n    invTypesTable.filter((entry) => entry.marketGroupID === marketGroupID)\r\n  );\r\n\r\n  return reultTEST;\r\n}\r\nfunction bubbleSortByMetaLevel(childrenTypeIDs) {\r\n  let len = childrenTypeIDs.length;\r\n\r\n  let swapped;\r\n  do {\r\n    swapped = false;\r\n    for (let i = 0; i < len - 1; i++) {\r\n      if (\r\n        childrenTypeIDs[i].typeMetaGroupID >\r\n        childrenTypeIDs[i + 1].typeMetaGroupID\r\n      ) {\r\n        let tmp = childrenTypeIDs[i];\r\n        childrenTypeIDs[i] = childrenTypeIDs[i + 1];\r\n        childrenTypeIDs[i + 1] = tmp;\r\n        swapped = true;\r\n      }\r\n    }\r\n  } while (swapped);\r\n  return childrenTypeIDs;\r\n}\r\n","export default function findChildrenMarketGroup(props) {\r\n  if (!props.table.marketGroupTable) return [];\r\n\r\n  return props.table.marketGroupTable.filter((entry) => {\r\n    return entry.parentGroupID === props.rootMarketGroupID;\r\n  });\r\n}\r\n","export default function isArrayEmpty(renderedChildrenMarketGroup) {\r\n  if (renderedChildrenMarketGroup.length === 0) return false;\r\n\r\n  for (let entry of renderedChildrenMarketGroup) {\r\n    if (entry !== undefined) return true;\r\n  }\r\n  return false;\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport createEveList from \"../../services/eveListConstruction/createEveList\";\r\nimport { defalutEveListConfigStructure } from \"../../services/eveListConstruction/createEveList\";\r\nimport { database } from \"../../index\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    minWidth: 350,\r\n    height: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    paddingTop: 0,\r\n  },\r\n}));\r\n\r\nexport default React.memo(function ItemSelectionListCache(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n\r\n  const [marketGroupTable, setMarketGroupTable] = useState(false);\r\n  const [invTypesTable, setInvTypesTable] = useState(false);\r\n\r\n  const [builtListStructure, setBuiltListStructure] = useState(undefined);\r\n  const [eveListConfig] = useState({\r\n    ...defalutEveListConfigStructure,\r\n    ...props.eveListConfig,\r\n    state: {\r\n      item: item,\r\n      setItem: setItem,\r\n      outboundSetItem: props.eveListConfig.state.outboundSetItem,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/marketCategories\").then((data) => {\r\n      setMarketGroupTable(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/typeIDsTable\").then((data) => setInvTypesTable(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item?.typeID) {\r\n      props.cache\r\n        .get(`typeID/${item.typeID}`, () => {\r\n          return database\r\n            .ref(`/typeIDs/${item.typeID}`)\r\n            .once(\"value\")\r\n            .then((data) => data.val());\r\n        })\r\n        .then((data) => {\r\n          setItem(data);\r\n          return;\r\n        });\r\n    }\r\n  }, [item?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const evelistConfigUpToDate = {\r\n      ...eveListConfig,\r\n      rootMarketGroupID: props.eveListConfig.rootMarketGroupID,\r\n      filter: props.eveListConfig.filter,\r\n      table: {\r\n        marketGroupTable: marketGroupTable,\r\n        invTypesTable: invTypesTable,\r\n      },\r\n      cache: props.cache,\r\n    };\r\n\r\n    if (!!marketGroupTable && !!invTypesTable) {\r\n      if (!props.nosave)\r\n        props.cache\r\n          .get(\r\n            //prettier-ignore\r\n            `eveListConfig:${JSON.stringify(props.eveListConfig)}}`,\r\n            () => {\r\n              return new Promise((resolve) => {\r\n                resolve(createEveList(evelistConfigUpToDate));\r\n              });\r\n            }\r\n          )\r\n          .then((data) => {\r\n            setBuiltListStructure(data);\r\n          });\r\n      else setBuiltListStructure(createEveList(evelistConfigUpToDate));\r\n    }\r\n  }, [marketGroupTable, invTypesTable, hashFilter(props.eveListConfig)]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <Collapse in timeout=\"auto\">\r\n        {builtListStructure}\r\n      </Collapse>\r\n    </List>\r\n  );\r\n});\r\nfunction hashFilter(eveListConfig) {\r\n  const rootMarketGroupID = eveListConfig.rootMarketGroupID;\r\n  const allowedAttributes = eveListConfig.filter.allowedAttributes;\r\n\r\n  return allowedAttributes\r\n    .map((attr) => [attr.attributeName, attr.value].join(\"-\"))\r\n    .join(\"|\")\r\n    .concat(rootMarketGroupID);\r\n}\r\n","import React from \"react\";\r\nimport { Grid, makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport RecButton from \"../RecButton\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport ExposurePlus1Icon from \"@material-ui/icons/ExposurePlus1\";\r\nimport SetStateMenu from \"./SetStateMenu\";\r\nimport SyncIcon from \"@material-ui/icons/Sync\";\r\nimport SyncDisabledIcon from \"@material-ui/icons/SyncDisabled\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  deleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n    color: theme.palette.button.color,\r\n  },\r\n  ammoDeleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.orange,\r\n    color: theme.palette.button.color,\r\n  },\r\n  showInfoButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.blue,\r\n    color: theme.palette.button.color,\r\n  },\r\n  addButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n    color: theme.palette.button.color,\r\n  },\r\n  loopOrNotButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    color: theme.palette.button.color,\r\n  },\r\n}));\r\n\r\nconst DeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.deleteButton}\r\n          onClick={() => props.setItem(\"DEL\")}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <CloseIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AmmoDeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete ammo\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.ammoDeleteButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({ type: \"AMMO\", payload: \"DEL\" });\r\n          }}\r\n          disabled={!props.activeCharge?.typeID}\r\n        >\r\n          <HighlightOffIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ShowInfoButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Information\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.showInfoButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({\r\n              type: \"STAT\",\r\n              payload: {\r\n                open: true,\r\n                slotVariant: props.activeSlot.type,\r\n                slotNumber: props.activeSlot.index,\r\n              },\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <InfoIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AddButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Add drone\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.addButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: \"DRONE_SLOT\",\r\n              payload: \"ADD\",\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <ExposurePlus1Icon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst LoopOrNotButton = function (props) {\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    if (props.liftedIsLoop !== isLoop) setIsLoop(props.liftedIsLoop);\r\n  }, [props.liftedIsLoop]);\r\n\r\n  return (\r\n    <Tooltip title=\"Loop through slots\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.loopOrNotButton}\r\n          style={{\r\n            backgroundColor: isLoop\r\n              ? theme.palette.property.green\r\n              : theme.palette.property.red,\r\n          }}\r\n          onClick={() => {\r\n            props.setItem(\"LOOPLOOP\");\r\n            props.setLiftedIsLoop(!isLoop);\r\n            setIsLoop(!isLoop);\r\n          }}\r\n        >\r\n          {isLoop ? <SyncIcon /> : <SyncDisabledIcon />}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function ListDrawerButtons(props) {\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={2}>\r\n        <DeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <AmmoDeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <ShowInfoButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <SetStateMenu {...props} />\r\n      </Grid>\r\n      {props.variant === \"DRONE_SLOT\" ? (\r\n        <Grid item xs={2}>\r\n          <AddButton {...props} />\r\n        </Grid>\r\n      ) : (\r\n        <Grid item xs={2}></Grid>\r\n      )}\r\n\r\n      <Grid item xs={2}>\r\n        <LoopOrNotButton {...props} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  TextField,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  textField: {\r\n    margin: \"3px 12px 0px 16px\",\r\n  },\r\n  textFieldInputLabel: {\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  textFieldinputLabel: {\r\n    fontWeight: 700,\r\n    padding: \"3px 0px 3px 1px\",\r\n    height: 26,\r\n  },\r\n  popperVisible: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })}`,\r\n  },\r\n  popperHidden: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })},${theme.transitions.create([\"z-index\"], {\r\n      duration: 300,\r\n    })}`,\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    maxHeight: 600,\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n}));\r\n\r\nconst SearchTextField = withStyles({\r\n  root: {\r\n    \"& input:valid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:invalid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:valid:focus + fieldset\": {\r\n      borderLeftWidth: 6,\r\n      padding: \"4px !important\", // override inline-style\r\n    },\r\n    width: \"90%\",\r\n  },\r\n})(TextField);\r\n\r\nexport default function ListDrawerSearchbar(props) {\r\n  const classes = useStyles();\r\n  const anchorEl = useRef(null);\r\n\r\n  const [searchOpen, setSearchOpen] = useState(false);\r\n  const [searchVisible, setSearchVisible] = useState(false);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  const handleSearchTextChange = useCallback((e) => {\r\n    setSearchText(e.target.value);\r\n    if (!!e.target.value) {\r\n      setSearchOpen(true);\r\n      setSearchVisible(true);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setSearchVisible(false);\r\n      }}\r\n    >\r\n      <div>\r\n        <SearchTextField\r\n          ref={anchorEl}\r\n          className={classes.textField}\r\n          InputLabelProps={{\r\n            className: classes.textFieldInputLabel,\r\n          }}\r\n          inputProps={{\r\n            className: classes.textFieldinputLabel,\r\n          }}\r\n          label=\"Search\"\r\n          onChange={handleSearchTextChange}\r\n          onFocus={handleSearchTextChange}\r\n        />\r\n\r\n        <Popper\r\n          style={{\r\n            opacity: searchVisible ? 1 : 0,\r\n            zIndex: searchVisible ? 2000 : -1000,\r\n          }}\r\n          className={\r\n            searchVisible ? classes.popperVisible : classes.popperHidden\r\n          }\r\n          open={searchOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom-start\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <ItemSelectionListCache\r\n                eveListConfig={mutateEveListConfig(\r\n                  props.eveListConfig,\r\n                  searchText\r\n                )}\r\n                cache={props.cache}\r\n                nosave\r\n              />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\nfunction mutateEveListConfig(eveListConfig, searchText) {\r\n  if (!searchText) return eveListConfig;\r\n\r\n  const mutatedAllowedAttributes = [...eveListConfig.filter.allowedAttributes];\r\n  mutatedAllowedAttributes.push({\r\n    attributeName: \"typeName\",\r\n    value: searchText,\r\n  });\r\n\r\n  return {\r\n    ...eveListConfig,\r\n    opened: true,\r\n    filter: {\r\n      allowedAttributes: mutatedAllowedAttributes,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, Button, makeStyles } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\nimport { useEffect } from \"react\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport ListDrawerButtons from \"./ListDrawerButtons\";\r\nimport { useCallback } from \"react\";\r\nimport ListDrawerSearchbar from \"./ListDrawerSearchbar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ListDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const getEveListConfig = useCallback(() => {\r\n    return {\r\n      rootMarketGroupID: getRootMarketGroupID(props.slots, props.variant),\r\n      state: {\r\n        outboundSetItem: setItem,\r\n      },\r\n      filter: {\r\n        allowedAttributes: [\r\n          ...allowedAttributes(props.variant),\r\n          ...props.filter,\r\n        ],\r\n      },\r\n      tag: props.tag,\r\n    };\r\n  }, [\r\n    props.variant,\r\n    getFilterID(props.filter),\r\n    getRootMarketGroupID(props.slots, props.variant),\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item) {\r\n      props.dispatchListItems({ type: props.variant, payload: item });\r\n      setItem(false);\r\n    }\r\n  }, [item]);\r\n\r\n  return (\r\n    <Drawer\r\n      classes={{ paper: classes.rootPaper }}\r\n      PaperProps={{\r\n        style: {\r\n          marginLeft: props.expand === true ? 300 : 60,\r\n        },\r\n      }}\r\n      anchor={width < 1000 ? \"right\" : \"left\"}\r\n      open={props.open}\r\n      variant=\"persistent\"\r\n    >\r\n      <ListDrawerButtons setItem={setItem} {...props} />\r\n      <ListDrawerSearchbar\r\n        eveListConfig={getEveListConfig()}\r\n        cache={props.cache}\r\n      />\r\n      <div className={classes.child}>\r\n        <ItemSelectionListCache\r\n          eveListConfig={getEveListConfig()}\r\n          cache={props.cache}\r\n        />\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={(e) => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        {width < 1000 ? <LastPageIcon /> : <FirstPageIcon />}\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nfunction getRootMarketGroupID(slots, variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return 4;\r\n    case \"MISC_SLOT\":\r\n      return getMiscSlotMarketGroupID(slots);\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return 9;\r\n    case \"RIG_SLOT\":\r\n      return 1111;\r\n    case \"AMMO\":\r\n      return 11;\r\n    case \"DRONE_SLOT\":\r\n      return 157;\r\n  }\r\n}\r\nfunction allowedAttributes(variant) {\r\n  switch (variant) {\r\n    case \"HIGH_SLOT\":\r\n      return [{ attributeName: \"typeIsHiPower\", value: true }];\r\n    case \"MID_SLOT\":\r\n      return [{ attributeName: \"typeIsMedPower\", value: true }];\r\n    case \"LOW_SLOT\":\r\n      return [{ attributeName: \"typeIsLoPower\", value: true }];\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nfunction getMiscSlotMarketGroupID(slots) {\r\n  switch (slots.ship?.typeID) {\r\n    case 34317: //Confessor\r\n      return 10001;\r\n    case 34828: //Jackdaw\r\n      return 10002;\r\n    case 35683: //Hecate\r\n      return 10003;\r\n    case 34562: //Svipul\r\n      return 10004;\r\n    case 29986: //Legion\r\n      return 1610;\r\n    case 29984: //Tengu\r\n      return 1625;\r\n    case 29988: //Proteus\r\n      return 1627;\r\n    case 29990: //Loki\r\n      return 1626;\r\n    default:\r\n      return 9;\r\n  }\r\n}\r\nfunction getFilterID(filters) {\r\n  return filters\r\n    .map((filter) => `${filter.attributeName}:${filter.value}`)\r\n    .join(\"-\");\r\n}\r\n","import React from \"react\";\r\nimport ListDrawer from \"./ListDrawer\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { translateVariant } from \"../Drawers\";\r\n\r\nexport default React.memo(function ListDrawers(props) {\r\n  const [activeItem, setActiveItem] = useState(false);\r\n  const [activeCharge, setActiveCharge] = useState(false);\r\n\r\n  const [liftedIsLoop, setLiftedIsLoop] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const activeSlot = getActiveSlot(props.fit, props.activeSlot);\r\n    setActiveItem(activeSlot?.item);\r\n    setActiveCharge(activeSlot?.charge);\r\n  }, [props.fitID, props.activeSlot]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {[\r\n        \"SHIP\",\r\n        \"MISC_SLOT\",\r\n        \"HIGH_SLOT\",\r\n        \"MID_SLOT\",\r\n        \"LOW_SLOT\",\r\n        \"RIG_SLOT\",\r\n        \"AMMO\",\r\n        \"DRONE_SLOT\",\r\n      ].map((variant) => {\r\n        return (\r\n          <ListDrawer\r\n            tag={props.tag}\r\n            key={variant}\r\n            variant={variant}\r\n            activeItem={activeItem}\r\n            activeCharge={activeCharge}\r\n            liftedIsLoop={liftedIsLoop}\r\n            setLiftedIsLoop={setLiftedIsLoop}\r\n            expand={props.expand}\r\n            open={props.slotsOpen[variant].open}\r\n            filter={generateFilter(props.slots, props.slotsOpen, variant)}\r\n            {...props}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n});\r\nfunction generateFilter(slots, slotsOpen, variant) {\r\n  switch (variant) {\r\n    case \"AMMO\": {\r\n      const filter = slotsOpen.AMMO.filter;\r\n      if (!filter.group || filter.group.length === 0) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeGroupID\",\r\n          value: filter.group,\r\n        },\r\n        { attributeName: \"typeChargeSize\", value: filter.size },\r\n      ];\r\n    }\r\n    case \"RIG_SLOT\": {\r\n      const filter = slotsOpen.RIG_SLOT.filter;\r\n      if (!filter || !filter.size) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeRigSize\",\r\n          value: filter.size,\r\n        },\r\n      ];\r\n    }\r\n    case \"DRONE_SLOT\": {\r\n      const filter = slotsOpen.DRONE_SLOT.filter;\r\n      if (filter.size === false || filter.size === undefined) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeDroneSize\",\r\n          value: [...new Array(filter.size + 1).keys()],\r\n        },\r\n      ];\r\n    }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nexport function getActiveSlot(fit, activeSlot) {\r\n  if (activeSlot.type === false || activeSlot.index === false)\r\n    return { item: false, charge: false };\r\n  if (activeSlot.type === \"SHIP\") return { item: fit.ship };\r\n\r\n  return fit[translateVariant(activeSlot.type)][activeSlot.index];\r\n}\r\n","export default class EveMath {\r\n  static getAmbientChargeRateMath(Cmax, Cnow, Tchg) {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  }\r\n  static getTurretAcurracy(summary, owner, target) {\r\n    const onBoardVector = owner.summary.situation.vector;\r\n    const hostileVector = target.summary.situation.vector;\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const trackingValue =\r\n      summary.range.tracking * (40000 / summary.range.signatureResolution);\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n\r\n    const _angularVelocity = EveMath.#getTurretAcurracy_angularVelocuty(\r\n      distance,\r\n      distanceVector,\r\n      onBoardVector,\r\n      hostileVector\r\n    );\r\n    const _trackingPart = EveMath.#getTurretAcurracy_trackingPart(\r\n      _angularVelocity,\r\n      trackingValue,\r\n      signatureRadius\r\n    );\r\n\r\n    const trackingModifier = Math.pow(0.5, _trackingPart);\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    return (trackingModifier * rangeModifier).toFixed(3);\r\n  }\r\n  static getLauncherAccuracy(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    return summary.range.optimalRange < distance * 1000 ? 0 : 1;\r\n  }\r\n  static getDroneAccracy(summary, owner, target) {\r\n    // owner is owner of drone! which is ship\r\n    if (summary.isSentry)\r\n      return EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n    const targetUnitVector = EveMath.#common_makeUnitVector(\r\n      target.summary.situation.vector\r\n    );\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n    const isChasing =\r\n      summary.capacity.propulsion.orbitVelocity < targetVelocity;\r\n    if (isChasing) {\r\n      const droneAccuracyModifier = EveMath.#getDroneAccracy_getAccuracyModifier(\r\n        summary,\r\n        targetVelocity\r\n      );\r\n      const absoluteVelocity = summary.capacity.propulsion.orbitVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      };\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return (\r\n        EveMath.getTurretAcurracy(summary, droneSituationsummary, target) *\r\n        droneAccuracyModifier\r\n      );\r\n    } else {\r\n      const absoluteVelocity =\r\n        summary.capacity.propulsion.orbitVelocity + targetVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      }; // drone positions at perpendicular to targetVector\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X +\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return EveMath.getTurretAcurracy(summary, droneSituationsummary, target);\r\n    }\r\n  }\r\n  static #getDroneAccracy_getAccuracyModifier = (summary, targetVelocity) => {\r\n    // Estimated modifier - drone movement is too complicated simplify the situation when target velocity is higher than orbit velocity\r\n    //prettier-ignore\r\n    const value = 1 -targetVelocity /\r\n          (summary.capacity.propulsion.maximumVelocity - summary.capacity.propulsion.orbitVelocity);\r\n    if (value >= 1) return 1;\r\n    return value >= 0 ? value : 0.01;\r\n  };\r\n  static getLauncherDamageModifier(summary, target) {\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n    const explosionRadius = summary.range.explosionRadius;\r\n    const explosionVelocity = summary.range.explosionVelocity;\r\n    const damageReductionFactor = summary.range.damageReductionFactor;\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n\r\n    const simplePart = signatureRadius / explosionRadius;\r\n    const complexPart = Math.pow(\r\n      (signatureRadius * explosionVelocity) /\r\n        (explosionRadius * targetVelocity),\r\n      damageReductionFactor\r\n    );\r\n\r\n    return Math.min(1, simplePart, complexPart);\r\n  }\r\n  static getTurretRandomDamageModifier() {\r\n    const randomDamageModifier = Math.random();\r\n    return randomDamageModifier < 0.01 ? 3 : randomDamageModifier + 0.49;\r\n  }\r\n  static getRangeModifier(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const optimal = summary.range.optimalRange;\r\n    const falloff = summary.range.falloffRange;\r\n    if (distance * 1000 > optimal + 3 * falloff) return 0;\r\n\r\n    const denominator = falloff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    const _distancePart = Math.pow(numerator / denominator, 2);\r\n\r\n    return Math.pow(0.5, _distancePart);\r\n  }\r\n\r\n  static #getTurretAcurracy_trackingPart = (\r\n    angularVelocity,\r\n    trackingValue,\r\n    signatureRadius\r\n  ) => {\r\n    const denominator = trackingValue * signatureRadius;\r\n    const numerator = angularVelocity * 40000;\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_distancePart = (optimal, fallOff, distance) => {\r\n    const denominator = fallOff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_angularVelocuty = (\r\n    distance,\r\n    distanceVector,\r\n    onBoardVector,\r\n    hostileVector\r\n  ) => {\r\n    if (\r\n      EveMath.#getTurretAcurracy_validateVector(distanceVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(onBoardVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(hostileVector)\r\n    ) {\r\n      const perpendicularVector = { x: -distanceVector.y, y: distanceVector.x };\r\n      const perpendicularUnitVector = EveMath.#common_makeUnitVector(\r\n        perpendicularVector\r\n      );\r\n      const hostileOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        hostileVector\r\n      );\r\n      const onBoardOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        onBoardVector\r\n      );\r\n      const trueObitalVelocity =\r\n        (hostileOrbitalVelocity - onBoardOrbitalVelocity) * 3;\r\n      return trueObitalVelocity / (distance * 1000);\r\n    } else return false;\r\n  };\r\n  static #getTurretAcurracy_innerProduct = (unitVector, velocityVector) => {\r\n    return unitVector.x * velocityVector.x + unitVector.y * velocityVector.y;\r\n  };\r\n  static #getTurretAcurracy_validateVector = (vector) => {\r\n    if (vector.x !== undefined && vector.y !== undefined) return true;\r\n    else return false;\r\n  };\r\n  static #common_makeUnitVector = (vector) => {\r\n    const length = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n    return { x: vector.x / length, y: vector.y / length };\r\n  };\r\n}\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\n\r\nexport default class Stat {\r\n  static defaultStat = {\r\n    damage: {\r\n      turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n      turretLauncherRange: [],\r\n      droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n    },\r\n    defense: {\r\n      resistance: {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      },\r\n      active: {\r\n        shieldBonus: 0,\r\n        armorBonus: 0,\r\n        structureBonus: 0,\r\n      },\r\n    },\r\n    capacitor: {\r\n      ambientChargeRate: 0,\r\n      boosterChargeRate: 0,\r\n      activationUseRate: 0,\r\n      stableLevel: 0,\r\n    },\r\n    resource: {\r\n      capacity: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 0,\r\n      },\r\n    },\r\n    engineering: {\r\n      pg: { load: 0, output: 0 },\r\n      cpu: { load: 0, output: 0 },\r\n    },\r\n    miscellaneous: {\r\n      sensor: {\r\n        scanResolution: 0,\r\n        maximumLockedTarget: 0,\r\n        maximumTargetingRange: 0,\r\n        strength: {\r\n          gravimetric: 0,\r\n          magnetometric: 0,\r\n          ladar: 0,\r\n          radar: 0,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier: 0,\r\n        maximumVelocity: 0,\r\n        warpSpeedMultiplier: 0,\r\n      },\r\n      misc: {\r\n        cargoBayCapacity: 0,\r\n        signatureRadius: 0,\r\n      },\r\n    },\r\n  };\r\n  static stat(fit) {\r\n    const propCapacitor = Stat.capacitor(fit);\r\n\r\n    return {\r\n      damage: Stat.damage(fit),\r\n      defense: Stat.defense(fit),\r\n      capacitor: {\r\n        ...propCapacitor,\r\n        stableLevel: Stat.capacitor_stableLevel(fit, propCapacitor),\r\n      },\r\n      engineering: Stat.engineering(fit),\r\n      resource: Stat.resource(fit),\r\n      miscellaneous: Stat.miscellaneous(fit),\r\n    };\r\n  }\r\n\r\n  static damage(fit) {\r\n    if (!fit.highSlots)\r\n      return {\r\n        turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n        turretLauncherRange: [],\r\n        droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n      };\r\n\r\n    const turrets = Stat.#damage_turrets(fit);\r\n    const launchers = Stat.#damage_launchers(fit);\r\n    const drones = Stat.#damage_drones(fit);\r\n\r\n    const turretLauncherDamageSlots = [...turrets, ...launchers];\r\n    const turretLauncherDamageSummaries = turretLauncherDamageSlots.map(\r\n      (slot) => {\r\n        return Stat.damage_getSummary(slot.item, slot.charge);\r\n      }\r\n    );\r\n    const turretLauncherDamage = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n\r\n        return {\r\n          max: acc.max + maxDps,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const turretLauncherRange = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const optimalRange = summary.range.optimalRange;\r\n        const falloffRange = summary.range.falloffRange;\r\n\r\n        const overlappingRange = acc.find(\r\n          (range) =>\r\n            range.optimalRange === optimalRange &&\r\n            range.falloffRange === falloffRange\r\n        );\r\n        if (!!overlappingRange) overlappingRange.debug.push(summary.slot);\r\n        else acc.push({ optimalRange, falloffRange, debug: [summary.slot] });\r\n        return acc;\r\n      },\r\n      []\r\n    );\r\n\r\n    const droneSummaries = drones.map((drone) => {\r\n      return Stat.damage_getSummary(drone.item, drone.item);\r\n    });\r\n    const droneDamage = droneSummaries.reduce(\r\n      (acc, summary) => {\r\n        const typeCount = summary.typeCount;\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n        return {\r\n          max: acc.max + maxDps * typeCount,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const damageSummaries = [\r\n      ...turretLauncherDamageSummaries,\r\n      ...droneSummaries,\r\n    ];\r\n\r\n    return {\r\n      turretLauncherDamage,\r\n      turretLauncherRange,\r\n      droneDamage,\r\n      damageSummaries,\r\n    };\r\n  }\r\n  static #damage_turrets = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 42\r\n        ); //effectID: 42, effectName: \"turretFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isTurretFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_launchers = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 40\r\n        ); //effectID: 40, effectName: \"launcherFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isLauncherFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_drones = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isActivated) return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { droneSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static damage_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = Stat.damage_damagePerAct(item, charge);\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const range = Stat.damage_range(item, charge);\r\n    const typeCount = item.typeCount;\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, damagePerAct, range, typeCount, slot };\r\n  };\r\n  static damage_damagePerAct = (item, charge) => {\r\n    const damageModifier = findAttributebyID(item, 64) || 1; //attributeID: 64, attributeName: \"Damage Modifier\"\r\n\r\n    const EM_damage = findAttributebyID(charge, 114); //attributeID: 114, attributeName: \"EM damage\"\r\n    const TH_damage = findAttributebyID(charge, 118); //attributeID: 118, attributeName: \"Thermal damage\"\r\n    const KI_damage = findAttributebyID(charge, 117); //attributeID: 117, attributeName: \"Kinetic damage\"\r\n    const EX_damage = findAttributebyID(charge, 116); //attributeID: 116, attributeName: \"Explosive damage\"\r\n    const mergedDamage = EM_damage + TH_damage + KI_damage + EX_damage;\r\n\r\n    const alpha = damageModifier * mergedDamage;\r\n\r\n    return {\r\n      alpha,\r\n      EM: EM_damage * damageModifier,\r\n      TH: TH_damage * damageModifier,\r\n      KI: KI_damage * damageModifier,\r\n      EX: EX_damage * damageModifier,\r\n    };\r\n  };\r\n  static damage_range = (item, charge) => {\r\n    const isTurretFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 42\r\n    ); //effectID: 42, effectName: \"turretFitted\"\r\n    const isLauncherFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 40\r\n    ); //effectID: 40, effectName: \"launcherFitted\"\r\n    const isDrone = item?.typeDroneSize !== undefined;\r\n\r\n    if (isTurretFitted || isDrone) {\r\n      const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n      const falloffRange = findAttributebyID(item, 158); //attributeID: 158, attributeName: \"Accuracy falloff \"\r\n      const tracking = findAttributebyID(item, 160); // attributeID: 160, attributeName: \"Turret Tracking\"\r\n      const signatureResolution = findAttributebyID(item, 620); // attributeID: 620, attributeName: \"Signature Resolution\"\r\n\r\n      return { optimalRange, falloffRange, tracking, signatureResolution };\r\n    } else if (isLauncherFitted) {\r\n      const maximumVelocity = findAttributebyID(charge, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n      const filghtTime = findAttributebyID(charge, 281); //attributeID: 281, attributeName: \"Maximum Flight Time\"\r\n      const optimalRange = maximumVelocity * (filghtTime / 1000);\r\n      const explosionVelocity = findAttributebyID(charge, 653); // attributeID: 653, attributeName: \"Explosion Velocity\"\r\n      const explosionRadius = findAttributebyID(charge, 654); // attributeID: 654, attributeName: \"Explosion Radius\"\r\n      const damageReductionFactor = findAttributebyID(charge, 1353); // attributeID: 1353, attributeName: \"aoeDamageReductionFactor\"\r\n\r\n      //prettier-ignore\r\n      return { optimalRange, falloffRange: 0, explosionVelocity, explosionRadius, damageReductionFactor };\r\n    } else return { optimalRange: 0, falloffRange: 0 };\r\n  };\r\n\r\n  static capacitor(fit) {\r\n    if (!fit)\r\n      return {\r\n        ambientChargeRate: 0,\r\n        boosterChargeRate: 0,\r\n        activationUseRate: 0,\r\n      };\r\n    const debug = [];\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: {\r\n        highSlots: true,\r\n        midSlots: true,\r\n        lowSlots: true,\r\n      },\r\n    });\r\n    const activationUseRate = slots.reduce((acc, slot) => {\r\n      const cus = Stat.#capacitor_getUseRate(slot);\r\n      if (cus > 0)\r\n        debug.push({\r\n          typeName: slot.item.typeName,\r\n          capacitorUsePerSec: cus,\r\n          dominID: slot.item.domainID,\r\n        });\r\n      return acc + cus;\r\n    }, 0);\r\n    const ambientChargeRate = Stat.#capacitor_getAmbientChargeRate(fit, 25);\r\n    const boosterChargeRate = Stat.#capacitor_getBoosterChargeRate(fit);\r\n    debug.push({ activationUseRate, ambientChargeRate, boosterChargeRate });\r\n\r\n    /* console.log(debug) */\r\n    return { ambientChargeRate, boosterChargeRate, activationUseRate };\r\n  }\r\n  static capacitor_stableLevel(fit, propCapacitor = false) {\r\n    if (!fit.ship?.typeID) return 0;\r\n    const capacitor = !!propCapacitor ? propCapacitor : Stat.capacitor(fit);\r\n    const Cmax = findAttributebyID(fit.ship, 482); //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const Tnow = findAttributebyID(fit.ship, 55) / 1000; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    const capacitorDeltas = [];\r\n    for (let i = 200; i < 1000 + 1; i++) {\r\n      const Cnow = Cmax * (i / 1000);\r\n      capacitorDeltas.push({\r\n        capacitorLevel: i / 10,\r\n        delta:\r\n          Stat.getAmbientChargeRateMath(Cmax, Cnow, Tnow) +\r\n          capacitor.boosterChargeRate -\r\n          capacitor.activationUseRate,\r\n      });\r\n    }\r\n    const positiveDeltas = capacitorDeltas\r\n      .sort((a, b) => a.delta - b.delta)\r\n      .filter((capacitorDelta) => capacitorDelta.delta >= 0);\r\n\r\n    if (positiveDeltas[0] === undefined) return 0;\r\n    else return positiveDeltas[0].capacitorLevel;\r\n  }\r\n  static #capacitor_getUseRate = (slot) => {\r\n    if (slot.item.typeState !== \"activation\") return 0;\r\n\r\n    const activationCost = findAttributebyID(slot.item, 6); // attributeID: 6, attributeName: \"Activation Cost\"\r\n    if (activationCost === undefined) return 0;\r\n\r\n    const activationInfo = Stat.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return activationCost / activationInfo.e_duration;\r\n  };\r\n  static #capacitor_getAmbientChargeRate = (fit, capacitorLevel) => {\r\n    const chargeInfo = Stat.capacitor_getChargeInfo(fit);\r\n    const Cmax = chargeInfo.HP;\r\n    const Tchg = chargeInfo.bonusRate;\r\n    const Cnow = (Cmax * capacitorLevel) / 100;\r\n\r\n    return Stat.getAmbientChargeRateMath(Cmax, Cnow, Tchg);\r\n  };\r\n  static capacitor_getChargeInfo = (fit) => {\r\n    const HP = findAttributebyID(fit.ship, 482) || 0; //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const bonusRate = findAttributebyID(fit.ship, 55) / 1000 || 0; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    return { HP, bonusRate };\r\n  };\r\n  static #capacitor_getBoosterChargeRate = (fit) => {\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: { midSlots: true },\r\n    });\r\n    const boosterSlots = slots.filter((slot) => {\r\n      if (!slot?.item?.typeEffectsStats) return false;\r\n      return slot.item.typeEffectsStats.find((efft) => efft.effectID === 48); // effectID: 48, effectName: \"powerBooster\"\r\n    });\r\n\r\n    return boosterSlots.reduce((acc, boosterSlot) => {\r\n      //prettier-ignore\r\n      const activationInfo = Stat.getActivationInfo(boosterSlot.item, boosterSlot.charge);\r\n      //prettier-ignore\r\n      const capacitorBonus = Stat.capacitor_getBonusPerAct_self(boosterSlot.item, boosterSlot.charge);\r\n      const boostChargeRate = capacitorBonus / activationInfo.e_duration || 0;\r\n\r\n      return acc + boostChargeRate;\r\n    }, 0);\r\n  };\r\n  static capacitor_getBonusPerAct_self(item, charge) {\r\n    if (!item || !charge) return { capacitorBonus: 0 };\r\n\r\n    const bonusPerAct = findAttributebyID(charge, 67); //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n\r\n    return bonusPerAct;\r\n  }\r\n\r\n  static defense(fit) {\r\n    if (!fit || !fit.ship)\r\n      return {\r\n        resistance: {\r\n          armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        },\r\n        active: {\r\n          shieldBonus: 0,\r\n          armorBonus: 0,\r\n          structureBonus: 0,\r\n        },\r\n      };\r\n    return {\r\n      resistance: Stat.defense_resistance(fit),\r\n      active: Stat.#defense_active(fit),\r\n    };\r\n  }\r\n  static defense_resistance = (fit) => {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      };\r\n\r\n    const shipAttrs = fit.ship.typeAttributesStats;\r\n\r\n    const armorHP = shipAttrs.find((attr) => attr.attributeID === 265);\r\n    const armorEM = shipAttrs.find((attr) => attr.attributeID === 267);\r\n    const armorTH = shipAttrs.find((attr) => attr.attributeID === 270);\r\n    const armorKI = shipAttrs.find((attr) => attr.attributeID === 269);\r\n    const armorEX = shipAttrs.find((attr) => attr.attributeID === 268);\r\n\r\n    const shieldHP = shipAttrs.find((attr) => attr.attributeID === 263);\r\n    const shieldEM = shipAttrs.find((attr) => attr.attributeID === 271);\r\n    const shieldTH = shipAttrs.find((attr) => attr.attributeID === 274);\r\n    const shieldKI = shipAttrs.find((attr) => attr.attributeID === 273);\r\n    const shieldEX = shipAttrs.find((attr) => attr.attributeID === 272);\r\n    const shieldChargeRate =\r\n      shipAttrs.find((attr) => attr.attributeID === 479).value / 1000 || 0; // attributeID: 479, attributeName: \"Shield recharge time\"\r\n\r\n    const structureHP = shipAttrs.find((attr) => attr.attributeID === 9);\r\n    const structureEM = shipAttrs.find((attr) => attr.attributeID === 113);\r\n    const structureTH = shipAttrs.find((attr) => attr.attributeID === 110);\r\n    const structureKI = shipAttrs.find((attr) => attr.attributeID === 109);\r\n    const structureEX = shipAttrs.find((attr) => attr.attributeID === 111);\r\n\r\n    return {\r\n      armor: {\r\n        HP: armorHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(armorEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(armorTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(armorKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(armorEX),\r\n      },\r\n      shield: {\r\n        HP: shieldHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(shieldEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(shieldTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(shieldKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(shieldEX),\r\n        bonusRate: shieldChargeRate,\r\n      },\r\n      structure: {\r\n        HP: structureHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(structureEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(structureTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(structureKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(structureEX),\r\n      },\r\n    };\r\n  };\r\n  static #defense_resistance_decimal_fix = (attr) => {\r\n    return 100 - attr.value * 100;\r\n  };\r\n  static defense_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const bonusPerAct = Stat.defense_getBonusPerAct(item, charge);\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, bonusPerAct, slot };\r\n  };\r\n  static defense_getBonusPerAct = (item, charge) => {\r\n    if (!item) return { shieldBonus: 0, armorBonus: 0, structureBonus: 0 };\r\n\r\n    const shield = findAttributebyID(item, 68) || 0; //attributeID: 68, attributeName: \"Shield Bonus\"\r\n    const armor = findAttributebyID(item, 84) || 0; //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n    const structure = findAttributebyID(item, 83) || 0; //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n\r\n    return { shield, armor, structure };\r\n  };\r\n  static #defense_active = (fit) => {\r\n    const active = {\r\n      shieldBonus: 0,\r\n      armorBonus: 0,\r\n      structureBonus: 0,\r\n    };\r\n    if (!fit.ship || !fit.ship.typeAttributesStats) return active;\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item.typeAttributesStats) return;\r\n        const activationTime = findAttributebyID(slot.item, 73); //attributeID: 73, attributeName: \"Activation time / duration\"\r\n\r\n        const shieldBonus = findAttributebyID(slot.item, 68); //attributeID: 68, attributeName: \"Shield Bonus\"\r\n        if (!!shieldBonus) {\r\n          active.shieldBonus += (shieldBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const armorBonus = findAttributebyID(slot.item, 84); //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n        if (!!armorBonus) {\r\n          active.armorBonus += (armorBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const structureBonus = findAttributebyID(slot.item, 83); //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n        if (!!structureBonus) {\r\n          active.structureBonus += (structureBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n      },\r\n      {\r\n        isIterate: { midSlots: true, lowSlots: true },\r\n      }\r\n    );\r\n    return active;\r\n  };\r\n\r\n  static engineering(fit) {\r\n    if (!fit.ship?.typeID)\r\n      return {\r\n        pg: { load: 0, output: 0 },\r\n        cpu: { load: 0, output: 0 },\r\n      };\r\n\r\n    const pgLoad = findAttributebyID(fit.ship, 15); // attributeID: 15, attributeName: \"Power Load\"\r\n    const pgOutput = findAttributebyID(fit.ship, 11); //attributeID: 11, attributeName: \"Powergrid Output\"\r\n    const cpuLoad = findAttributebyID(fit.ship, 49); // attributeID: 49, attributeName: \"CPU Load\"\r\n    const cpuOutput = findAttributebyID(fit.ship, 48); //attributeID: 48, attributeName: \"CPU Output\"\r\n\r\n    return {\r\n      pg: { load: Number(pgLoad.toFixed(1)), output: pgOutput },\r\n      cpu: { load: Number(cpuLoad.toFixed(1)), output: cpuOutput },\r\n    };\r\n  }\r\n\r\n  static resource(fit) {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        capacity: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 5,\r\n        },\r\n        load: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 0,\r\n        },\r\n      };\r\n\r\n    const turretHardpoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    const launcherHardpoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\";\r\n    const calibration = findAttributebyID(fit.ship, 1132); //attributeID: 1132, attributeName: \"Calibration\"\r\n    const droneCapacity = findAttributebyID(fit.ship, 283); //attributeID: 283, attributeName: \"Drone Capacity\"\r\n    const droneBandwidth = findAttributebyID(fit.ship, 1271); //ttributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n\r\n    const mountedTurrets = fit.highSlots.reduce((acc, slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      return isTurretFitted && slot.item.typeState !== \"offline\" ? ++acc : acc;\r\n    }, 0);\r\n    const mountedLaunchers = fit.highSlots.reduce((acc, slot) => {\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      return isLauncherFitted && slot.item.typeState !== \"offline\"\r\n        ? ++acc\r\n        : acc;\r\n    }, 0);\r\n    const mountedCalibration = fit.rigSlots.reduce((acc, slot) => {\r\n      const calibration = findAttributebyID(slot.item, 1153); //attributeID: 1153, attributeName: \"Calibration cost\"\r\n      return !!calibration && slot.item.typeState !== \"offline\"\r\n        ? acc + calibration\r\n        : acc;\r\n    }, 0);\r\n    const mountedDroneBandwidth = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneBandwidth = findAttributebyID(slot.item, 1272); //attributeID: 1272, attributeName: \"Bandwidth Needed\"\r\n      return !!droneBandwidth && slot.item.typeState === \"activation\"\r\n        ? acc + droneBandwidth * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const mountedDronebay = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneVolume = slot.item.volume;\r\n      return !!droneVolume && slot.item.typeState !== \"offline\"\r\n        ? acc + droneVolume * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const droneActive = fit.droneSlots.reduce((acc, slot) => {\r\n      if (slot.item.typeState === \"activation\")\r\n        return acc + (slot.item.typeCount || 0);\r\n      return acc;\r\n    }, 0);\r\n\r\n    return {\r\n      capacity: {\r\n        turret: turretHardpoint,\r\n        launcher: launcherHardpoint,\r\n        calibration: calibration,\r\n        droneBay: droneCapacity,\r\n        droneBandwidth: droneBandwidth,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: mountedTurrets,\r\n        launcher: mountedLaunchers,\r\n        calibration: mountedCalibration,\r\n        droneBay: mountedDronebay,\r\n        droneBandwidth: mountedDroneBandwidth,\r\n        droneActive: droneActive,\r\n      },\r\n    };\r\n  }\r\n\r\n  static miscellaneous(fit) {\r\n    if (!fit?.ship?.typeID)\r\n      return {\r\n        sensor: {\r\n          scanResolution: 0,\r\n          maximumLockedTarget: 0,\r\n          maximumTargetingRange: 0,\r\n          strength: {\r\n            gravimetric: 0,\r\n            magnetometric: 0,\r\n            ladar: 0,\r\n            radar: 0,\r\n          },\r\n        },\r\n        propulsion: {\r\n          inertialModifier: 0,\r\n          maximumVelocity: 0,\r\n          warpSpeedMultiplier: 0,\r\n        },\r\n        misc: {\r\n          cargoBayCapacity: 0,\r\n          signatureRadius: 0,\r\n        },\r\n      };\r\n\r\n    const ship = fit.ship;\r\n\r\n    const scanResolution = findAttributebyID(ship, 564); //attributeID: 564, attributeName: \"Scan Resolution\"\r\n    const signatureRadius = findAttributebyID(ship, 552); //attributeID: 552, attributeName: \"Signature Radius\"\r\n\r\n    const gravimetricSensorStrength = findAttributebyID(ship, 211); //attributeID: 211, attributeName: \"Gravimetric Sensor Strength\"\r\n    const magnetometricSensorStrength = findAttributebyID(ship, 210); //attributeID: 210, attributeName: \"Magnetometric Sensor Strength\"\r\n    const ladarSensorStrength = findAttributebyID(ship, 209); // attributeID: 209, attributeName: \"Ladar Sensor Strength\"\r\n    const radarSensorStrength = findAttributebyID(ship, 208); //attributeID: 208, attributeName: \"RADAR Sensor Strength\"\r\n    const maximumLockedTarget = findAttributebyID(ship, 192); //attributeID: 192, attributeName: \"Maximum Locked Targets\"\r\n    const maximumTargetingRange = findAttributebyID(ship, 76); // attributeID: 76, attributeName: \"Maximum Targeting Range\"\r\n\r\n    const inertialModifier = findAttributebyID(ship, 70); // attributeID: 70, attributeName: \"Inertia Modifier\"\r\n    const maximumVelocity = Stat.#miscellaneous_maximumVelocity(fit);\r\n    const warpSpeedMultiplier = findAttributebyID(ship, 600); //attributeID: 600, attributeName: \"Warp Speed Multiplier\"\r\n\r\n    const cargoBayCapacity = findAttributebyID(ship.capacity);\r\n\r\n    return {\r\n      sensor: {\r\n        scanResolution,\r\n        maximumLockedTarget,\r\n        maximumTargetingRange,\r\n        strength: {\r\n          gravimetric: gravimetricSensorStrength,\r\n          magnetometric: magnetometricSensorStrength,\r\n          ladar: ladarSensorStrength,\r\n          radar: radarSensorStrength,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier,\r\n        maximumVelocity,\r\n        warpSpeedMultiplier,\r\n      },\r\n      misc: {\r\n        signatureRadius,\r\n        cargoBayCapacity,\r\n      },\r\n    };\r\n  }\r\n  static #miscellaneous_maximumVelocity = function (fit) {\r\n    const activePropulsionModules = Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isPropulsionModule = !!slot.item?.typeEffectsStats?.find((efft) =>\r\n          [6730, 6731].includes(efft.effectID)\r\n        ); // effectID: 6731, effectName: \"moduleBonusAfterburner\"\r\n        // effectID: 6730, effectName: \"moduleBonusMicrowarpdrive\"\r\n        const isActive = slot.item.typeState === \"activation\";\r\n\r\n        if (isActive && isPropulsionModule) return slot.item;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { midSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n    const shipBaseMaximumVelocity = findAttributebyID(fit.ship, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    if (activePropulsionModules.length === 0) return shipBaseMaximumVelocity;\r\n\r\n    //prettier-ignore\r\n    const propModuleMaximumVelocityBonusMul = findAttributebyID( activePropulsionModules[0], 20) / 100 // attributeID: 20, attributeName: \"Maximum Velocity Bonus\"\r\n    const propModuleThrust = findAttributebyID(activePropulsionModules[0], 567); // attributeID: 567, attributeName: \"Thrust\",\r\n\r\n    const propModuleMassAdd = propModuleThrust / 3;\r\n    const shipMass = findAttributebyID(fit.ship, 4); // attributeID: 4, attributeName: \"Mass\";\r\n    const mass =\r\n      Fit.mapSlots(fit, (slot) => slot, {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }).reduce((acc, slot) => {\r\n        if (!!slot.item.mass) return acc + slot.item.mass;\r\n        return acc;\r\n      }, 0) +\r\n      propModuleMassAdd +\r\n      shipMass;\r\n\r\n    const shipAppliedMaximumVelocity =\r\n      shipBaseMaximumVelocity *\r\n      (1 + (propModuleMaximumVelocityBonusMul * propModuleThrust) / mass);\r\n\r\n    return shipAppliedMaximumVelocity;\r\n  };\r\n\r\n  static getActivationInfo(item, charge) {\r\n    if (!item)\r\n      return {\r\n        duration: Infinity,\r\n        e_duration: Infinity,\r\n        activationLimit: 0,\r\n        reloadTime: 0,\r\n        activationCost: 0,\r\n      };\r\n\r\n    const activationCost = findAttributebyID(item, 6) || 0; //attributeID: 6, attributeName: \"Activation Cost\"\r\n    const reloadTime = (findAttributebyID(item, 1795) || undefined) / 1000; //attributeID: 1795, attributeName: \"Reload Time\"\r\n    const activationTime =\r\n      (findAttributebyID(item, 73) || findAttributebyID(item, 51)) / 1000; // attributeID: 73, attributeName: \"Activation time / duration\" attributeID: 51, attributeName: \"Rate of fire\"\r\n\r\n    if (!reloadTime || !Stat.#getActivationInfo_isTypeNeedCharge(item))\r\n      return {\r\n        duration: activationTime,\r\n        e_duration: activationTime,\r\n        activationLimit: Infinity,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n    if (!Fit.validateChargeSlot({ item, charge }))\r\n      return {\r\n        duration: Infinity,\r\n        e_duration: Infinity,\r\n        activationLimit: 0,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = findAttributebyID(item, 56); //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    const reloadTimePerAct =\r\n      !!reloadTime && !!itemCapacity && !!chargeVolume\r\n        ? reloadTime / activationLimit\r\n        : 0;\r\n    const EactivationTime = activationTime + reloadTimePerAct;\r\n\r\n    return {\r\n      duration: activationTime,\r\n      e_duration: EactivationTime,\r\n      activationLimit,\r\n      reloadTime,\r\n      activationCost,\r\n    };\r\n  }\r\n  static #getActivationInfo_isTypeNeedCharge = (type) => {\r\n    if (!type || !type.typeEffectsStats) return false;\r\n\r\n    //TODO: Add command burst effectIDs\r\n    //effectID: 42, effectName: \"turretFitted\"\r\n    //effectID: 40, effectName: \"launcherFitted\"\r\n    //effectID: 48, effectName: \"powerBooster\"\r\n    const thisEffectsNeedCharge = [42, 40, 48];\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (thisEffectsNeedCharge.includes(efft.effectID)) return true;\r\n      return acc;\r\n    }, false);\r\n  };\r\n\r\n  static getAmbientChargeRateMath = (Cmax, Cnow, Tchg) => {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  };\r\n}\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\nimport Stat from \"./Stat\";\r\n\r\nconst capPrioritySet = {\r\n  alwaysOn: 0,\r\n  mostTrivial: 10,\r\n  turretDamage: 1,\r\n  shieldHarden: 2,\r\n  shieldBoost: 2,\r\n  shieldBoostAncillaryFueled: 2,\r\n  shieldBoostAncillary: 5,\r\n  armorHardener: 2,\r\n  armorBoost: 2,\r\n  armorBoostAncillaryFueled: 3,\r\n  armorBoostAncillary: 5,\r\n  damageControl: 0,\r\n  structureBoost: 1,\r\n  capacitorNeutralizer: 3,\r\n  capacitorTransmitter: 4,\r\n};\r\n\r\nexport default class Summary extends Stat {\r\n  static updateSummaries = (summarizedSlots, situation) => {\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (slot) => {\r\n        if (!slot.item) return;\r\n        /*  if (slot?.summary?.activationState?.isActive === false) */\r\n        // MUTATION!!\r\n        slot.item.typeState = \"passive\";\r\n        /*  else if (slot?.summary?.activationState?.isActive === true); */\r\n        // MUTATION!!\r\n        /*   slot.item.typeState = \"activation\"; */\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    const fit = Fit.apply(summarizedSlots);\r\n    const shipSummary = Summary.getSummary_ship(fit, situation);\r\n    shipSummary.load = summarizedSlots.summary.load;\r\n    // MUTATION!!\r\n    Object.assign(summarizedSlots.summary, shipSummary);\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_modules(slot);\r\n        const _slot = SimFit.toPath(summarizedSlots, summary.path);\r\n        if (!summary || !_slot) return false;\r\n\r\n        if (summary.activationState)\r\n          summary.activationState = _slot.summary.activationState;\r\n        if (!!summary.load) summary.load = _slot.summary.load;\r\n\r\n        // MUTATION!!\r\n        Object.assign(_slot.summary, summary);\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_drones(slot);\r\n        const _slot = SimFit.toPath(summarizedSlots, summary.path);\r\n        if (!summary || !_slot) return false;\r\n\r\n        if (summary.activationState)\r\n          summary.activationState = _slot.summary.activationState;\r\n        if (!!summary.load) summary.load = _slot.summary.load;\r\n\r\n        // MUTATION!!\r\n        Object.assign(_slot.summary, summary);\r\n      },\r\n      {\r\n        isIterate: {\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    return summarizedSlots;\r\n  };\r\n\r\n  static addSummaries = (slots, situation) => {\r\n    const _slots = Summary.addSummaries_duplicateSlots(slots);\r\n    const fit = Fit.apply(_slots);\r\n\r\n    if (!!_slots) _slots[\"summary\"] = Summary.getSummary_ship(fit, situation);\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_modules(slot);\r\n        summary[\"root\"] = _slots;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_drones(slot);\r\n        summary[\"root\"] = _slots;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n    return _slots;\r\n  };\r\n  static addSummaries_duplicateSlots = (slots) => {\r\n    const _droneSlots = Summary.addSummaries_duplicateDroneSlots(slots);\r\n    const _slots = JSON.parse(JSON.stringify(slots));\r\n    _slots.droneSlots = _droneSlots;\r\n\r\n    return _slots;\r\n  };\r\n  // duplicate droneslots to number of typecount\r\n  static addSummaries_duplicateDroneSlots = (slots) => {\r\n    let slotCount = 0;\r\n    return slots.droneSlots.reduce((acc, slot) => {\r\n      const slotString = JSON.stringify(slot);\r\n      const _slots = new Array(slot.item.typeCount || 1).fill(false).map(() => {\r\n        const _slot = JSON.parse(slotString);\r\n        if (!!_slot.item) {\r\n          _slot.typeCount = undefined;\r\n          _slot.item.domainID = `droneSlots.${slotCount}.item`;\r\n        }\r\n        slotCount++;\r\n\r\n        return _slot;\r\n      });\r\n\r\n      return acc.concat(_slots);\r\n    }, []);\r\n  };\r\n\r\n  static #getSummaries_modules = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    const structureHP = findAttributebyID(item, 9); //attributeID: 9, attributeName: \"Structure Hitpoints\"\r\n    const heatDamage = findAttributebyID(item, 1211); // attributeID: 1211, attributeName: \"Heat Damage\"\r\n\r\n    const moduleSummary = {\r\n      load: {\r\n        structure: { HP: structureHP },\r\n      },\r\n      capacity: {\r\n        structure: { HP: structureHP },\r\n        misc: { heatDamage: heatDamage },\r\n      },\r\n    };\r\n\r\n    const activationDataSet = Summary.createActivationDataSet(slot);\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\"); //eg)highSlots.1\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        let summary = {};\r\n        let operation = false;\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_damage(item, charge);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          case 4: // effectID: 4, effectName: \"shieldBoosting\"\r\n          case 26: // effectID: 26, effectName: \"structureRepair\"\r\n          case 4936: // effectID: 4936, effectName: \"fueledShieldBoosting\"\r\n          case 27: // effectID: 27, effectName: \"armorRepair\"\r\n          case 5275: // effectID: 5275, effectName: \"fueledArmorRepair\"\r\n            summary = Summary.getSummary_defense(item, charge);\r\n            operation = \"defense\";\r\n            break;\r\n          case 48: //effectID: 48, effectName: \"powerBooster\"\r\n          case 6187: //effectID: 6187, effectName: \"energyNeutralizerFalloff\"\r\n          case 6197: //effectID: 6197, effectName: \"energyNosferatuFalloff\"\r\n          case 6148: // effectID: 6184, effectName: \"shipModuleRemoteCapacitorTransmitter\"\r\n            summary = Summary.getSummary_capacitor(item, charge);\r\n            operation = \"capacitor\";\r\n            break;\r\n          case 5230: // effectID: 5230, effectName: \"modifyActiveShieldResonancePostPercent\"\r\n          case 4928: // effectID: 4928, effectName: \"adaptiveArmorHardener\" //TODO: reactive armor bonus should be calculated\r\n          case 5231: // effectID: 5231, effectName: \"modifyActiveArmorResonancePostPercent\"\r\n          case 7012: // effectID: 7012, effectName: \"moduleBonusAssaultDamageControl\"\r\n            operation = \"static\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n\r\n        const activationPriority = Summary.getActivationPriority(efft);\r\n        activationDataSet.activationState[\r\n          \"activationPriority\"\r\n        ] = activationPriority;\r\n\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else return { ...moduleSummary, ...effectSummary[0], path };\r\n  };\r\n  static #getSummaries_drones = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const isSentry = item.marketGroupID === 911; // marketGroupID: 911 \"marketGroupName\": \"Sentry Drones\"\r\n\r\n    // These functions from Stat class is targeted for ship. modified to fit in drone in this case\r\n    const defense = this.defense_resistance({ ship: item });\r\n    const capacitor = this.capacitor_getChargeInfo({ ship: item });\r\n\r\n    const misc = this.miscellaneous({ ship: item });\r\n    const orbitVelocity = findAttributebyID(item, 508); // attributeID: 508, attributeName: \"Orbit Velocity\"\r\n    const orbitRange = findAttributebyID(item, 416); //attributeID: 416, attributeName: \"entityFlyRange\"\r\n    const maximumVelocity = findAttributebyID(item, 37); // attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    misc.propulsion = {\r\n      ...misc.propulsion,\r\n      orbitVelocity,\r\n      orbitRange,\r\n      maximumVelocity,\r\n    };\r\n    const droneSumamry = {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n    };\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\");\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        const activationDataSet = Summary.createActivationDataSet(slot);\r\n        let summary = {};\r\n        let operation = false;\r\n\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_drone(item);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    const situation_decription =\r\n      \"Currently situation is not calculated BUT! always hitted by smart bomb\";\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else\r\n      return {\r\n        ...droneSumamry,\r\n        ...effectSummary[0],\r\n        situation_decription,\r\n        isSentry,\r\n        isDrone: true,\r\n        path,\r\n      };\r\n  };\r\n  static createActivationDataSet = (slot) => {\r\n    const activationInfo = this.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return {\r\n      activationInfo,\r\n      activationState: {\r\n        isActive: false,\r\n        lastActivation: 0,\r\n        nextActivation: 0,\r\n        nextActivationTick: 0,\r\n        activationLeft: activationInfo.activationLimit,\r\n      },\r\n    };\r\n  };\r\n  static getActivationPriority = (efft) => {\r\n    let activationPriority = 10;\r\n    switch (efft.effectID) {\r\n      case 6197: //effectID: 6197, effectName: \"energyNosferatuFalloff\"\r\n      case 48: //effectID: 48, effectName: \"powerBooster\"\r\n        activationPriority = capPrioritySet.alwaysOn;\r\n        break;\r\n      case 101: // effectID: 101, effectName: \"useMissiles\"\r\n      case 34: // effectID: 34, effectName: \"projectileFired\"\r\n      case 10: // effectID: 10, effectName: \"targetAttack\"\r\n      case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n        activationPriority = capPrioritySet.turretDamage;\r\n        break;\r\n      case 4: // effectID: 4, effectName: \"shieldBoosting\"\r\n        activationPriority = capPrioritySet.shieldBoost;\r\n        break;\r\n      case 26: // effectID: 26, effectName: \"structureRepair\"\r\n        activationPriority = capPrioritySet.structureBoost;\r\n        break;\r\n      case 4936: // effectID: 4936, effectName: \"fueledShieldBoosting\"\r\n        activationPriority = capPrioritySet.shieldBoostAncillaryFueled;\r\n        break;\r\n      case 27: // effectID: 27, effectName: \"armorRepair\"\r\n        activationPriority = capPrioritySet.armorBoost;\r\n        break;\r\n      case 5275: // effectID: 5275, effectName: \"fueledArmorRepair\"\r\n        activationPriority = capPrioritySet.armorBoostAncillaryFueled;\r\n        break;\r\n      case 6187: //effectID: 6187, effectName: \"energyNeutralizerFalloff\"\r\n        activationPriority = capPrioritySet.capacitorNeutralizer;\r\n        break;\r\n      case 6148: // effectID: 6184, effectName: \"shipModuleRemoteCapacitorTransmitter\"\r\n        activationPriority = capPrioritySet.capacitorTransmitter;\r\n        break;\r\n      case 5230: // effectID: 5230, effectName: \"modifyActiveShieldResonancePostPercent\"\r\n        activationPriority = capPrioritySet.shieldHardener;\r\n        break;\r\n      case 4928: // effectID: 4928, effectName: \"adaptiveArmorHardener\"\r\n      case 5231: // effectID: 5231, effectName: \"modifyActiveArmorResonancePostPercent\"\r\n        activationPriority = capPrioritySet.armorHardener;\r\n        break;\r\n      case 7012: // effectID: 7012, effectName: \"moduleBonusAssaultDamageControl\"\r\n        activationPriority = capPrioritySet.damageControl;\r\n        break;\r\n      default:\r\n        activationPriority = capPrioritySet.mostTrivial;\r\n    }\r\n\r\n    return activationPriority;\r\n  };\r\n  static getSummary_ship = (fit, situation) => {\r\n    const defense = this.defense_resistance(fit);\r\n    const misc = this.miscellaneous(fit);\r\n    const capacitor = this.capacitor_getChargeInfo(fit);\r\n\r\n    return {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n      situation: situation,\r\n    };\r\n  };\r\n\r\n  static getSummary_damage(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, charge);\r\n    const range = this.damage_range(item, charge);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_drone(item) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, item);\r\n    const range = this.damage_range(item, item);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_defense(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const bonusPerAct = this.defense_getBonusPerAct(item, charge);\r\n\r\n    return { bonusPerAct: { self: bonusPerAct } };\r\n  }\r\n  static getSummary_capacitor(item, charge) {\r\n    if (!item) return false;\r\n    const booster_bonusPerAct = findAttributebyID(charge, 67) || 0; //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n    const transfer_bonusPerAct = findAttributebyID(item, 90) || 0; // attributeID: 90, attributeName: \"Energy transfer amount\"\r\n    const neut_bonusPerAct = findAttributebyID(item, 97) || 0; // attributeID: 97, attributeName: \"Neutralization Amount\"\r\n\r\n    const isNosferatuBloodRaiderOverriden = findAttributebyID(item, 1945) === 1; //attributeID: 1945, attributeName: \"nosOverride\"\r\n    const isCapacitorTransmitter = !!findAttributebyID(item, 3423); //attributeID: 182, attributeName: \"Primary Skill required\" (3423: capacitor emission system)\r\n    const isNosferatu = !isCapacitorTransmitter && !!transfer_bonusPerAct;\r\n\r\n    const bonusPerAct_self = isCapacitorTransmitter\r\n      ? 0\r\n      : booster_bonusPerAct + transfer_bonusPerAct;\r\n    const bonusPerAct_target = isCapacitorTransmitter\r\n      ? transfer_bonusPerAct\r\n      : -transfer_bonusPerAct - neut_bonusPerAct;\r\n\r\n    const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n    const falloffRange = findAttributebyID(item, 2044); //attributeID: 2044, attributeName: \"Effectiveness Falloff\"\r\n\r\n    return {\r\n      bonusPerAct: { self: bonusPerAct_self, target: bonusPerAct_target },\r\n      range: { optimalRange, falloffRange },\r\n      isNosferatuBloodRaiderOverriden,\r\n      isCapacitorTransmitter,\r\n      isNosferatu,\r\n    };\r\n  }\r\n}\r\n\r\nclass SimFit extends Fit {\r\n  static changeStateOfModule(slots, path, state) {\r\n    if (![\"overload\", \"activation\", \"passive\", \"offline\"].includes(state))\r\n      return false;\r\n\r\n    const targetSlot = this.toPath(slots, path);\r\n    if (!targetSlot || !targetSlot.item) return false;\r\n\r\n    targetSlot.item.typeState = state;\r\n    const fit = this.apply(slots);\r\n    return fit;\r\n  }\r\n  static toPath(slots, path) {\r\n    if (!slots || !path) return {};\r\n    return path.split(\".\").reduce((p, c) => (p && p[c]) || undefined, slots);\r\n  }\r\n}\r\n","import Fit from \"../../../../fitter/src/Fit\";\r\nimport EveMath from \"./EveMath\";\r\nimport Summary from \"./Summary\";\r\n\r\nexport default class Simulator {\r\n  static test(slots, fit1, situation) {\r\n    const summarizedSlots1 = Summary.addSummaries(slots, situation.onboard);\r\n    const summarizedSlots2 = Summary.addSummaries(fit1, situation.hostile);\r\n    console.log(summarizedSlots1, summarizedSlots2);\r\n\r\n    Fit.mapSlots(\r\n      summarizedSlots1,\r\n      (slot) => {\r\n        if (!slot?.summary?.activationState) return false;\r\n        slot.summary.activationState.isActive = true;\r\n        slot.summary.activationState.nextActivationTick = 0;\r\n        slot.summary.activationState.nextActivation = 0;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    console.log(\r\n      \"CAPACITOR_BY_LEVEL\",\r\n      HAL.manageActivation_getCapUsageRateByPriorityLevel(summarizedSlots1)\r\n    );\r\n    const schedule = HAL.getSchedules(summarizedSlots1, summarizedSlots2, 0);\r\n    summarizedSlots1.summary.load.capacitor.HP = 10;\r\n    HAL.manageSchedules(schedule, summarizedSlots1, situation.onboard);\r\n  }\r\n\r\n  static simulate_oneTick = (owner, target, tick) => {\r\n    Simulator.simulate_capacitor(owner);\r\n    Simulator.simulate_shield(owner);\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.summary) return false;\r\n        switch (slot.summary.operation) {\r\n          case \"damage\":\r\n            Simulator.activateDamage(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"defense\":\r\n            Simulator.activateDefense(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"capacitor\":\r\n            Simulator.activateCapacitor(slot.summary, owner, target, tick);\r\n            break;\r\n        }\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static simulate_capacitor = (target) => {\r\n    const capacitorState = target.summary.load.capacitor;\r\n    const capacitorInfo = target.summary.capacity.capacitor;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      capacitorInfo.HP,\r\n      capacitorState.HP,\r\n      capacitorInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    capacitorState.HP += ambientChargeRate;\r\n    if (capacitorState.HP === 0) capacitorState.HP = 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  static simulate_shield = (target) => {\r\n    const shieldState = target.summary.load.shield;\r\n    const shieldInfo = target.summary.capacity.shield;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      shieldInfo.HP,\r\n      shieldState.HP,\r\n      shieldInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    shieldState.HP += ambientChargeRate;\r\n    if (shieldState.HP === 0) shieldState.HP += 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  //Currently target boost (remote armor repair is nor possible)\r\n  static activateDefense = (summary) => {\r\n    const owner = summary.root;\r\n    //prettier-ignore\r\n    /*  const numOfActivation = Simulator.simulateActivation(owner,summary,tick).length;\r\n    if (numOfActivation == 0) return false;\r\n\r\n    for (let i = 0; i < numOfActivation; i++) { */\r\n    // MUTATION!\r\n    owner.summary.load.shield.HP += summary.bonusPerAct.self.shield;\r\n    if (owner.summary.capacity.shield.HP < owner.summary.load.shield.HP)\r\n      owner.summary.load.shield.HP = owner.summary.capacity.shield.HP;\r\n\r\n    owner.summary.load.armor.HP += summary.bonusPerAct.self.armor;\r\n    if (owner.summary.capacity.armor.HP < owner.summary.load.armor.HP)\r\n      owner.summary.load.armor.HP = owner.summary.capacity.armor.HP;\r\n\r\n    owner.summary.load.structure.HP += summary.bonusPerAct.self.structure;\r\n    if (owner.summary.capacity.structure.HP < owner.summary.load.structure.HP)\r\n      owner.summary.load.structure.HP = owner.summary.capacity.structure.HP;\r\n    /*  } */\r\n  };\r\n\r\n  static activateDamage = (summary) => {\r\n    const owner = summary.isDrone ? summary : summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateDamage_getSituationalModifiedSummary(summary, owner, target);\r\n    //prettier-ignore\r\n    const alpha = Simulator.activateDamage_getAlpha(situationalModifiedSummary, target);\r\n\r\n    // MUTATION!\r\n    target.summary.load.shield.HP -= alpha.shield;\r\n    if (target.summary.load.shield.HP < 0) target.summary.load.shield.HP = 0;\r\n    target.summary.load.armor.HP -= alpha.armor;\r\n    if (target.summary.load.armor.HP < 0) target.summary.load.armor.HP = 0;\r\n    target.summary.load.structure.HP -= alpha.structure;\r\n    if (target.summary.load.structure.HP < 0)\r\n      target.summary.load.structure.HP = 0;\r\n  };\r\n  static activateDamage_getAlpha = (summary, target) => {\r\n    if (!summary.damagePerAct.alpha)\r\n      return { shield: 0, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const shieldDamage = Simulator.#activateDamage_getDamageResult(summary.damagePerAct, target, \"shield\");\r\n    if (shieldDamage.remaining.alpha <= 0.01)\r\n      return { shield: shieldDamage.appplied.alpha, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const armorDamage = Simulator.#activateDamage_getDamageResult(shieldDamage.remaining, target, \"armor\");\r\n    if (armorDamage.remaining.alpha <= 0.01)\r\n      return {\r\n        shield: shieldDamage.appplied.alpha,\r\n        armor: armorDamage.appplied.alpha,\r\n        structure: 0,\r\n      };\r\n\r\n    //prettier-ignore\r\n    const structureDamage = Simulator.#activateDamage_getDamageResult(armorDamage.remaining, target, \"structure\");\r\n    return {\r\n      shield: shieldDamage.appplied.alpha,\r\n      armor: armorDamage.appplied.alpha,\r\n      structure: structureDamage.appplied.alpha,\r\n    };\r\n  };\r\n  static #activateDamage_getDamageResult = (damagePerAct, target, type) => {\r\n    //prettier-ignore\r\n    const shot = Simulator.#activateDamage_getShot(damagePerAct, target, type);\r\n    const damageCapMultiplier =\r\n      target.summary.load[type].HP / shot.alpha_damaging < 1\r\n        ? target.summary.load[type].HP / shot.alpha_damaging\r\n        : 1;\r\n\r\n    const EM_applied = shot.EM_damaging * damageCapMultiplier;\r\n    const TH_applied = shot.TH_damaging * damageCapMultiplier;\r\n    const KI_applied = shot.KI_damaging * damageCapMultiplier;\r\n    const EX_applied = shot.EX_damaging * damageCapMultiplier;\r\n    const alpha_applied = EM_applied + TH_applied + KI_applied + EX_applied;\r\n\r\n    const EM_remaining = damagePerAct.EM - EM_applied - shot.EM_blocked;\r\n    const TH_remaining = damagePerAct.TH - TH_applied - shot.TH_blocked;\r\n    const KI_remaining = damagePerAct.KI - KI_applied - shot.KI_blocked;\r\n    const EX_remaining = damagePerAct.EX - EX_applied - shot.EX_blocked;\r\n    const alpha_remaining =\r\n      EM_remaining + TH_remaining + KI_remaining + EX_remaining;\r\n\r\n    return {\r\n      appplied: {\r\n        alpha: alpha_applied,\r\n        EM: EM_applied,\r\n        TH: TH_applied,\r\n        KI: KI_applied,\r\n        EX: EX_applied,\r\n      },\r\n      remaining: {\r\n        alpha: alpha_remaining,\r\n        EM: EM_remaining,\r\n        TH: TH_remaining,\r\n        KI: KI_remaining,\r\n        EX: EX_remaining,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getShot = (damagePerAct, target, type) => {\r\n    const EM_blocked =\r\n      (damagePerAct.EM * target.summary.capacity[type].EM) / 100;\r\n    const TH_blocked =\r\n      (damagePerAct.TH * target.summary.capacity[type].TH) / 100;\r\n    const KI_blocked =\r\n      (damagePerAct.KI * target.summary.capacity[type].KI) / 100;\r\n    const EX_blocked =\r\n      (damagePerAct.EX * target.summary.capacity[type].EX) / 100;\r\n    const alpha_blocked = EM_blocked + TH_blocked + KI_blocked + EX_blocked;\r\n\r\n    const EM_damaging = damagePerAct.EM - EM_blocked;\r\n    const TH_damaging = damagePerAct.TH - TH_blocked;\r\n    const KI_damaging = damagePerAct.KI - KI_blocked;\r\n    const EX_damaging = damagePerAct.EX - EX_blocked;\r\n    const alpha_damaging =\r\n      EM_damaging + TH_damaging + KI_damaging + EX_damaging;\r\n\r\n    return {\r\n      alpha_damaging,\r\n      EM_damaging,\r\n      TH_damaging,\r\n      KI_damaging,\r\n      EX_damaging,\r\n      alpha_blocked,\r\n      EM_blocked,\r\n      TH_blocked,\r\n      KI_blocked,\r\n      EX_blocked,\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const situationalMul = Simulator.#activateDamage_getSituationalMul(\r\n      summary,\r\n      owner,\r\n      target\r\n    );\r\n\r\n    return {\r\n      ...summary,\r\n      damagePerAct: {\r\n        alpha: summary.damagePerAct.alpha * situationalMul,\r\n        EM: summary.damagePerAct.EM * situationalMul,\r\n        TH: summary.damagePerAct.TH * situationalMul,\r\n        KI: summary.damagePerAct.KI * situationalMul,\r\n        EX: summary.damagePerAct.EX * situationalMul,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalMul = (summary, owner, target) => {\r\n    if (summary.isDrone) {\r\n      //prettier-ignore\r\n      const droneAccuracy = EveMath.getDroneAccracy(summary, owner, target);\r\n\r\n      return Math.random() <= droneAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.tracking) {\r\n      //prettier-ignore\r\n      const turretAccuracy = EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n      return Math.random() <= turretAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.explosionRadius) {\r\n      //prettier-ignore\r\n      const launcherAccracy = EveMath.getLauncherAccuracy(summary, owner, target);\r\n\r\n      return Math.random() <= launcherAccracy\r\n        ? EveMath.getLauncherDamageModifier(summary, target)\r\n        : 0;\r\n    } else return 0;\r\n  };\r\n\r\n  static activateCapacitor = (summary) => {\r\n    const owner = summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateCapacitor_getSituationalModifiedSummary(summary, owner, target);\r\n\r\n    // MUTATION!\r\n    target.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.target;\r\n    if (target.summary.load.capacitor.HP < 0)\r\n      target.summary.load.capacitor.HP = 0;\r\n    if (target.summary.capacity.capacitor.HP < target.summary.load.capacitor.HP)\r\n      target.summary.load.capacitor.HP = target.summary.capacity.capacitor.HP;\r\n\r\n    owner.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.owner;\r\n    if (owner.summary.load.capacitor.HP < 0)\r\n      owner.summary.load.capacitor.HP = 0;\r\n    if (owner.summary.capacity.capacitor.HP < owner.summary.load.capacitor.HP)\r\n      owner.summary.load.capacitor.HP = owner.summary.capacity.capacitor.HP;\r\n  };\r\n  static #activateCapacitor_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const ownerCapacitorHP = owner.summary.load.capacitor.HP;\r\n    const targetCapacitorHP = target.summary.load.capacitor.HP;\r\n\r\n    // prettier-ignore\r\n    const situationalMul = Simulator.#activateCapacitor_getSituationalMul(summary, owner, target);\r\n    const bonusPerActOwner = summary.bonusPerAct.self * situationalMul;\r\n    const bonusPerActTarget = summary.bonusPerAct.target * situationalMul;\r\n\r\n    if (summary.isNosferatu) {\r\n      const maxBonusPerAct = Math.min(bonusPerActOwner, targetCapacitorHP);\r\n      let symmetricBonusPerAct = maxBonusPerAct;\r\n\r\n      if (\r\n        !summary.isNosferatuBloodRaiderOverriden &&\r\n        targetCapacitorHP + bonusPerActTarget < ownerCapacitorHP\r\n      )\r\n        symmetricBonusPerAct = Math.max(\r\n          Math.floor((targetCapacitorHP - ownerCapacitorHP) / 2),\r\n          0\r\n        );\r\n      symmetricBonusPerAct = Math.min(maxBonusPerAct, symmetricBonusPerAct);\r\n      return {\r\n        ...summary,\r\n        bonusPerAct: {\r\n          self: symmetricBonusPerAct,\r\n          target: -symmetricBonusPerAct,\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      ...summary,\r\n      bonusPerAct: {\r\n        owner: bonusPerActOwner,\r\n        target: bonusPerActTarget,\r\n      },\r\n    };\r\n  };\r\n  static #activateCapacitor_getSituationalMul = (summary, owner, target) => {\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    const isCapacitorBooster = summary.slot.item?.typeEffectsStats?.reduce(\r\n      (acc, efft) => {\r\n        if (efft.effectID === 48)\r\n          //effectID: 48, effectName: \"powerBooster\"\r\n          return true;\r\n        return acc;\r\n      },\r\n      false\r\n    );\r\n\r\n    return isCapacitorBooster ? 1 : rangeModifier;\r\n  };\r\n\r\n  static simulateActivation = (summary) => {\r\n    const capacitorState =\r\n      summary.load.capacitor || summary.root.summary.load.capacitor;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n\r\n    // MUTATION!\r\n    capacitorState.HP -= info.activationCost;\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    return summary;\r\n  };\r\n}\r\nclass HAL {\r\n  static getSchedules(summarizedSlots, target, tick) {\r\n    HAL.#getSchedules_setTarget(summarizedSlots, target);\r\n    return Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        return HAL.#getSchedules_getFragment(summarizedSlot.summary, tick);\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    )\r\n      .reduce((acc, fragment) => {\r\n        if (!fragment) return acc;\r\n        return acc.concat(fragment);\r\n      }, [])\r\n      .sort((a, b) => a.time - b.time);\r\n  }\r\n  static #getSchedules_setTarget = (summarizedSlots, target) => {\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        let _target = false;\r\n        switch (summarizedSlot?.summary?.operation) {\r\n          case \"damage\":\r\n          case \"defense\":\r\n          case \"capacitor\":\r\n            _target = target;\r\n            break;\r\n          default:\r\n            _target = false;\r\n            break;\r\n        }\r\n        summarizedSlot.summary[\"target\"] = _target;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static #getSchedules_getFragment = (summary, tick) => {\r\n    const _summary = HAL.#getSchedules_copySummary(summary);\r\n    const fragment = HAL.#getSchedules_getFragmentRecursion(_summary, tick);\r\n    return fragment.map((schedule) => {\r\n      schedule[\"summary\"] = summary;\r\n      return schedule;\r\n    });\r\n  };\r\n  static #getSchedules_copySummary = (summary) => {\r\n    const _summary = JSON.parse(\r\n      JSON.stringify({ ...summary, root: undefined, target: undefined })\r\n    );\r\n    if (!!_summary?.activationState)\r\n      Object.keys(_summary.activationState).forEach((key) => {\r\n        if (_summary.activationState[key] === null)\r\n          // MUTATION!!\r\n          _summary.activationState[key] = Infinity;\r\n      });\r\n    if (!!_summary?.activationInfo)\r\n      Object.keys(_summary.activationInfo).forEach((key) => {\r\n        if (_summary.activationInfo[key] === null)\r\n          // MUTATION!!\r\n          _summary.activationInfo[key] = Infinity;\r\n      });\r\n\r\n    return _summary;\r\n  };\r\n  static #getSchedules_getFragmentRecursion = (summary, tick) => {\r\n    if (\r\n      !summary?.activationState?.isActive ||\r\n      summary?.activationState?.nextActivationTick !== tick\r\n    )\r\n      return [];\r\n    const currentTime = summary.activationState.nextActivation;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n    //prettier-ignore TODO: for testing, check tick is okay\r\n    if (state.isActive && state.nextActivationTick < tick)\r\n      console.warn(\"ERR: Tick is not in sync\");\r\n\r\n    // MUTATION!\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    // Check if next activation is in same tick\r\n    let subSecSchedule = [];\r\n    if (state.nextActivationTick === tick)\r\n      subSecSchedule = HAL.#getSchedules_getFragmentRecursion(summary, tick);\r\n\r\n    return [{ time: currentTime }, ...subSecSchedule];\r\n  };\r\n\r\n  static manageSchedules(schedules, summarizedSlot, situation) {\r\n    schedules.forEach((schedule) => {\r\n      if (!HAL.manageSchedules_validate(schedule.summary)) {\r\n        // MUTATION!\r\n        schedule.summary.activationState.isActive = false;\r\n        if (schedule.summary.operation === \"static\")\r\n          Summary.updateSummaries(summarizedSlot, situation);\r\n      } // TODO: loop through schedules with tick is moving\r\n\r\n      HAL.#manageSchedules_executeSchedule(schedule);\r\n    });\r\n  }\r\n  static #manageSchedules_executeSchedule = (schedule) => {\r\n    switch (schedule.summary.operation) {\r\n      case \"damage\":\r\n        Simulator.activateDamage(schedule.summary);\r\n        break;\r\n      case \"defense\":\r\n        Simulator.activateDefense(schedule.summary);\r\n        break;\r\n      case \"capacitor\":\r\n        Simulator.activateCapacitor(schedule.summary);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  static manageSchedules_validate(summary) {\r\n    if (!summary || !summary.activationState.isActive) return false;\r\n\r\n    const isCapacitorValidated = HAL.manageSchedules_validateCapacitor(summary);\r\n    const isStructureValidated = HAL.manageSchedules_validateStructure(summary);\r\n    if (!isCapacitorValidated || !isStructureValidated) return false;\r\n\r\n    return true;\r\n  }\r\n  static manageSchedules_validateCapacitor(summary) {\r\n    const activationInfo = summary.activationInfo;\r\n    const capacitorState =\r\n      summary?.load?.capacitor || summary.root.summary.load.capacitor;\r\n\r\n    if (capacitorState.HP < activationInfo.activationCost) return false;\r\n    else return true;\r\n  }\r\n  static manageSchedules_validateStructure(summary) {\r\n    const structureHP = summary?.load?.structure?.HP;\r\n    const rootStructureHP = summary.root.summary.load.structure.HP;\r\n\r\n    if (structureHP <= 0 || rootStructureHP <= 0) return false;\r\n    else return true;\r\n  }\r\n\r\n  static manageActivation(summarizedSlots, schedule) {}\r\n  static manageActivation_getCapUsageRateByPriorityLevel(summarizedSlots) {\r\n    return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((activationPriority) => {\r\n      let capUsageRateAccumulator = 0;\r\n      Fit.mapSlots(\r\n        summarizedSlots,\r\n        (slot) => {\r\n          const info = slot?.summary?.activationInfo;\r\n          const state = slot?.summary?.activationState;\r\n          if (!info || !state || state.activationPriority > activationPriority)\r\n            return 0;\r\n          const capUsageRate = info.activationCost / info.duration || 0;\r\n          capUsageRateAccumulator += capUsageRate;\r\n        },\r\n        {\r\n          isIterate: {\r\n            highSlots: true,\r\n            midSlots: true,\r\n            lowSlots: true,\r\n          },\r\n        }\r\n      );\r\n\r\n      return { activationPriority, capUsageRate: capUsageRateAccumulator };\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport FittingDrawer from \"./FittingDrawer/FittingDrawer.jsx\";\r\nimport { useState } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Fit from \"../../fitter/src/Fit\";\r\nimport StatDrawer from \"./Stats/StatDrawer.jsx\";\r\nimport EFT from \"./services/EFT.js\";\r\nimport ListDrawers from \"./ListDrawer/ListDrawers.jsx\";\r\nimport Simulator from \"../FitCard/Stats/services/Simulator.js\";\r\n\r\nconst initialSlots = {\r\n  skills: false,\r\n  ship: false,\r\n  miscSlots: [],\r\n  lowSlots: [],\r\n  midSlots: [],\r\n  highSlots: [],\r\n  rigSlots: [],\r\n  droneSlots: [],\r\n};\r\nfunction slotsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SKILL\":\r\n      return {\r\n        ...state,\r\n        skills: action.payload,\r\n      };\r\n    case \"SHIP\":\r\n      return {\r\n        ...state,\r\n        ship:\r\n          //prettier-ignore\r\n          action.payload[0]?.item !== undefined ? action.payload[0].item : false,\r\n      };\r\n    case \"MISC_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...state,\r\n        [translateVariant(action.type)]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst initialSlotsOpen = {\r\n  SHIP: { open: false },\r\n  MISC_SLOT: { open: false },\r\n  HIGH_SLOT: { open: false },\r\n  MID_SLOT: { open: false },\r\n  LOW_SLOT: { open: false },\r\n  RIG_SLOT: { open: false, filter: false },\r\n  DRONE_SLOT: { open: false, filter: false },\r\n\r\n  AMMO: { open: false, slotVariant: false, filter: false },\r\n  STAT: { open: false, slotVariant: false, slotNumber: false, filter: false },\r\n};\r\n\r\nfunction slotsOpenReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return { ...initialSlotsOpen, [action.type]: { open: true } };\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        DRONE_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RIG_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        RIG_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"AMMO\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        AMMO: {\r\n          open: true,\r\n          slotVariant: action.payload.slotVariant,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"STAT\":\r\n      return {\r\n        ...state,\r\n        STAT: {\r\n          open: action.payload.open,\r\n          slotVariant: action.payload.slotVariant,\r\n          slotNumber: action.payload.slotNumber,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RESET\":\r\n    default:\r\n      return initialSlotsOpen;\r\n  }\r\n}\r\n\r\nconst initialListItems = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n  AMMO: false,\r\n};\r\nfunction listItemsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n    case \"AMMO\":\r\n      return { ...state, [action.type]: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function Drawers(props) {\r\n  //prettier-ignore\r\n  const [activeSlot, setActiveSlot] = useState({ type: false, index: false});\r\n\r\n  const [slots, dispatchSlots] = useReducer(slotsReducer, initialSlots);\r\n  const [slotsOpen, dispatchSlotsOpen] = useReducer(\r\n    slotsOpenReducer,\r\n    initialSlotsOpen\r\n  );\r\n  const [listItems, dispatchListItems] = useReducer(\r\n    listItemsReducer,\r\n    initialListItems\r\n  );\r\n\r\n  const [fit, setFit] = useState(false);\r\n  const [exportFitText, setExportFitText] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache\r\n      .wait(\"/skillsStaticBoard\")\r\n      .then((data) => dispatchSlots({ type: \"SKILL\", payload: data }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.open === true) dispatchSlotsOpen({ type: \"SHIP\" });\r\n    else dispatchSlotsOpen({ type: \"RESET\" });\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    /* console.log(\r\n      \"FitCalc\"\r\n    );\r\n    console.time(\"Fit Stat Calculation\"); */\r\n    const appliedFit = Fit.apply(slots);\r\n    /*  console.timeEnd(\"Fit Stat Calculation\");\r\n    console.log(appliedFit);\r\n    console.log(\r\n      ``\r\n    ); */\r\n    setFit(appliedFit);\r\n    props.setFit(appliedFit);\r\n    props.setFitID(EFT.buildCompareTextFromFit(slots));\r\n    props.setSlots(slots);\r\n\r\n    const appliedFitExportText = EFT.buildTextFromFit(appliedFit);\r\n    const appliedSlotsModified = { ...slots, skills: undefined };\r\n    setExportFitText(appliedFitExportText);\r\n    localStorage.setItem(\r\n      `${props.tag}SLOTS`,\r\n      JSON.stringify(appliedSlotsModified)\r\n    );\r\n    localStorage.setItem(`${props.tag}EFT`, appliedFitExportText);\r\n  }, [EFT.buildCompareTextFromFit(slots)]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListDrawers\r\n        tag={props.tag}\r\n        expand={props.expand}\r\n        slotsOpen={slotsOpen}\r\n        fit={fit}\r\n        slots={slots}\r\n        activeSlot={activeSlot}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        fitID={props.fitID}\r\n        cache={props.cache}\r\n      />\r\n\r\n      <FittingDrawer\r\n        tag={props.tag}\r\n        fit={fit}\r\n        slots={slots}\r\n        open={props.open}\r\n        setOpen={props.setOpen}\r\n        expand={props.expand}\r\n        setExpand={props.setExpand}\r\n        backgroundColor={props.backgroundColor}\r\n        exportFitText={exportFitText}\r\n        slotsOpen={slotsOpen}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        listItems={listItems}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlots={dispatchSlots}\r\n        setActiveSlot={setActiveSlot}\r\n        cache={props.cache}\r\n      />\r\n      <StatDrawer\r\n        open={slotsOpen.STAT.open}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        slot={giveSlotToStatDrawer(fit, slotsOpen.STAT)}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction giveSlotToStatDrawer(fit, STAT) {\r\n  if (!STAT.slotVariant) return undefined;\r\n  switch (STAT.slotVariant) {\r\n    case \"SHIP\":\r\n      return fit.ship;\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n      return fit[translateVariant(STAT.slotVariant)][STAT.slotNumber];\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\nexport function translateVariant(variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return \"ship\";\r\n    case \"MISC_SLOT\":\r\n      return \"miscSlots\";\r\n    case \"HIGH_SLOT\":\r\n      return \"highSlots\";\r\n    case \"MID_SLOT\":\r\n      return \"midSlots\";\r\n    case \"LOW_SLOT\":\r\n      return \"lowSlots\";\r\n    case \"RIG_SLOT\":\r\n      return \"rigSlots\";\r\n    case \"DRONE_SLOT\":\r\n      return \"droneSlots\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const ArmorIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ShieldIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const StructureIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"6.771\"\r\n      y1=\"8.587\"\r\n      x2=\"17.862\"\r\n      y2=\"14.945\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"17.862\"\r\n      y1=\"8.587\"\r\n      x2=\"6.606\"\r\n      y2=\"15.11\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"12.266\"\r\n      y1=\"5.257\"\r\n      x2=\"12.266\"\r\n      y2=\"18.33\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const EhpIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 17.856 11.92 L 17.856 11.92 Q 18.168 11.92 18.348 12.208 L 18.348 12.208 L 18.348 12.208 Q 18.528 12.496 18.528 13 L 18.528 13 L 18.528 13 Q 18.528 13.96 18.072 14.488 L 18.072 14.488 L 18.072 14.488 Q 17.184 15.568 15.564 16.48 L 15.564 16.48 L 15.564 16.48 Q 13.944 17.392 12.096 17.392 L 12.096 17.392 L 12.096 17.392 Q 9.576 17.392 8.184 16.024 L 8.184 16.024 L 8.184 16.024 Q 6.792 14.656 6.792 12.28 L 6.792 12.28 L 6.792 12.28 Q 6.792 10.624 7.488 9.196 L 7.488 9.196 L 7.488 9.196 Q 8.184 7.768 9.42 6.928 L 9.42 6.928 L 9.42 6.928 Q 10.656 6.088 12.216 6.088 L 12.216 6.088 L 12.216 6.088 Q 13.608 6.088 14.448 6.916 L 14.448 6.916 L 14.448 6.916 Q 15.288 7.744 15.288 9.16 L 15.288 9.16 L 15.288 9.16 Q 15.288 10.816 14.1 12.004 L 14.1 12.004 L 14.1 12.004 Q 12.912 13.192 10.08 13.888 L 10.08 13.888 L 10.08 13.888 Q 10.68 14.992 12.36 14.992 L 12.36 14.992 L 12.36 14.992 Q 13.44 14.992 14.82 14.236 L 14.82 14.236 L 14.82 14.236 Q 16.2 13.48 17.208 12.256 L 17.208 12.256 L 17.208 12.256 Q 17.496 11.92 17.856 11.92 L 17.856 11.92 L 17.856 11.92 Z  M 11.808 8.44 L 11.808 8.44 Q 10.92 8.44 10.308 9.472 L 10.308 9.472 L 10.308 9.472 Q 9.696 10.504 9.696 11.968 L 9.696 11.968 L 9.696 12.016 L 9.696 12.016 Q 11.112 11.68 11.928 11.008 L 11.928 11.008 L 11.928 11.008 Q 12.744 10.336 12.744 9.448 L 12.744 9.448 L 12.744 9.448 Q 12.744 8.992 12.492 8.716 L 12.492 8.716 L 12.492 8.716 Q 12.24 8.44 11.808 8.44 L 11.808 8.44 L 11.808 8.44 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport {\r\n  LinearProgress,\r\n  Typography,\r\n  Grid,\r\n  withStyles,\r\n  useTheme,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 20,\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n  },\r\n  rootGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n  },\r\n  progress: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  childGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  label: {\r\n    fontSize: 12,\r\n    color: \"#ffffff\",\r\n  },\r\n  description: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function LinearProgressLabel(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const LinearProgressFixed = useCallback(\r\n    withStyles(() => ({\r\n      root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: !!props.backgroundColor\r\n          ? props.backgroundColor\r\n          : theme.palette.background.paper,\r\n      },\r\n      bar: {\r\n        backgroundColor: !!props.color\r\n          ? props.color\r\n          : theme.palette.background.paper,\r\n      },\r\n    }))(LinearProgress),\r\n    [props.backgroundColor, props.color, theme]\r\n  );\r\n\r\n  return (\r\n    <Grid className={classes.root}>\r\n      <Grid className={classes.rootGrid}>\r\n        <LinearProgressFixed\r\n          className={classes.progress}\r\n          variant=\"determinate\"\r\n          value={props.value}\r\n        />\r\n      </Grid>\r\n      <Grid className={classes.childGrid}>\r\n        {props.Icon}\r\n        <Typography className={classes.label} {...props.typographyProps}>\r\n          {props.label}\r\n        </Typography>\r\n        <Typography\r\n          className={classes.description}\r\n          style={{ paddingLeft: !!props.description ? 5 : 0 }}\r\n        >\r\n          {props.description}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, Grid, ListItem, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\n\r\nexport const ResistanceProgressLabel = React.forwardRef((props, ref) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid innerRef={ref} item xs={12}>\r\n        <ListItem style={{ width: \"100%\", padding: 0 }} button={!!props.button}>\r\n          <LinearProgressLabel\r\n            value={0}\r\n            label={getLabel(props)}\r\n            description={getDescription(props)}\r\n            backgroundColor={theme.palette.background.paper}\r\n            Icon={props.Icon}\r\n            typographyProps={{\r\n              style: {\r\n                fontSize: 14,\r\n                fontWeight: 700,\r\n                color: theme.palette.text.primary,\r\n              },\r\n            }}\r\n          />\r\n        </ListItem>\r\n      </Grid>\r\n\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EM}\r\n          label={`${props.resistance?.EM.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.blueSecondary}\r\n          color={theme.palette.property.blue}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.TH}\r\n          label={`${props.resistance?.TH.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.redSecondary}\r\n          color={theme.palette.property.red}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.KI}\r\n          label={`${props.resistance?.KI.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.greySecondary}\r\n          color={theme.palette.property.grey}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EX}\r\n          label={`${props.resistance?.EX.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.orgSecondary}\r\n          color={theme.palette.property.org}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});\r\nfunction getDescription(props) {\r\n  const ehpFactor = calculateEhpFactor(props.damageType, props.resistance);\r\n  if (ehpFactor === 1 || !ehpFactor) return \"\";\r\n\r\n  if (props.activeBonus === 0)\r\n    return `${(props.resistance?.HP * ehpFactor).toFixed(0)}`;\r\n  return `${(props.resistance?.HP * ehpFactor).toFixed(0)}+${(\r\n    props.activeBonus * ehpFactor\r\n  ).toFixed(1)}/s`;\r\n}\r\nfunction getLabel(props) {\r\n  if (!!props.label) return props.label;\r\n  if (props.activeBonus === 0) return `${(props.resistance?.HP).toFixed(0)}`;\r\n  return `${(props.resistance?.HP).toFixed(0)}+${props.activeBonus.toFixed(\r\n    1\r\n  )}/s`;\r\n}\r\nfunction calculateEhpFactor(damageType, resistance) {\r\n  if (!damageType || !resistance) return 1;\r\n\r\n  return (\r\n    (100 * (damageType.EM + damageType.TH + damageType.KI + damageType.EX)) /\r\n    (damageType.EM * (100 - resistance.EM) +\r\n      damageType.TH * (100 - resistance.TH) +\r\n      damageType.KI * (100 - resistance.KI) +\r\n      damageType.EX * (100 - resistance.EX))\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  List,\r\n  ListItem,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { EhpIcon } from \"../../Icons/defenseIcons\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\n\r\nconst scrollbarWidth = (() => {\r\n  // Creating invisible container\r\n  const outer = document.createElement(\"div\");\r\n  outer.style.visibility = \"hidden\";\r\n  outer.style.overflow = \"scroll\"; // forcing scrollbar to appear\r\n  outer.style.msOverflowStyle = \"scrollbar\"; // needed for WinJS apps\r\n  document.body.appendChild(outer);\r\n\r\n  // Creating inner element and placing it in the container\r\n  const inner = document.createElement(\"div\");\r\n  outer.appendChild(inner);\r\n\r\n  // Calculating difference between container's full width and the child width\r\n  const _scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\r\n\r\n  // Removing temporary elements from the DOM\r\n  outer.parentNode.removeChild(outer);\r\n\r\n  return _scrollbarWidth;\r\n})();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: 300 + scrollbarWidth,\r\n    maxHeight: 400,\r\n    overflowY: \"auto\",\r\n    overflowX: \"hidden\",\r\n    paddingRight: scrollbarWidth,\r\n  },\r\n  listItem: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nfunction DamageTypeList(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <List className={classes.list} component=\"div\">\r\n      {damgeTypes.map((damageType) => {\r\n        return (\r\n          <ListItem\r\n            key={damageType.name}\r\n            className={classes.listItem}\r\n            button\r\n            onClick={() => {\r\n              props.setDamageType({ ...damageType });\r\n            }}\r\n          >\r\n            <ResistanceProgressLabel\r\n              label={damageType.name}\r\n              resistance={damageType}\r\n            />\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default function DamageTypeProgressLabel(props) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n\r\n  const anchorEl = useRef(null);\r\n\r\n  const [DamageTypeListOpen, setDamageTypeListOpen] = useState(false);\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setDamageTypeListOpen(false);\r\n      }}\r\n    >\r\n      {/* wrraper for ClickAwayListener */}\r\n      <div className={classes.root}>\r\n        <div\r\n          ref={anchorEl}\r\n          onClick={() => {\r\n            setDamageTypeListOpen(!DamageTypeListOpen);\r\n          }}\r\n        >\r\n          <ResistanceProgressLabel\r\n            label={props.damageType.name || \"Omni\"}\r\n            Icon={\r\n              <div style={{ height: 24 }}>\r\n                <EhpIcon color={theme.palette.text.primary} />\r\n              </div>\r\n            }\r\n            resistance={props.damageType}\r\n            button\r\n          />\r\n        </div>\r\n        <Popper\r\n          open={DamageTypeListOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <DamageTypeList setDamageType={props.setDamageType} />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nconst damgeTypes = [\r\n  { name: \"Omni\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Amarr\", EM: 60, TH: 40, KI: 0, EX: 0 },\r\n  { name: \"Minmatar\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Caldari\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Gallente\", EM: 25, TH: 40, KI: 60, EX: 25 },\r\n  { name: \"Angel Cartel\", EM: 7, TH: 9, KI: 22, EX: 62 },\r\n  { name: \"Blood Raiders\", EM: 50, TH: 48, KI: 1, EX: 1 },\r\n  { name: \"Drones\", EM: 6, TH: 6, KI: 20, EX: 68 },\r\n  { name: \"EoM\", EM: 0, TH: 26, KI: 74, EX: 0 },\r\n  { name: \"Guristas\", EM: 2, TH: 18, KI: 79, EX: 1 },\r\n  { name: \"Mercenaries\", EM: 51, TH: 9, KI: 33, EX: 7 },\r\n  { name: \"Mordu's Region\", EM: 30, TH: 0, KI: 70, EX: 0 },\r\n  { name: \"Sansha\", EM: 53, TH: 47, KI: 0, EX: 0 },\r\n  { name: \"Blood\", EM: 0, TH: 55, KI: 45, EX: 0 },\r\n  { name: \"Electro Magnetic\", EM: 100, TH: 0, KI: 0, EX: 0 },\r\n  { name: \"Thermal\", EM: 0, TH: 100, KI: 0, EX: 0 },\r\n  { name: \"Kinetic\", EM: 0, TH: 0, KI: 100, EX: 0 },\r\n  { name: \"Explosive\", EM: 0, TH: 0, KI: 0, EX: 100 },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  ArmorIcon,\r\n  EhpIcon,\r\n  ShieldIcon,\r\n  StructureIcon,\r\n} from \"../../Icons/defenseIcons.jsx\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport DamageTypeProgressLabel from \"./DamageTypeProgressLabel.jsx\";\r\n\r\n// EM-TH-KI-EX\r\nexport default function Resistance(props) {\r\n  const theme = useTheme();\r\n\r\n  const [damageType, setDamageType] = useState({\r\n    EM: 25,\r\n    TH: 25,\r\n    KI: 25,\r\n    EX: 25,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <ResistanceProgressLabel\r\n          variant=\"shield\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ShieldIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.shield}\r\n          activeBonus={props.stat.defense.active.shieldBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"armor\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ArmorIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.armor}\r\n          activeBonus={props.stat.defense.active.armorBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"structure\"\r\n          Icon={\r\n            <div>\r\n              <StructureIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.structure}\r\n          activeBonus={props.stat.defense.active.structureBonus}\r\n          damageType={damageType}\r\n        />\r\n        <DamageTypeProgressLabel\r\n          damageType={damageType}\r\n          setDamageType={setDamageType}\r\n        />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const TurretIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5.284\"\r\n      y1=\"12.303\"\r\n      x2=\"15.248\"\r\n      y2=\"7.431\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n      strokeLinecap=\"round\"\r\n    />\r\n    <path\r\n      d=\" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const LauncherIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CalibrationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneBayIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z \"\r\n        fill=\"none\"\r\n        strokeWidth=\"1\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"9.328\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"14.602\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.328\"\r\n        y1=\"14.789\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeLinecap=\"square\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"14.602\"\r\n        y1=\"14.789\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\nexport const DroneBandwidthIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z \"\r\n        fill={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.041\"\r\n        y1=\"6.915\"\r\n        x2=\"9.635\"\r\n        y2=\"9.728\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.635\"\r\n        y1=\"14.118\"\r\n        x2=\"7.041\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"15.844\"\r\n        y1=\"16.281\"\r\n        x2=\"16.479\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\n\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    marginBottom: 8,\r\n    width: \"100%\",\r\n    paddingLeft: 10,\r\n  },\r\n  boldTypography: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n  },\r\n}));\r\n\r\nconst GridBoldTypography = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid style={{ flexBasis: 140, maxWidth: 140 }}>\r\n      <TextField\r\n        label={\r\n          <Typography className={classes.boldTypography} noWrap>\r\n            {props.children}\r\n          </Typography>\r\n        }\r\n        value={props.value || 0}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n        inputProps={{\r\n          style: {\r\n            padding: \"2px 0px 2px 0px\",\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n          },\r\n        }}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default function ResourcesMiscellaneousListItem(props) {\r\n  const classes = useStyles();\r\n\r\n  const [misc, setMisc] = useState(Stat.defaultStat.miscellaneous);\r\n\r\n  useEffect(() => {\r\n    setMisc(props.stat.miscellaneous);\r\n  }, [props.stat.miscellaneous]);\r\n\r\n  return (\r\n    <ListItem className={classes.root} key=\"onlyOne\">\r\n      <Grid justify=\"center\" container>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumLockedTarget}\r\n        >{`Max Locked Target`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumTargetingRange}\r\n        >{`Max Trageting Range (m)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.scanResolution}\r\n        >{`Scan Resolution (mm)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.gravimetric?.toFixed(1)}\r\n        >\r\n          {`Gravimetric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.magnetometric?.toFixed(1)}\r\n        >\r\n          {`Magnetometric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.ladar?.toFixed(1)}\r\n        >{`Ladar (point)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.radar?.toFixed(1)}\r\n        >{`Radar (point)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.propulsion.TextFieldmaximumVelocity?.toFixed(2)}\r\n        >{`Max Velocity (m/sec)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.inertialModifier?.toFixed(6)}\r\n        >{`Inertia Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.warpSpeedMultiplier}\r\n        >{`Warp Speed Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.misc.signatureRadius?.toFixed(2)}\r\n        >{`Signature Radius (m)`}</GridBoldTypography>\r\n        <Grid style={{ flexBasis: 140 }} item />\r\n      </Grid>\r\n    </ListItem>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Grid,\r\n  Tooltip,\r\n  List,\r\n  ListItem,\r\n  Collapse,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport {\r\n  TurretIcon,\r\n  LauncherIcon,\r\n  CalibrationIcon,\r\n  DroneBayIcon,\r\n  DroneBandwidthIcon,\r\n} from \"../../Icons/resourceIcons\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useCallback } from \"react\";\r\nimport ResourcesMiscellaneousListItem from \"./ResourcesMiscellaneousListItem\";\r\n\r\nconst TurretHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Turret Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst LauncherHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Launcher Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <LauncherIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst Calibration = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Calibration\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <CalibrationIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBandwidth = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bandwidth\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBandwidthIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBay = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bay\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBayIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function Hardpoints(props) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const [load, setLoad] = useState(Stat.defaultStat.resource.load);\r\n  const [capacity, setCapacity] = useState(Stat.defaultStat.resource.capacity);\r\n\r\n  useEffect(() => {\r\n    setLoad(props.stat.resource.load);\r\n    setCapacity(props.stat.resource.capacity);\r\n  }, [props.stat]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid container item alignContent=\"center\">\r\n            <Grid item xs={4} sm={2}>\r\n              <TurretHardpoint label={`${load.turret}/${capacity.turret}`} />\r\n            </Grid>\r\n            <Grid item xs={4} sm={2}>\r\n              <LauncherHardpoint\r\n                label={`${load.launcher}/${capacity.launcher}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={4} sm={2}>\r\n              <Calibration\r\n                label={`${load.calibration}/${capacity.calibration}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBay\r\n                value={load.droneBay / capacity.droneBay}\r\n                label={`${load.droneBay}/${capacity.droneBay}m3`}\r\n                isError={load.droneBay > capacity.droneBay}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBandwidth\r\n                value={load.droneBandwidth / capacity.droneBandwidth}\r\n                label={`${load.droneBandwidth}/${capacity.droneBandwidth}Mbit/s`}\r\n                isError={load.droneBandwidth > capacity.droneBandwidth}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <ResourcesMiscellaneousListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const AlphaIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneDamageSVG = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"10.652\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"13.348\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"10.652\"\r\n        y1=\"13.442\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"13.348\"\r\n        y1=\"13.442\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <path\r\n        d=\" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z \"\r\n        fill=\"rgb(255,255,255)\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles, Typography, ListItem, useTheme } from \"@material-ui/core\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPostIt: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n  },\r\n  rootDiv: {\r\n    padding: 0,\r\n    width: \"100%\",\r\n    height: 52,\r\n    position: \"relative\",\r\n  },\r\n  label: {\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 6,\r\n    fontSize: 11,\r\n    color: \"#ffffff\",\r\n    fontWeight: 700,\r\n  },\r\n  optimalRangeLabel: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  rangeFont: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nconst PostIt = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div\r\n      className={classes.rootPostIt}\r\n      style={{\r\n        width: `${props.share || 0}%`,\r\n        height: props.index * 13 + 22,\r\n        borderRight: `solid 1px ${props.color}`,\r\n      }}\r\n    >\r\n      <div style={{ backgroundColor: props.color, height: 20 }} />\r\n      <div style={{ height: props.index * 13 }} />\r\n\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OptimalRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <PostIt\r\n      share={props.share.optimalRangeShare}\r\n      index={0}\r\n      color={theme.palette.property.green}\r\n    >\r\n      <Typography className={classes.rangeFont} align=\"right\">\r\n        {`${(props.share.optimalRange / 1000).toFixed(1)}KM`}\r\n      </Typography>\r\n    </PostIt>\r\n  );\r\n};\r\nconst FalloffRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    props.share.falloffRange > 0 && (\r\n      <PostIt\r\n        share={props.share.falloffRangeShare}\r\n        index={1}\r\n        color={theme.palette.property.org}\r\n      >\r\n        <Typography className={classes.rangeFont} align=\"right\">\r\n          {\r\n            //prettier-ignore\r\n            `${((props.share.optimalRange + props.share.falloffRange) / 1000).toFixed(1)}KM`\r\n          }\r\n        </Typography>\r\n      </PostIt>\r\n    )\r\n  );\r\n};\r\n\r\nexport default function DamageRangeListItem(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [shares, setShares] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setShares(getShares(props.stat.damage.turretLauncherRange));\r\n  }, [props.stat.damage.turretLauncherRange]);\r\n\r\n  return shares.map((share) => {\r\n    return (\r\n      <ListItem\r\n        className={classes.root}\r\n        key={`${share.optimalRangeShare}/${share.falloffRangeShare}`}\r\n      >\r\n        <div className={classes.rootDiv}>\r\n          <PostIt\r\n            share={100}\r\n            index={2}\r\n            color={theme.palette.property.greySecondary}\r\n          />\r\n          <FalloffRangeBar share={share} />\r\n          <OptimalRangeBar share={share} />\r\n          <Typography className={classes.label}>\r\n            {`${share.debug[0].item.typeName} - ${share.debug[0].charge.typeName}`}\r\n          </Typography>\r\n        </div>\r\n      </ListItem>\r\n    );\r\n  });\r\n}\r\nfunction getShares(turretLauncherRange) {\r\n  const rangeMax = turretLauncherRange.reduce((acc, range) => {\r\n    const rangeSum = range.optimalRange + range.falloffRange;\r\n    if (rangeSum > acc) return rangeSum;\r\n    else return acc;\r\n  }, 0);\r\n\r\n  return turretLauncherRange.map((range) => {\r\n    return {\r\n      ...range,\r\n      optimalRangeShare: (range.optimalRange / rangeMax) * 100,\r\n      falloffRangeShare:\r\n        ((range.falloffRange + range.optimalRange) / rangeMax) * 100,\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { AlphaIcon, DroneDamageSVG } from \"../../Icons/damageIcons\";\r\nimport { TurretIcon } from \"../../Icons/resourceIcons\";\r\nimport {\r\n  Tooltip,\r\n  Grid,\r\n  makeStyles,\r\n  Collapse,\r\n  ListItem,\r\n  List,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport DamageRangeListItem from \"./DamageRangeListItem\";\r\n\r\nconst WeaponDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Weapon DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst WeaponAlpha = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Alpha Damage\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <AlphaIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Drone DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneDamageSVG\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    height: 20,\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n}));\r\n\r\nexport default function Damage(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <Grid container>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid item xs={1}></Grid>\r\n          <Grid item xs={4}>\r\n            <WeaponDps\r\n              label={`${props.stat.damage.turretLauncherDamage.effective.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <WeaponAlpha\r\n              label={`${props.stat.damage.turretLauncherDamage.alpha.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <DroneDps\r\n              label={`${props.stat.damage.droneDamage.max.toFixed(0)}`}\r\n              isError={\r\n                props.stat.resource.load.droneActive >\r\n                props.stat.resource.capacity.droneActive\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}></Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <DamageRangeListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport FlagIcon from \"@material-ui/icons/Flag\";\r\n\r\nconst Cpu = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}tf`}\r\n      backgroundColor={theme.palette.property.blueSecondary}\r\n      color={theme.palette.property.blue}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\nconst Powergrid = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}MW`}\r\n      backgroundColor={theme.palette.property.redSecondary}\r\n      color={theme.palette.property.red}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default function Engineering(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          <Cpu\r\n            load={props.stat.engineering.cpu.load}\r\n            output={props.stat.engineering.cpu.output}\r\n          />\r\n          <Powergrid\r\n            load={props.stat.engineering.pg.load}\r\n            output={props.stat.engineering.pg.output}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction getPercent(load, output) {\r\n  if (!load || !output) return 0;\r\n  if (load.constructor !== Number || output.constructor !== Number) return 0;\r\n\r\n  const percent = Number((load / output) * 100);\r\n  if (percent >= 100) return 100;\r\n  else return percent;\r\n}\r\nfunction getNum(data) {\r\n  if (!data || data.constructor !== Number) return 0;\r\n  else return data;\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const CapacitorChargeIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z \"\r\n      fill={props.color || \"#000000\"}\r\n      strokeWidth=\"1.5\"\r\n      stroke={props.backgroundColor || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { CapacitorChargeIcon } from \"../../Icons/capacitorIcons\";\r\nimport { Tooltip, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  tooltip: {\r\n    maxWidth: 80,\r\n  },\r\n}));\r\n\r\nexport default function Capacitor(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgressLabel\r\n        value={0}\r\n        label={`${(\r\n          props.stat.capacitor.ambientChargeRate +\r\n          props.stat.capacitor.boosterChargeRate -\r\n          props.stat.capacitor.activationUseRate\r\n        ).toFixed(2)}GJ/s`}\r\n        backgroundColor={theme.palette.background.paper}\r\n        Icon={\r\n          <Tooltip\r\n            classes={{ tooltip: classes.tooltip }}\r\n            //prettier-ignore\r\n            title={`Passive +${props.stat.capacitor.ambientChargeRate.toFixed(2)} \r\n            Active +${props.stat.capacitor.boosterChargeRate.toFixed(2)} \r\n            Active -${props.stat.capacitor.activationUseRate.toFixed(2)}`}\r\n            placement=\"left\"\r\n            arrow\r\n          >\r\n            <div style={{ height: 24 }}>\r\n              <CapacitorChargeIcon\r\n                color={theme.palette.text.primary}\r\n                backgroundColor={theme.palette.background.paper}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n        }\r\n        typographyProps={{\r\n          style: {\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n            color: theme.palette.text.primary,\r\n          },\r\n        }}\r\n      />\r\n      <LinearProgressLabel\r\n        value={props.stat.capacitor.stableLevel}\r\n        label={`${props.stat.capacitor.stableLevel}%`}\r\n        backgroundColor={theme.palette.property.orgSecondary}\r\n        color={theme.palette.property.org}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Resistance from \"./Resistance\";\r\nimport Resources from \"./Resouces\";\r\nimport Damage from \"./Damage\";\r\nimport Engineering from \"./Engineering\";\r\nimport Capacitor from \"./Capacitor\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function StatsSummary(props) {\r\n  useEffect(() => {\r\n    const stat = Stat.stat(props.fit);\r\n    props.setStat(stat);\r\n  }, [props.fitID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Resources {...props} />\r\n      <Damage {...props} />\r\n      <Capacitor {...props} />\r\n      <Resistance {...props} />\r\n      <Engineering {...props} />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport Drawers from \"../Drawers/Drawers\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  makeStyles,\r\n  useTheme,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport StatsSummary from \"./Stats/StatsSummary\";\r\nimport Stat from \"./Stats/services/Stat\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  editButton: {\r\n    fontSize: 26,\r\n    fontWeight: 1000,\r\n    letterSpacing: -1.5,\r\n    lineHeight: 1,\r\n    width: \"auto\",\r\n  },\r\n}));\r\n\r\nconst EditButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      style={{\r\n        height: 70,\r\n        borderRadius: 0,\r\n        backgroundColor: props.backgroundColor,\r\n        marginBottom: 10,\r\n      }}\r\n      fullWidth\r\n      onClick={() => {\r\n        props.setOpen(!props.open);\r\n      }}\r\n    >\r\n      <Grid container item xs={2} justify=\"center\">\r\n        <Avatar\r\n          style={{\r\n            padding: 5,\r\n            width: 40,\r\n            height: 40,\r\n            backgroundColor: props.color,\r\n          }}\r\n        >\r\n          {!!props.fit?.ship?.typeID ? (\r\n            <img\r\n              draggable=\"false\"\r\n              style={{ width: 50, height: 50 }}\r\n              src={`https://images.evetech.net/types/${props.fit?.ship?.typeID}/icon?size=128`}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Avatar>\r\n      </Grid>\r\n      <Grid item xs={10}>\r\n        <Typography\r\n          className={classes.editButton}\r\n          style={{\r\n            color: props.color,\r\n          }}\r\n          align=\"center\"\r\n        >\r\n          {getFitCardTitle(props.open, props.fit.ship?.typeName)}\r\n        </Typography>\r\n      </Grid>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default function FitCard(props) {\r\n  const [fit, setFit] = useState(false);\r\n  const [fitID, setFitID] = useState(false);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [expand, setExpand] = useState(window.innerWidth < 1000 ? false : true);\r\n\r\n  const [stat, setStat] = useState(Stat.defaultStat);\r\n\r\n  const isInitialRender = useRef(true);\r\n  useEffect(() => {\r\n    if (!isInitialRender.current && !isSyncing.current) {\r\n      props.dispatchDrawersOpen({\r\n        type: open ? \"OPEN\" : \"CLOSE\",\r\n        tag: props.tag,\r\n        payload: open,\r\n      });\r\n    } else {\r\n      isInitialRender.current = false;\r\n      isSyncing.current = false;\r\n    }\r\n  }, [open]);\r\n\r\n  const isSyncing = useRef(false); // Too complicated.!\r\n  useEffect(() => {\r\n    setOpen(props.drawersOpen[props.tag]);\r\n    if (open !== props.drawersOpen[props.tag]) isSyncing.current = true;\r\n  }, [props.drawersOpen[props.tag]]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card\r\n        style={{ width: \"85%\", minWidth: 300, maxWidth: 600 }}\r\n        elevation={3}\r\n      >\r\n        <EditButton\r\n          fit={fit}\r\n          open={open}\r\n          setOpen={setOpen}\r\n          backgroundColor={props.backgroundColor}\r\n          color={props.color}\r\n        />\r\n        <StatsSummary fit={fit} fitID={fitID} stat={stat} setStat={setStat} />\r\n      </Card>\r\n\r\n      <Drawers\r\n        tag={props.tag}\r\n        open={open}\r\n        setOpen={setOpen}\r\n        backgroundColor={props.backgroundColor}\r\n        expand={expand}\r\n        setExpand={setExpand}\r\n        fitID={fitID}\r\n        setFitID={setFitID}\r\n        setFit={setFit}\r\n        setSlots={props.setSlots}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction getFitCardTitle(open, typeName) {\r\n  if (!typeName)\r\n    return open\r\n      ? \"> CLICK HERE TO START FITTING <\"\r\n      : \"CLICK HERE TO START FITTING\";\r\n  else return open ? `> ${typeName} <` : typeName;\r\n}\r\n","import React from \"react\";\r\nimport { Stage, Layer, Arrow, Circle, Line, Text } from \"react-konva\";\r\nimport {\r\n  makeStyles,\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  ButtonGroup,\r\n  Icon,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useCallback } from \"react\";\r\nimport PanToolIcon from \"@material-ui/icons/PanTool\";\r\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\r\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\r\nimport ReplayIcon from \"@material-ui/icons/Replay\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"85%\",\r\n    minWidth: 300,\r\n    maxWidth: 600,\r\n    height: \"80%\",\r\n  },\r\n}));\r\n\r\nconst hostileAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 200,\r\n    anchor2X: 75,\r\n    anchor2Y: 200,\r\n  },\r\n  vector: {\r\n    x: 50,\r\n    y: 0,\r\n    pX: 50,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction hostileAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return hostileAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\nconst onBoardAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 25,\r\n    anchor2X: 25,\r\n    anchor2Y: 25,\r\n  },\r\n  vector: {\r\n    x: 0,\r\n    y: 0,\r\n    pX: 0,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction onBoardAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return onBoardAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\n\r\nexport default function ShipCanvas(props) {\r\n  const [hostileAnchor, dispatchHostileAnchor] = useReducer(\r\n    hostileAnchorReducer,\r\n    hostileAnchorInitial\r\n  );\r\n  const [onBoardAnchor, dispatchOnBoardAnchor] = useReducer(\r\n    onBoardAnchorReducer,\r\n    onBoardAnchorInitial\r\n  );\r\n  const [distanceVector, setDistanceVector] = useState({\r\n    x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n    y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n  });\r\n  const [distance, setDistance] = useState(\r\n    Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100\r\n  );\r\n  const [stageWheel, setStageWheel] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n  const [stagePoint, setStagePoint] = useState({ x: 0, y: 0 });\r\n  const [isStageDrragable, setStageDraggable] = useState(false);\r\n\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      hostileAnchor.anchors.anchor2X - hostileAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      hostileAnchor.anchors.anchor2Y - hostileAnchor.anchors.anchor1Y;\r\n    dispatchHostileAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [hostileAnchor.anchors.anchor2X, hostileAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      onBoardAnchor.anchors.anchor2X - onBoardAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      onBoardAnchor.anchors.anchor2Y - onBoardAnchor.anchors.anchor1Y;\r\n    dispatchOnBoardAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [onBoardAnchor.anchors.anchor2X, onBoardAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const _distanceVector = {\r\n      x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n      y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n    };\r\n    const _distance =\r\n      Math.sqrt(\r\n        Math.pow(_distanceVector.x, 2) + Math.pow(_distanceVector.y, 2)\r\n      ) / 100;\r\n    setDistanceVector(_distanceVector);\r\n    setDistance(_distance);\r\n  }, [\r\n    hostileAnchor.anchors.anchor1X,\r\n    onBoardAnchor.anchors.anchor1X,\r\n    hostileAnchor.anchors.anchor1Y,\r\n    onBoardAnchor.anchors.anchor1Y,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    dispatchSituation();\r\n  }, []);\r\n\r\n  const dispatchSituation = useCallback(() => {\r\n    props.setSituation({\r\n      onboard: { ...onBoardAnchor },\r\n      hostile: { ...hostileAnchor },\r\n    });\r\n  }, [onBoardAnchor, hostileAnchor, distance]);\r\n\r\n  const handleResetClick = useCallback(() => {\r\n    setStagePoint({});\r\n    dispatchOnBoardAnchor({ type: \"reset\" });\r\n    dispatchHostileAnchor({ type: \"reset\" });\r\n  }, []);\r\n\r\n  const handleMagnifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 1.5);\r\n    setStageWheel(stageScale * 1.5);\r\n  }, [stageScale]);\r\n\r\n  const handleMinifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 0.65);\r\n    setStageWheel(stageScale * 0.65);\r\n  }, [stageScale]);\r\n\r\n  const handleStageDrragable = useCallback(() => {\r\n    setStageDraggable(!isStageDrragable);\r\n  }, [isStageDrragable]);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card className={classes.root} elevation={3}>\r\n        <Grid style={{ padding: 5 }} spacing={1} container justify=\"flex-end\">\r\n          <Grid item xs={8}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button onClick={handleMagnifyButton}>\r\n                <ZoomInIcon />\r\n              </Button>\r\n              <Button onClick={handleResetClick}>\r\n                <ReplayIcon />\r\n              </Button>\r\n              <Button onClick={handleMinifyButton}>\r\n                <ZoomOutIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button\r\n                variant={isStageDrragable ? \"contained\" : \"outlined\"}\r\n                onClick={handleStageDrragable}\r\n              >\r\n                <PanToolIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Stage\r\n          x={stagePoint.x}\r\n          y={stagePoint.y}\r\n          width={window.innerWidth}\r\n          height={window.innerHeight}\r\n          onWheel={handleWheel(setStageWheel, setStageScale)}\r\n          scaleX={stageWheel}\r\n          scaleY={stageWheel}\r\n          draggable={isStageDrragable}\r\n        >\r\n          <Layer>\r\n            <Text\r\n              x={onBoardAnchor.anchors.anchor1X + onBoardAnchor.vector.x}\r\n              y={onBoardAnchor.anchors.anchor1Y + onBoardAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(onBoardAnchor.vector.x, 2) +\r\n                    Math.pow(onBoardAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + hostileAnchor.vector.x}\r\n              y={hostileAnchor.anchors.anchor1Y + hostileAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(hostileAnchor.vector.x, 2) +\r\n                    Math.pow(hostileAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + 12 / stageScale}\r\n              y={hostileAnchor.anchors.anchor1Y - 15 / stageScale}\r\n              fontSize={12 / stageScale}\r\n              fill={theme.palette.text.primary}\r\n              text={`${angleBetweenTwoVectors(\r\n                distanceVector,\r\n                hostileAnchor.vector\r\n              ).toFixed(0)}`}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor2X,\r\n                hostileAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.red}\r\n              fill={theme.palette.property.red}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor1X}\r\n              y={hostileAnchor.anchors.anchor1Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor1OnDragMove(\r\n                dispatchHostileAnchor,\r\n                hostileAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor2X}\r\n              y={hostileAnchor.anchors.anchor2Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={10 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor2OnDragMove(dispatchHostileAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleHostileAnchor2OnDragEnd(\r\n                  dispatchHostileAnchor,\r\n                  hostileAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                onBoardAnchor.anchors.anchor2X,\r\n                onBoardAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.blue}\r\n              fill={theme.palette.property.blue}\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor1X}\r\n              y={onBoardAnchor.anchors.anchor1Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor1OnDragMove(\r\n                dispatchOnBoardAnchor,\r\n                onBoardAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n              on\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor2X}\r\n              y={onBoardAnchor.anchors.anchor2Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleOnBoardAnchor2OnDragEnd(\r\n                  dispatchOnBoardAnchor,\r\n                  onBoardAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Line\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.primary.main}\r\n              fill={theme.palette.primary.main}\r\n              dash={[5 / stageScale, 5 / stageScale]}\r\n            />\r\n            <Text\r\n              //prettier-ignore\r\n              x={\r\n              (onBoardAnchor.anchors.anchor1X + hostileAnchor.anchors.anchor1X) / 2\r\n            }\r\n              //prettier-ignore\r\n              y={\r\n              (onBoardAnchor.anchors.anchor1Y + hostileAnchor.anchors.anchor1Y) / 2\r\n            }\r\n              fill={theme.palette.text.primary}\r\n              fontSize={12 / stageScale}\r\n              text={`${distance.toFixed(2)}km`}\r\n              offsetX={-2}\r\n              /* rotation={handleRotation(distanceVector)} */\r\n            />\r\n          </Layer>\r\n        </Stage>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction handleHostileAnchor1OnDragMove(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + hostileAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + hostileAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragMove(dispatchHostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragEnd(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - hostileAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - hostileAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\n\r\nfunction handleOnBoardAnchor1OnDragMove(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + onBoardAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + onBoardAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragEnd(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - onBoardAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - onBoardAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleWheel(setStageWheel, setStageScale) {\r\n  return (e) => {\r\n    e.evt.preventDefault();\r\n\r\n    const scaleBy = 1.5;\r\n    const stage = e.target.getStage();\r\n    const oldScale = stage.scaleX();\r\n\r\n    const newScale = e.evt.deltaY > 0 ? oldScale * scaleBy : oldScale / scaleBy;\r\n    setStageScale(newScale);\r\n    setStageWheel(newScale);\r\n  };\r\n}\r\nfunction innerProduct(distanceVector, velocityVector) {\r\n  return (\r\n    distanceVector.x * velocityVector.x + distanceVector.y * velocityVector.y\r\n  );\r\n}\r\nfunction vectorLength(vector) {\r\n  return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n}\r\nfunction angleBetweenTwoVectors(distanceVector, velocityVector) {\r\n  const cosValue =\r\n    innerProduct(distanceVector, velocityVector) /\r\n    (vectorLength(distanceVector) * vectorLength(velocityVector));\r\n  return Math.acos(cosValue) * (180 / Math.PI);\r\n}\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport FitCard from \"./FitCard/FitCard\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  Grid,\r\n  makeStyles,\r\n  Paper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\r\nimport WbSunnyIcon from \"@material-ui/icons/WbSunny\";\r\nimport Brightness2Icon from \"@material-ui/icons/Brightness2\";\r\nimport ShipCanvas from \"./simpleEdition/ShipCanvas\";\r\nimport Simulator from \"./FitCard/Stats/services/Simulator\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modeButton: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  modeButtonActive: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.property.org,\r\n  },\r\n}));\r\n\r\nconst Links = (props) => {\r\n  return (\r\n    <Paper elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          <GitHubIcon />\r\n        </Button>\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js/issues\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          BUG REPORT\r\n        </Button>\r\n        <Button\r\n          href={\r\n            \"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md\"\r\n          }\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          DOCS\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst Settings = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Paper style={{ marginLeft: 10 }} elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButton : classes.modeButtonActive\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(false);\r\n          }}\r\n        >\r\n          <WbSunnyIcon />\r\n        </Button>\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButtonActive : classes.modeButton\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(true);\r\n          }}\r\n        >\r\n          <Brightness2Icon />\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst initialDrawersOpen = {\r\n  fit: true,\r\n  fit1: false,\r\n};\r\nconst defaultDrawersOpen = {\r\n  fit: false,\r\n  fit1: false,\r\n};\r\nfunction drawersOpenReducer(state, action) {\r\n  if (!action?.tag) return defaultDrawersOpen;\r\n  switch (action.type) {\r\n    case \"OPEN\":\r\n      return { ...defaultDrawersOpen, [action.tag]: action.payload };\r\n    case \"CLOSE\":\r\n      return { ...defaultDrawersOpen };\r\n    default:\r\n      return defaultDrawersOpen;\r\n  }\r\n}\r\n\r\nexport default function InitialCard(props) {\r\n  const theme = useTheme();\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const [drawersOpen, dispatchDrawersOpen] = useReducer(\r\n    drawersOpenReducer,\r\n    initialDrawersOpen\r\n  );\r\n\r\n  const [situation, setSituation] = useState();\r\n  const [slots, setSlots] = useState();\r\n  const [slots1, setSlots1] = useState();\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n      <Grid\r\n        style={{\r\n          width: width < 1000 ? \"100%\" : width - 600,\r\n          margin: 0,\r\n        }}\r\n        container\r\n        spacing={3}\r\n      >\r\n        <Grid xs={12} container item justify=\"center\"></Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots}\r\n            backgroundColor={theme.palette.property.blue}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots1}\r\n            backgroundColor={theme.palette.property.red}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit1\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Button\r\n            onClick={() => {\r\n              if (!!slots && !!slots1) Simulator.test(slots, slots1, situation);\r\n            }}\r\n            fullWidth\r\n            disabled\r\n          >\r\n            Simulate\r\n          </Button>\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ShipCanvas setSituation={setSituation} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Links />\r\n          <Settings isDark={props.isDark} setIsDark={props.setIsDark} />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport cacheService from \"./cache/cacheService\";\r\nimport { useEffect } from \"react\";\r\nimport { storage } from \"./index\";\r\nimport cJSON from \"compressed-json\";\r\nimport InitialCard from \"./components/InitialCard\";\r\nimport { makeStyles, Paper } from \"@material-ui/core\";\r\n\r\nconst ttl = 60 * 60 * 1;\r\nconst cache = new cacheService(ttl);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    borderRadius: 0,\r\n    overflow: \"auto\",\r\n  },\r\n}));\r\n\r\nexport default function InitialD(props) {\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/marketCategories\", () => {\r\n      return storage\r\n        .ref(\"/marketCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/typeIDsTable\", () => {\r\n      return storage\r\n        .ref(\"/listInvTypesTable.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/skillsStaticBoard\", () => {\r\n      return storage\r\n        .ref(\"/skillsStaticBoard.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/attributesCategories\", () => {\r\n      return storage\r\n        .ref(\"/attributesCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Paper className={classes.root} elevation={0}>\r\n      <InitialCard\r\n        isDark={props.isDark}\r\n        setIsDark={props.setIsDark}\r\n        cache={cache}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import InitialFetch from \"./InitialFetch\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { red, orange, blue, blueGrey, green } from \"@material-ui/core/colors\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst lightTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: \"#6d6d6d\",\r\n      main: \"#424242\",\r\n      dark: \"#1b1b1b\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#F5F5F5\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: blue[500],\r\n      blueSecondary: blue[200],\r\n      red: red[500],\r\n      redSecondary: red[200],\r\n      grey: blueGrey[500],\r\n      greySecondary: blueGrey[200],\r\n      org: orange[500], // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: orange[200], // So instead of looking for some problem jusy used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n});\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      light: \"#ffffff\",\r\n      main: \"#ffffff\",\r\n      dark: \"#f5f5f5\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#515151\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: \"#66b3e8\",\r\n      blueSecondary: \"#b1cce2\",\r\n      red: \"#f54256\",\r\n      redSecondary: \"#e8a5a5\",\r\n      grey: blueGrey[400],\r\n      greySecondary: blueGrey[200],\r\n      org: \"#ff994d\", // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: \"#f3cb90\", // So instead of looking for problem just used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiPaper: {\r\n      elevation3: {\r\n        boxShadow: \"\",\r\n        border: \"solid 0.1px #595959\",\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default function Initialtheming(props) {\r\n  const [isDark, setIsDark] = useState(false);\r\n\r\n  return (\r\n    <MuiThemeProvider theme={isDark ? darkTheme : lightTheme}>\r\n      <InitialFetch isDark={isDark} setIsDark={setIsDark} />\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport firebaseAPI from \"./key/ignore/firebaseAPI\";\r\nimport * as firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\nimport Initialtheming from \"./Initialtheming\";\r\n\r\nfirebase.initializeApp(firebaseAPI);\r\nexport const database = firebase.database();\r\nexport const analytics = firebase.analytics();\r\nexport const storage = firebase.storage();\r\n\r\nanalytics.logEvent(\"pageLoad\", { type: \"log\" });\r\n\r\nReactDOM.render(<Initialtheming />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}