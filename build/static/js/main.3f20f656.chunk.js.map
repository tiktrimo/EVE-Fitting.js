{"version":3,"sources":["fitter/src/FitWorker.js","components/FitCard/Stats/services/SimWorker.js","serviceWorker.js","key/ignore/firebaseAPI.js","cache/cacheService.js","components/Icons/slotIcons.jsx","fitter/src/Fit.js","components/Drawers/Slots/SlotChargeBadge.jsx","components/Drawers/Slots/SlotMetaBadge.jsx","components/Drawers/RecButton.jsx","components/Drawers/RecMenu.jsx","components/Icons/stateIcons.jsx","components/Drawers/ListDrawer/SetStateMenu.jsx","components/Drawers/Slots/Slot.jsx","components/Drawers/services/EFT.js","services/dataManipulation/findAttributes.js","components/Drawers/Slots/Slots.jsx","components/Drawers/FittingDrawer/ImportExportButtons.jsx","components/Drawers/FittingDrawer/fittingLazyFetch.js","components/Drawers/FittingDrawer/FittingDrawer.jsx","components/Drawers/Stats/StatTextField.jsx","components/Drawers/Stats/Stat.jsx","components/Drawers/Stats/StatDrawer.jsx","components/simpleEdition/shipCardComponents/NestedListDedicated.jsx","components/itemSelection/ItemSelection.jsx","services/eveListConstruction/filterInvTypesTable.js","services/eveListConstruction/createEveList.jsx","services/eveListConstruction/isTerminalGroup.js","services/eveListConstruction/findChildrenInvTypes.js","services/eveListConstruction/findChildrenMarketGroup.js","services/eveListConstruction/isArrayEmpty.js","components/itemSelection/ItemSelectionListCache.jsx","components/Drawers/ListDrawer/ListDrawerButtons.jsx","components/Drawers/ListDrawer/ListDrawerSearchbar.jsx","components/Drawers/ListDrawer/ListDrawer.jsx","components/Drawers/ListDrawer/ListDrawers.jsx","components/Drawers/Drawers.jsx","components/Icons/defenseIcons.jsx","components/FitCard/Stats/LinearProgressLabel.jsx","components/FitCard/Stats/ResistanceProgressLabel.jsx","components/FitCard/Stats/DamageTypeProgressLabel.jsx","components/FitCard/Stats/Resistance.jsx","components/Icons/resourceIcons.jsx","components/FitCard/Stats/services/Stat.js","components/FitCard/Stats/ResourcesMiscellaneousListItem.jsx","components/FitCard/Stats/Resouces.jsx","components/Icons/damageIcons.jsx","components/FitCard/Stats/DamageRangeListItem.jsx","components/FitCard/Stats/Damage.jsx","components/FitCard/Stats/Engineering.jsx","components/Icons/capacitorIcons.jsx","components/FitCard/Stats/Capacitor.jsx","components/FitCard/Stats/StatsSummary.jsx","components/FitCard/FitCard.jsx","components/simpleEdition/ShipCanvas.jsx","components/FitCard/Stats/services/Summary.js","services/intervalHooks.js","components/FitCard/Stats/services/EveMath.js","components/FitCard/Stats/services/Simulator.js","components/SimulationPanel/ModuleButtonChargeBadge.jsx","components/SimulationPanel/ModuleActivation.jsx","components/SimulationPanel/ModuleButton.jsx","components/SimulationPanel/ContorlPanel.jsx","components/SimulationPanel/ShipPanel.jsx","components/SimulationPanel/SimulationPanel.jsx","components/InitialCard.jsx","InitialFetch.jsx","Initialtheming.jsx","index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","Boolean","window","location","hostname","match","NodeCache","require","cacheService","ttlSeconds","this","cache","stdTTL","checkperiod","useClones","key","value","get","set","storeFunction","Promise","resolve","then","result","reject","check","count","undefined","setTimeout","keys","del","flushAll","HighSlotIcon","props","SvgIcon","d","strokeWidth","stroke","color","MidSlotIcon","LowSlotIcon","RigSlotIcon","fill","DroneIcon","x1","y1","x2","y2","MiscIcon","CapsuleIcon","Fit","dogmaSkills","constructor","Object","skillBoard","skillsStaticBoardMax","values","reduce","acc","mods","concat","map","mod","debug","falseDebug","validateChargeSlot","slot","item","charge","itemChargeSize","chargeChargeSize","loadableGroupIDs","ID","attr","filter","length","includes","groupID","itemCapacity","capacity","chargeVolume","volume","chargePerCycle","chargeVolumePerAct","Math","floor","mapSlots_CONFIG","isIterate","ship","miscSlots","highSlots","midSlots","lowSlots","rigSlots","droneSlots","mapSlots","fit","callback","partialConfig","config","slotName","slots","apply","fitWithDomainID","board","staticBoard","passiveBoard","forEach","modifiedAttributeID","isStatic","push","appliedMod","type","typeAttributesStats","attribute","attributeID","penCount","console","log","baseMod","baseValue","modifyingAttributeValue","operation","appliedValue","penalizedModifyingAttributeValue","isPenalized","modifyingAttributeID","sampleMod","compareFunc","highIsGood","modifiedAttributeHighIsGood","a","b","modStackables","modNotStackables","isStackException","modifiedAttributeStackable","sort","index","array","targetMod","applyMod","domain","func","domainID","typeGroupID","typeSkills","skillTypeID","error","split","typeState","effectCategory","skills","Array","typeID","skillsBoard","skill","typeName","itemMods","chargeMods","dogmaSkill","invalidEffectIDs","extrovertEffects","typeEffectsStats","effect","modifierInfo","effectID","modifyingAttribute","effectName","iconID","getCurrentState","getInitialState","efft","initialState","currentState","find","entry","applyValue","mulValue","perValue","addValue","subValue","divValue","pow","E","useStyles","makeStyles","theme","rootAvatar","width","height","right","bottom","fontSize","fontWeight","transition","transitions","create","easing","sharp","duration","leavingScreen","SlotChargeBadge","classes","useTheme","useState","palette","text","primary","backgroundColor","background","paper","badgeColor","setBadgeColor","badgeIcon","setBadgeIcon","handleBadgeClick","useCallback","e","stopPropagation","variant","dispatchSlotsOpen","payload","slotVariant","getLoadableGroup","setActiveSlotNumber","setActiveSlot","useEffect","Number","border","property","red","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","group","isDisplyCount","Avatar","className","style","onClick","children","size","useStyle","top","SlotMetaBadge","getTechColor","metaGroupID","root","borderRadius","RecButton","Button","disabled","action","hover","disableElevation","RecMenu","open","setOpen","anchor","useRef","Fragment","ref","menuButton","Popover","anchorEl","current","transformOrigin","onClose","PaperProps","clientWidth","elevation","square","container","OverloadIcon","ActivationIcon","OfflineIcon","PassiveIcon","rootButton","minWidth","overloadButton","activationButton","green","passiveButton","org","offlineButton","grey","OverloadButton","Tooltip","title","placement","arrow","dispatchListItems","button","ActivationButton","PassiveButton","OfflineButton","SetStateMenu","isActiveModule","setIsActiveModule","activeItem","slotsOpen","getCurrentStateColor","getCurrentStateIcon","state","isAmmo","isDisabled","rootActive","rootDiv","position","left","rootAvatarDefault","marginLeft","marginTop","divider","marginRight","stateArcBorder","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","Slot","setItem","setCharge","handlePressOpen","getLoadableRig","getLoadableDrone","isActive","fetchedItem","fetchedCharge","ListItem","dense","typeCount","disableRipple","feedSource","slotIcon","ListItemText","primaryTypographyProps","noWrap","secondary","getChageCountString","secondaryTypographyProps","draggable","src","SHIP","EFT","fitText","typeIDs","findAttributebyID","shipText","slice","indexOf","moduleText","substring","shipName","replace","moduleNames","Set","moduleTextLine","dividedByComma","dividedByX","buildFitFromText","fitTextBlocks","droneText","moduleSlots","indexOfModuleText","trimStart","moduleTextBlocks","moduleTextBlock","chage","itemName","chargeName","droneTextLine","fitTextLine","dividedBy_x","textBlock","sampleTextLine","search","typeDroneSize","typeIsHiPower","typeIsMedPower","typeIsLoPower","buildTextFromFit","join","emptyText","moduleSlot","droneSlot","buildCompareTextFromFit","blankText","drone","lodingIndicator","gre","Slots","slotCount","rawItems","setRawItems","rawCharges","setRawCharges","fetchedItems","setFetchedItems","fetchedCharges","setFetchedCharges","setters","activeSlotNumber","isLoop","setIsLoop","isLoading","setIsLoading","sessionRef","importFitText","from","wait","fitFromText","getSlotCountAtImport","items","charges","translateVariant","dispatchImportStateFlag","importSlots","listItems","loopNumber","changeState","typeIsTurretFitted","typeIsLauncherFitted","pointLoad","turretPointLoad","launcherPointLoad","isTurretFitted","isLauncherFitted","extractHardpoints","validateHardpoints","assignItemToSlot","addCountToDroneSlots","AMMO","session","all","createFetchPromises","data","sessionData","fetchedData","processFetchedData","checkData","Divider","getSlotCount","promisesItem","rawItem","promisesCharge","rawCharge","sessionPromise","fetcheditem","itemState","dispatchSlots","hashTypes","rawTypes","hashCount","types","number","ceiling","listItem","padding","listIcon","warning","ImportExportButtons","openAlert","setOpenAlert","setTitle","setText","handleImportClick","copyTextFromClipboard","setImportFitText","IDs","extractIDs","database","once","val","fittingLazyFetch","navigator","clipboard","writeText","exportFitText","Snackbar","ContentProps","getSnackbarBorder","message","ListItemIcon","autoHideDuration","permissions","query","permisson","readText","rootClose","enteringScreen","overflow","rootExpand","maxWidth","rootRetract","expandButton","opaqueHover","opacity","retractButton","zIndex","child","overflowX","overflowY","paddingBottom","paddingRight","importInitializeFlag","MISC_SLOT","HIGH_SLOT","MID_SLOT","LOW_SLOT","RIG_SLOT","DRONE_SLOT","importStateFlagReducer","FittingDrawer","useReducer","importStateFlag","childRef","savedSlots","JSON","parse","localStorage","getItem","tag","savedEFT","Drawer","switchExpandOpen","ButtonGroup","setExpand","expand","attrs","getDroneSlotCount","StatTextField","TextField","label","Typography","switchUnit","unitID","attributeName","defaultValue","InputProps","readOnly","disableUnderline","unit","eveUnit","displayName","Stat","setType","attributesCategories","setAttributesCategories","setTypeName","builtList","setList","etc","dividedAttributes","filteredAttributes","attributes","attributeCategoryID","filterAttributes","filtered","main","nameSpace","letterSpacing","lineHeight","align","createStatList","textDecoration","rootPaper","marginBottom","StatDrawer","tabIndex","setTabIndex","styleButton","selected","fullWidth","hidden","margin","transform","shortest","expandOpen","nested","paddingLeft","spacing","NestedList","React","opened","image","setImage","handleClick","itemData","isMounted","iconTypeID","iconFileName","storage","getDownloadURL","url","fetch","arrayBuffer","convertArrayBufferToBase64","List","ListItemAvatar","marketGroupName","IconButton","clsx","Collapse","in","timeout","unmountOnExit","binary","call","Uint8Array","String","fromCharCode","btoa","ItemSelection","handleItemClick","outboundSetItem","typeMetaGroupID","headFilterInvTypesTable","table","invTypesTable","allowedAttributes","allowedAttribute","toLowerCase","bodyFilterInvTypesTable","headCreateEveList","rootMarketGroupID","filterInvTypesTable","bodyCreateEveList","marketGroupTable","validateTables","marketGroupID","hasTypes","isTerminalGroup","childrenTypeIDs","swapped","len","i","tmp","bubbleSortByMetaLevel","findChildrenInvTypes","renderChildrenInvTypes","parentGroupID","findChildrenMarketGroup","renderedChildrenMarketGroups","renderedChildrenMarketGroup","isArrayEmpty","eveListConfig","renderChildrenMarketGroup","defalutEveListConfigStructure","paddingTop","memo","setMarketGroupTable","setInvTypesTable","builtListStructure","setBuiltListStructure","evelistConfigUpToDate","nosave","createEveList","stringify","hashFilter","deleteButton","ammoDeleteButton","orange","showInfoButton","blue","addButton","loopOrNotButton","DeleteButton","AmmoDeleteButton","activeCharge","ShowInfoButton","activeSlot","slotNumber","AddButton","LoopOrNotButton","liftedIsLoop","setLiftedIsLoop","ListDrawerButtons","Grid","xs","textField","textFieldInputLabel","textFieldinputLabel","popperVisible","popperHidden","popperPaper","popperChild","maxHeight","SearchTextField","withStyles","borderWidth","borderLeftWidth","ListDrawerSearchbar","searchOpen","setSearchOpen","searchVisible","setSearchVisible","searchText","setSearchText","handleSearchTextChange","target","ClickAwayListener","onClickAway","InputLabelProps","inputProps","onChange","onFocus","Popper","Paper","mutateEveListConfig","mutatedAllowedAttributes","ListDrawer","filters","setWidth","getEveListConfig","getRootMarketGroupID","innerWidth","handleRender","addEventListener","removeEventListener","getMiscSlotMarketGroupID","setActiveItem","setActiveCharge","getActiveSlot","fitID","generateFilter","fitWorker","worker","initialSlots","slotsReducer","initialSlotsOpen","STAT","slotsOpenReducer","initialListItems","listItemsReducer","Drawers","setFit","setExportFitText","appliedFit","setFitID","setSlots","appliedFitExportText","appliedSlotsModified","giveSlotToStatDrawer","ArmorIcon","ShieldIcon","StructureIcon","EhpIcon","rootGrid","progress","childGrid","display","alignItems","justifyContent","description","LinearProgressLabel","LinearProgressFixed","bar","LinearProgress","Icon","typographyProps","ResistanceProgressLabel","forwardRef","innerRef","getLabel","getDescription","resistance","EM","toFixed","blueSecondary","TH","redSecondary","KI","greySecondary","EX","orgSecondary","damageType","ehpFactor","activeBonus","HP","scrollbarWidth","outer","document","createElement","visibility","msOverflowStyle","body","appendChild","inner","_scrollbarWidth","offsetWidth","parentNode","removeChild","DamageTypeList","list","component","damgeTypes","setDamageType","DamageTypeProgressLabel","DamageTypeListOpen","setDamageTypeListOpen","Resistance","stat","defense","shield","active","shieldBonus","armor","armorBonus","structure","structureBonus","TurretIcon","strokeLinecap","LauncherIcon","CalibrationIcon","DroneBayIcon","DroneBandwidthIcon","propCapacitor","capacitor","damage","stableLevel","capacitor_stableLevel","engineering","resource","miscellaneous","turretLauncherDamage","max","effective","alpha","turretLauncherRange","droneDamage","turrets","launchers","drones","turretLauncherDamageSummaries","damage_getSummary","summary","damagePerAct","maxDps","activationInfo","effectiveDps","e_duration","optimalRange","range","falloffRange","overlappingRange","droneSummaries","damageSummaries","ambientChargeRate","boosterChargeRate","activationUseRate","cus","capacitorUsePerSec","dominID","Cmax","Tnow","capacitorDeltas","Cnow","capacitorLevel","delta","getAmbientChargeRateMath","positiveDeltas","capacitorDelta","capacitorBonus","defense_resistance","pg","load","output","cpu","pgLoad","pgOutput","cpuLoad","cpuOutput","turret","launcher","calibration","droneBandwidth","droneBay","droneActive","turretHardpoint","launcherHardpoint","droneCapacity","mountedTurrets","mountedLaunchers","mountedCalibration","mountedDroneBandwidth","droneVolume","sensor","scanResolution","maximumLockedTarget","maximumTargetingRange","strength","gravimetric","magnetometric","ladar","radar","propulsion","inertialModifier","maximumVelocity","warpSpeedMultiplier","misc","cargoBayCapacity","signatureRadius","gravimetricSensorStrength","magnetometricSensorStrength","ladarSensorStrength","radarSensorStrength","Infinity","activationLimit","reloadTime","activationCost","activationTime","defaultStat","isActivated","damage_damagePerAct","getActivationInfo","damage_range","damageModifier","EM_damage","TH_damage","KI_damage","EX_damage","isDrone","tracking","signatureResolution","explosionVelocity","explosionRadius","damageReductionFactor","chargeInfo","capacitor_getChargeInfo","Tchg","bonusRate","boosterSlot","capacitor_getBonusPerAct_self","shipAttrs","armorHP","armorEM","armorTH","armorKI","armorEX","shieldHP","shieldEM","shieldTH","shieldKI","shieldEX","shieldChargeRate","structureHP","structureEM","structureTH","structureKI","structureEX","defense_getSummary","bonusPerAct","defense_getBonusPerAct","activePropulsionModules","isPropulsionModule","shipBaseMaximumVelocity","propModuleMaximumVelocityBonusMul","propModuleThrust","propModuleMassAdd","shipMass","mass","thisEffectsNeedCharge","sqrt","boldTypography","GridBoldTypography","flexBasis","ResourcesMiscellaneousListItem","setMisc","justify","TextFieldmaximumVelocity","TurretHardpoint","LauncherHardpoint","Calibration","DroneBandwidth","isError","DroneBay","rootChild","Hardpoints","setLoad","setCapacity","alignContent","sm","AlphaIcon","DroneDamageSVG","rootPostIt","optimalRangeLabel","rangeFont","PostIt","share","borderRight","OptimalRangeBar","optimalRangeShare","FalloffRangeBar","falloffRangeShare","DamageRangeListItem","shares","setShares","rangeMax","rangeSum","getShares","WeaponDps","WeaponAlpha","DroneDps","Damage","Cpu","getPercent","getNum","Powergrid","Engineering","percent","CapacitorChargeIcon","tooltip","Capacitor","StatsSummary","setStat","editButton","EditButton","getFitCardTitle","FitCard","isInitialRender","isSyncing","dispatchDrawersOpen","drawersOpen","Card","hostileAnchorInitial","anchors","anchor1X","anchor1Y","anchor2X","anchor2Y","vector","x","y","pX","pY","hostileAnchorReducer","Error","onBoardAnchorInitial","onBoardAnchorReducer","ShipCanvas","hostileAnchor","dispatchHostileAnchor","onBoardAnchor","dispatchOnBoardAnchor","distanceVector","setDistanceVector","distance","setDistance","stageWheel","setStageWheel","stageScale","setStageScale","stagePoint","setStagePoint","isStageDrragable","setStageDraggable","vectorX","vectorY","_distanceVector","_distance","dispatchSituation","setSituation","onboard","hostile","handleResetClick","handleMagnifyButton","handleMinifyButton","handleStageDrragable","innerHeight","onWheel","handleWheel","scaleX","scaleY","offsetX","angleBetweenTwoVectors","pointerLength","pointerWidth","points","radius","onDragMove","handleHostileAnchor1OnDragMove","onDragEnd","handleHostileAnchor2OnDragMove","handleHostileAnchor2OnDragEnd","handleOnBoardAnchor1OnDragMove","on","handleOnBoardAnchor2OnDragMove","handleOnBoardAnchor2OnDragEnd","dash","evt","preventDefault","oldScale","getStage","newScale","deltaY","vectorLength","velocityVector","cosValue","innerProduct","acos","PI","capPrioritySet","alwaysOn","mostTrivial","turretDamage","shieldHarden","shieldBoost","shieldBoostAncillaryFueled","shieldBoostAncillary","armorHardener","armorBoost","armorBoostAncillaryFueled","armorBoostAncillary","damageControl","structureBoost","capacitorNeutralizer","capacitorTransmitter","Summary","self","booster_bonusPerAct","transfer_bonusPerAct","neut_bonusPerAct","isNosferatuBloodRaiderOverriden","isCapacitorTransmitter","isNosferatu","updateSummaries","summarizedSlots","situation","shipSummary","getSummary_ship","assign","_slot","SimFit","toPath","path","activationState","addSummaries","_slots","addSummaries_duplicateSlots","_droneSlots","addSummaries_duplicateDroneSlots","slotString","moduleSummary","heatDamage","activationDataSet","createActivationDataSet","effectSummary","getSummary_damage","getSummary_defense","getSummary_capacitor","activationPriority","getActivationPriority","isSentry","orbitVelocity","orbitRange","droneSumamry","getSummary_drone","situation_decription","lastActivation","nextActivation","nextActivationTick","activationLeft","shieldHardener","targetSlot","p","c","useLazyActivationInterval","delay","pauseFlag","savedCallback","interval","setInterval","clearInterval","EveMath","owner","onBoardVector","hostileVector","trackingValue","_angularVelocity","_trackingPart","getRangeModifier","getTurretAcurracy","targetUnitVector","targetVelocity","droneAccuracyModifier","absoluteVelocity","droneVector","droneSituationsummary","simplePart","complexPart","min","randomDamageModifier","random","optimal","falloff","denominator","numerator","_distancePart","angularVelocity","fallOff","perpendicularVector","perpendicularUnitVector","unitVector","Simulator","fit1","summarizedSlots1","summarizedSlots2","HAL","manageActivation_getCapUsageLevels","capLog","schedules","getSchedules","manageSchedules","simulate_oneTick","tick","simulate_capacitor","simulate_shield","activateDamage","activateDefense","activateCapacitor","capacitorState","capacitorInfo","shieldState","shieldInfo","situationalModifiedSummary","activateDamage_getAlpha","shieldDamage","remaining","appplied","armorDamage","structureDamage","shot","damageCapMultiplier","alpha_damaging","EM_applied","EM_damaging","TH_applied","TH_damaging","KI_applied","KI_damaging","EX_applied","EX_damaging","alpha_applied","EM_remaining","EM_blocked","TH_remaining","TH_blocked","KI_remaining","KI_blocked","EX_remaining","EX_blocked","alpha_blocked","situationalMul","droneAccuracy","getDroneAccracy","getTurretRandomDamageModifier","turretAccuracy","launcherAccracy","getLauncherAccuracy","getLauncherDamageModifier","ownerCapacitorHP","targetCapacitorHP","bonusPerActOwner","bonusPerActTarget","maxBonusPerAct","symmetricBonusPerAct","rangeModifier","simulateActivation","info","getSchedules_setTarget","summarizedSlot","fragment","time","schedule","manageSchedules_validate","isCapacitorValidated","manageSchedules_validateCapacitor","isStructureValidated","manageSchedules_validateStructure","rootStructureHP","_target","_summary","currentTime","warn","subSecSchedule","capUsageRates","capUsageRate","ModuleButtonChargeBadge","cursor","ModuleActivation","moduleSet","circularProrgess","circularTransition","activationCounter","setActivationCounter","flip","setFlip","isActivating","setIsActivating","useProgressCircleInterval","setSummarizedSlots","useInstaActivationInterval","activateModule","timeEnd","getInstaActivationDelay","getLazyActivationDelay","CircularProgress","thickness","circleStatic","ModuleButton","render","targetSummarizedSlots","activateModuleSet","forceRender","ContorlPanel","modules","setModules","example","matchingSlotSet","slotSet","updateFlag","useAlwaysActivationInterval","ShipPanel","modeButton","SimulationPanel","setUpdateFlag","summarizedSlots0","setSummarizedSlots0","setSummarizedSlots1","_summarizedSlots0","slotsSet","_summarizedSlots1","modeButtonActive","Links","href","Settings","isDark","setIsDark","initialDrawersOpen","defaultDrawersOpen","drawersOpenReducer","simWorkerInst","InitialCard","slots0","setSlots0","slots1","setSlots1","flexDirection","simulate","InitialD","json","cJSON","decompress","lightTheme","createMuiTheme","light","dark","blueGrey","darkTheme","overrides","MuiPaper","elevation3","boxShadow","Initialtheming","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","logEvent","ReactDOM","getElementById","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.3f20f656.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"fit\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"2e2b3d69e617a08be6f3.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","\n\t\t\t\tvar addMethods = require(\"../../../../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"simulate\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"c134064299505ba38d3a.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export default {\r\n  apiKey: \"AIzaSyD9JKzskuYHt0_QQzfVTf1best1LIV_aEc\",\r\n  authDomain: \"evefittingjs.firebaseapp.com\",\r\n  databaseURL: \"https://evefittingjs.firebaseio.com\",\r\n  projectId: \"evefittingjs\",\r\n  storageBucket: \"evefittingjs.appspot.com\",\r\n  messagingSenderId: \"50378609544\",\r\n  appId: \"1:50378609544:web:a183550dc926c774d4a03d\",\r\n  measurementId: \"G-9WGWL8V4F4\",\r\n};\r\n","const NodeCache = require(\"node-cache\");\r\n\r\nexport default class cacheService {\r\n  constructor(ttlSeconds) {\r\n    this.cache = new NodeCache({\r\n      stdTTL: ttlSeconds,\r\n      checkperiod: ttlSeconds * 0.2,\r\n      useClones: false,\r\n    });\r\n  }\r\n  set(key, value) {\r\n    if (!this.cache.get(key)) this.cache.set(key, value);\r\n    /* console.log(key, \": Cache Operation[SET]\"); */\r\n  }\r\n\r\n  get(key, storeFunction) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[GET]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n\r\n    return storeFunction().then((result) => {\r\n      /* console.log(`${key}: Cache set[GET_NETWORK]`); */\r\n      this.cache.set(key, result);\r\n      return result;\r\n    });\r\n  }\r\n  wait(key) {\r\n    const value = this.cache.get(key);\r\n    if (value) {\r\n      /* console.log(`${key}: Cache Operation[WAIT]`); */\r\n      return Promise.resolve(value);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      function check(count, cache) {\r\n        return () => {\r\n          const value = cache.get(key);\r\n          if (value !== undefined || count > 120) {\r\n            /*  console.log(`${key}: Cache Operation[WAIT]`); */\r\n            return resolve(value);\r\n          }\r\n          /* console.log(key, count); */\r\n          setTimeout(check(count++, cache), 100);\r\n        };\r\n      }\r\n      check(0, this.cache)();\r\n    });\r\n  }\r\n\r\n  del(keys) {\r\n    this.cache.del(keys);\r\n  }\r\n\r\n  flush() {\r\n    this.cache.flushAll();\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const HighSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.949456,5.46298l0,5.560755\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m4.974388,17.593532l4.953309,-2.93155\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m14.038607,14.695678l5.020701,2.864158\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const MidSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m5.041085,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.477731,11.962486l5.445918,0\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const LowSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m11.983486,6.352277l0,11.23114\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const RigSlotIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m4.606327,4.629219l-1.762578,1.762578l0,2.128828l0,2.105937l0.915625,0l0.915625,0l0,-1.556562l0,-1.556562l1.442109,-1.419219l1.442109,-1.419219l1.533672,0l1.533672,0l0,-0.915625l0,-0.915625l-2.128828,0l-2.105937,0l-1.785469,1.785469z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m13.373437,3.759375l0,0.915625l1.556562,0l1.556562,0l1.419219,1.442109l1.419219,1.442109l0,1.533672l0,1.533672l0.915625,0l0.915625,0l0,-2.128828l0,-2.105937l-1.785469,-1.785469l-1.762578,-1.762578l-2.128828,0l-2.105937,0l0,0.915625z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m2.843749,15.502266l0,2.105937l1.785469,1.785469l1.762578,1.762578l2.128828,0l2.105937,0l0,-0.915625l0,-0.915625l-1.556562,0l-1.556562,0l-1.419219,-1.442109l-1.419219,-1.442109l0,-1.533672l0,-1.533672l-0.915625,0l-0.915625,0l0,2.128828z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\"m19.324999,14.93l0,1.556562l-1.442109,1.419219l-1.442109,1.419219l-1.533672,0l-1.533672,0l0,0.915625l0,0.915625l2.128828,0l2.105937,0l1.785469,-1.785469l1.762578,-1.762578l0,-2.128828l0,-2.105937l-0.915625,0l-0.915625,0l0,1.556562z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5\"\r\n      y1=\"5\"\r\n      x2=\"10\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"19\"\r\n      y1=\"5\"\r\n      x2=\"14\"\r\n      y2=\"10\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"10\"\r\n      y1=\"14\"\r\n      x2=\"5\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"14\"\r\n      y1=\"14\"\r\n      x2=\"19\"\r\n      y2=\"19\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ammoSVG = (\r\n  <SvgIcon>\r\n    <path\r\n      id=\"svg_3\"\r\n      d=\"m9.784363,5.661415l0,17.46132\"\r\n      transform=\"rotate(45 9.784362792968757,14.392076492309569) \"\r\n      strokeWidth=\"5\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      transform=\"rotate(45 17.253654479980472,6.930145263671872) \"\r\n      stroke=\"#e5e5e5\"\r\n      id=\"svg_4\"\r\n      d=\"m17.205661,6.96214l0.017997,-0.06399l0.05999,0l0.017997,0.06399l-0.095984,0z\"\r\n      strokeWidth=\"3.72\"\r\n    />\r\n    <path\r\n      id=\"svg_6\"\r\n      d=\"m18.638913,4.001311l0,3.104507\"\r\n      transform=\"rotate(45 18.638912200927738,5.553564071655272) \"\r\n      strokeWidth=\"3.7\"\r\n      stroke=\"#e5e5e5\"\r\n    />\r\n    <path\r\n      id=\"svg_7\"\r\n      d=\"m17.71106,4.705191c0,-2.952 0.78034,-5.34312 1.74371,-5.34312c0.96338,0 1.74372,2.39112 1.74372,5.34312c0,2.95201 -0.78034,5.34313 -1.74372,5.34313c-0.96337,0 -1.74371,-2.39112 -1.74371,-5.34313z\"\r\n      transform=\"rotate(45 19.454774856567386,4.705195426940916) \"\r\n      strokeWidth=\"0\"\r\n      stroke=\"#333333\"\r\n      fill=\"#e5e5e5\"\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const MiscIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12 18.923 L 8.686 13 L 5.371 7.077 L 12 7.077 L 18.629 7.077 L 15.314 13 L 12 18.923 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CapsuleIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 3.563 11.324 L 3.563 16.203 L 6.582 19.217 L 9.54 16.268 L 14.414 16.268 L 17.371 19.217 L 20.437 16.156 L 20.437 11.324 L 12.105 2.566 L 3.563 11.324 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","export default class Fit {\r\n  static validateChargeSlot = function (slot) {\r\n    if (!slot || !slot.item || !slot.charge) return false;\r\n\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    // Charge size[attributeID] = 128\r\n    const itemChargeSize = Fit.#common_findAttributeByID(item, 128);\r\n    const chargeChargeSize = Fit.#common_findAttributeByID(charge, 128);\r\n    if (\r\n      !!itemChargeSize &&\r\n      !!chargeChargeSize &&\r\n      itemChargeSize.value !== chargeChargeSize.value\r\n    )\r\n      return false;\r\n\r\n    // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n    const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n      .map((ID) => {\r\n        const attr = Fit.#common_findAttributeByID(item, ID);\r\n        if (!attr) return undefined;\r\n        else return attr.value;\r\n      })\r\n      .filter((value) => value);\r\n    if (loadableGroupIDs.length === 0) return false;\r\n\r\n    if (!loadableGroupIDs.includes(charge.groupID)) return false;\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = Fit.#common_findAttributeByID(item, 56)?.value; //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    if (activationLimit <= 0) return false;\r\n\r\n    return true;\r\n  };\r\n\r\n  static mapSlots_CONFIG = {\r\n    isIterate: {\r\n      ship: false,\r\n      miscSlots: false,\r\n      highSlots: false,\r\n      midSlots: false,\r\n      lowSlots: false,\r\n      rigSlots: false,\r\n      droneSlots: false,\r\n    },\r\n  };\r\n  static mapSlots = function (fit, callback, partialConfig) {\r\n    const config = {\r\n      isIterate: {\r\n        ...Fit.mapSlots_CONFIG.isIterate,\r\n        ...partialConfig.isIterate,\r\n      },\r\n    };\r\n\r\n    return [\r\n      \"ship\",\r\n      \"miscSlots\",\r\n      \"highSlots\",\r\n      \"midSlots\",\r\n      \"lowSlots\",\r\n      \"rigSlots\",\r\n      \"droneSlots\",\r\n    ].reduce((acc, slotName) => {\r\n      if (config.isIterate[slotName] === true)\r\n        return acc.concat(Fit.#mapSlots_slots(fit[slotName], callback));\r\n      else return acc;\r\n    }, []);\r\n  };\r\n  static #mapSlots_slots = function (slots, callback) {\r\n    if (!slots) return [];\r\n    return slots.map((slot) => {\r\n      return callback(slot);\r\n    });\r\n  };\r\n\r\n  static apply = function (fit) {\r\n    const fitWithDomainID = Fit.#giveDomainID(fit);\r\n\r\n    const board = Fit.#createBoard(fitWithDomainID);\r\n    const staticBoard = Fit.#applyBoard_createStaticBoard(board);\r\n\r\n    return Fit.#applyBoard(fitWithDomainID, staticBoard);\r\n  };\r\n\r\n  static #applyBoard = function (fit, staticBoard) {\r\n    const ship = Fit.#applyBoard_type(fit.ship, staticBoard);\r\n    const miscSlots = Fit.#applyBoard_slots(fit.miscSlots, staticBoard);\r\n    const highSlots = Fit.#applyBoard_slots(fit.highSlots, staticBoard);\r\n    const midSlots = Fit.#applyBoard_slots(fit.midSlots, staticBoard);\r\n    const lowSlots = Fit.#applyBoard_slots(fit.lowSlots, staticBoard);\r\n    const rigSlots = Fit.#applyBoard_slots(fit.rigSlots, staticBoard);\r\n    const droneSlots = Fit.#applyBoard_slots(fit.droneSlots, staticBoard);\r\n\r\n    return {\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #applyBoard_createStaticBoard = function (board) {\r\n    const staticBoard = {};\r\n    const passiveBoard = Fit.#applyBoard_createPassiveBoard(board);\r\n\r\n    board.forEach((mod) => {\r\n      if (!staticBoard[mod.modifiedAttributeID])\r\n        staticBoard[mod.modifiedAttributeID] = [];\r\n      if (mod.isStatic === true) staticBoard[mod.modifiedAttributeID].push(mod);\r\n      else {\r\n        const appliedMod = Fit.#applyBoard_mod(mod, passiveBoard);\r\n        appliedMod[\"isStatic\"] = true;\r\n        staticBoard[mod.modifiedAttributeID].push(appliedMod);\r\n      }\r\n    });\r\n\r\n    return staticBoard;\r\n  };\r\n  static #applyBoard_createPassiveBoard = function (board) {\r\n    const passiveBoard = {};\r\n\r\n    board.forEach((mod) => {\r\n      if (!passiveBoard[mod.modifiedAttributeID])\r\n        passiveBoard[mod.modifiedAttributeID] = [];\r\n      passiveBoard[mod.modifiedAttributeID].push(mod);\r\n    });\r\n\r\n    return passiveBoard;\r\n  };\r\n  static #applyBoard_slots = function (slots, passiveBoard) {\r\n    return slots.map((slot) => {\r\n      const item = slot.item;\r\n      const charge = slot.charge;\r\n      return {\r\n        ...slot,\r\n        item: Fit.#applyBoard_type(item, passiveBoard),\r\n        charge: Fit.#applyBoard_type(charge, passiveBoard),\r\n      };\r\n    });\r\n  };\r\n  static #applyBoard_type = function (type, passiveBoard) {\r\n    if (!type || !type.typeAttributesStats) return type;\r\n\r\n    const typeAttributesStats = type.typeAttributesStats.map((attribute) => {\r\n      return Fit.#applyBoard_attribute(type, attribute, passiveBoard);\r\n    });\r\n\r\n    return { ...type, typeAttributesStats: typeAttributesStats };\r\n  };\r\n  static #applyBoard_attribute = function (type, attr, passiveBoard) {\r\n    const mods = passiveBoard[attr.attributeID];\r\n    if (!mods || mods.length === 0) return attr;\r\n\r\n    let value = attr.value;\r\n    let penCount = 0;\r\n    if (!!attr.debug || !!attr.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((mod) => {\r\n      if (Fit.#applyBoard_modIsTypeApplicable(type, mod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          mod.modifyingAttributeValue,\r\n          mod.operation,\r\n          penCount\r\n        );\r\n        debug.push({\r\n          ...mod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              mod.modifyingAttributeValue,\r\n              mod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (mod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(mod);\r\n    });\r\n\r\n    return { ...attr, value: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_mod = function (mod, passiveBoard) {\r\n    if (\r\n      mod.modifyingAttributeID === mod.modifiedAttributeID ||\r\n      mod.isStatic === true\r\n    )\r\n      return mod;\r\n\r\n    const mods = passiveBoard[mod.modifyingAttributeID];\r\n    if (!mods || mods.length === 0) return mod;\r\n\r\n    let value = mod.modifyingAttributeValue;\r\n    let penCount = 0;\r\n    if (!!mod.debug || !!mod.falseDebug) console.log(\"ERROR\", \"debugCorrupt\");\r\n    const debug = [];\r\n    const falseDebug = [];\r\n\r\n    Fit.#applyBoard_sortMods(\r\n      mods.map((baseMod) => Fit.#applyBoard_mod(baseMod, passiveBoard))\r\n    ).forEach((appliedMod) => {\r\n      if (Fit.#applyBoard_modIsModApplicable(mod, appliedMod)) {\r\n        const baseValue = value;\r\n        value = Fit.#common_operation(\r\n          value,\r\n          appliedMod.modifyingAttributeValue,\r\n          appliedMod.operation,\r\n          penCount\r\n        );\r\n\r\n        debug.push({\r\n          ...appliedMod,\r\n          penCount,\r\n          values: {\r\n            baseValue: baseValue,\r\n            appliedValue: value,\r\n            penalizedModifyingAttributeValue: Fit.#common_penalizedModifyingValue(\r\n              appliedMod.modifyingAttributeValue,\r\n              appliedMod.operation,\r\n              penCount\r\n            ),\r\n          },\r\n        });\r\n        if (appliedMod.isPenalized === true) penCount++;\r\n      } else falseDebug.push(appliedMod);\r\n    });\r\n\r\n    return { ...mod, modifyingAttributeValue: value, debug, falseDebug };\r\n  };\r\n  static #applyBoard_sortMods = function (mods) {\r\n    const sampleMod = mods[0];\r\n\r\n    let compareFunc = () => true;\r\n    const highIsGood = sampleMod.modifiedAttributeHighIsGood;\r\n    if (highIsGood === true)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return b.modifyingAttributeValue - a.modifyingAttributeValue - 1;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return 1 + b.modifyingAttributeValue - a.modifyingAttributeValue;\r\n      };\r\n    else if (highIsGood === false)\r\n      compareFunc = (a, b) => {\r\n        if (a.operation === b.operation)\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (a.operation === \"prePercent\" || a.operation === \"postPercent\")\r\n          return 1 + a.modifyingAttributeValue - b.modifyingAttributeValue;\r\n\r\n        if (b.operation === \"prePercent\" || b.operation === \"postPercent\")\r\n          return a.modifyingAttributeValue - b.modifyingAttributeValue - 1;\r\n      };\r\n    const modStackables = [];\r\n    const modNotStackables = [];\r\n    mods.forEach((mod) => {\r\n      if (\r\n        mod.operation === \"modAdd\" ||\r\n        mod.operation === \"modSub\" ||\r\n        mod.operation === \"postDiv\" ||\r\n        mod.isStackException === true\r\n      )\r\n        modStackables.push(mod);\r\n      else modNotStackables.push(mod);\r\n    });\r\n\r\n    const isModstackable = sampleMod.modifiedAttributeStackable;\r\n\r\n    if (isModstackable === false) {\r\n      modNotStackables.sort(compareFunc);\r\n      modNotStackables.forEach((mod, index, array) => {\r\n        array[index] = { ...mod, isPenalized: true };\r\n      });\r\n    }\r\n    return modStackables.concat(modNotStackables);\r\n  };\r\n  static #applyBoard_modIsModApplicable = function (targetMod, applyMod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(applyMod)) {\r\n      /*  if (\r\n        !(\r\n          applyMod.typeState === \"activation\" &&\r\n          applyMod.effectCategory === \"overload\"\r\n        )\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${applyMod.typeState} <-/- ${applyMod.effectCategory}`,\r\n          targetMod,\r\n          \"<-\",\r\n          applyMod\r\n        ); */ //TESTETS\r\n      return false;\r\n    }\r\n    switch (applyMod.domain) {\r\n      case \"itemID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === applyMod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (applyMod.func) {\r\n          case \"ItemModifier\":\r\n            return targetMod.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return targetMod.typeGroupID === applyMod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (applyMod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return targetMod?.typeSkills?.includes(applyMod.skillTypeID);\r\n        }\r\n      /*    case \"structureID\":\r\n        return false; */\r\n      default:\r\n        console.error(\"MOD_APPLICABLE_UNKNOWN\", targetMod, \"<-\", applyMod);\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsTypeApplicable = function (type, mod) {\r\n    if (!Fit.#applyBoard_modIsStateApplicable(mod)) {\r\n      /* if (\r\n        !(mod.typeState === \"activation\" && mod.effectCategory === \"overload\")\r\n      )\r\n        console.log(\r\n          \"STATE\",\r\n          `${mod.typeState} <-/- ${mod.effectCategory}`,\r\n          type,\r\n          \"<-\",\r\n          mod\r\n        ); */ //TESTETS\r\n      return false;\r\n    }\r\n    if (type.domainID === undefined) console.log(\"domainID missing\", type);\r\n    switch (mod.domain) {\r\n      case \"itemID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === mod.domainID;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"shipID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return type.domainID === \"ship\";\r\n          case \"LocationGroupModifier\":\r\n            return type.groupID === mod.groupID;\r\n          case \"LocationRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"charID\":\r\n        switch (mod.func) {\r\n          case \"OwnerRequiredSkillModifier\":\r\n            return (\r\n              !!type.typeSkills && type.typeSkills.includes(mod.skillTypeID)\r\n            );\r\n          case \"ItemModifier\":\r\n            return true;\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"otherID\":\r\n        switch (mod.func) {\r\n          case \"ItemModifier\":\r\n            return (\r\n              type.domainID.split(\".\")[0] === mod.domainID.split(\".\")[0] &&\r\n              type.domainID.split(\".\")[1] === mod.domainID.split(\".\")[1]\r\n            );\r\n          /* default:\r\n            return false; */\r\n        }\r\n      case \"structureID\":\r\n        return false;\r\n      default:\r\n        console.error(\"TYPE_APPLICABLE_UNKNOWN\", type, \"<-\", mod); //TESTETS\r\n        return false;\r\n    }\r\n  };\r\n  static #applyBoard_modIsStateApplicable = function (mod) {\r\n    switch (mod.typeState) {\r\n      case \"overload\":\r\n        return true;\r\n      case \"activation\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"passive\":\r\n        switch (mod.effectCategory) {\r\n          case \"overload\":\r\n          case \"target\":\r\n          case \"activation\":\r\n            return false;\r\n          default:\r\n            return true;\r\n        }\r\n      case \"offline\":\r\n        switch (mod.effectCategory) {\r\n          default:\r\n            return false;\r\n        }\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  static #giveDomainID = function (fit) {\r\n    const skills = Fit.#giveDomainID_skills(fit.skills);\r\n    const ship = { ...fit.ship, domainID: \"ship\" };\r\n    const miscSlots = Fit.#giveDomainID_slots(fit.miscSlots, \"miscSlots\");\r\n    const lowSlots = Fit.#giveDomainID_slots(fit.lowSlots, \"lowSlots\");\r\n    const midSlots = Fit.#giveDomainID_slots(fit.midSlots, \"midSlots\");\r\n    const highSlots = Fit.#giveDomainID_slots(fit.highSlots, \"highSlots\");\r\n    const rigSlots = Fit.#giveDomainID_slots(fit.rigSlots, \"rigSlots\");\r\n    const droneSlots = Fit.#giveDomainID_slots(fit.droneSlots, \"droneSlots\");\r\n\r\n    return {\r\n      skills,\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      droneSlots,\r\n    };\r\n  };\r\n  static #giveDomainID_slots = function (slots, slotName) {\r\n    if (!slots || slots.constructor !== Array) return undefined;\r\n\r\n    return slots.map((slot, index) => {\r\n      const item = !!slot.item.typeID\r\n        ? { ...slot.item, domainID: `${slotName}.${index}.item` }\r\n        : false;\r\n      const charge = !!slot.charge.typeID\r\n        ? { ...slot.charge, domainID: `${slotName}.${index}.charge` }\r\n        : false;\r\n      return { item, charge };\r\n    });\r\n  };\r\n  static #giveDomainID_skills = function (skillsBoard) {\r\n    if (!skillsBoard || skillsBoard.constructor !== Array) {\r\n      const dogmaSkills = skillsBoard;\r\n      return dogmaSkills;\r\n    } else if (skillsBoard[0].domainID !== undefined) {\r\n      const skillsStaticBoardPlane = skillsBoard;\r\n      return skillsStaticBoardPlane;\r\n    }\r\n    return skillsBoard.map((skill) => ({\r\n      ...skill,\r\n      domainID: `skill:${skill.typeName}`,\r\n    }));\r\n  };\r\n\r\n  static #createBoard = function (fit) {\r\n    // skills will be two type: skills(Object) or pre made skills_modifiers(Array)\r\n    const skills = Fit.#createBoard_skills(fit.skills);\r\n    const ship = Fit.#createBoard_singleType(fit.ship, true);\r\n    const miscSlots = Fit.#createBoard_slots(fit.miscSlots, true);\r\n    const lowSlots = Fit.#createBoard_slots(fit.lowSlots);\r\n    const midSlots = Fit.#createBoard_slots(fit.midSlots);\r\n    const highSlots = Fit.#createBoard_slots(fit.highSlots);\r\n    const rigSlots = Fit.#createBoard_slots(fit.rigSlots);\r\n    const droneSlots = Fit.#createBoard_slots(fit.droneSlots);\r\n\r\n    return [\r\n      ...skills,\r\n      ...ship,\r\n      ...miscSlots,\r\n      ...lowSlots,\r\n      ...midSlots,\r\n      ...highSlots,\r\n      ...rigSlots,\r\n      ...droneSlots,\r\n    ];\r\n  };\r\n  static #createBoard_slots = function (slots, isStackException = false) {\r\n    if (!slots || slots.constructor !== Array) return [];\r\n\r\n    const mods = [];\r\n    slots.forEach((slot) => {\r\n      const itemMods = Fit.#createBoard_singleType(slot.item, isStackException);\r\n      const chargeMods = Fit.#createBoard_singleType(slot.charge, true);\r\n      if (!!itemMods) itemMods.forEach((mod) => mods.push(mod));\r\n      if (!!chargeMods) chargeMods.forEach((mod) => mods.push(mod));\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static extractSkillsStaticPlaneBoard(dogmaSkills) {\r\n    if (dogmaSkills.constructor !== Object) return [];\r\n\r\n    const skillBoard = Fit.#createBoard_skills(dogmaSkills);\r\n    const skillsStaticBoardMax = Fit.#applyBoard_createStaticBoard(skillBoard);\r\n    const skillsStaticBoardMed = Object.values(skillsStaticBoardMax)\r\n      .reduce((acc, mods) => acc.concat(mods), [])\r\n      .map((mod) => ({ ...mod, debug: undefined, falseDebug: undefined }));\r\n\r\n    return skillsStaticBoardMed;\r\n  }\r\n  static #createBoard_skills = function (dogmaSkills) {\r\n    if (dogmaSkills.constructor === Array) {\r\n      const skillsBoard = dogmaSkills;\r\n      return skillsBoard;\r\n    }\r\n\r\n    return Object.values(dogmaSkills).reduce((acc, dogmaSkill) => {\r\n      const mods = Fit.#createBoard_singleType(dogmaSkill, true);\r\n      const board = mods.map((mod) => ({\r\n        ...mod,\r\n        domainID: `skill:${mod.typeName}`,\r\n      }));\r\n      return acc.concat(board);\r\n    }, []);\r\n  };\r\n  static #createBoard_singleType = function (type, isStackException = false) {\r\n    if (!type) return [];\r\n\r\n    // effectID: 132,effectName: \"skillEffect\",\r\n    const invalidEffectIDs = [132];\r\n    // ExtrovertEffect is effect have modifierInfo\r\n    // Existence of modifierInfo ensures effect affect anonymous attribute with given value\r\n    const extrovertEffects = !!type.typeEffectsStats\r\n      ? type.typeEffectsStats.filter(\r\n          (effect) =>\r\n            effect.modifierInfo !== undefined &&\r\n            !invalidEffectIDs.includes(effect.effectID)\r\n        )\r\n      : [];\r\n\r\n    const mods = [];\r\n    extrovertEffects.forEach((effect) => {\r\n      effect.modifierInfo.forEach((mod) => {\r\n        const modifyingAttribute = Fit.#common_findAttributeByID(\r\n          type,\r\n          mod.modifyingAttributeID\r\n        );\r\n        const modifyingAttributeValue = !!mod.modifyingAttributeValue\r\n          ? mod.modifyingAttributeValue\r\n          : modifyingAttribute?.value;\r\n\r\n        mods.push({\r\n          domainID: type.domainID,\r\n          typeName: type.typeName,\r\n          ...mod,\r\n          effectName: effect.effectName,\r\n          effectCategory: effect.effectCategory,\r\n          modifyingAttributeValue: modifyingAttributeValue,\r\n          typeID: type.typeID,\r\n          typeState: type.iconID !== 33 ? type.typeState : \"passive\",\r\n          typeGroupID: type.groupID,\r\n          typeSkills: type.typeSkills,\r\n          isStackException:\r\n            mod.isStackException !== undefined\r\n              ? mod.isStackException\r\n              : isStackException,\r\n        });\r\n      });\r\n    });\r\n\r\n    return mods;\r\n  };\r\n  static getCurrentState = function (type) {\r\n    return Fit.#createBoard_setState(type);\r\n  };\r\n  static getInitialState = function (type) {\r\n    if (!type || !type.typeEffectsStats) return undefined;\r\n    if (type.iconID === 33) return \"passive\"; // if type is skill\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n  };\r\n  static #createBoard_setState = function (type) {\r\n    if (!type && type !== 0) return undefined;\r\n    if (!type.typeEffectsStats || type.iconID === 33) return \"passive\"; // if type is skill\r\n    const initialState = type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (\r\n        (efft.effectCategory === \"activation\" && efft.effectID !== 16) ||\r\n        efft.effectCategory === \"target\"\r\n      )\r\n        //effectCategory: \"activation\", effectID: 16, effectName: \"online\"\r\n        return \"activation\";\r\n\r\n      return acc;\r\n    }, \"passive\");\r\n    const currentState = type.typeState;\r\n\r\n    if (currentState === undefined) return initialState;\r\n    if (initialState === \"passive\" && currentState === \"activation\")\r\n      return \"passive\";\r\n    return currentState;\r\n  };\r\n\r\n  static #common_findAttributeByID = function (type, attributeID) {\r\n    if (!type || !type.typeAttributesStats) return undefined;\r\n    if (type.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n    const attribute = type.typeAttributesStats.find(\r\n      (entry) => entry.attributeID === attributeID\r\n    );\r\n\r\n    return attribute;\r\n  };\r\n  static #common_operation = function (\r\n    baseValue,\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    //TODO: findout why does eve developers make shit like this typeID=31760 effect is weird\r\n    if (applyValue === undefined) return baseValue;\r\n\r\n    let value = baseValue;\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        value = Fit.#oepration_mul(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        value = Fit.#oepration_per(baseValue, applyValue, penCount);\r\n        break;\r\n      case \"modAdd\":\r\n        value = Fit.#operation_add(baseValue, applyValue);\r\n        break;\r\n      case \"modSub\":\r\n        value = Fit.#operation_sub(baseValue, applyValue);\r\n        break;\r\n      case \"postDiv\":\r\n        value = Fit.#operation_div(baseValue, applyValue);\r\n        break;\r\n      case \"postAssignment\":\r\n        return applyValue;\r\n      default:\r\n        break;\r\n    }\r\n    return value;\r\n  };\r\n  static #oepration_mul = function (baseValue, mulValue, penCount = 0) {\r\n    return baseValue * ((mulValue - 1) * Fit.#common_penaltyMul(penCount) + 1);\r\n  };\r\n  static #oepration_per = function (baseValue, perValue, penCount = 0) {\r\n    return (\r\n      baseValue * ((perValue / 100) * Fit.#common_penaltyMul(penCount) + 1)\r\n    );\r\n  };\r\n  static #operation_add = function (baseValue, addValue) {\r\n    return baseValue + addValue;\r\n  };\r\n  static #operation_sub = function (baseValue, subValue) {\r\n    return baseValue - subValue;\r\n  };\r\n  static #operation_div = function (baseValue, divValue) {\r\n    return baseValue / divValue;\r\n  };\r\n  static #common_penaltyMul = function (penCount) {\r\n    return Math.pow(Math.E, -0.140274 * penCount * penCount);\r\n  };\r\n  static #common_penalizedModifyingValue = function (\r\n    applyValue,\r\n    operation,\r\n    penCount\r\n  ) {\r\n    switch (operation) {\r\n      case \"preMul\":\r\n      case \"postMul\":\r\n        return 1 + Fit.#common_penaltyMul(penCount) * (applyValue - 1);\r\n      case \"prePercent\":\r\n      case \"postPercent\":\r\n        return Fit.#common_penaltyMul(penCount) * applyValue;\r\n      case \"modAdd\":\r\n      case \"modSub\":\r\n        return applyValue;\r\n      case \"postDiv\":\r\n        return applyValue / Fit.#common_penaltyMul(penCount);\r\n      default:\r\n        return applyValue;\r\n    }\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Badge, Avatar, makeStyles, useTheme } from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport AddCircleOutlineIcon from \"@material-ui/icons/AddCircleOutline\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport AdjustIcon from \"@material-ui/icons/Adjust\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 20,\r\n    height: 20,\r\n    right: 15,\r\n    bottom: 3,\r\n    fontSize: 12,\r\n    fontWeight: 700,\r\n    transition: theme.transitions.create(\"color\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function SlotChargeBadge(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [badgeColor, setBadgeColor] = useState({\r\n    color: theme.palette.text.primary,\r\n    backgroundColor: theme.palette.background.paper,\r\n  });\r\n  const [badgeIcon, setBadgeIcon] = useState(false);\r\n\r\n  const handleBadgeClick = useCallback(\r\n    (e) => {\r\n      e.stopPropagation();\r\n      if (props.variant !== \"DRONE_SLOT\")\r\n        props.dispatchSlotsOpen({\r\n          type: \"AMMO\",\r\n          payload: {\r\n            slotVariant: props.variant,\r\n            filter: getLoadableGroup(props.item),\r\n          },\r\n        });\r\n      props.setActiveSlotNumber(props.index);\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    },\r\n    [props.index, props.variant, props.item]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (props.count !== undefined && props.count.constructor === Number) {\r\n      // count of item\r\n      setBadgeIcon(`${props.count}`);\r\n    } else if (!props.charge) {\r\n      // No charge loaded\r\n      setBadgeIcon(<AddCircleOutlineIcon fontSize=\"small\" />);\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n    } else if (\r\n      !Fit.validateChargeSlot({ item: props.item, charge: props.charge })\r\n    ) {\r\n      // Charge not compatible\r\n      setBadgeColor({\r\n        color: theme.palette.background.paper,\r\n        backgroundColor: theme.palette.property.red,\r\n      });\r\n      setBadgeIcon(<HighlightOffIcon fontSize=\"small\" />);\r\n    } else {\r\n      // Charge loaded\r\n      setBadgeColor({\r\n        color: theme.palette.text.primary,\r\n        backgroundColor: theme.palette.background.paper,\r\n        border: `0.1px solid ${theme.palette.background.paper}`,\r\n      });\r\n      setBadgeIcon(<AdjustIcon fontSize=\"small\" />);\r\n    }\r\n  }, [props.charge?.typeID, props.item?.typeID, props.count, theme]);\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{\r\n        vertical: \"bottom\",\r\n        horizontal: \"right\",\r\n      }}\r\n      badgeContent={\r\n        getLoadableGroup(props.item).group.length > 0 ||\r\n        isDisplyCount(props.count) ? (\r\n          <Avatar\r\n            className={classes.rootAvatar}\r\n            style={{\r\n              ...badgeColor,\r\n            }}\r\n            onClick={handleBadgeClick}\r\n          >\r\n            {badgeIcon}\r\n          </Avatar>\r\n        ) : undefined\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction isDisplyCount(count) {\r\n  if (count !== undefined && count.constructor === Number) return true;\r\n  return false;\r\n}\r\n\r\nexport function getLoadableGroup(item) {\r\n  if (!item || !item.typeAttributesStats) return { group: [], size: false };\r\n\r\n  const typeAttributesStats = item.typeAttributesStats;\r\n\r\n  // Used with (Charge Group)[attributeID] = 604, 605, 606, 609, 610\r\n  const loadableGroupIDs = [604, 605, 606, 609, 610]\r\n    .map((ID) => {\r\n      const attr = typeAttributesStats.find((attr) => attr.attributeID === ID);\r\n      if (!attr) return undefined;\r\n      else return attr.value;\r\n    })\r\n    .filter((value) => value);\r\n\r\n  // Charge size[attributeID] = 128\r\n  const loadableSize = typeAttributesStats.find(\r\n    (attr) => attr.attributeID === 128\r\n  )?.value;\r\n\r\n  return {\r\n    group: loadableGroupIDs,\r\n    size: loadableSize,\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles, Badge, Avatar } from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    right: 15,\r\n    top: 3,\r\n    fontSize: 1,\r\n  },\r\n}));\r\n\r\nexport default function SlotMetaBadge(props) {\r\n  const classes = useStyle();\r\n\r\n  return (\r\n    <Badge\r\n      overlap=\"circle\"\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      badgeContent={\r\n        getTechColor(props.item) && (\r\n          <Avatar\r\n            style={{\r\n              backgroundColor: getTechColor(props.item),\r\n            }}\r\n            className={classes.rootAvatar}\r\n          >\r\n            {\"\"}\r\n          </Avatar>\r\n        )\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\nfunction getTechColor(item) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.metaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return undefined;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Button, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    borderRadius: 0,\r\n    width: 40,\r\n  },\r\n}));\r\n\r\nexport default function RecButton(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      {...props}\r\n      classes={{ root: classes.root }}\r\n      variant=\"contained\"\r\n      style={\r\n        props.disabled === true\r\n          ? {\r\n              ...props.style,\r\n              backgroundColor: theme.palette.action.hover,\r\n              color: theme.palette.background.paper,\r\n            }\r\n          : { ...props.style }\r\n      }\r\n      disableElevation\r\n    >\r\n      {props.children}\r\n    </Button>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { Popover } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function RecMenu(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const anchor = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!props.open && open === true) setOpen(false);\r\n  }, [props.open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div\r\n        ref={anchor}\r\n        onClick={() => {\r\n          if (props.menuButton.props.disabled !== true) setOpen(!open);\r\n        }}\r\n      >\r\n        {props.menuButton}\r\n      </div>\r\n\r\n      <Popover\r\n        open={props.open && open}\r\n        anchorEl={anchor.current}\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n        transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        onClose={() => setOpen(false)}\r\n        PaperProps={{\r\n          style: { width: anchor.current?.clientWidth },\r\n          elevation: 0,\r\n          square: true,\r\n        }}\r\n        container={anchor.current}\r\n      >\r\n        {props.children}\r\n      </Popover>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const OverloadIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.449 2.745 Q 7.108 5.589 9.411 8.575 C 11.991 11.918 6.369 12.954 8.473 15.342 C 10.577 17.731 9.657 19.095 9.212 19.437 C 8.843 19.722 7.165 19.693 6.084 17.731 C 5.004 15.769 4.918 13.466 7.449 11.134 Q 9.98 8.802 6.795 7.523 L 7.449 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 11.761 2.745 Q 11.42 5.589 13.723 8.575 C 16.303 11.918 10.681 12.954 12.785 15.342 C 14.889 17.731 13.969 19.095 13.524 19.437 C 13.155 19.722 11.477 19.693 10.396 17.731 C 9.316 15.769 9.231 13.466 11.761 11.134 Q 14.292 8.802 11.107 7.523 L 11.761 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n    <path\r\n      d=\" M 15.978 2.745 Q 15.636 5.589 17.94 8.575 C 20.519 11.918 14.897 12.954 17.001 15.342 C 19.106 17.731 18.185 19.095 17.741 19.437 C 17.371 19.722 15.693 19.693 14.613 17.731 C 13.532 15.769 13.447 13.466 15.978 11.134 Q 18.508 8.802 15.324 7.523 L 15.978 2.745 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ActivationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 16.746 12 L 12 14.74 L 7.254 17.48 L 7.254 12 L 7.254 6.52 L 12 9.26 L 16.746 12 Z \"\r\n      fill={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n\r\nexport const OfflineIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"14.742\"\r\n      y1=\"6.625\"\r\n      x2=\"14.742\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n    <line\r\n      x1=\"9.258\"\r\n      y1=\"6.625\"\r\n      x2=\"9.258\"\r\n      y2=\"17.375\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const PassiveIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 7.073 12 C 7.073 9.281 9.281 7.073 12 7.073 C 14.719 7.073 16.927 9.281 16.927 12 C 16.927 14.719 14.719 16.927 12 16.927 C 9.281 16.927 7.073 14.719 7.073 12 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport RecButton from \"../RecButton\";\r\nimport RecMenu from \"../RecMenu\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport {\r\n  PassiveIcon,\r\n  ActivationIcon,\r\n  OverloadIcon,\r\n  OfflineIcon,\r\n} from \"../../Icons/stateIcons\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n  },\r\n  overloadButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n  },\r\n  activationButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n  },\r\n  passiveButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.org,\r\n  },\r\n  offlineButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.grey,\r\n  },\r\n}));\r\n\r\nconst OverloadButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Overload\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.overloadButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"overload\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OverloadIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ActivationButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Active\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.activationButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"activation\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <ActivationIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst PassiveButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Online\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.passiveButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"passive\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <PassiveIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst OfflineButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Tooltip title=\"Offline\" placement=\"left\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.offlineButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: props.variant,\r\n              payload: \"offline\",\r\n            });\r\n          }}\r\n          disabled={props.disabled}\r\n        >\r\n          <OfflineIcon\r\n            color={\r\n              props.disabled\r\n                ? theme.palette.background.paper\r\n                : theme.palette.button.color\r\n            }\r\n          />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function SetStateMenu(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [isActiveModule, setIsActiveModule] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const initialState = Fit.getInitialState(props.activeItem);\r\n    switch (initialState) {\r\n      case \"activation\":\r\n        setIsActiveModule(true);\r\n        break;\r\n      case \"passive\":\r\n        setIsActiveModule(false);\r\n        break;\r\n      default:\r\n        setIsActiveModule(undefined);\r\n    }\r\n  }, [props.activeItem?.typeID]);\r\n\r\n  return (\r\n    <RecMenu\r\n      open={props.slotsOpen[props.variant].open}\r\n      menuButton={\r\n        <RecButton\r\n          className={classes.rootButton}\r\n          style={{\r\n            backgroundColor: getCurrentStateColor(\r\n              props.activeItem?.typeState,\r\n              props.variant === \"AMMO\",\r\n              theme\r\n            ),\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <Tooltip title=\"Item state\" placement=\"bottom\" arrow>\r\n            <div style={{ height: 24 }}>\r\n              {getCurrentStateIcon(\r\n                props.activeItem?.typeState,\r\n                props.variant === \"AMMO\",\r\n                !props.activeItem?.typeID,\r\n                theme\r\n              )}\r\n            </div>\r\n          </Tooltip>\r\n        </RecButton>\r\n      }\r\n    >\r\n      <OverloadButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={\r\n          !isActiveModule ||\r\n          props.variant === \"DRONE_SLOT\" ||\r\n          props.variant === \"AMMO\"\r\n        }\r\n      />\r\n      <ActivationButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={!isActiveModule || props.variant === \"AMMO\"}\r\n      />\r\n      <PassiveButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n      />\r\n      <OfflineButton\r\n        variant={props.variant}\r\n        dispatchListItems={props.dispatchListItems}\r\n        disabled={props.variant === \"AMMO\"}\r\n      />\r\n    </RecMenu>\r\n  );\r\n}\r\nexport function getCurrentStateColor(state, isAmmo = false, theme) {\r\n  if (isAmmo === true) return theme.palette.property.org;\r\n  switch (state) {\r\n    case \"overload\":\r\n      return theme.palette.property.red;\r\n    case \"activation\":\r\n      return theme.palette.property.green;\r\n    case \"passive\":\r\n      return theme.palette.property.org;\r\n    case \"offline\":\r\n      return theme.palette.property.grey;\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\nfunction getCurrentStateIcon(state, isAmmo, isDisabled, theme) {\r\n  if (isAmmo === true)\r\n    return (\r\n      <PassiveIcon\r\n        color={\r\n          isDisabled\r\n            ? theme.palette.background.paper\r\n            : theme.palette.button.color\r\n        }\r\n      />\r\n    );\r\n  switch (state) {\r\n    case \"overload\":\r\n      return (\r\n        <OverloadIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"activation\":\r\n      return (\r\n        <ActivationIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"passive\":\r\n      return (\r\n        <PassiveIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n    case \"offline\":\r\n    default:\r\n      return (\r\n        <OfflineIcon\r\n          color={\r\n            isDisabled\r\n              ? theme.palette.background.paper\r\n              : theme.palette.button.color\r\n          }\r\n        />\r\n      );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  ListItemText,\r\n  Avatar,\r\n  Tooltip,\r\n  useTheme,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  HighSlotIcon,\r\n  MidSlotIcon,\r\n  LowSlotIcon,\r\n  RigSlotIcon,\r\n  DroneIcon,\r\n  CapsuleIcon,\r\n  MiscIcon,\r\n} from \"../../Icons/slotIcons.jsx\";\r\nimport SlotChargeBadge from \"./SlotChargeBadge.jsx\";\r\nimport { useEffect } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport SlotMetaBadge from \"./SlotMetaBadge.jsx\";\r\nimport { getCurrentStateColor } from \"../ListDrawer/SetStateMenu.jsx\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n  },\r\n  rootActive: {\r\n    height: 50,\r\n    width: \"110%\",\r\n    minWidth: 60,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n  rootDiv: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n  },\r\n  rootAvatarDefault: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  stateArcBorder: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: \"50%\",\r\n    border: \"3px solid\",\r\n    borderLeftColor: \"transparent\",\r\n    borderRightColor: \"transparent\",\r\n    borderTopColor: \"transparent\",\r\n    borderBottomColor: \"transparent\",\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 7,\r\n  },\r\n}));\r\n\r\nexport default function Slot(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [charge, setCharge] = useState(false);\r\n\r\n  const [isHover, setIsHover] = useState(false);\r\n\r\n  const handlePressOpen = useCallback(() => {\r\n    props.setActiveSlotNumber(props.index);\r\n    switch (props.variant) {\r\n      case \"RIG_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"RIG_SLOT\",\r\n          payload: {\r\n            filter: getLoadableRig(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      case \"DRONE_SLOT\":\r\n        props.dispatchSlotsOpen({\r\n          type: \"DRONE_SLOT\",\r\n          payload: {\r\n            filter: getLoadableDrone(props.slots.ship),\r\n          },\r\n        });\r\n        break;\r\n      default:\r\n        props.dispatchSlotsOpen({ type: props.variant });\r\n        break;\r\n    }\r\n  }, [props.slots.ship?.typeID, props.variant, props.index]);\r\n\r\n  useEffect(() => {\r\n    if (props.isActive === true || props.isActive.open === true) {\r\n      props.setActiveSlot({\r\n        type: props.variant,\r\n        index: props.index,\r\n      });\r\n    }\r\n  }, [props.isActive]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedItem;\r\n    if (!type || !type.typeID) setItem(false);\r\n    else setItem(props.fetchedItem);\r\n  }, [props.fetchedItem?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const type = props.fetchedCharge;\r\n    if (!type || !type.typeID) setCharge(false);\r\n    else setCharge(props.fetchedCharge);\r\n  }, [props.fetchedCharge?.typeID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListItem\r\n        className={props.isActive ? classes.rootActive : classes.root}\r\n        onClick={handlePressOpen}\r\n        dense\r\n        button\r\n      >\r\n        <div className={classes.rootDiv}>\r\n          <SlotChargeBadge\r\n            {...props}\r\n            item={item}\r\n            charge={charge}\r\n            count={props.fetchedItem?.typeCount}\r\n          >\r\n            <SlotMetaBadge item={item}>\r\n              <div\r\n                className={classes.stateArcBorder}\r\n                style={{\r\n                  borderLeftColor: getCurrentStateColor(\r\n                    props?.fetchedItem?.typeState,\r\n                    false,\r\n                    theme\r\n                  ),\r\n                }}\r\n              />\r\n              <Avatar className={classes.rootAvatarDefault}>\r\n                <Button disableRipple>\r\n                  {!!item ? feedSource(item, charge) : slotIcon(props, theme)}\r\n                </Button>\r\n              </Avatar>\r\n            </SlotMetaBadge>\r\n          </SlotChargeBadge>\r\n        </div>\r\n\r\n        <ListItemText\r\n          style={{ marginLeft: 50 }}\r\n          primary={item?.typeName}\r\n          primaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n          secondary={\r\n            !!charge &&\r\n            `${charge?.typeName} ${getChageCountString(item, charge)}`\r\n          }\r\n          secondaryTypographyProps={{ noWrap: true, variant: \"subtitle2\" }}\r\n        />\r\n      </ListItem>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction feedSource(item, charge) {\r\n  if (!!item && !charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"85%\", height: \"85%\", marginLeft: -2 }}\r\n        src={`https://images.evetech.net/types/${item?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n  else if (!!item && !!charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"85%\", height: \"85%\", marginLeft: -2 }}\r\n        src={`https://images.evetech.net/types/${charge?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n}\r\nfunction getChageCountString(item, charge) {\r\n  const count = item.capacity / charge.volume || 1;\r\n  if (count === 1) return \"\";\r\n  else return `x${Math.floor(count)}`;\r\n}\r\nfunction getLoadableRig(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const rigSize = attrs.find((attr) => attr.attributeID === 1547)?.value;\r\n  return { size: rigSize };\r\n}\r\nfunction getLoadableDrone(ship) {\r\n  if (!ship) return undefined;\r\n\r\n  const attrs = ship.typeAttributesStats;\r\n  const droneSize = attrs.find((attr) => attr.attributeID === 1271)?.value; //attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  return { size: droneSize };\r\n}\r\n\r\nfunction slotIcon(props, theme) {\r\n  switch (props.variant) {\r\n    case \"SHIP\":\r\n      return (\r\n        <Tooltip\r\n          open={props.open && !props.slotsOpen.SHIP.open}\r\n          title=\"Click here to choose ship\"\r\n          placement=\"right\"\r\n          arrow\r\n        >\r\n          <div style={{ height: 24 }}>\r\n            <CapsuleIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      );\r\n    case \"MISC_SLOT\":\r\n      return <MiscIcon color={theme.palette.text.primary} />;\r\n    case \"HIGH_SLOT\":\r\n      return <HighSlotIcon color={theme.palette.text.primary} />;\r\n    case \"MID_SLOT\":\r\n      return <MidSlotIcon color={theme.palette.text.primary} />;\r\n    case \"LOW_SLOT\":\r\n      return <LowSlotIcon color={theme.palette.text.primary} />;\r\n    case \"RIG_SLOT\":\r\n      return <RigSlotIcon color={theme.palette.text.primary} />;\r\n    case \"DRONE_SLOT\":\r\n      return <DroneIcon color={theme.palette.text.primary} />;\r\n  }\r\n}\r\n","export default class EFT {\r\n  static extractIDs(fitText, typeIDs) {\r\n    if (!typeIDs) return [];\r\n\r\n    const typeNames = EFT.#extractIDs_getTypeNames(fitText);\r\n    return typeNames.reduce((acc, typeName) => {\r\n      const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n      if (!!type) acc.push(type.typeID);\r\n      else console.log(\"ERROR\", \"EFT:typeName is not found\", typeName);\r\n      return acc;\r\n    }, []);\r\n  }\r\n  static #extractIDs_getTypeNames = function (fitText) {\r\n    const shipText = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const moduleText = fitText.substring(fitText.indexOf(\"]\") + 1);\r\n\r\n    const shipName = shipText.replace(\"[\", \"\").split(\",\")[0];\r\n    const moduleNames = [\r\n      ...new Set(\r\n        moduleText.split(/\\r?\\n/).reduce((acc, moduleTextLine) => {\r\n          const dividedByComma = moduleTextLine.split(\", \");\r\n          const dividedByX = moduleTextLine.split(\" x\");\r\n\r\n          if (dividedByComma.length === 2) {\r\n            const item = dividedByComma[0];\r\n            const charge = dividedByComma[1];\r\n            return acc.concat([item, charge]);\r\n          }\r\n          if (dividedByX.length === 2) {\r\n            const item = dividedByX[0];\r\n            return acc.concat([item]);\r\n          }\r\n\r\n          if (moduleTextLine !== \"\") return acc.concat(moduleTextLine);\r\n          return acc;\r\n        }, [])\r\n      ),\r\n    ];\r\n    return [shipName, ...moduleNames];\r\n  };\r\n\r\n  static buildFitFromText = function (fitText, typeIDs) {\r\n    const shipTextLine = fitText.slice(0, fitText.indexOf(\"]\") + 1);\r\n    const shipName = shipTextLine.replace(\"[\", \"\").split(\",\")[0];\r\n    const ship = EFT.#common_findIdByName(shipName, typeIDs);\r\n\r\n    const fitTextBlocks = fitText.split(/\\r?\\n\\r?\\n\\r?\\n/);\r\n    const moduleText = EFT.#buildFitFromText_getModuleText(fitTextBlocks);\r\n    const droneText = fitTextBlocks[1]; //At this point we dont know wether this text is drone or not\r\n\r\n    const moduleSlots = EFT.#buildFitFromText_buildModules(moduleText, typeIDs);\r\n    const droneSlots = EFT.#buildFitFromText_buildDrones(droneText, typeIDs);\r\n\r\n    return { ship, ...moduleSlots, ...droneSlots };\r\n  };\r\n  static #buildFitFromText_getModuleText = function (fitTextBlocks) {\r\n    const indexOfModuleText = fitTextBlocks[0].indexOf(\"]\") + 1;\r\n    const moduleText = fitTextBlocks[0].substring(indexOfModuleText);\r\n    return moduleText.trimStart();\r\n  };\r\n  static #buildFitFromText_buildModules = function (moduleText, typeIDs) {\r\n    const moduleTextBlocks = moduleText.split(/\\r?\\n\\r?\\n/);\r\n\r\n    const moduleSlots = {};\r\n    [\"lowSlots\", \"midSlots\", \"highSlots\", \"rigSlots\", \"miscSlots\"].forEach(\r\n      (slot, index) => {\r\n        moduleSlots[slot] = EFT.#buildFitFromText_buildModule(\r\n          moduleTextBlocks[index],\r\n          typeIDs\r\n        );\r\n      }\r\n    );\r\n\r\n    return moduleSlots;\r\n  };\r\n  static #buildFitFromText_buildModule = function (moduleTextBlock, typeIDs) {\r\n    if (!moduleTextBlock) return [];\r\n\r\n    const moduleTextLines = moduleTextBlock.split(/\\r?\\n/);\r\n    return moduleTextLines.map((moduleTextLine) => {\r\n      if (moduleTextLine.indexOf(\"Empty\") !== -1)\r\n        return { item: false, chage: false };\r\n      else {\r\n        const itemName = moduleTextLine.split(\", \")[0];\r\n        const chargeName = moduleTextLine.split(\", \")[1];\r\n        const item = EFT.#common_findIdByName(itemName, typeIDs);\r\n        const charge = EFT.#common_findIdByName(chargeName, typeIDs);\r\n        return { item, charge };\r\n      }\r\n    });\r\n  };\r\n  static #buildFitFromText_buildDrones = function (droneText, typeIDs) {\r\n    //prettier-ignore\r\n    if (EFT.#buildFitFromText_readoutTextBlock(droneText, typeIDs) !== \"droneSlots\")\r\n      return {};\r\n\r\n    const droneTextLines = droneText.split(/\\r?\\n/);\r\n    const droneSlots = droneTextLines.map((droneTextLine) => {\r\n      //prettier-ignore\r\n      const {typeName, typeCount} = EFT.#buildFitFromText_divideBy_x(droneTextLine)\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      return { item: { ...type, typeCount }, charge: false };\r\n    });\r\n\r\n    return { droneSlots };\r\n  };\r\n  static #buildFitFromText_divideBy_x = function (fitTextLine) {\r\n    const dividedBy_x = fitTextLine.split(\" x\");\r\n    const typeName = dividedBy_x[0];\r\n    const typeCount = Number(dividedBy_x[1]);\r\n\r\n    return { typeName, typeCount };\r\n  };\r\n  static #buildFitFromText_readoutTextBlock = function (textBlock, typeIDs) {\r\n    if (!textBlock) return \"undefined\";\r\n\r\n    const sampleTextLine = textBlock.slice(0, textBlock.search(/\\r?\\n/));\r\n    if (sampleTextLine.indexOf(\" x\") !== -1) {\r\n      const typeName = sampleTextLine.split(\" x\")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeDroneSize) return \"droneSlots\";\r\n      else return false;\r\n    } else if (sampleTextLine.indexOf(\",\") !== -1) {\r\n      const typeName = sampleTextLine.split(\", \")[0];\r\n      const type = EFT.#common_findIdByName(typeName, typeIDs);\r\n      if (!!type.typeIsHiPower) return \"highSlots\";\r\n      else if (!!type.typeIsMedPower) return \"midSlots\";\r\n      else if (!!type.typeIsLoPower) return \"lowSlots\";\r\n      else return \"ship\";\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit]`;\r\n    const lowSlots = EFT.#buildTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const miscSlots = EFT.#buildTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Subsystem slot]\");\r\n    const moduleSlots =  [ship, lowSlots, midSlots, highSlots, rigSlots, miscSlots]\r\n      .filter(slots => !!slots)// In case for miscSlots is empty and returned as false\r\n      .join(\"\\n\\n\");\r\n\r\n    const drones =  EFT.#buildTextFromFit_droneSlots(fit?.droneSlots, \"[Empty Subsystem slot]\")\r\n\r\n    return [moduleSlots, drones].join(\"\\n\\n\\n\");\r\n  };\r\n  static #buildTextFromFit_moduleSlots = function (moduleSlots, emptyText) {\r\n    if (!moduleSlots || moduleSlots.length === 0) return false;\r\n\r\n    return moduleSlots\r\n      .map((moduleSlot) => {\r\n        if (!moduleSlot || !moduleSlot.item) return emptyText;\r\n        if (!moduleSlot.charge) return moduleSlot.item.typeName;\r\n        return moduleSlot.item.typeName.concat(\r\n          \", \",\r\n          moduleSlot.charge.typeName\r\n        );\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        if (!droneSlot || !droneSlot.item) return \"\";\r\n        return `${droneSlot.item.typeName} x${droneSlot.item.typeCount}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  //prettier-ignore\r\n  static buildCompareTextFromFit = function (fit) {\r\n    const ship = `[${fit?.ship?.typeName}, ${fit?.ship?.typeName} fit] ${fit?.ship?.typeState}`;\r\n    const miscSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.miscSlots, \"[Empty Misc slot]\");\r\n    const lowSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.lowSlots, \"[Empty Low slot]\");\r\n    const midSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.midSlots, \"[Empty Med slot]\");\r\n    const highSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.highSlots, \"[Empty High slot]\");\r\n    const rigSlots = EFT.#buildCompareTextFromFit_moduleSlots(fit?.rigSlots, \"[Empty Rig slot]\");\r\n    const drones = EFT.#buildCompareTextFromFit_droneSlots(fit?.droneSlots);\r\n\r\n    return [\r\n      ship,\r\n      miscSlots,\r\n      lowSlots,\r\n      midSlots,\r\n      highSlots,\r\n      rigSlots,\r\n      drones,\r\n    ].join(\"\\n\\n\");\r\n  }\r\n  static #buildCompareTextFromFit_moduleSlots = function (slots, blankText) {\r\n    if (!slots) return \"\";\r\n    return slots\r\n      .map((slot) => {\r\n        if (!slot || !slot.item) return blankText;\r\n        if (!slot.charge) return `${slot.item.typeName} ${slot.item.typeState}`;\r\n        return `${slot.item.typeName}, ${slot.charge.typeName} ${slot.item.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n  static #buildCompareTextFromFit_droneSlots = function (droneSlots) {\r\n    if (!droneSlots) return \"\";\r\n    return droneSlots\r\n      .map((droneSlot) => {\r\n        const drone = droneSlot.item;\r\n        return `${drone.typeName} x${drone.typeCount} ${drone.typeState}`;\r\n      })\r\n      .join(\"\\n\");\r\n  };\r\n\r\n  static #common_findIdByName = function (typeName, typeIDs) {\r\n    if (!typeName) return false;\r\n\r\n    const type = typeIDs.find((typeID) => typeID.typeName === typeName);\r\n    return !!type ? type : false;\r\n  };\r\n}\r\n","export function findAttributesByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeName.constructor === String) {\r\n    return findAttributeByName(item, attributeName);\r\n  } else if (attributeName.constructor === Array) {\r\n    const attributes = attributeName.map((entry) =>\r\n      findAttributeByName(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nfunction findAttributeByName(item, attributeName) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeName === attributeName\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n\r\nexport function findAttributesbyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (attributeID.constructor === Number) {\r\n    return findAttributebyID(item, attributeID);\r\n  } else if (attributeID.constructor === Array) {\r\n    const attributes = attributeID.map((entry) =>\r\n      findAttributebyID(item, entry)\r\n    );\r\n\r\n    if (attributes.length === 0) return undefined;\r\n    return attributes;\r\n  }\r\n}\r\n\r\nexport function findAttributebyID(item, attributeID) {\r\n  if (!item || !item.typeAttributesStats) return undefined;\r\n\r\n  if (item.typeAttributesStats.constructor !== Array) return undefined;\r\n\r\n  const result = item.typeAttributesStats.filter(\r\n    (entry) => entry.attributeID === attributeID\r\n  );\r\n\r\n  if (result.length === 1) return result[0].value;\r\n  else if (result.length >= 2) return result.map((entry) => entry.value);\r\n  else return undefined;\r\n}\r\n","import React, { useRef } from \"react\";\r\nimport Slot from \"./Slot\";\r\nimport { useState, useEffect } from \"react\";\r\nimport EFT from \"../services/EFT\";\r\nimport { translateVariant } from \"../Drawers\";\r\nimport { getSlotCount } from \"../FittingDrawer/FittingDrawer.jsx\";\r\nimport Fit from \"../../../fitter/src/Fit\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes\";\r\nimport { Avatar, Divider, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"relative\",\r\n  },\r\n  lodingIndicator: {\r\n    position: \"absolute\",\r\n    height: 10,\r\n    width: 10,\r\n    top: 2,\r\n    left: 2,\r\n    backgroundColor: theme.palette.property.gre,\r\n  },\r\n  divider: {\r\n    width: \"200%\",\r\n  },\r\n}));\r\n\r\nexport default function Slots(props) {\r\n  const classes = useStyles();\r\n  //prettier-ignore\r\n  const [rawItems, setRawItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [rawCharges, setRawCharges] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedItems, setFetchedItems] = useState(new Array(props.slotCount).fill(false));\r\n  //prettier-ignore\r\n  const [fetchedCharges, setFetchedCharges] = useState(new Array(props.slotCount).fill(false));\r\n  const setters = {\r\n    setRawItems,\r\n    setFetchedItems,\r\n    setRawCharges,\r\n    setFetchedCharges,\r\n  };\r\n\r\n  const [activeSlotNumber, setActiveSlotNumber] = useState(0);\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const sessionRef = useRef(0);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    setRawItems(new Array(props.slotCount).fill(false));\r\n    setRawCharges(new Array(props.slotCount).fill(false));\r\n  }, [props.slots?.ship?.typeID]);\r\n\r\n  useEffect(() => {\r\n    if (!!props.importFitText || props.variant === \"SHIP\") return undefined;\r\n\r\n    rawItems.length = props.slotCount;\r\n    setRawItems(Array.from(rawItems, (item) => item || false));\r\n    rawCharges.length = props.slotCount;\r\n    setRawCharges(Array.from(rawCharges, (charge) => charge || false));\r\n  }, [props.slotCount]);\r\n\r\n  //Import fitText using EFT class\r\n  useEffect(() => {\r\n    if (props.importFitText !== false) importSlots(props, setters);\r\n  }, [props.importFitText]);\r\n\r\n  //Raw items, charges input [REFACTOR!!]\r\n  useEffect(() => {\r\n    switch (props.listItems[props.variant]) {\r\n      case false:\r\n      case undefined:\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawItems[activeSlotNumber] = false;\r\n        rawCharges[activeSlotNumber] = false;\r\n        break;\r\n      case \"ADD\":\r\n        const activeItem = rawItems[activeSlotNumber];\r\n        activeItem[\"typeCount\"] = loopNumber(activeItem.typeCount, 1, 6);\r\n        setRawItems([...rawItems]);\r\n        props.dispatchListItems({ type: props.variant, payload: false });\r\n        return;\r\n      case \"activation\":\r\n        changeState(rawItems[activeSlotNumber], \"activation\");\r\n        break;\r\n      case \"offline\":\r\n        changeState(rawItems[activeSlotNumber], \"offline\");\r\n        break;\r\n      case \"passive\":\r\n        changeState(rawItems[activeSlotNumber], \"passive\");\r\n        break;\r\n      case \"overload\":\r\n        changeState(rawItems[activeSlotNumber], \"overload\");\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); return;\r\n      default:\r\n        // New item is comming\r\n        if (validateHardpoints(props.fit, props.listItems[props.variant])) {\r\n          assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber);\r\n          addCountToDroneSlots(props, rawItems[activeSlotNumber]);\r\n          changeState(rawItems[activeSlotNumber], \"activation\");\r\n        }\r\n        break;\r\n    }\r\n    setRawItems([...rawItems]);\r\n    setRawCharges([...rawCharges]);\r\n    props.dispatchListItems({ type: props.variant, payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(\r\n        loopNumber(activeSlotNumber, 0, props.slotCount, props.variant)\r\n      );\r\n  }, [props.listItems[props.variant]]);\r\n\r\n  useEffect(() => {\r\n    switch (props.listItems[\"AMMO\"]) {\r\n      case false:\r\n      case undefined:\r\n      case \"activation\":\r\n      case \"offline\":\r\n      case \"passive\":\r\n      case \"overload\":\r\n        return undefined;\r\n      case \"DEL\":\r\n        rawCharges[activeSlotNumber] = false;\r\n        setFetchedCharges([...rawCharges]);\r\n        break;\r\n      //prettier-ignore\r\n      case \"LOOPLOOP\": setIsLoop(!isLoop); break;\r\n      default:\r\n        if (props.slotsOpen.AMMO.slotVariant !== props.variant) break;\r\n        if (!rawItems[activeSlotNumber]) break;\r\n        rawCharges[activeSlotNumber] = props.listItems[\"AMMO\"];\r\n        changeState(rawCharges[activeSlotNumber], \"passive\");\r\n        setRawCharges([...rawCharges]);\r\n    }\r\n    props.dispatchListItems({ type: \"AMMO\", payload: false });\r\n    if (isLoop === true)\r\n      setActiveSlotNumber(loopNumber(activeSlotNumber, 0, props.slotCount));\r\n  }, [props.listItems[\"AMMO\"]]);\r\n\r\n  //Fetched items, charges input\r\n  useEffect(() => {\r\n    sessionRef.current = sessionRef.current + 1;\r\n    setIsLoading(true);\r\n    (async function (props, rawItems, rawCharges, session) {\r\n      const data = await Promise.all(\r\n        createFetchPromises(props, rawItems, rawCharges, session)\r\n      );\r\n\r\n      const sessionData = data[data.length - 1];\r\n      const fetchedData = data.slice(0, data.length - 1);\r\n\r\n      if (sessionData !== sessionRef.current) {\r\n        /* console.error( \"ERROR_SESSION_COUNT_DEFECTED\", props.variant, {FETCHED_SESSION: sessionData, VALID_SESSION: sessionRef.current, fetchedData} ); */\r\n        return undefined;\r\n      } else if (fetchedData === false) {\r\n        /* console.warn(\"WARN_ITEM_CHARGE_COUNT_DEFECTED\", props.variant, {rawItems, rawCharges}) */\r\n      } else {\r\n        processFetchedData(props, fetchedData, rawItems, rawCharges, setters);\r\n      }\r\n      setIsLoading(false);\r\n    })(props, rawItems, rawCharges, sessionRef.current);\r\n  }, [checkData(rawItems, rawCharges)]);\r\n\r\n  if (props.slotCount > 0)\r\n    return (\r\n      <React.Fragment>\r\n        <div className={classes.root}>\r\n          <Divider\r\n            className={classes.divider}\r\n            style={{ backgroundColor: props.backgroundColor }}\r\n          />\r\n          {new Array(props.slotCount).fill(undefined).map((slot, index) => {\r\n            return (\r\n              <Slot\r\n                key={`${props.variant}:${index}`}\r\n                variant={props.variant}\r\n                open={props.open}\r\n                slotsOpen={props.slotsOpen}\r\n                slots={props.slots}\r\n                fetchedItem={fetchedItems[index]}\r\n                fetchedCharge={fetchedCharges[index]}\r\n                dispatchSlotsOpen={props.dispatchSlotsOpen}\r\n                setActiveSlot={props.setActiveSlot}\r\n                isActive={\r\n                  activeSlotNumber === index &&\r\n                  (props.slotsOpen[props.variant].open ||\r\n                    props.slotsOpen.AMMO.slotVariant === props.variant)\r\n                }\r\n                index={index}\r\n                setActiveSlotNumber={setActiveSlotNumber}\r\n                cache={props.cache}\r\n              />\r\n            );\r\n          })}\r\n          {isLoading && (\r\n            <Avatar className={classes.lodingIndicator}>{\"\"}</Avatar>\r\n          )}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  else return false;\r\n}\r\nfunction validateHardpoints(fit, listItems) {\r\n  if (\r\n    listItems.typeIsTurretFitted !== true &&\r\n    listItems.typeIsLauncherFitted !== true\r\n  )\r\n    return true;\r\n\r\n  const pointLoad = extractHardpoints(fit);\r\n\r\n  if (listItems.typeIsTurretFitted === true) {\r\n    const turretPoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    return turretPoint > pointLoad.turretPointLoad;\r\n  } else if (listItems.typeIsLauncherFitted === true) {\r\n    const launcherPoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\"\r\n    return launcherPoint > pointLoad.launcherPointLoad;\r\n  }\r\n}\r\nfunction extractHardpoints(fit) {\r\n  let turretPointLoad = 0;\r\n  let launcherPointLoad = 0;\r\n  Fit.mapSlots(\r\n    fit,\r\n    (slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      if (isTurretFitted === true) return ++turretPointLoad;\r\n      if (isLauncherFitted === true) return ++launcherPointLoad;\r\n    },\r\n    { isIterate: { highSlots: true } }\r\n  );\r\n  return { turretPointLoad, launcherPointLoad };\r\n}\r\nfunction importSlots(props, setters) {\r\n  if (!props.importFitText) return undefined;\r\n\r\n  (async (fitText) => {\r\n    const typeIDs = await props.cache.wait(\"/typeIDsTable\");\r\n    const fitFromText = EFT.buildFitFromText(fitText, typeIDs);\r\n    const ship = await props.cache.wait(`typeID/${fitFromText.ship.typeID}`);\r\n\r\n    if (props.variant === \"SHIP\") {\r\n      setters.setRawItems([fitFromText.ship]);\r\n      return undefined;\r\n    }\r\n\r\n    const slotCount = getSlotCountAtImport({ ship }, fitFromText, props);\r\n    const items = new Array(slotCount).fill(false);\r\n    const charges = new Array(slotCount).fill(false);\r\n\r\n    const slots = fitFromText[translateVariant(props.variant)] || [];\r\n\r\n    //prettier-ignore\r\n    slots.forEach((slot, index) => {\r\n      items[index] = !!slot.item && { ...slot.item, typeState: \"activation\" };\r\n      charges[index] = !!slot.charge && {...slot.charge, typeState: \"passive\",};\r\n    });\r\n\r\n    setters.setRawItems(items);\r\n    setters.setRawCharges(charges);\r\n\r\n    props.dispatchImportStateFlag({ type: props.variant });\r\n  })(props.importFitText);\r\n}\r\nfunction getSlotCountAtImport(fit, fitFromText, props) {\r\n  const isTacCruiser = fit.ship.groupID === 963;\r\n  if (isTacCruiser === true)\r\n    return fitFromText[translateVariant(props.variant)].length;\r\n  else return getSlotCount(fit, props.variant);\r\n}\r\nfunction createFetchPromises(props, rawItems, rawCharges, session) {\r\n  if (rawItems.length !== rawCharges.length)\r\n    return [Promise.resolve(false), Promise.resolve(session)];\r\n\r\n  const promisesItem = rawItems.map((rawItem) => {\r\n    if (rawItem === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawItem?.typeID}`);\r\n  });\r\n  const promisesCharge = rawCharges.map((rawCharge) => {\r\n    if (rawCharge === false) return Promise.resolve(false);\r\n    return props.cache.wait(`typeID/${rawCharge?.typeID}`);\r\n  });\r\n  const sessionPromise = Promise.resolve(session);\r\n  return [...promisesItem, ...promisesCharge, sessionPromise];\r\n}\r\nfunction processFetchedData(props, data, rawItems, rawCharges, setters) {\r\n  const items = data.slice(0, data.length / 2);\r\n  const charges = data.slice(data.length / 2);\r\n  const payload = [];\r\n  items.forEach((fetcheditem, index) => {\r\n    const itemState = !!rawItems[index]\r\n      ? Fit.getCurrentState({\r\n          ...rawItems[index],\r\n          ...fetcheditem,\r\n        })\r\n      : undefined;\r\n    const item = !!rawItems[index]\r\n      ? { ...rawItems[index], ...fetcheditem, typeState: itemState }\r\n      : false;\r\n    const charge = Fit.validateChargeSlot({ item, charge: charges[index] })\r\n      ? { ...rawCharges[index], ...charges[index] }\r\n      : false;\r\n    rawItems[index] = item;\r\n    rawCharges[index] = charge;\r\n    payload.push({ item, charge });\r\n    // If validation of charge fails, set rawCharge as false value\r\n    if (charge === false) rawCharges[index] = false;\r\n    // Set rawItems state as fetch complete(initial value was activation)\r\n    if (!!rawItems[index] && !!itemState)\r\n      rawItems[index][\"typeState\"] = itemState;\r\n  });\r\n\r\n  props.dispatchSlots({ type: props.variant, payload: payload });\r\n  setters.setFetchedCharges([...rawCharges]); // If validation of charge fails, set rawCharge as false value\r\n  setters.setFetchedItems([...rawItems]);\r\n}\r\n\r\nfunction assignItemToSlot(props, rawItems, rawCharges, activeSlotNumber) {\r\n  rawItems[activeSlotNumber] = { ...props.listItems[props.variant] };\r\n\r\n  //Sync chargeSlots count to itemSlots count\r\n  if (rawCharges[activeSlotNumber] === undefined)\r\n    rawCharges[activeSlotNumber] = false;\r\n}\r\nfunction addCountToDroneSlots(props, activeItem) {\r\n  if (props.variant === \"DRONE_SLOT\" && activeItem.typeCount === undefined)\r\n    activeItem[\"typeCount\"] = 1;\r\n}\r\nfunction changeState(activeItem, state) {\r\n  if (activeItem.typeState === undefined)\r\n    activeItem[\"typeState\"] = \"activation\";\r\n\r\n  switch (state) {\r\n    case \"offline\":\r\n    case \"overload\":\r\n    case \"passive\":\r\n    case \"activation\":\r\n      activeItem.typeState = state;\r\n      break;\r\n    default:\r\n      activeItem.typeState = \"activation\";\r\n      break;\r\n  }\r\n}\r\nfunction checkData(rawItems, rawCharges) {\r\n  return [\r\n    ...hashTypes(rawItems),\r\n    ...hashState(rawItems),\r\n    ...hashCount(rawItems),\r\n    ...hashTypes(rawCharges),\r\n  ].join(\":\");\r\n}\r\nfunction hashTypes(types) {\r\n  return types.map((type) => !!type && type.typeName).join(\"-\");\r\n}\r\nfunction hashState(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeState).join(\"-\");\r\n}\r\nfunction hashCount(rawTypes) {\r\n  return rawTypes.map((type) => !!type && type.typeCount).join(\"-\");\r\n}\r\nfunction loopNumber(number, floor, ceiling, variant) {\r\n  if (variant === \"DRONE_SLOT\") {\r\n    if (number >= ceiling) return floor;\r\n    return number + 1;\r\n  }\r\n\r\n  if (number + 1 >= ceiling) return floor;\r\n  else return number + 1;\r\n}\r\n","import React, { useCallback } from \"react\";\r\nimport ArchiveIcon from \"@material-ui/icons/Archive\";\r\nimport UnarchiveIcon from \"@material-ui/icons/Unarchive\";\r\nimport RecButton from \"../RecButton\";\r\nimport EFT from \"../services/EFT\";\r\nimport fittingLazyFetch from \"./fittingLazyFetch.js\";\r\nimport {\r\n  makeStyles,\r\n  Snackbar,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItem,\r\n  Tooltip,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { importInitializeFlag } from \"./FittingDrawer\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  button: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  listItem: {\r\n    width: 300,\r\n    padding: 0,\r\n  },\r\n  listIcon: {\r\n    width: 35,\r\n    minWidth: 10,\r\n  },\r\n  warning: {\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nexport default function ImportExportButtons(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [openAlert, setOpenAlert] = useState(false);\r\n\r\n  const [title, setTitle] = useState(\r\n    \"Something went wrong . reload the page\"\r\n  );\r\n  const [text, setText] = useState(false);\r\n\r\n  const handleImportClick = useCallback(() => {\r\n    copyTextFromClipboard().then((text) => {\r\n      setOpenAlert(true);\r\n      if (text === false) return setTitle(\"Permission denied\");\r\n      setText(text);\r\n      props.setImportFitText(text);\r\n      props.dispatchImportStateFlag({ type: \"START\" });\r\n      props.cache.wait(\"/typeIDsTable\").then((typeIDs) => {\r\n        const IDs = EFT.extractIDs(text, typeIDs);\r\n        if (!IDs || IDs.length === 0) setTitle(\"Unvalid EFT\");\r\n        else setTitle(\"Importing EFT\");\r\n        fittingLazyFetch(props.cache, IDs);\r\n      });\r\n    });\r\n  }, [props.setImportFitText, props.dispatchImportStateFlag, props.cache]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Tooltip title=\"Import\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton className={classes.button} onClick={handleImportClick}>\r\n            <ArchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Tooltip title=\"Export\" placement=\"bottom\" arrow>\r\n        <div>\r\n          <RecButton\r\n            className={classes.button}\r\n            onClick={() => {\r\n              navigator.clipboard.writeText(props.exportFitText);\r\n            }}\r\n          >\r\n            <UnarchiveIcon />\r\n          </RecButton>\r\n        </div>\r\n      </Tooltip>\r\n\r\n      <Snackbar\r\n        anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n        open={openAlert}\r\n        onClose={() => {\r\n          setOpenAlert(false);\r\n        }}\r\n        ContentProps={{\r\n          elevation: 3,\r\n          style: {\r\n            backgroundColor: theme.palette.background.paper,\r\n            border: getSnackbarBorder(title, theme),\r\n          },\r\n        }}\r\n        message={\r\n          <ListItem className={classes.listItem}>\r\n            <ListItemIcon>\r\n              <ArchiveIcon className={classes.warning} />\r\n            </ListItemIcon>\r\n\r\n            <ListItemText\r\n              primary={title}\r\n              secondary={text}\r\n              primaryTypographyProps={{\r\n                style: { color: theme.palette.text.primary, fontWeight: 700 },\r\n              }}\r\n              secondaryTypographyProps={{\r\n                style: { color: theme.palette.text.secondary },\r\n              }}\r\n            />\r\n          </ListItem>\r\n        }\r\n        autoHideDuration={5000}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nasync function copyTextFromClipboard() {\r\n  const permisson = await navigator.permissions.query({\r\n    name: \"clipboard-read\",\r\n  });\r\n  if (permisson.state === \"granted\" || permisson.state === \"prompt\") {\r\n    return navigator.clipboard.readText();\r\n  }\r\n  return false;\r\n}\r\nfunction getSnackbarBorder(title, theme) {\r\n  switch (title) {\r\n    case \"Importing EFT\":\r\n      return \"none\";\r\n    case \"Unvalid EFT\":\r\n      return `solid 3px ${theme.palette.property.org}`;\r\n    case \"Permission denied\":\r\n      return `solid 3px ${theme.palette.property.red}`;\r\n    default:\r\n      return \"none\";\r\n  }\r\n}\r\n","import { database } from \"../../../index\";\r\n\r\nexport default function lazyFetch(cache, typeIDs) {\r\n  typeIDs.forEach((typeID) => {\r\n    cache.get(`typeID/${typeID}`, () => {\r\n      return database\r\n        .ref(`typeIDs/${typeID}`)\r\n        .once(\"value\")\r\n        .then((data) => data.val());\r\n    });\r\n  });\r\n}\r\n","import React, { useReducer } from \"react\";\r\nimport { Drawer, Button, makeStyles, ButtonGroup } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport Slots from \"../Slots/Slots.jsx\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRightIcon from \"@material-ui/icons/ChevronRight\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport ImportExportButtons from \"./ImportExportButtons.jsx\";\r\nimport { findAttributebyID } from \"../../../services/dataManipulation/findAttributes.js\";\r\nimport Fit from \"../../../fitter/src/Fit.js\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootClose: {\r\n    width: 0,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootExpand: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  rootRetract: {\r\n    width: 60,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflow: \"hidden\",\r\n  },\r\n  expandButton: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    opacity: 1,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    zIndex: 1,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n\r\n  child: {\r\n    width: \"100%\",\r\n    overflowX: \"hidden\",\r\n    overflowY: \"auto\",\r\n    paddingBottom: 35,\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport const importInitializeFlag = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n};\r\n\r\nfunction importStateFlagReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"START\":\r\n      return importInitializeFlag;\r\n    default:\r\n      return {\r\n        ...state,\r\n        [action.type]: true,\r\n      };\r\n  }\r\n}\r\n\r\nexport default function FittingDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [importFitText, setImportFitText] = useState(false);\r\n  const [importStateFlag, dispatchImportStateFlag] = useReducer(\r\n    importStateFlagReducer,\r\n    importInitializeFlag\r\n  );\r\n\r\n  const childRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    //If import is finished\r\n    if (!Object.values(importStateFlag).includes(false)) {\r\n      setImportFitText(false);\r\n    }\r\n  }, [importStateFlag]);\r\n\r\n  useEffect(() => {\r\n    const savedSlots = JSON.parse(localStorage.getItem(`${props.tag}SLOTS`));\r\n    const savedEFT = localStorage.getItem(`${props.tag}EFT`);\r\n    /* console.log(props.tag, savedSlots, savedEFT); */\r\n    if (!savedSlots?.ship?.typeID || !savedEFT) return;\r\n\r\n    props.cache.set(`typeID/${savedSlots.ship.typeID}`, savedSlots.ship);\r\n    Fit.mapSlots(\r\n      savedSlots,\r\n      (slot) => {\r\n        if (!!slot?.item?.typeID)\r\n          props.cache.set(`typeID/${slot.item.typeID}`, slot.item);\r\n        if (!!slot?.charge?.typeID)\r\n          props.cache.set(`typeID/${slot.charge.typeID}`, slot.charge);\r\n      },\r\n      {\r\n        isIterate: {\r\n          miscSlots: true,\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          rigSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    setImportFitText(savedEFT);\r\n    dispatchImportStateFlag({ type: \"START\" });\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        open={props.open}\r\n        variant=\"permanent\"\r\n        classes={{\r\n          paper: classes[switchExpandOpen(props)],\r\n        }}\r\n      >\r\n        <ButtonGroup>\r\n          <ImportExportButtons\r\n            exportFitText={props.exportFitText}\r\n            setImportFitText={setImportFitText}\r\n            dispatchImportStateFlag={dispatchImportStateFlag}\r\n            cache={props.cache}\r\n          />\r\n        </ButtonGroup>\r\n        <Button\r\n          className={classes.expandButton}\r\n          onClick={() => props.setExpand(!props.expand)}\r\n        >\r\n          {!!props.expand ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n        </Button>\r\n\r\n        <div className={classes.child}>\r\n          <div ref={childRef}>\r\n            {[\r\n              \"SHIP\",\r\n              \"MISC_SLOT\",\r\n              \"HIGH_SLOT\",\r\n              \"MID_SLOT\",\r\n              \"LOW_SLOT\",\r\n              \"RIG_SLOT\",\r\n              \"DRONE_SLOT\",\r\n            ].map((variant) => {\r\n              return (\r\n                <Slots\r\n                  key={variant}\r\n                  importFitText={importFitText}\r\n                  importStateFlag={importStateFlag}\r\n                  dispatchImportStateFlag={dispatchImportStateFlag}\r\n                  variant={variant}\r\n                  slotCount={getSlotCount(props.fit, variant)}\r\n                  {...props}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n\r\n        <Button\r\n          className={classes.retractButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({ type: \"RESET\" });\r\n            props.setOpen(false);\r\n          }}\r\n        >\r\n          <FirstPageIcon />\r\n        </Button>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction switchExpandOpen(props) {\r\n  if (!props.open) return \"rootClose\";\r\n  if (!props.expand) return \"rootRetract\";\r\n  return \"rootExpand\";\r\n}\r\nexport function getSlotCount(slots, variant) {\r\n  if (variant === \"SHIP\") return 1;\r\n  if (!slots.ship || !slots.ship.typeAttributesStats) return 0;\r\n\r\n  const ship = slots.ship;\r\n  const attrs = ship.typeAttributesStats;\r\n  switch (variant) {\r\n    case \"MISC_SLOT\":\r\n      switch (ship.groupID) {\r\n        // groupID: 963, name.en: Strategic Cruiser\r\n        case 963:\r\n          return 4;\r\n        // groupID: 1305, name.en: Tactical Destroyer\r\n        case 1305:\r\n          return 1;\r\n        default:\r\n          return 0;\r\n      }\r\n    case \"HIGH_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 14)?.value;\r\n    case \"MID_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 13)?.value;\r\n    case \"LOW_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 12)?.value;\r\n    case \"RIG_SLOT\":\r\n      return attrs.find((attr) => attr.attributeID === 1137)?.value; //rigslot count is not sure 1137 or 1154\r\n    case \"DRONE_SLOT\":\r\n      return getDroneSlotCount(slots);\r\n  }\r\n}\r\nfunction getDroneSlotCount(slots) {\r\n  const droneBandwidth = findAttributebyID(slots.ship, 1271); // attributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n  if (!droneBandwidth) return 0;\r\n\r\n  if (!slots.droneSlots) return 1;\r\n  return slots.droneSlots.reduce((acc, slot, index) => {\r\n    if (!!slot.item) return index + 2;\r\n    return acc;\r\n  }, 1);\r\n}\r\n","import React from \"react\";\r\nimport { TextField, Typography } from \"@material-ui/core\";\r\n\r\nexport default function StatTextField(props) {\r\n  return (\r\n    <div\r\n      style={{\r\n        marginTop: 4,\r\n        width: \"70%\",\r\n      }}\r\n    >\r\n      <TextField\r\n        style={{ width: \"100%\" }}\r\n        label={\r\n          <Typography noWrap style={{ width: \"100%\" }}>\r\n            {!!switchUnit(props.attr.unitID)\r\n              ? `${props.attr.attributeName} (${switchUnit(props.attr.unitID)})`\r\n              : props.attr.attributeName}\r\n          </Typography>\r\n        }\r\n        defaultValue={props.attr.value}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nfunction switchUnit(unitID) {\r\n  if (!unitID) return false;\r\n\r\n  const unit = eveUnit.find((unit) => unit.unitID === unitID);\r\n  if (unit === undefined)\r\n    console.log(\r\n      \"ERROR\",\r\n      `unitID:${unitID} not found. dear developer please update database!`\r\n    );\r\n  return unit?.displayName;\r\n}\r\nconst eveUnit = [\r\n  { unitID: 1, displayName: \"m\" },\r\n  { unitID: 2, displayName: \"kg\" },\r\n  { unitID: 3, displayName: \"sec\" },\r\n  { unitID: 4, displayName: \"A\" },\r\n  { unitID: 5, displayName: \"K\" },\r\n  { unitID: 6, displayName: \"mol\" },\r\n  { unitID: 7, displayName: \"cd\" },\r\n  { unitID: 8, displayName: \"m2\" },\r\n  { unitID: 9, displayName: \"m3\" },\r\n  { unitID: 10, displayName: \"m/sec\" },\r\n  { unitID: 11, displayName: \"m/sec\" },\r\n  { unitID: 12, displayName: \"m-1\" },\r\n  { unitID: 13, displayName: \"kg/m3\" },\r\n  { unitID: 14, displayName: \"m3/kg\" },\r\n  { unitID: 15, displayName: \"A/m2\" },\r\n  { unitID: 16, displayName: \"A/m\" },\r\n  { unitID: 17, displayName: \"mol/m3\" },\r\n  { unitID: 18, displayName: \"cd/m2\" },\r\n  { unitID: 19, displayName: \"kg/kg = 1\" },\r\n  { unitID: 101, displayName: \"s\" },\r\n  { unitID: 102, displayName: \"mm\" },\r\n  { unitID: 103, displayName: \"MegaPascals\" },\r\n  { unitID: 104, displayName: \"x\" },\r\n  { unitID: 105, displayName: \"%\" },\r\n  { unitID: 106, displayName: \"tf\" },\r\n  { unitID: 107, displayName: \"MW\" },\r\n  { unitID: 108, displayName: \"%\" },\r\n  { unitID: 109, displayName: \"%\" },\r\n  { unitID: 111, displayName: \"%\" },\r\n  { unitID: 112, displayName: \"rad/sec\" },\r\n  { unitID: 113, displayName: \"HP\" },\r\n  { unitID: 114, displayName: \"GJ\" },\r\n  { unitID: 115, displayName: \"groupID\" },\r\n  { unitID: 116, displayName: \"typeID\" },\r\n  { unitID: 117, displayName: \"Sizeclass\" },\r\n  { unitID: 118, displayName: \"Ore units\" },\r\n  { unitID: 119, displayName: \"attributeID\" },\r\n  { unitID: 120, displayName: \"points\" },\r\n  { unitID: 121, displayName: \"%\" },\r\n  { unitID: 122, displayName: \"Fitting slots\" },\r\n  { unitID: 123, displayName: \"sec\" },\r\n  { unitID: 124, displayName: \"%\" },\r\n  { unitID: 125, displayName: \"N\" },\r\n  { unitID: 126, displayName: \"ly\" },\r\n  { unitID: 127, displayName: \"%\" },\r\n  { unitID: 128, displayName: \"Mbit/sec\" },\r\n  { unitID: 129, displayName: \"Hours\" },\r\n  { unitID: 133, displayName: \"ISK\" },\r\n  { unitID: 134, displayName: \"m3/hour\" },\r\n  { unitID: 135, displayName: \"AU\" },\r\n  { unitID: 136, displayName: \"Slot\" },\r\n  { unitID: 137, displayName: \"Boolean\" },\r\n  { unitID: 138, displayName: \"units\" },\r\n  { unitID: 139, displayName: \"+\" },\r\n  { unitID: 140, displayName: \"Level\" },\r\n  { unitID: 141, displayName: \"hardpoints\" },\r\n  { unitID: 142, displayName: \"1=Male 2=Unisex 3=Female\" },\r\n  { unitID: 143, displayName: \"Datetime\" },\r\n];\r\n","import React from \"react\";\r\nimport { Typography, TextField, InputAdornment } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport StatTextField from \"./StatTextField\";\r\n\r\nexport default function Stat(props) {\r\n  const [type, setType] = useState(false);\r\n  const [attributesCategories, setAttributesCategories] = useState(false);\r\n\r\n  const [typeName, setTypeName] = useState(false);\r\n  const [builtList, setList] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/attributesCategories\").then((data) => {\r\n      setAttributesCategories(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setType(props.type);\r\n  }, [props.type]);\r\n\r\n  useEffect(() => {\r\n    if (!!type && !!attributesCategories) {\r\n      setTypeName(type.typeName);\r\n      setList(createStatList(type, attributesCategories));\r\n    }\r\n  }, [attributesCategories, type]);\r\n  return (\r\n    <React.Fragment>\r\n      <Typography\r\n        style={{\r\n          fontSize: 26,\r\n          fontWeight: 1000,\r\n          letterSpacing: -1.5,\r\n          lineHeight: 1,\r\n          marginRight: 20,\r\n          textDecoration: \"underline\",\r\n        }}\r\n        variant=\"h4\"\r\n        align=\"right\"\r\n      >\r\n        {typeName}\r\n      </Typography>\r\n      <div style={{ marginTop: 20 }}>{builtList}</div>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction createStatList(item, attributesCategories) {\r\n  const etc = [\"Miscellaneous\", \"Required Skills\", \"Graphics\", \"NULL\"];\r\n  const dividedAttributes = filterAttributes(item, attributesCategories).reduce(\r\n    (acc, filtered) => {\r\n      if (etc.includes(filtered.name))\r\n        acc.etc[etc.indexOf(filtered.name)] = filtered;\r\n      else acc.main.push(filtered);\r\n      return acc;\r\n    },\r\n    { main: [], etc: new Array(etc.length).fill(undefined) }\r\n  );\r\n\r\n  return [...dividedAttributes.main, ...dividedAttributes.etc].map(\r\n    (filtered) => {\r\n      if (!filtered || !filtered.name || filtered.attributes.length === 0)\r\n        return undefined;\r\n\r\n      const attrs = filtered.attributes;\r\n      const name = filtered.name;\r\n      const nameSpace = [];\r\n\r\n      return (\r\n        <React.Fragment key={name}>\r\n          <Typography\r\n            style={{\r\n              fontSize: 20,\r\n              fontWeight: 1000,\r\n              letterSpacing: -1.5,\r\n              lineHeight: 1,\r\n              marginRight: 20,\r\n              marginTop: 20,\r\n            }}\r\n            variant=\"h4\"\r\n            align=\"right\"\r\n          >\r\n            {name}\r\n          </Typography>\r\n          {attrs.map((attr) => {\r\n            const key = `${attr.attributeName}:${attr.value}`;\r\n            if (!nameSpace.includes(key)) {\r\n              nameSpace.push(key);\r\n              return <StatTextField key={key} attr={attr} />;\r\n            }\r\n          })}\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  );\r\n}\r\nfunction filterAttributes(type, attributesCategories) {\r\n  if (!type || !type.typeAttributesStats) return undefined;\r\n  const typeAttributesStats = type.typeAttributesStats;\r\n\r\n  const filteredAttributes = new Array(50)\r\n    .fill(undefined)\r\n    .map((attr, index) => ({\r\n      name: attributesCategories[index]?.name,\r\n      attributes: [],\r\n    }));\r\n\r\n  typeAttributesStats.forEach((attr) => {\r\n    if (!attr.attributeCategoryID) filteredAttributes[0].attributes.push(attr);\r\n    else filteredAttributes[attr.attributeCategoryID].attributes.push(attr);\r\n  });\r\n\r\n  return filteredAttributes;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Drawer,\r\n  makeStyles,\r\n  Button,\r\n  ButtonGroup,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport { useState } from \"react\";\r\nimport Stat from \"./Stat\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    maxWidth: \"80%\",\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"scroll\",\r\n    padding: \"10px 20px 0px 10px\",\r\n    marginBottom: 40,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n    borderRadius: 0,\r\n  },\r\n  rootButton: {\r\n    paddingRight: 20,\r\n  },\r\n}));\r\n\r\nexport default function StatDrawer(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [tabIndex, setTabIndex] = useState(0);\r\n\r\n  const styleButton = useCallback(\r\n    (index) => {\r\n      let backgroundColor = theme.palette.action.hover;\r\n      let color = theme.palette.text.disabled;\r\n\r\n      if (tabIndex === index) {\r\n        backgroundColor = theme.palette.action.selected;\r\n        color = theme.palette.text.primary;\r\n      }\r\n      return {\r\n        backgroundColor: backgroundColor,\r\n        color: color,\r\n        marginBottom: 10,\r\n      };\r\n    },\r\n    [tabIndex]\r\n  );\r\n\r\n  return (\r\n    <Drawer\r\n      anchor={!!props.anchor ? props.anchor : \"right\"}\r\n      open={props.open}\r\n      variant=\"temporary\"\r\n      classes={{ paper: classes.rootPaper }}\r\n      onClose={() => {\r\n        props.dispatchSlotsOpen({\r\n          type: \"STAT\",\r\n          payload: {\r\n            open: false,\r\n          },\r\n        });\r\n        setTabIndex(0);\r\n      }}\r\n    >\r\n      <div className={classes.child}>\r\n        {props.slot?.charge && (\r\n          <ButtonGroup fullWidth variant=\"text\">\r\n            <Button style={styleButton(0)} onClick={() => setTabIndex(0)}>\r\n              ITEM\r\n            </Button>\r\n            <Button style={styleButton(1)} onClick={() => setTabIndex(1)}>\r\n              CHARGE\r\n            </Button>\r\n          </ButtonGroup>\r\n        )}\r\n        <div hidden={tabIndex !== 0}>\r\n          <Stat\r\n            type={\r\n              props.slot?.typeID !== undefined ? props.slot : props.slot?.item\r\n            }\r\n            cache={props.cache}\r\n          />\r\n        </div>\r\n        <div hidden={tabIndex !== 1}>\r\n          <Stat type={props.slot?.charge} cache={props.cache} />\r\n        </div>\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={() => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        <LastPageIcon />\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport clsx from \"clsx\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\nimport { ListItemAvatar, Avatar } from \"@material-ui/core\";\r\nimport { storage } from \"../../../index\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    paddingLeft: theme.spacing(1),\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function NestedList(props) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = React.useState(props.opened);\r\n  const [image, setImage] = React.useState(\"\");\r\n\r\n  const handleClick = () => {\r\n    setOpen(!open);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (props.opened === true) setOpen(true);\r\n\r\n    return () => {\r\n      setOpen(false);\r\n    };\r\n  }, [props.opened]);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    if (props.itemData.iconTypeID === 3584)\r\n      // description: Severed head (soaked in formaldehyde) - Unknown\r\n      props.cache\r\n        .get(`/icons/${props.itemData.iconFileName}`, () => {\r\n          return storage\r\n            .ref(`eveIcons/${props.itemData.iconFileName}`)\r\n            .getDownloadURL()\r\n            .then(async (url) => {\r\n              return await fetch(url)\r\n                .then((data) => data.arrayBuffer())\r\n                .then((arrayBuffer) => convertArrayBufferToBase64(arrayBuffer));\r\n            });\r\n        })\r\n        .then((data) => !!isMounted && setImage(data));\r\n    else setImage(feedSource(props.itemData));\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [props.cache, props.itemData]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <ListItem button onClick={handleClick}>\r\n        <ListItemAvatar>\r\n          <Avatar style={{ width: 30, height: 30 }} src={image}>\r\n            ?\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={props.itemData.marketGroupName}\r\n          primaryTypographyProps={{ variant: \"subtitle2\" }}\r\n        />\r\n        <IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: open,\r\n          })}\r\n          onClick={handleClick}\r\n        >\r\n          <ExpandMoreIcon />\r\n        </IconButton>\r\n      </ListItem>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <List className={classes.nested}>{props.children}</List>\r\n      </Collapse>\r\n    </List>\r\n  );\r\n}\r\nfunction feedSource(itemData) {\r\n  return `https://images.evetech.net/types/${itemData?.iconTypeID}/icon?size=32`;\r\n}\r\nfunction convertArrayBufferToBase64(arrayBuffer) {\r\n  const base64Flag = \"data:image/jpeg;base64,\";\r\n\r\n  let binary = \"\";\r\n  const bytes = [].slice.call(new Uint8Array(arrayBuffer));\r\n  bytes.forEach((b) => (binary += String.fromCharCode(b)));\r\n  return base64Flag + window.btoa(binary);\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  ListItemText,\r\n  Avatar,\r\n  makeStyles,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n  root: {\r\n    padding: \"8px 16px 8px 16px\",\r\n    backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n  },\r\n  rootAvatar: {\r\n    width: 10,\r\n    height: 10,\r\n    marginRight: 10,\r\n  },\r\n}));\r\n\r\nexport default function ItemSelection(props) {\r\n  const classes = useStyle();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <ListItem\r\n      className={classes.root}\r\n      key={props.itemData.typeName}\r\n      button\r\n      onClick={handleItemClick(props)}\r\n    >\r\n      <Avatar\r\n        style={{\r\n          backgroundColor: getTechColor(props.itemData, theme),\r\n        }}\r\n        className={classes.rootAvatar}\r\n      >\r\n        {\"\" /* Necessary! */}\r\n      </Avatar>\r\n\r\n      <ListItemText\r\n        primary={props.itemData.typeName}\r\n        primaryTypographyProps={{ variant: \"caption\" }}\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\nconst handleItemClick = (props) => () => {\r\n  props.setItem && props.setItem(props.itemData);\r\n  props.outboundSetItem && props.outboundSetItem(props.itemData);\r\n};\r\n\r\nfunction getTechColor(item, theme) {\r\n  if (!item) return undefined;\r\n\r\n  const typeMetaGroupID = item.typeMetaGroupID;\r\n  switch (typeMetaGroupID) {\r\n    //tech1\r\n    case 1:\r\n      return theme.palette.action.hover;\r\n    //tech2\r\n    case 2:\r\n      return \"#f59500\";\r\n    //story\r\n    case 3:\r\n      return \"#78bf36\";\r\n    //faction\r\n    case 4:\r\n      return \"#086101\";\r\n    //officer\r\n    case 5:\r\n      return \"#340E73\";\r\n    //dead\r\n    case 6:\r\n      return \"#3660bf\";\r\n    //tech3\r\n    case 14:\r\n      return \"#9F3A03\";\r\n    //abyssal\r\n    case 15:\r\n      return \"#ad0000\";\r\n    default:\r\n      return theme.palette.action.hover;\r\n  }\r\n}\r\n","export default function headFilterInvTypesTable(props) {\r\n  if (!props.table.invTypesTable) return undefined;\r\n\r\n  const allowedAttributes = props.filter.allowedAttributes;\r\n\r\n  if (allowedAttributes.constructor === Array) {\r\n    let invTypesTable = props.table.invTypesTable;\r\n\r\n    allowedAttributes.forEach((entry) => {\r\n      invTypesTable = bodyFilterInvTypesTable(entry, invTypesTable);\r\n    });\r\n\r\n    return invTypesTable;\r\n  }\r\n\r\n  return props.table.invTypesTable;\r\n}\r\n\r\nfunction bodyFilterInvTypesTable(allowedAttribute, invTypesTable) {\r\n  if (!allowedAttribute.attributeName) return invTypesTable;\r\n\r\n  return invTypesTable.filter((entry) => {\r\n    switch (allowedAttribute?.value?.constructor) {\r\n      case Boolean:\r\n      case Number:\r\n        return entry[allowedAttribute.attributeName] === allowedAttribute.value;\r\n      case Array:\r\n        return allowedAttribute.value.includes(\r\n          entry[allowedAttribute.attributeName]\r\n        );\r\n      case String:\r\n        return entry[allowedAttribute.attributeName]\r\n          .toLowerCase()\r\n          .includes(allowedAttribute.value.toLowerCase());\r\n      default:\r\n        return true;\r\n    }\r\n  });\r\n}\r\n","import React from \"react\";\r\nimport NestedList from \"../../components/simpleEdition/shipCardComponents/NestedListDedicated\";\r\nimport ItemSelection from \"../../components/itemSelection/ItemSelection\";\r\nimport isTerminalGroup from \"./isTerminalGroup\";\r\nimport findChildrenMarketGroup from \"./findChildrenMarketGroup\";\r\nimport findChildrenInvTypes from \"./findChildrenInvTypes\";\r\nimport isArrayEmpty from \"./isArrayEmpty\";\r\nimport filterInvTypesTable from \"./filterInvTypesTable\";\r\n\r\n// Judge creating multuple list or not by rootMaeketGroupID's condition\r\nexport default function headCreateEveList(props) {\r\n  if (!props.rootMarketGroupID) return;\r\n\r\n  props.table.invTypesTable = filterInvTypesTable(props);\r\n  if (props.table.invTypesTable.length > 50) props.opened = false;\r\n\r\n  if (props.rootMarketGroupID.constructor === Number) {\r\n    return bodyCreateEveList(props);\r\n  }\r\n  if (props.rootMarketGroupID.constructor === Array) {\r\n    return props.rootMarketGroupID.map((entry) => {\r\n      return bodyCreateEveList({\r\n        ...props,\r\n        rootMarketGroupID: entry,\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction bodyCreateEveList(props) {\r\n  if (!validateTables(props)) return false;\r\n\r\n  if (isTerminalGroup(props)) {\r\n    return renderChildrenInvTypes(props);\r\n  } else {\r\n    return renderChildrenMarketGroup(props);\r\n  }\r\n}\r\n\r\nfunction renderChildrenInvTypes(props) {\r\n  const childrenInvTypes = findChildrenInvTypes(props);\r\n  return childrenInvTypes.map((entry) => {\r\n    return (\r\n      <ItemSelection\r\n        setItem={props.state.setItem}\r\n        outboundSetItem={props.state.outboundSetItem}\r\n        key={entry.typeName}\r\n        itemData={entry}\r\n      />\r\n    );\r\n  });\r\n}\r\nfunction renderChildrenMarketGroup(props) {\r\n  const childrenMarketGroup = findChildrenMarketGroup(props);\r\n  return childrenMarketGroup.map((entry) => {\r\n    const renderedChildrenMarketGroups = bodyCreateEveList({\r\n      ...props,\r\n      rootMarketGroupID: entry.marketGroupID,\r\n    });\r\n\r\n    if (!isArrayEmpty(renderedChildrenMarketGroups)) return undefined;\r\n    else\r\n      return (\r\n        <NestedList\r\n          opened={!!props.opened}\r\n          key={entry.marketGroupName}\r\n          itemData={entry}\r\n          eveListConfig={props}\r\n          cache={props.cache}\r\n        >\r\n          {renderedChildrenMarketGroups}\r\n        </NestedList>\r\n      );\r\n  });\r\n}\r\n\r\nfunction validateTables(props) {\r\n  if (!!props.table.marketGroupTable && !!props.table.invTypesTable) {\r\n    return true;\r\n  } else return false;\r\n}\r\n\r\nexport const defalutEveListConfigStructure = {\r\n  opened: false,\r\n  rootMarketGroupID: 2,\r\n  table: {\r\n    marketGroupTable: false,\r\n    invTypesTable: false,\r\n  },\r\n  filter: {\r\n    allowedAttributes: [\r\n      {\r\n        attributeName: false,\r\n        value: false,\r\n      },\r\n    ],\r\n  },\r\n  state: {\r\n    item: false,\r\n    setItem: false,\r\n    outboundSetItem: false,\r\n  },\r\n};\r\n","export default function isTerminalGroup(props) {\r\n  if (!props.table.marketGroupTable || props.rootMarketGroupID === undefined)\r\n    return undefined;\r\n  const marketCategory = props.table.marketGroupTable.find(\r\n    (entry) => entry.marketGroupID === props.rootMarketGroupID\r\n  );\r\n  return marketCategory.hasTypes;\r\n}\r\n","export default function findChildrenInvTypes(props) {\r\n  if (!props.table.invTypesTable) return [];\r\n\r\n  const invTypesTable = props.table.invTypesTable;\r\n  const marketGroupID = props.rootMarketGroupID;\r\n\r\n  const reultTEST = bubbleSortByMetaLevel(\r\n    invTypesTable.filter((entry) => entry.marketGroupID === marketGroupID)\r\n  );\r\n\r\n  return reultTEST;\r\n}\r\nfunction bubbleSortByMetaLevel(childrenTypeIDs) {\r\n  let len = childrenTypeIDs.length;\r\n\r\n  let swapped;\r\n  do {\r\n    swapped = false;\r\n    for (let i = 0; i < len - 1; i++) {\r\n      if (\r\n        childrenTypeIDs[i].typeMetaGroupID >\r\n        childrenTypeIDs[i + 1].typeMetaGroupID\r\n      ) {\r\n        let tmp = childrenTypeIDs[i];\r\n        childrenTypeIDs[i] = childrenTypeIDs[i + 1];\r\n        childrenTypeIDs[i + 1] = tmp;\r\n        swapped = true;\r\n      }\r\n    }\r\n  } while (swapped);\r\n  return childrenTypeIDs;\r\n}\r\n","export default function findChildrenMarketGroup(props) {\r\n  if (!props.table.marketGroupTable) return [];\r\n\r\n  return props.table.marketGroupTable.filter((entry) => {\r\n    return entry.parentGroupID === props.rootMarketGroupID;\r\n  });\r\n}\r\n","export default function isArrayEmpty(renderedChildrenMarketGroup) {\r\n  if (renderedChildrenMarketGroup.length === 0) return false;\r\n\r\n  for (let entry of renderedChildrenMarketGroup) {\r\n    if (entry !== undefined) return true;\r\n  }\r\n  return false;\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport createEveList from \"../../services/eveListConstruction/createEveList\";\r\nimport { defalutEveListConfigStructure } from \"../../services/eveListConstruction/createEveList\";\r\nimport { database } from \"../../index\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    minWidth: 350,\r\n    height: \"100%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    paddingTop: 0,\r\n  },\r\n}));\r\n\r\nexport default React.memo(function ItemSelectionListCache(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n\r\n  const [marketGroupTable, setMarketGroupTable] = useState(false);\r\n  const [invTypesTable, setInvTypesTable] = useState(false);\r\n\r\n  const [builtListStructure, setBuiltListStructure] = useState(undefined);\r\n  const [eveListConfig] = useState({\r\n    ...defalutEveListConfigStructure,\r\n    ...props.eveListConfig,\r\n    state: {\r\n      item: item,\r\n      setItem: setItem,\r\n      outboundSetItem: props.eveListConfig.state.outboundSetItem,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/marketCategories\").then((data) => {\r\n      setMarketGroupTable(data);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    props.cache.wait(\"/typeIDsTable\").then((data) => setInvTypesTable(data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item?.typeID) {\r\n      props.cache\r\n        .get(`typeID/${item.typeID}`, () => {\r\n          return database\r\n            .ref(`/typeIDs/${item.typeID}`)\r\n            .once(\"value\")\r\n            .then((data) => data.val());\r\n        })\r\n        .then((data) => {\r\n          setItem(data);\r\n          return;\r\n        });\r\n    }\r\n  }, [item?.typeID]);\r\n\r\n  useEffect(() => {\r\n    const evelistConfigUpToDate = {\r\n      ...eveListConfig,\r\n      rootMarketGroupID: props.eveListConfig.rootMarketGroupID,\r\n      filter: props.eveListConfig.filter,\r\n      table: {\r\n        marketGroupTable: marketGroupTable,\r\n        invTypesTable: invTypesTable,\r\n      },\r\n      cache: props.cache,\r\n    };\r\n\r\n    if (!!marketGroupTable && !!invTypesTable) {\r\n      if (!props.nosave)\r\n        props.cache\r\n          .get(\r\n            //prettier-ignore\r\n            `eveListConfig:${JSON.stringify(props.eveListConfig)}}`,\r\n            () => {\r\n              return new Promise((resolve) => {\r\n                resolve(createEveList(evelistConfigUpToDate));\r\n              });\r\n            }\r\n          )\r\n          .then((data) => {\r\n            setBuiltListStructure(data);\r\n          });\r\n      else setBuiltListStructure(createEveList(evelistConfigUpToDate));\r\n    }\r\n  }, [marketGroupTable, invTypesTable, hashFilter(props.eveListConfig)]);\r\n\r\n  return (\r\n    <List className={classes.root} dense>\r\n      <Collapse in timeout=\"auto\">\r\n        {builtListStructure}\r\n      </Collapse>\r\n    </List>\r\n  );\r\n});\r\nfunction hashFilter(eveListConfig) {\r\n  const rootMarketGroupID = eveListConfig.rootMarketGroupID;\r\n  const allowedAttributes = eveListConfig.filter.allowedAttributes;\r\n\r\n  return allowedAttributes\r\n    .map((attr) => [attr.attributeName, attr.value].join(\"-\"))\r\n    .join(\"|\")\r\n    .concat(rootMarketGroupID);\r\n}\r\n","import React from \"react\";\r\nimport { Grid, makeStyles, Tooltip, useTheme } from \"@material-ui/core\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InfoIcon from \"@material-ui/icons/Info\";\r\nimport RecButton from \"../RecButton\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport ExposurePlus1Icon from \"@material-ui/icons/ExposurePlus1\";\r\nimport SetStateMenu from \"./SetStateMenu\";\r\nimport SyncIcon from \"@material-ui/icons/Sync\";\r\nimport SyncDisabledIcon from \"@material-ui/icons/SyncDisabled\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  deleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.red,\r\n    color: theme.palette.button.color,\r\n  },\r\n  ammoDeleteButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.orange,\r\n    color: theme.palette.button.color,\r\n  },\r\n  showInfoButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.blue,\r\n    color: theme.palette.button.color,\r\n  },\r\n  addButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    backgroundColor: theme.palette.property.green,\r\n    color: theme.palette.button.color,\r\n  },\r\n  loopOrNotButton: {\r\n    width: \"100%\",\r\n    minWidth: 20,\r\n    color: theme.palette.button.color,\r\n  },\r\n}));\r\n\r\nconst DeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.deleteButton}\r\n          onClick={() => props.setItem(\"DEL\")}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <CloseIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AmmoDeleteButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Delete ammo\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.ammoDeleteButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({ type: \"AMMO\", payload: \"DEL\" });\r\n          }}\r\n          disabled={!props.activeCharge?.typeID}\r\n        >\r\n          <HighlightOffIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst ShowInfoButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Information\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.showInfoButton}\r\n          onClick={() => {\r\n            props.dispatchSlotsOpen({\r\n              type: \"STAT\",\r\n              payload: {\r\n                open: true,\r\n                slotVariant: props.activeSlot.type,\r\n                slotNumber: props.activeSlot.index,\r\n              },\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <InfoIcon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst AddButton = function (props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Tooltip title=\"Add drone\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.addButton}\r\n          onClick={() => {\r\n            props.dispatchListItems({\r\n              type: \"DRONE_SLOT\",\r\n              payload: \"ADD\",\r\n            });\r\n          }}\r\n          disabled={!props.activeItem?.typeID}\r\n        >\r\n          <ExposurePlus1Icon />\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\nconst LoopOrNotButton = function (props) {\r\n  const [isLoop, setIsLoop] = useState(true);\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    if (props.liftedIsLoop !== isLoop) setIsLoop(props.liftedIsLoop);\r\n  }, [props.liftedIsLoop]);\r\n\r\n  return (\r\n    <Tooltip title=\"Loop through slots\" placement=\"bottom\" arrow>\r\n      <div>\r\n        <RecButton\r\n          className={classes.loopOrNotButton}\r\n          style={{\r\n            backgroundColor: isLoop\r\n              ? theme.palette.property.green\r\n              : theme.palette.property.red,\r\n          }}\r\n          onClick={() => {\r\n            props.setItem(\"LOOPLOOP\");\r\n            props.setLiftedIsLoop(!isLoop);\r\n            setIsLoop(!isLoop);\r\n          }}\r\n        >\r\n          {isLoop ? <SyncIcon /> : <SyncDisabledIcon />}\r\n        </RecButton>\r\n      </div>\r\n    </Tooltip>\r\n  );\r\n};\r\n\r\nexport default function ListDrawerButtons(props) {\r\n  return (\r\n    <Grid container>\r\n      <Grid item xs={2}>\r\n        <DeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <AmmoDeleteButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <ShowInfoButton {...props} />\r\n      </Grid>\r\n      <Grid item xs={2}>\r\n        <SetStateMenu {...props} />\r\n      </Grid>\r\n      {props.variant === \"DRONE_SLOT\" ? (\r\n        <Grid item xs={2}>\r\n          <AddButton {...props} />\r\n        </Grid>\r\n      ) : (\r\n        <Grid item xs={2}></Grid>\r\n      )}\r\n\r\n      <Grid item xs={2}>\r\n        <LoopOrNotButton {...props} />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  TextField,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  textField: {\r\n    margin: \"3px 12px 0px 16px\",\r\n  },\r\n  textFieldInputLabel: {\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  textFieldinputLabel: {\r\n    fontWeight: 700,\r\n    padding: \"3px 0px 3px 1px\",\r\n    height: 26,\r\n  },\r\n  popperVisible: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })}`,\r\n  },\r\n  popperHidden: {\r\n    transition: `${theme.transitions.create([\"opacity\"], {\r\n      duration: 150,\r\n    })},${theme.transitions.create([\"z-index\"], {\r\n      duration: 300,\r\n    })}`,\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    maxHeight: 600,\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n}));\r\n\r\nconst SearchTextField = withStyles({\r\n  root: {\r\n    \"& input:valid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:invalid + fieldset\": {\r\n      borderWidth: 2,\r\n    },\r\n    \"& input:valid:focus + fieldset\": {\r\n      borderLeftWidth: 6,\r\n      padding: \"4px !important\", // override inline-style\r\n    },\r\n    width: \"90%\",\r\n  },\r\n})(TextField);\r\n\r\nexport default function ListDrawerSearchbar(props) {\r\n  const classes = useStyles();\r\n  const anchorEl = useRef(null);\r\n\r\n  const [searchOpen, setSearchOpen] = useState(false);\r\n  const [searchVisible, setSearchVisible] = useState(false);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n\r\n  const handleSearchTextChange = useCallback((e) => {\r\n    setSearchText(e.target.value);\r\n    if (!!e.target.value) {\r\n      setSearchOpen(true);\r\n      setSearchVisible(true);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setSearchVisible(false);\r\n      }}\r\n    >\r\n      <div>\r\n        <SearchTextField\r\n          ref={anchorEl}\r\n          className={classes.textField}\r\n          InputLabelProps={{\r\n            className: classes.textFieldInputLabel,\r\n          }}\r\n          inputProps={{\r\n            className: classes.textFieldinputLabel,\r\n          }}\r\n          label=\"Search\"\r\n          onChange={handleSearchTextChange}\r\n          onFocus={handleSearchTextChange}\r\n        />\r\n\r\n        <Popper\r\n          style={{\r\n            opacity: searchVisible ? 1 : 0,\r\n            zIndex: searchVisible ? 2000 : -1000,\r\n          }}\r\n          className={\r\n            searchVisible ? classes.popperVisible : classes.popperHidden\r\n          }\r\n          open={searchOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom-start\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <ItemSelectionListCache\r\n                eveListConfig={mutateEveListConfig(\r\n                  props.eveListConfig,\r\n                  searchText\r\n                )}\r\n                cache={props.cache}\r\n                nosave\r\n              />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\nfunction mutateEveListConfig(eveListConfig, searchText) {\r\n  if (!searchText) return eveListConfig;\r\n\r\n  const mutatedAllowedAttributes = [...eveListConfig.filter.allowedAttributes];\r\n  mutatedAllowedAttributes.push({\r\n    attributeName: \"typeName\",\r\n    value: searchText,\r\n  });\r\n\r\n  return {\r\n    ...eveListConfig,\r\n    opened: true,\r\n    filter: {\r\n      allowedAttributes: mutatedAllowedAttributes,\r\n    },\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Drawer, Button, makeStyles } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport ItemSelectionListCache from \"../../itemSelection/ItemSelectionListCache\";\r\nimport { useEffect } from \"react\";\r\nimport LastPageIcon from \"@material-ui/icons/LastPage\";\r\nimport FirstPageIcon from \"@material-ui/icons/FirstPage\";\r\nimport ListDrawerButtons from \"./ListDrawerButtons\";\r\nimport { useCallback } from \"react\";\r\nimport ListDrawerSearchbar from \"./ListDrawerSearchbar\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPaper: {\r\n    width: 300,\r\n    height: \"100%\",\r\n    overflow: \"hidden\",\r\n  },\r\n  child: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    overflowY: \"auto\",\r\n    paddingRight: 20,\r\n    overflowX: \"hidden\",\r\n  },\r\n  retractButton: {\r\n    position: \"absolute\",\r\n    bottom: 0,\r\n    right: 0,\r\n    backgroundColor: theme.palette.action.opaqueHover,\r\n    borderRadius: 0,\r\n    \"&:hover\": {\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function ListDrawer(props) {\r\n  const classes = useStyles();\r\n\r\n  const [item, setItem] = useState(false);\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const getEveListConfig = useCallback(() => {\r\n    return {\r\n      rootMarketGroupID: getRootMarketGroupID(props.slots, props.variant),\r\n      state: {\r\n        outboundSetItem: setItem,\r\n      },\r\n      filter: {\r\n        allowedAttributes: [\r\n          ...allowedAttributes(props.variant),\r\n          ...props.filter,\r\n        ],\r\n      },\r\n      tag: props.tag,\r\n    };\r\n  }, [\r\n    props.variant,\r\n    getFilterID(props.filter),\r\n    getRootMarketGroupID(props.slots, props.variant),\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!!item) {\r\n      props.dispatchListItems({ type: props.variant, payload: item });\r\n      setItem(false);\r\n    }\r\n  }, [item]);\r\n\r\n  return (\r\n    <Drawer\r\n      classes={{ paper: classes.rootPaper }}\r\n      PaperProps={{\r\n        style: {\r\n          marginLeft: props.expand === true ? 300 : 60,\r\n        },\r\n      }}\r\n      anchor={width < 1000 ? \"right\" : \"left\"}\r\n      open={props.open}\r\n      variant=\"persistent\"\r\n    >\r\n      <ListDrawerButtons setItem={setItem} {...props} />\r\n      <ListDrawerSearchbar\r\n        eveListConfig={getEveListConfig()}\r\n        cache={props.cache}\r\n      />\r\n      <div className={classes.child}>\r\n        <ItemSelectionListCache\r\n          eveListConfig={getEveListConfig()}\r\n          cache={props.cache}\r\n        />\r\n      </div>\r\n      <Button\r\n        className={classes.retractButton}\r\n        onClick={(e) => props.dispatchSlotsOpen({ type: \"RESET\" })}\r\n      >\r\n        {width < 1000 ? <LastPageIcon /> : <FirstPageIcon />}\r\n      </Button>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nfunction getRootMarketGroupID(slots, variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return 4;\r\n    case \"MISC_SLOT\":\r\n      return getMiscSlotMarketGroupID(slots);\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return 9;\r\n    case \"RIG_SLOT\":\r\n      return 1111;\r\n    case \"AMMO\":\r\n      return 11;\r\n    case \"DRONE_SLOT\":\r\n      return 157;\r\n  }\r\n}\r\nfunction allowedAttributes(variant) {\r\n  switch (variant) {\r\n    case \"HIGH_SLOT\":\r\n      return [{ attributeName: \"typeIsHiPower\", value: true }];\r\n    case \"MID_SLOT\":\r\n      return [{ attributeName: \"typeIsMedPower\", value: true }];\r\n    case \"LOW_SLOT\":\r\n      return [{ attributeName: \"typeIsLoPower\", value: true }];\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nfunction getMiscSlotMarketGroupID(slots) {\r\n  switch (slots.ship?.typeID) {\r\n    case 34317: //Confessor\r\n      return 10001;\r\n    case 34828: //Jackdaw\r\n      return 10002;\r\n    case 35683: //Hecate\r\n      return 10003;\r\n    case 34562: //Svipul\r\n      return 10004;\r\n    case 29986: //Legion\r\n      return 1610;\r\n    case 29984: //Tengu\r\n      return 1625;\r\n    case 29988: //Proteus\r\n      return 1627;\r\n    case 29990: //Loki\r\n      return 1626;\r\n    default:\r\n      return 9;\r\n  }\r\n}\r\nfunction getFilterID(filters) {\r\n  return filters\r\n    .map((filter) => `${filter.attributeName}:${filter.value}`)\r\n    .join(\"-\");\r\n}\r\n","import React from \"react\";\r\nimport ListDrawer from \"./ListDrawer\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { translateVariant } from \"../Drawers\";\r\n\r\nexport default React.memo(function ListDrawers(props) {\r\n  const [activeItem, setActiveItem] = useState(false);\r\n  const [activeCharge, setActiveCharge] = useState(false);\r\n\r\n  const [liftedIsLoop, setLiftedIsLoop] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const activeSlot = getActiveSlot(props.fit, props.activeSlot);\r\n    setActiveItem(activeSlot?.item);\r\n    setActiveCharge(activeSlot?.charge);\r\n  }, [props.fitID, props.activeSlot]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {[\r\n        \"SHIP\",\r\n        \"MISC_SLOT\",\r\n        \"HIGH_SLOT\",\r\n        \"MID_SLOT\",\r\n        \"LOW_SLOT\",\r\n        \"RIG_SLOT\",\r\n        \"AMMO\",\r\n        \"DRONE_SLOT\",\r\n      ].map((variant) => {\r\n        return (\r\n          <ListDrawer\r\n            tag={props.tag}\r\n            key={variant}\r\n            variant={variant}\r\n            activeItem={activeItem}\r\n            activeCharge={activeCharge}\r\n            liftedIsLoop={liftedIsLoop}\r\n            setLiftedIsLoop={setLiftedIsLoop}\r\n            expand={props.expand}\r\n            open={props.slotsOpen[variant].open}\r\n            filter={generateFilter(props.slots, props.slotsOpen, variant)}\r\n            {...props}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n});\r\nfunction generateFilter(slots, slotsOpen, variant) {\r\n  switch (variant) {\r\n    case \"AMMO\": {\r\n      const filter = slotsOpen.AMMO.filter;\r\n      if (!filter.group || filter.group.length === 0) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeGroupID\",\r\n          value: filter.group,\r\n        },\r\n        { attributeName: \"typeChargeSize\", value: filter.size },\r\n      ];\r\n    }\r\n    case \"RIG_SLOT\": {\r\n      const filter = slotsOpen.RIG_SLOT.filter;\r\n      if (!filter || !filter.size) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeRigSize\",\r\n          value: filter.size,\r\n        },\r\n      ];\r\n    }\r\n    case \"DRONE_SLOT\": {\r\n      const filter = slotsOpen.DRONE_SLOT.filter;\r\n      if (filter.size === false || filter.size === undefined) return [];\r\n      return [\r\n        {\r\n          attributeName: \"typeDroneSize\",\r\n          value: [...new Array(filter.size + 1).keys()],\r\n        },\r\n      ];\r\n    }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n}\r\nexport function getActiveSlot(fit, activeSlot) {\r\n  if (activeSlot.type === false || activeSlot.index === false)\r\n    return { item: false, charge: false };\r\n  if (activeSlot.type === \"SHIP\") return { item: fit.ship };\r\n\r\n  return fit[translateVariant(activeSlot.type)][activeSlot.index];\r\n}\r\n","import React from \"react\";\r\nimport FittingDrawer from \"./FittingDrawer/FittingDrawer.jsx\";\r\nimport { useState } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Fit from \"../../fitter/src/Fit\";\r\nimport StatDrawer from \"./Stats/StatDrawer.jsx\";\r\nimport EFT from \"./services/EFT.js\";\r\nimport ListDrawers from \"./ListDrawer/ListDrawers.jsx\";\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport worker from \"workerize-loader!../../fitter/src/FitWorker\";\r\nconst fitWorker = worker();\r\n\r\nconst initialSlots = {\r\n  skills: false,\r\n  ship: false,\r\n  miscSlots: [],\r\n  lowSlots: [],\r\n  midSlots: [],\r\n  highSlots: [],\r\n  rigSlots: [],\r\n  droneSlots: [],\r\n};\r\nfunction slotsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SKILL\":\r\n      return {\r\n        ...state,\r\n        skills: action.payload,\r\n      };\r\n    case \"SHIP\":\r\n      return {\r\n        ...state,\r\n        ship:\r\n          //prettier-ignore\r\n          action.payload[0]?.item !== undefined ? action.payload[0].item : false,\r\n      };\r\n    case \"MISC_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...state,\r\n        [translateVariant(action.type)]: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst initialSlotsOpen = {\r\n  SHIP: { open: false },\r\n  MISC_SLOT: { open: false },\r\n  HIGH_SLOT: { open: false },\r\n  MID_SLOT: { open: false },\r\n  LOW_SLOT: { open: false },\r\n  RIG_SLOT: { open: false, filter: false },\r\n  DRONE_SLOT: { open: false, filter: false },\r\n\r\n  AMMO: { open: false, slotVariant: false, filter: false },\r\n  STAT: { open: false, slotVariant: false, slotNumber: false, filter: false },\r\n};\r\n\r\nfunction slotsOpenReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n      return { ...initialSlotsOpen, [action.type]: { open: true } };\r\n    case \"DRONE_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        DRONE_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RIG_SLOT\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        RIG_SLOT: {\r\n          open: true,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"AMMO\":\r\n      return {\r\n        ...initialSlotsOpen,\r\n        AMMO: {\r\n          open: true,\r\n          slotVariant: action.payload.slotVariant,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"STAT\":\r\n      return {\r\n        ...state,\r\n        STAT: {\r\n          open: action.payload.open,\r\n          slotVariant: action.payload.slotVariant,\r\n          slotNumber: action.payload.slotNumber,\r\n          filter: action.payload.filter,\r\n        },\r\n      };\r\n    case \"RESET\":\r\n    default:\r\n      return initialSlotsOpen;\r\n  }\r\n}\r\n\r\nconst initialListItems = {\r\n  SHIP: false,\r\n  MISC_SLOT: false,\r\n  HIGH_SLOT: false,\r\n  MID_SLOT: false,\r\n  LOW_SLOT: false,\r\n  RIG_SLOT: false,\r\n  DRONE_SLOT: false,\r\n  AMMO: false,\r\n};\r\nfunction listItemsReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"SHIP\":\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n    case \"DRONE_SLOT\":\r\n    case \"AMMO\":\r\n      return { ...state, [action.type]: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default function Drawers(props) {\r\n  //prettier-ignore\r\n  const [activeSlot, setActiveSlot] = useState({ type: false, index: false});\r\n\r\n  const [slots, dispatchSlots] = useReducer(slotsReducer, initialSlots);\r\n  const [slotsOpen, dispatchSlotsOpen] = useReducer(\r\n    slotsOpenReducer,\r\n    initialSlotsOpen\r\n  );\r\n  const [listItems, dispatchListItems] = useReducer(\r\n    listItemsReducer,\r\n    initialListItems\r\n  );\r\n\r\n  const [fit, setFit] = useState(false);\r\n  const [exportFitText, setExportFitText] = useState(false);\r\n\r\n  useEffect(() => {\r\n    props.cache\r\n      .wait(\"/skillsStaticBoard\")\r\n      .then((data) => dispatchSlots({ type: \"SKILL\", payload: data }));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (props.open === true) dispatchSlotsOpen({ type: \"SHIP\" });\r\n    else dispatchSlotsOpen({ type: \"RESET\" });\r\n  }, [props.open]);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      /* console.log(\r\n      \"FitCalc\"\r\n    );\r\n    console.time(\"Fit Stat Calculation\"); */\r\n      const appliedFit = await fitWorker.fit(slots);\r\n      /*  console.timeEnd(\"Fit Stat Calculation\");\r\n    console.log(appliedFit);\r\n    console.log(\r\n      ``\r\n    ); */\r\n      setFit(appliedFit);\r\n      props.setFit(appliedFit);\r\n      props.setFitID(EFT.buildCompareTextFromFit(slots));\r\n      props.setSlots(slots);\r\n\r\n      const appliedFitExportText = EFT.buildTextFromFit(appliedFit);\r\n      const appliedSlotsModified = { ...slots, skills: undefined };\r\n      setExportFitText(appliedFitExportText);\r\n      localStorage.setItem(\r\n        `${props.tag}SLOTS`,\r\n        JSON.stringify(appliedSlotsModified)\r\n      );\r\n      localStorage.setItem(`${props.tag}EFT`, appliedFitExportText);\r\n    })();\r\n  }, [EFT.buildCompareTextFromFit(slots)]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ListDrawers\r\n        tag={props.tag}\r\n        expand={props.expand}\r\n        slotsOpen={slotsOpen}\r\n        fit={fit}\r\n        slots={slots}\r\n        activeSlot={activeSlot}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        fitID={props.fitID}\r\n        cache={props.cache}\r\n      />\r\n\r\n      <FittingDrawer\r\n        tag={props.tag}\r\n        fit={fit}\r\n        slots={slots}\r\n        open={props.open}\r\n        setOpen={props.setOpen}\r\n        expand={props.expand}\r\n        setExpand={props.setExpand}\r\n        backgroundColor={props.backgroundColor}\r\n        exportFitText={exportFitText}\r\n        slotsOpen={slotsOpen}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        listItems={listItems}\r\n        dispatchListItems={dispatchListItems}\r\n        dispatchSlots={dispatchSlots}\r\n        setActiveSlot={setActiveSlot}\r\n        cache={props.cache}\r\n      />\r\n      <StatDrawer\r\n        open={slotsOpen.STAT.open}\r\n        dispatchSlotsOpen={dispatchSlotsOpen}\r\n        slot={giveSlotToStatDrawer(fit, slotsOpen.STAT)}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction giveSlotToStatDrawer(fit, STAT) {\r\n  if (!STAT.slotVariant) return undefined;\r\n  switch (STAT.slotVariant) {\r\n    case \"SHIP\":\r\n      return fit.ship;\r\n    case \"MISC_SLOT\":\r\n    case \"HIGH_SLOT\":\r\n    case \"MID_SLOT\":\r\n    case \"LOW_SLOT\":\r\n    case \"RIG_SLOT\":\r\n      return fit[translateVariant(STAT.slotVariant)][STAT.slotNumber];\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\nexport function translateVariant(variant) {\r\n  switch (variant) {\r\n    case \"SHIP\":\r\n      return \"ship\";\r\n    case \"MISC_SLOT\":\r\n      return \"miscSlots\";\r\n    case \"HIGH_SLOT\":\r\n      return \"highSlots\";\r\n    case \"MID_SLOT\":\r\n      return \"midSlots\";\r\n    case \"LOW_SLOT\":\r\n      return \"lowSlots\";\r\n    case \"RIG_SLOT\":\r\n      return \"rigSlots\";\r\n    case \"DRONE_SLOT\":\r\n      return \"droneSlots\";\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const ArmorIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\"m6.86886,11.73771l1.459,-2.65575c0.01641,0.00001 -0.01638,-0.7213 0.24591,-1.14753c0.2623,-0.42623 0.45902,-0.68852 0.88525,-0.7541c0.42623,-0.06557 -1.01639,-1.01639 -0.09836,-1.96721c0.91803,-0.95082 1.90164,-1.31148 3.2459,-0.55738c1.34426,0.7541 2.78686,2.29506 2.83605,2.29507l0.15574,3.29509c-0.41393,2.35245 -0.7377,3.4918 -0.7459,3.49179c0.0164,0.00001 2.11477,1.01641 2.86886,4.32788l-3.55739,-1.44263c0.01641,0.00001 -2.86884,2.19673 -2.88524,2.19672c0.0164,0.00001 -3.65573,-0.42622 -3.67213,-0.42623c0.0164,0.00001 -0.34425,-2.2295 -0.36065,-2.22951c0.0164,0.00001 2.21312,-2.06556 2.19671,-2.06557l-2.57375,-2.36064z\"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const ShieldIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 15.023 17.29 Q 13.407 18.645 12.078 18.723 Q 10.593 18.723 8.925 17.29 Q 7.257 15.857 6.788 14.866 L 6.788 5.277 Q 10.198 6.134 12.078 6.137 Q 13.959 6.14 17.212 5.277 L 17.212 14.866 Q 16.638 15.935 15.023 17.29 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const StructureIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 12.266 19.395 L 8.944 17.478 L 5.623 15.56 L 5.623 11.725 L 5.623 7.89 L 8.944 5.972 L 12.266 4.054 L 15.587 5.972 L 18.908 7.89 L 18.908 11.725 L 18.908 15.56 L 15.587 17.478 L 12.266 19.395 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"6.771\"\r\n      y1=\"8.587\"\r\n      x2=\"17.862\"\r\n      y2=\"14.945\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"17.862\"\r\n      y1=\"8.587\"\r\n      x2=\"6.606\"\r\n      y2=\"15.11\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <line\r\n      x1=\"12.266\"\r\n      y1=\"5.257\"\r\n      x2=\"12.266\"\r\n      y2=\"18.33\"\r\n      strokeWidth=\"1\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const EhpIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 17.856 11.92 L 17.856 11.92 Q 18.168 11.92 18.348 12.208 L 18.348 12.208 L 18.348 12.208 Q 18.528 12.496 18.528 13 L 18.528 13 L 18.528 13 Q 18.528 13.96 18.072 14.488 L 18.072 14.488 L 18.072 14.488 Q 17.184 15.568 15.564 16.48 L 15.564 16.48 L 15.564 16.48 Q 13.944 17.392 12.096 17.392 L 12.096 17.392 L 12.096 17.392 Q 9.576 17.392 8.184 16.024 L 8.184 16.024 L 8.184 16.024 Q 6.792 14.656 6.792 12.28 L 6.792 12.28 L 6.792 12.28 Q 6.792 10.624 7.488 9.196 L 7.488 9.196 L 7.488 9.196 Q 8.184 7.768 9.42 6.928 L 9.42 6.928 L 9.42 6.928 Q 10.656 6.088 12.216 6.088 L 12.216 6.088 L 12.216 6.088 Q 13.608 6.088 14.448 6.916 L 14.448 6.916 L 14.448 6.916 Q 15.288 7.744 15.288 9.16 L 15.288 9.16 L 15.288 9.16 Q 15.288 10.816 14.1 12.004 L 14.1 12.004 L 14.1 12.004 Q 12.912 13.192 10.08 13.888 L 10.08 13.888 L 10.08 13.888 Q 10.68 14.992 12.36 14.992 L 12.36 14.992 L 12.36 14.992 Q 13.44 14.992 14.82 14.236 L 14.82 14.236 L 14.82 14.236 Q 16.2 13.48 17.208 12.256 L 17.208 12.256 L 17.208 12.256 Q 17.496 11.92 17.856 11.92 L 17.856 11.92 L 17.856 11.92 Z  M 11.808 8.44 L 11.808 8.44 Q 10.92 8.44 10.308 9.472 L 10.308 9.472 L 10.308 9.472 Q 9.696 10.504 9.696 11.968 L 9.696 11.968 L 9.696 12.016 L 9.696 12.016 Q 11.112 11.68 11.928 11.008 L 11.928 11.008 L 11.928 11.008 Q 12.744 10.336 12.744 9.448 L 12.744 9.448 L 12.744 9.448 Q 12.744 8.992 12.492 8.716 L 12.492 8.716 L 12.492 8.716 Q 12.24 8.44 11.808 8.44 L 11.808 8.44 L 11.808 8.44 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport {\r\n  LinearProgress,\r\n  Typography,\r\n  Grid,\r\n  withStyles,\r\n  useTheme,\r\n  makeStyles,\r\n} from \"@material-ui/core\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 20,\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n  },\r\n  rootGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n  },\r\n  progress: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  childGrid: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"relative\",\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  label: {\r\n    fontSize: 12,\r\n    color: \"#ffffff\",\r\n  },\r\n  description: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.secondary,\r\n  },\r\n}));\r\n\r\nexport default function LinearProgressLabel(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const LinearProgressFixed = useCallback(\r\n    withStyles(() => ({\r\n      root: {\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        backgroundColor: !!props.backgroundColor\r\n          ? props.backgroundColor\r\n          : theme.palette.background.paper,\r\n      },\r\n      bar: {\r\n        backgroundColor: !!props.color\r\n          ? props.color\r\n          : theme.palette.background.paper,\r\n      },\r\n    }))(LinearProgress),\r\n    [props.backgroundColor, props.color, theme]\r\n  );\r\n\r\n  return (\r\n    <Grid className={classes.root}>\r\n      <Grid className={classes.rootGrid}>\r\n        <LinearProgressFixed\r\n          className={classes.progress}\r\n          variant=\"determinate\"\r\n          value={props.value}\r\n        />\r\n      </Grid>\r\n      <Grid className={classes.childGrid}>\r\n        {props.Icon}\r\n        <Typography className={classes.label} {...props.typographyProps}>\r\n          {props.label}\r\n        </Typography>\r\n        <Typography\r\n          className={classes.description}\r\n          style={{ paddingLeft: !!props.description ? 5 : 0 }}\r\n        >\r\n          {props.description}\r\n        </Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, Grid, ListItem, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\n\r\nexport const ResistanceProgressLabel = React.forwardRef((props, ref) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Grid container>\r\n      <Grid innerRef={ref} item xs={12}>\r\n        <ListItem style={{ width: \"100%\", padding: 0 }} button={!!props.button}>\r\n          <LinearProgressLabel\r\n            value={0}\r\n            label={getLabel(props)}\r\n            description={getDescription(props)}\r\n            backgroundColor={theme.palette.background.paper}\r\n            Icon={props.Icon}\r\n            typographyProps={{\r\n              style: {\r\n                fontSize: 14,\r\n                fontWeight: 700,\r\n                color: theme.palette.text.primary,\r\n              },\r\n            }}\r\n          />\r\n        </ListItem>\r\n      </Grid>\r\n\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EM}\r\n          label={`${props.resistance?.EM.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.blueSecondary}\r\n          color={theme.palette.property.blue}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.TH}\r\n          label={`${props.resistance?.TH.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.redSecondary}\r\n          color={theme.palette.property.red}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.KI}\r\n          label={`${props.resistance?.KI.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.greySecondary}\r\n          color={theme.palette.property.grey}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={3}>\r\n        <LinearProgressLabel\r\n          value={props.resistance?.EX}\r\n          label={`${props.resistance?.EX.toFixed(1)}%`}\r\n          backgroundColor={theme.palette.property.orgSecondary}\r\n          color={theme.palette.property.org}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});\r\nfunction getDescription(props) {\r\n  const ehpFactor = calculateEhpFactor(props.damageType, props.resistance);\r\n  if (ehpFactor === 1 || !ehpFactor) return \"\";\r\n\r\n  if (props.activeBonus === 0)\r\n    return `${(props.resistance?.HP * ehpFactor).toFixed(0)}`;\r\n  return `${(props.resistance?.HP * ehpFactor).toFixed(0)}+${(\r\n    props.activeBonus * ehpFactor\r\n  ).toFixed(1)}/s`;\r\n}\r\nfunction getLabel(props) {\r\n  if (!!props.label) return props.label;\r\n  if (props.activeBonus === 0) return `${(props.resistance?.HP).toFixed(0)}`;\r\n  return `${(props.resistance?.HP).toFixed(0)}+${props.activeBonus.toFixed(\r\n    1\r\n  )}/s`;\r\n}\r\nfunction calculateEhpFactor(damageType, resistance) {\r\n  if (!damageType || !resistance) return 1;\r\n\r\n  return (\r\n    (100 * (damageType.EM + damageType.TH + damageType.KI + damageType.EX)) /\r\n    (damageType.EM * (100 - resistance.EM) +\r\n      damageType.TH * (100 - resistance.TH) +\r\n      damageType.KI * (100 - resistance.KI) +\r\n      damageType.EX * (100 - resistance.EX))\r\n  );\r\n}\r\n","import {\r\n  ClickAwayListener,\r\n  List,\r\n  ListItem,\r\n  makeStyles,\r\n  Paper,\r\n  Popper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { EhpIcon } from \"../../Icons/defenseIcons\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\n\r\nconst scrollbarWidth = (() => {\r\n  // Creating invisible container\r\n  const outer = document.createElement(\"div\");\r\n  outer.style.visibility = \"hidden\";\r\n  outer.style.overflow = \"scroll\"; // forcing scrollbar to appear\r\n  outer.style.msOverflowStyle = \"scrollbar\"; // needed for WinJS apps\r\n  document.body.appendChild(outer);\r\n\r\n  // Creating inner element and placing it in the container\r\n  const inner = document.createElement(\"div\");\r\n  outer.appendChild(inner);\r\n\r\n  // Calculating difference between container's full width and the child width\r\n  const _scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\r\n\r\n  // Removing temporary elements from the DOM\r\n  outer.parentNode.removeChild(outer);\r\n\r\n  return _scrollbarWidth;\r\n})();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n  },\r\n  popperPaper: {\r\n    width: 300,\r\n    overflow: \"hidden\",\r\n  },\r\n  popperChild: {\r\n    width: 300 + scrollbarWidth,\r\n    maxHeight: 400,\r\n    overflowY: \"auto\",\r\n    overflowX: \"hidden\",\r\n    paddingRight: scrollbarWidth,\r\n  },\r\n  listItem: {\r\n    padding: 0,\r\n  },\r\n}));\r\n\r\nfunction DamageTypeList(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <List className={classes.list} component=\"div\">\r\n      {damgeTypes.map((damageType) => {\r\n        return (\r\n          <ListItem\r\n            key={damageType.name}\r\n            className={classes.listItem}\r\n            button\r\n            onClick={() => {\r\n              props.setDamageType({ ...damageType });\r\n            }}\r\n          >\r\n            <ResistanceProgressLabel\r\n              label={damageType.name}\r\n              resistance={damageType}\r\n            />\r\n          </ListItem>\r\n        );\r\n      })}\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default function DamageTypeProgressLabel(props) {\r\n  const theme = useTheme();\r\n  const classes = useStyles();\r\n\r\n  const anchorEl = useRef(null);\r\n\r\n  const [DamageTypeListOpen, setDamageTypeListOpen] = useState(false);\r\n\r\n  return (\r\n    <ClickAwayListener\r\n      onClickAway={() => {\r\n        setDamageTypeListOpen(false);\r\n      }}\r\n    >\r\n      {/* wrraper for ClickAwayListener */}\r\n      <div className={classes.root}>\r\n        <div\r\n          ref={anchorEl}\r\n          onClick={() => {\r\n            setDamageTypeListOpen(!DamageTypeListOpen);\r\n          }}\r\n        >\r\n          <ResistanceProgressLabel\r\n            label={props.damageType.name || \"Omni\"}\r\n            Icon={\r\n              <div style={{ height: 24 }}>\r\n                <EhpIcon color={theme.palette.text.primary} />\r\n              </div>\r\n            }\r\n            resistance={props.damageType}\r\n            button\r\n          />\r\n        </div>\r\n        <Popper\r\n          open={DamageTypeListOpen}\r\n          anchorEl={anchorEl.current}\r\n          placement=\"bottom\"\r\n        >\r\n          <Paper className={classes.popperPaper} elevation={3}>\r\n            <div className={classes.popperChild}>\r\n              <DamageTypeList setDamageType={props.setDamageType} />\r\n            </div>\r\n          </Paper>\r\n        </Popper>\r\n      </div>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nconst damgeTypes = [\r\n  { name: \"Omni\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Amarr\", EM: 60, TH: 40, KI: 0, EX: 0 },\r\n  { name: \"Minmatar\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Caldari\", EM: 25, TH: 25, KI: 25, EX: 25 },\r\n  { name: \"Gallente\", EM: 25, TH: 40, KI: 60, EX: 25 },\r\n  { name: \"Angel Cartel\", EM: 7, TH: 9, KI: 22, EX: 62 },\r\n  { name: \"Blood Raiders\", EM: 50, TH: 48, KI: 1, EX: 1 },\r\n  { name: \"Drones\", EM: 6, TH: 6, KI: 20, EX: 68 },\r\n  { name: \"EoM\", EM: 0, TH: 26, KI: 74, EX: 0 },\r\n  { name: \"Guristas\", EM: 2, TH: 18, KI: 79, EX: 1 },\r\n  { name: \"Mercenaries\", EM: 51, TH: 9, KI: 33, EX: 7 },\r\n  { name: \"Mordu's Region\", EM: 30, TH: 0, KI: 70, EX: 0 },\r\n  { name: \"Sansha\", EM: 53, TH: 47, KI: 0, EX: 0 },\r\n  { name: \"Blood\", EM: 0, TH: 55, KI: 45, EX: 0 },\r\n  { name: \"Electro Magnetic\", EM: 100, TH: 0, KI: 0, EX: 0 },\r\n  { name: \"Thermal\", EM: 0, TH: 100, KI: 0, EX: 0 },\r\n  { name: \"Kinetic\", EM: 0, TH: 0, KI: 100, EX: 0 },\r\n  { name: \"Explosive\", EM: 0, TH: 0, KI: 0, EX: 100 },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  ArmorIcon,\r\n  EhpIcon,\r\n  ShieldIcon,\r\n  StructureIcon,\r\n} from \"../../Icons/defenseIcons.jsx\";\r\nimport { ResistanceProgressLabel } from \"./ResistanceProgressLabel\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport DamageTypeProgressLabel from \"./DamageTypeProgressLabel.jsx\";\r\n\r\n// EM-TH-KI-EX\r\nexport default function Resistance(props) {\r\n  const theme = useTheme();\r\n\r\n  const [damageType, setDamageType] = useState({\r\n    EM: 25,\r\n    TH: 25,\r\n    KI: 25,\r\n    EX: 25,\r\n  });\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <ResistanceProgressLabel\r\n          variant=\"shield\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ShieldIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.shield}\r\n          activeBonus={props.stat.defense.active.shieldBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"armor\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <ArmorIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.armor}\r\n          activeBonus={props.stat.defense.active.armorBonus}\r\n          damageType={damageType}\r\n        />\r\n        <ResistanceProgressLabel\r\n          variant=\"structure\"\r\n          Icon={\r\n            <div style={{ height: 24 }}>\r\n              <StructureIcon color={theme.palette.text.primary} />\r\n            </div>\r\n          }\r\n          resistance={props.stat.defense.resistance.structure}\r\n          activeBonus={props.stat.defense.active.structureBonus}\r\n          damageType={damageType}\r\n        />\r\n        <DamageTypeProgressLabel\r\n          damageType={damageType}\r\n          setDamageType={setDamageType}\r\n        />\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const TurretIcon = (props) => (\r\n  <SvgIcon>\r\n    <line\r\n      x1=\"5.284\"\r\n      y1=\"12.303\"\r\n      x2=\"15.248\"\r\n      y2=\"7.431\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n      strokeLinecap=\"round\"\r\n    />\r\n    <path\r\n      d=\" M 7.734 10.073 L 7.761 9.55 L 9.413 8.725 L 9.688 8.092 L 14.835 6 Q 15.523 5.697 16.294 6 Q 17.064 6.303 18.33 8.092 L 16.459 10.514 L 17.174 10.817 L 17.174 11.642 L 16.459 12.303 L 15.908 12.303 L 15.771 12.716 L 14.835 13.404 L 14.835 14.725 L 15.55 15.055 L 15.55 15.633 L 16.459 16.018 L 16.459 16.514 L 11.615 18.798 L 10.486 18.55 L 9.413 18.55 L 8.284 17.807 L 8.284 17.257 L 7.761 16.844 L 9.11 15.633 L 9.688 15.248 L 10.651 14.725 L 10.651 12.716 L 11.45 12.303 L 11.45 11.862 L 10.486 12.303 L 10.651 11.642 L 9.688 12.138 L 8.477 11.862 L 7.734 10.073 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const LauncherIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.589 13.688 L 9.364 14.101 L 10.819 14.79 L 10.819 15.552 L 8.081 15.552 L 7.343 16.019 L 7.343 17.59 L 16.708 17.59 L 18.766 16.019 L 18.766 15.257 L 17.95 14.79 L 18.553 13.363 L 18.979 12.316 L 7.542 6.41 L 5.021 11.36 L 9.589 13.688 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const CalibrationIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 6.635 7.496 C 7.188 5.819 8.854 4.859 10.353 5.353 C 11.853 5.847 12.621 7.61 12.068 9.288 C 11.515 10.965 9.849 11.925 8.349 11.431 C 6.85 10.937 6.082 9.174 6.635 7.496 Z \"\r\n      fill=\"none\"\r\n      strokeWidth=\"2\"\r\n      stroke={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.368 9.482 Q 19.128 8.823 18.536 8.151 L 12.74 7.818 L 11.895 7.426 L 11.532 9.871 L 9.57 11.411 L 7.125 10.596 L 6.129 11.139 L 3.955 10.384 Q 2.899 10.958 2.929 12.679 L 16.634 18.777 L 17.359 17.901 L 18.536 18.264 Q 19.351 17.751 18.989 16.392 L 17.812 16.09 L 17.812 15.426 L 9.027 12.135 L 9.027 11.984 L 10.838 11.984 L 11.895 11.743 L 18.536 12.528 Q 19.294 11.724 19.476 10.898 L 20.8 10.898 Q 21.344 10.203 20.8 9.539 L 19.368 9.482 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneBayIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 5.97 12 C 5.97 8.72 8.672 6.057 12 6.057 C 15.328 6.057 18.03 8.72 18.03 12 C 18.03 15.28 15.328 17.943 12 17.943 C 8.672 17.943 5.97 15.28 5.97 12 Z \"\r\n        fill=\"none\"\r\n        strokeWidth=\"1\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"9.328\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"14.602\"\r\n        y2=\"9.164\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.328\"\r\n        y1=\"14.789\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeLinecap=\"square\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"14.602\"\r\n        y1=\"14.789\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"square\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\nexport const DroneBandwidthIcon = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <path\r\n        d=\" M 14.484 4.922 L 11.76 11.074 L 15.012 11.074 L 10.441 19.002 L 19.195 9.879 L 14.906 9.879 L 19.635 4.922 L 14.484 4.922 Z \"\r\n        fill={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"7.041\"\r\n        y1=\"6.915\"\r\n        x2=\"9.635\"\r\n        y2=\"9.728\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"9.635\"\r\n        y1=\"14.118\"\r\n        x2=\"7.041\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n      <line\r\n        x1=\"15.844\"\r\n        y1=\"16.281\"\r\n        x2=\"16.479\"\r\n        y2=\"17.009\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color || \"#000000\"}\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\n\r\nexport default class Stat {\r\n  static defaultStat = {\r\n    damage: {\r\n      turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n      turretLauncherRange: [],\r\n      droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n    },\r\n    defense: {\r\n      resistance: {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      },\r\n      active: {\r\n        shieldBonus: 0,\r\n        armorBonus: 0,\r\n        structureBonus: 0,\r\n      },\r\n    },\r\n    capacitor: {\r\n      ambientChargeRate: 0,\r\n      boosterChargeRate: 0,\r\n      activationUseRate: 0,\r\n      stableLevel: 0,\r\n    },\r\n    resource: {\r\n      capacity: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: 0,\r\n        launcher: 0,\r\n        calibration: 0,\r\n        droneBandwidth: 0,\r\n        droneBay: 0,\r\n        droneActive: 0,\r\n      },\r\n    },\r\n    engineering: {\r\n      pg: { load: 0, output: 0 },\r\n      cpu: { load: 0, output: 0 },\r\n    },\r\n    miscellaneous: {\r\n      sensor: {\r\n        scanResolution: 0,\r\n        maximumLockedTarget: 0,\r\n        maximumTargetingRange: 0,\r\n        strength: {\r\n          gravimetric: 0,\r\n          magnetometric: 0,\r\n          ladar: 0,\r\n          radar: 0,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier: 0,\r\n        maximumVelocity: 0,\r\n        warpSpeedMultiplier: 0,\r\n      },\r\n      misc: {\r\n        cargoBayCapacity: 0,\r\n        signatureRadius: 0,\r\n      },\r\n    },\r\n  };\r\n  static stat(fit) {\r\n    const propCapacitor = Stat.capacitor(fit);\r\n\r\n    return {\r\n      damage: Stat.damage(fit),\r\n      defense: Stat.defense(fit),\r\n      capacitor: {\r\n        ...propCapacitor,\r\n        stableLevel: Stat.capacitor_stableLevel(fit, propCapacitor),\r\n      },\r\n      engineering: Stat.engineering(fit),\r\n      resource: Stat.resource(fit),\r\n      miscellaneous: Stat.miscellaneous(fit),\r\n    };\r\n  }\r\n\r\n  static damage(fit) {\r\n    if (!fit.highSlots)\r\n      return {\r\n        turretLauncherDamage: { max: 0, effective: 0, alpha: 0 },\r\n        turretLauncherRange: [],\r\n        droneDamage: { max: 0, effective: 0, alpha: 0 },\r\n      };\r\n\r\n    const turrets = Stat.#damage_turrets(fit);\r\n    const launchers = Stat.#damage_launchers(fit);\r\n    const drones = Stat.#damage_drones(fit);\r\n\r\n    const turretLauncherDamageSlots = [...turrets, ...launchers];\r\n    const turretLauncherDamageSummaries = turretLauncherDamageSlots.map(\r\n      (slot) => {\r\n        return Stat.damage_getSummary(slot.item, slot.charge);\r\n      }\r\n    );\r\n    const turretLauncherDamage = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n\r\n        return {\r\n          max: acc.max + maxDps,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const turretLauncherRange = turretLauncherDamageSummaries.reduce(\r\n      (acc, summary) => {\r\n        const optimalRange = summary.range.optimalRange;\r\n        const falloffRange = summary.range.falloffRange;\r\n\r\n        const overlappingRange = acc.find(\r\n          (range) =>\r\n            range.optimalRange === optimalRange &&\r\n            range.falloffRange === falloffRange\r\n        );\r\n        if (!!overlappingRange) overlappingRange.debug.push(summary.slot);\r\n        else acc.push({ optimalRange, falloffRange, debug: [summary.slot] });\r\n        return acc;\r\n      },\r\n      []\r\n    );\r\n\r\n    const droneSummaries = drones.map((drone) => {\r\n      return Stat.damage_getSummary(drone.item, drone.item);\r\n    });\r\n    const droneDamage = droneSummaries.reduce(\r\n      (acc, summary) => {\r\n        const typeCount = summary.typeCount;\r\n        const alpha = summary.damagePerAct.alpha;\r\n        const maxDps = alpha / summary.activationInfo.duration || 0;\r\n        const effectiveDps = alpha / summary.activationInfo.e_duration || 0;\r\n        return {\r\n          max: acc.max + maxDps * typeCount,\r\n          effective: acc.effective + effectiveDps,\r\n          alpha: acc.alpha + alpha,\r\n        };\r\n      },\r\n      { max: 0, effective: 0, alpha: 0 }\r\n    );\r\n\r\n    const damageSummaries = [\r\n      ...turretLauncherDamageSummaries,\r\n      ...droneSummaries,\r\n    ];\r\n\r\n    return {\r\n      turretLauncherDamage,\r\n      turretLauncherRange,\r\n      droneDamage,\r\n      damageSummaries,\r\n    };\r\n  }\r\n  static #damage_turrets = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 42\r\n        ); //effectID: 42, effectName: \"turretFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isTurretFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_launchers = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n          (efft) => efft.effectID === 40\r\n        ); //effectID: 40, effectName: \"launcherFitted\"\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isLauncherFitted && Fit.validateChargeSlot(slot) && isActivated)\r\n          return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { highSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static #damage_drones = (fit) => {\r\n    return Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isActivated = slot.item.typeState === \"activation\";\r\n        if (isActivated) return slot;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { droneSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n  };\r\n  static damage_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = Stat.damage_damagePerAct(item, charge);\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const range = Stat.damage_range(item, charge);\r\n    const typeCount = item.typeCount;\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, damagePerAct, range, typeCount, slot };\r\n  };\r\n  static damage_damagePerAct = (item, charge) => {\r\n    const damageModifier = findAttributebyID(item, 64) || 1; //attributeID: 64, attributeName: \"Damage Modifier\"\r\n\r\n    const EM_damage = findAttributebyID(charge, 114); //attributeID: 114, attributeName: \"EM damage\"\r\n    const TH_damage = findAttributebyID(charge, 118); //attributeID: 118, attributeName: \"Thermal damage\"\r\n    const KI_damage = findAttributebyID(charge, 117); //attributeID: 117, attributeName: \"Kinetic damage\"\r\n    const EX_damage = findAttributebyID(charge, 116); //attributeID: 116, attributeName: \"Explosive damage\"\r\n    const mergedDamage = EM_damage + TH_damage + KI_damage + EX_damage;\r\n\r\n    const alpha = damageModifier * mergedDamage;\r\n\r\n    return {\r\n      alpha,\r\n      EM: EM_damage * damageModifier,\r\n      TH: TH_damage * damageModifier,\r\n      KI: KI_damage * damageModifier,\r\n      EX: EX_damage * damageModifier,\r\n    };\r\n  };\r\n  static damage_range = (item, charge) => {\r\n    const isTurretFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 42\r\n    ); //effectID: 42, effectName: \"turretFitted\"\r\n    const isLauncherFitted = !!item?.typeEffectsStats?.find(\r\n      (efft) => efft.effectID === 40\r\n    ); //effectID: 40, effectName: \"launcherFitted\"\r\n    const isDrone = item?.typeDroneSize !== undefined;\r\n\r\n    if (isTurretFitted || isDrone) {\r\n      const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n      const falloffRange = findAttributebyID(item, 158); //attributeID: 158, attributeName: \"Accuracy falloff \"\r\n      const tracking = findAttributebyID(item, 160); // attributeID: 160, attributeName: \"Turret Tracking\"\r\n      const signatureResolution = findAttributebyID(item, 620); // attributeID: 620, attributeName: \"Signature Resolution\"\r\n\r\n      return { optimalRange, falloffRange, tracking, signatureResolution };\r\n    } else if (isLauncherFitted) {\r\n      const maximumVelocity = findAttributebyID(charge, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n      const filghtTime = findAttributebyID(charge, 281); //attributeID: 281, attributeName: \"Maximum Flight Time\"\r\n      const optimalRange = maximumVelocity * (filghtTime / 1000);\r\n      const explosionVelocity = findAttributebyID(charge, 653); // attributeID: 653, attributeName: \"Explosion Velocity\"\r\n      const explosionRadius = findAttributebyID(charge, 654); // attributeID: 654, attributeName: \"Explosion Radius\"\r\n      const damageReductionFactor = findAttributebyID(charge, 1353); // attributeID: 1353, attributeName: \"aoeDamageReductionFactor\"\r\n\r\n      //prettier-ignore\r\n      return { optimalRange, falloffRange: 0, explosionVelocity, explosionRadius, damageReductionFactor };\r\n    } else return { optimalRange: 0, falloffRange: 0 };\r\n  };\r\n\r\n  static capacitor(fit) {\r\n    if (!fit)\r\n      return {\r\n        ambientChargeRate: 0,\r\n        boosterChargeRate: 0,\r\n        activationUseRate: 0,\r\n      };\r\n    const debug = [];\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: {\r\n        highSlots: true,\r\n        midSlots: true,\r\n        lowSlots: true,\r\n      },\r\n    });\r\n    const activationUseRate = slots.reduce((acc, slot) => {\r\n      const cus = Stat.#capacitor_getUseRate(slot);\r\n      if (cus > 0)\r\n        debug.push({\r\n          typeName: slot.item.typeName,\r\n          capacitorUsePerSec: cus,\r\n          dominID: slot.item.domainID,\r\n        });\r\n      return acc + cus;\r\n    }, 0);\r\n    const ambientChargeRate = Stat.#capacitor_getAmbientChargeRate(fit, 25);\r\n    const boosterChargeRate = Stat.#capacitor_getBoosterChargeRate(fit);\r\n    debug.push({ activationUseRate, ambientChargeRate, boosterChargeRate });\r\n\r\n    /* console.log(debug) */\r\n    return { ambientChargeRate, boosterChargeRate, activationUseRate };\r\n  }\r\n  static capacitor_stableLevel(fit, propCapacitor = false) {\r\n    if (!fit.ship?.typeID) return 0;\r\n    const capacitor = !!propCapacitor ? propCapacitor : Stat.capacitor(fit);\r\n    const Cmax = findAttributebyID(fit.ship, 482); //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const Tnow = findAttributebyID(fit.ship, 55) / 1000; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    const capacitorDeltas = [];\r\n    for (let i = 200; i < 1000 + 1; i++) {\r\n      const Cnow = Cmax * (i / 1000);\r\n      capacitorDeltas.push({\r\n        capacitorLevel: i / 10,\r\n        delta:\r\n          Stat.getAmbientChargeRateMath(Cmax, Cnow, Tnow) +\r\n          capacitor.boosterChargeRate -\r\n          capacitor.activationUseRate,\r\n      });\r\n    }\r\n    const positiveDeltas = capacitorDeltas\r\n      .sort((a, b) => a.delta - b.delta)\r\n      .filter((capacitorDelta) => capacitorDelta.delta >= 0);\r\n\r\n    if (positiveDeltas[0] === undefined) return 0;\r\n    else return positiveDeltas[0].capacitorLevel;\r\n  }\r\n  static #capacitor_getUseRate = (slot) => {\r\n    if (slot.item.typeState !== \"activation\") return 0;\r\n\r\n    const activationCost = findAttributebyID(slot.item, 6); // attributeID: 6, attributeName: \"Activation Cost\"\r\n    if (activationCost === undefined) return 0;\r\n\r\n    const activationInfo = Stat.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return activationCost / activationInfo.e_duration;\r\n  };\r\n  static #capacitor_getAmbientChargeRate = (fit, capacitorLevel) => {\r\n    const chargeInfo = Stat.capacitor_getChargeInfo(fit);\r\n    const Cmax = chargeInfo.HP;\r\n    const Tchg = chargeInfo.bonusRate;\r\n    const Cnow = (Cmax * capacitorLevel) / 100;\r\n\r\n    return Stat.getAmbientChargeRateMath(Cmax, Cnow, Tchg);\r\n  };\r\n  static capacitor_getChargeInfo = (fit) => {\r\n    const HP = findAttributebyID(fit.ship, 482) || 0; //attributeID: 482, attributeName: \"Capacitor Capacity\"\r\n    const bonusRate = findAttributebyID(fit.ship, 55) / 1000 || 0; //attributeID: 55, attributeName: \"Capacitor Recharge time\"\r\n\r\n    return { HP, bonusRate };\r\n  };\r\n  static #capacitor_getBoosterChargeRate = (fit) => {\r\n    const slots = Fit.mapSlots(fit, (slot) => slot, {\r\n      isIterate: { midSlots: true },\r\n    });\r\n    const boosterSlots = slots.filter((slot) => {\r\n      if (!slot?.item?.typeEffectsStats) return false;\r\n      return slot.item.typeEffectsStats.find((efft) => efft.effectID === 48); // effectID: 48, effectName: \"powerBooster\"\r\n    });\r\n\r\n    return boosterSlots.reduce((acc, boosterSlot) => {\r\n      //prettier-ignore\r\n      const activationInfo = Stat.getActivationInfo(boosterSlot.item, boosterSlot.charge);\r\n      //prettier-ignore\r\n      const capacitorBonus = Stat.capacitor_getBonusPerAct_self(boosterSlot.item, boosterSlot.charge);\r\n      const boostChargeRate = capacitorBonus / activationInfo.e_duration || 0;\r\n\r\n      return acc + boostChargeRate;\r\n    }, 0);\r\n  };\r\n  static capacitor_getBonusPerAct_self(item, charge) {\r\n    if (!item || !charge) return { capacitorBonus: 0 };\r\n\r\n    const bonusPerAct = findAttributebyID(charge, 67); //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n\r\n    return bonusPerAct;\r\n  }\r\n\r\n  static defense(fit) {\r\n    if (!fit || !fit.ship)\r\n      return {\r\n        resistance: {\r\n          armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n          structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        },\r\n        active: {\r\n          shieldBonus: 0,\r\n          armorBonus: 0,\r\n          structureBonus: 0,\r\n        },\r\n      };\r\n    return {\r\n      resistance: Stat.defense_resistance(fit),\r\n      active: Stat.#defense_active(fit),\r\n    };\r\n  }\r\n  static defense_resistance = (fit) => {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        armor: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        shield: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n        structure: { HP: 0, EM: 0, TH: 0, KI: 0, EX: 0 },\r\n      };\r\n\r\n    const shipAttrs = fit.ship.typeAttributesStats;\r\n\r\n    const armorHP = shipAttrs.find((attr) => attr.attributeID === 265);\r\n    const armorEM = shipAttrs.find((attr) => attr.attributeID === 267);\r\n    const armorTH = shipAttrs.find((attr) => attr.attributeID === 270);\r\n    const armorKI = shipAttrs.find((attr) => attr.attributeID === 269);\r\n    const armorEX = shipAttrs.find((attr) => attr.attributeID === 268);\r\n\r\n    const shieldHP = shipAttrs.find((attr) => attr.attributeID === 263);\r\n    const shieldEM = shipAttrs.find((attr) => attr.attributeID === 271);\r\n    const shieldTH = shipAttrs.find((attr) => attr.attributeID === 274);\r\n    const shieldKI = shipAttrs.find((attr) => attr.attributeID === 273);\r\n    const shieldEX = shipAttrs.find((attr) => attr.attributeID === 272);\r\n    const shieldChargeRate =\r\n      shipAttrs.find((attr) => attr.attributeID === 479).value / 1000 || 0; // attributeID: 479, attributeName: \"Shield recharge time\"\r\n\r\n    const structureHP = shipAttrs.find((attr) => attr.attributeID === 9);\r\n    const structureEM = shipAttrs.find((attr) => attr.attributeID === 113);\r\n    const structureTH = shipAttrs.find((attr) => attr.attributeID === 110);\r\n    const structureKI = shipAttrs.find((attr) => attr.attributeID === 109);\r\n    const structureEX = shipAttrs.find((attr) => attr.attributeID === 111);\r\n\r\n    return {\r\n      armor: {\r\n        HP: armorHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(armorEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(armorTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(armorKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(armorEX),\r\n      },\r\n      shield: {\r\n        HP: shieldHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(shieldEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(shieldTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(shieldKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(shieldEX),\r\n        bonusRate: shieldChargeRate,\r\n      },\r\n      structure: {\r\n        HP: structureHP.value,\r\n        EM: Stat.#defense_resistance_decimal_fix(structureEM),\r\n        TH: Stat.#defense_resistance_decimal_fix(structureTH),\r\n        KI: Stat.#defense_resistance_decimal_fix(structureKI),\r\n        EX: Stat.#defense_resistance_decimal_fix(structureEX),\r\n      },\r\n    };\r\n  };\r\n  static #defense_resistance_decimal_fix = (attr) => {\r\n    const value = 100 - attr.value * 100;\r\n    return value > 0 ? value : 0;\r\n  };\r\n  static defense_getSummary = (item, charge) => {\r\n    if (!item) return false;\r\n\r\n    const activationInfo = Stat.getActivationInfo(item, charge);\r\n    const bonusPerAct = Stat.defense_getBonusPerAct(item, charge);\r\n    const slot = { item, charge };\r\n\r\n    return { activationInfo, bonusPerAct, slot };\r\n  };\r\n  static defense_getBonusPerAct = (item, charge) => {\r\n    if (!item) return { shieldBonus: 0, armorBonus: 0, structureBonus: 0 };\r\n\r\n    const shield = findAttributebyID(item, 68) || 0; //attributeID: 68, attributeName: \"Shield Bonus\"\r\n    const armor = findAttributebyID(item, 84) || 0; //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n    const structure = findAttributebyID(item, 83) || 0; //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n\r\n    return { shield, armor, structure };\r\n  };\r\n  static #defense_active = (fit) => {\r\n    const active = {\r\n      shieldBonus: 0,\r\n      armorBonus: 0,\r\n      structureBonus: 0,\r\n    };\r\n    if (!fit.ship || !fit.ship.typeAttributesStats) return active;\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item.typeAttributesStats) return;\r\n        const activationTime = findAttributebyID(slot.item, 73); //attributeID: 73, attributeName: \"Activation time / duration\"\r\n\r\n        const shieldBonus = findAttributebyID(slot.item, 68); //attributeID: 68, attributeName: \"Shield Bonus\"\r\n        if (!!shieldBonus) {\r\n          active.shieldBonus += (shieldBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const armorBonus = findAttributebyID(slot.item, 84); //attributeID: 84, attributeName: \"Armor Hitpoints Repaired\"\r\n        if (!!armorBonus) {\r\n          active.armorBonus += (armorBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n        const structureBonus = findAttributebyID(slot.item, 83); //attributeID: 83, attributeName: \"Structure Hitpoints Repaired\"\r\n        if (!!structureBonus) {\r\n          active.structureBonus += (structureBonus / activationTime) * 1000;\r\n          return;\r\n        }\r\n      },\r\n      {\r\n        isIterate: { midSlots: true, lowSlots: true },\r\n      }\r\n    );\r\n    return active;\r\n  };\r\n\r\n  static engineering(fit) {\r\n    if (!fit.ship?.typeID)\r\n      return {\r\n        pg: { load: 0, output: 0 },\r\n        cpu: { load: 0, output: 0 },\r\n      };\r\n\r\n    const pgLoad = findAttributebyID(fit.ship, 15); // attributeID: 15, attributeName: \"Power Load\"\r\n    const pgOutput = findAttributebyID(fit.ship, 11); //attributeID: 11, attributeName: \"Powergrid Output\"\r\n    const cpuLoad = findAttributebyID(fit.ship, 49); // attributeID: 49, attributeName: \"CPU Load\"\r\n    const cpuOutput = findAttributebyID(fit.ship, 48); //attributeID: 48, attributeName: \"CPU Output\"\r\n\r\n    return {\r\n      pg: { load: Number(pgLoad.toFixed(1)), output: pgOutput },\r\n      cpu: { load: Number(cpuLoad.toFixed(1)), output: cpuOutput },\r\n    };\r\n  }\r\n\r\n  static resource(fit) {\r\n    if (!fit.ship || !fit.ship.typeAttributesStats)\r\n      return {\r\n        capacity: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 5,\r\n        },\r\n        load: {\r\n          turret: 0,\r\n          launcher: 0,\r\n          calibration: 0,\r\n          droneBandwidth: 0,\r\n          droneBay: 0,\r\n          droneActive: 0,\r\n        },\r\n      };\r\n\r\n    const turretHardpoint = findAttributebyID(fit.ship, 102); //attributeID: 102, attributeName: \"Turret Hardpoints\"\r\n    const launcherHardpoint = findAttributebyID(fit.ship, 101); //attributeID: 101, attributeName: \"Launcher Hardpoints\";\r\n    const calibration = findAttributebyID(fit.ship, 1132); //attributeID: 1132, attributeName: \"Calibration\"\r\n    const droneCapacity = findAttributebyID(fit.ship, 283); //attributeID: 283, attributeName: \"Drone Capacity\"\r\n    const droneBandwidth = findAttributebyID(fit.ship, 1271); //ttributeID: 1271, attributeName: \"Drone Bandwidth\"\r\n\r\n    const mountedTurrets = fit.highSlots.reduce((acc, slot) => {\r\n      const isTurretFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 42\r\n      ); //effectID: 42, effectName: \"turretFitted\"\r\n      return isTurretFitted && slot.item.typeState !== \"offline\" ? ++acc : acc;\r\n    }, 0);\r\n    const mountedLaunchers = fit.highSlots.reduce((acc, slot) => {\r\n      const isLauncherFitted = !!slot?.item?.typeEffectsStats?.find(\r\n        (efft) => efft.effectID === 40\r\n      ); //effectID: 40, effectName: \"launcherFitted\"\r\n      return isLauncherFitted && slot.item.typeState !== \"offline\"\r\n        ? ++acc\r\n        : acc;\r\n    }, 0);\r\n    const mountedCalibration = fit.rigSlots.reduce((acc, slot) => {\r\n      const calibration = findAttributebyID(slot.item, 1153); //attributeID: 1153, attributeName: \"Calibration cost\"\r\n      return !!calibration && slot.item.typeState !== \"offline\"\r\n        ? acc + calibration\r\n        : acc;\r\n    }, 0);\r\n    const mountedDroneBandwidth = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneBandwidth = findAttributebyID(slot.item, 1272); //attributeID: 1272, attributeName: \"Bandwidth Needed\"\r\n      return !!droneBandwidth && slot.item.typeState === \"activation\"\r\n        ? acc + droneBandwidth * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const mountedDronebay = fit.droneSlots.reduce((acc, slot) => {\r\n      const droneVolume = slot.item.volume;\r\n      return !!droneVolume && slot.item.typeState !== \"offline\"\r\n        ? acc + droneVolume * slot.item.typeCount\r\n        : acc;\r\n    }, 0);\r\n    const droneActive = fit.droneSlots.reduce((acc, slot) => {\r\n      if (slot.item.typeState === \"activation\")\r\n        return acc + (slot.item.typeCount || 0);\r\n      return acc;\r\n    }, 0);\r\n\r\n    return {\r\n      capacity: {\r\n        turret: turretHardpoint,\r\n        launcher: launcherHardpoint,\r\n        calibration: calibration,\r\n        droneBay: droneCapacity,\r\n        droneBandwidth: droneBandwidth,\r\n        droneActive: 5,\r\n      },\r\n      load: {\r\n        turret: mountedTurrets,\r\n        launcher: mountedLaunchers,\r\n        calibration: mountedCalibration,\r\n        droneBay: mountedDronebay,\r\n        droneBandwidth: mountedDroneBandwidth,\r\n        droneActive: droneActive,\r\n      },\r\n    };\r\n  }\r\n\r\n  static miscellaneous(fit) {\r\n    if (!fit?.ship?.typeID)\r\n      return {\r\n        sensor: {\r\n          scanResolution: 0,\r\n          maximumLockedTarget: 0,\r\n          maximumTargetingRange: 0,\r\n          strength: {\r\n            gravimetric: 0,\r\n            magnetometric: 0,\r\n            ladar: 0,\r\n            radar: 0,\r\n          },\r\n        },\r\n        propulsion: {\r\n          inertialModifier: 0,\r\n          maximumVelocity: 0,\r\n          warpSpeedMultiplier: 0,\r\n        },\r\n        misc: {\r\n          cargoBayCapacity: 0,\r\n          signatureRadius: 0,\r\n        },\r\n      };\r\n\r\n    const ship = fit.ship;\r\n\r\n    const scanResolution = findAttributebyID(ship, 564); //attributeID: 564, attributeName: \"Scan Resolution\"\r\n    const signatureRadius = findAttributebyID(ship, 552); //attributeID: 552, attributeName: \"Signature Radius\"\r\n\r\n    const gravimetricSensorStrength = findAttributebyID(ship, 211); //attributeID: 211, attributeName: \"Gravimetric Sensor Strength\"\r\n    const magnetometricSensorStrength = findAttributebyID(ship, 210); //attributeID: 210, attributeName: \"Magnetometric Sensor Strength\"\r\n    const ladarSensorStrength = findAttributebyID(ship, 209); // attributeID: 209, attributeName: \"Ladar Sensor Strength\"\r\n    const radarSensorStrength = findAttributebyID(ship, 208); //attributeID: 208, attributeName: \"RADAR Sensor Strength\"\r\n    const maximumLockedTarget = findAttributebyID(ship, 192); //attributeID: 192, attributeName: \"Maximum Locked Targets\"\r\n    const maximumTargetingRange = findAttributebyID(ship, 76); // attributeID: 76, attributeName: \"Maximum Targeting Range\"\r\n\r\n    const inertialModifier = findAttributebyID(ship, 70); // attributeID: 70, attributeName: \"Inertia Modifier\"\r\n    const maximumVelocity = Stat.#miscellaneous_maximumVelocity(fit);\r\n    const warpSpeedMultiplier = findAttributebyID(ship, 600); //attributeID: 600, attributeName: \"Warp Speed Multiplier\"\r\n\r\n    const cargoBayCapacity = findAttributebyID(ship.capacity);\r\n\r\n    return {\r\n      sensor: {\r\n        scanResolution,\r\n        maximumLockedTarget,\r\n        maximumTargetingRange,\r\n        strength: {\r\n          gravimetric: gravimetricSensorStrength,\r\n          magnetometric: magnetometricSensorStrength,\r\n          ladar: ladarSensorStrength,\r\n          radar: radarSensorStrength,\r\n        },\r\n      },\r\n      propulsion: {\r\n        inertialModifier,\r\n        maximumVelocity,\r\n        warpSpeedMultiplier,\r\n      },\r\n      misc: {\r\n        signatureRadius,\r\n        cargoBayCapacity,\r\n      },\r\n    };\r\n  }\r\n  static #miscellaneous_maximumVelocity = function (fit) {\r\n    const activePropulsionModules = Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        const isPropulsionModule = !!slot.item?.typeEffectsStats?.find((efft) =>\r\n          [6730, 6731].includes(efft.effectID)\r\n        ); // effectID: 6731, effectName: \"moduleBonusAfterburner\"\r\n        // effectID: 6730, effectName: \"moduleBonusMicrowarpdrive\"\r\n        const isActive = slot.item.typeState === \"activation\";\r\n\r\n        if (isActive && isPropulsionModule) return slot.item;\r\n        else return undefined;\r\n      },\r\n      { isIterate: { midSlots: true } }\r\n    ).filter((slot) => !!slot);\r\n    const shipBaseMaximumVelocity = findAttributebyID(fit.ship, 37); //attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    if (activePropulsionModules.length === 0) return shipBaseMaximumVelocity;\r\n\r\n    //prettier-ignore\r\n    const propModuleMaximumVelocityBonusMul = findAttributebyID( activePropulsionModules[0], 20) / 100 // attributeID: 20, attributeName: \"Maximum Velocity Bonus\"\r\n    const propModuleThrust = findAttributebyID(activePropulsionModules[0], 567); // attributeID: 567, attributeName: \"Thrust\",\r\n\r\n    const propModuleMassAdd = propModuleThrust / 3;\r\n    const shipMass = findAttributebyID(fit.ship, 4); // attributeID: 4, attributeName: \"Mass\";\r\n    const mass =\r\n      Fit.mapSlots(fit, (slot) => slot, {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }).reduce((acc, slot) => {\r\n        if (!!slot.item.mass) return acc + slot.item.mass;\r\n        return acc;\r\n      }, 0) +\r\n      propModuleMassAdd +\r\n      shipMass;\r\n\r\n    const shipAppliedMaximumVelocity =\r\n      shipBaseMaximumVelocity *\r\n      (1 + (propModuleMaximumVelocityBonusMul * propModuleThrust) / mass);\r\n\r\n    return shipAppliedMaximumVelocity;\r\n  };\r\n\r\n  static getActivationInfo(item, charge) {\r\n    if (!item)\r\n      return {\r\n        duration: Infinity,\r\n        e_duration: Infinity,\r\n        activationLimit: 0,\r\n        reloadTime: 0,\r\n        activationCost: 0,\r\n      };\r\n\r\n    const activationCost = findAttributebyID(item, 6) || 0; //attributeID: 6, attributeName: \"Activation Cost\"\r\n    const reloadTime = (findAttributebyID(item, 1795) || undefined) / 1000; //attributeID: 1795, attributeName: \"Reload Time\"\r\n    const activationTime =\r\n      (findAttributebyID(item, 73) || findAttributebyID(item, 51)) / 1000; // attributeID: 73, attributeName: \"Activation time / duration\" attributeID: 51, attributeName: \"Rate of fire\"\r\n\r\n    if (!reloadTime || !Stat.#getActivationInfo_isTypeNeedCharge(item))\r\n      return {\r\n        duration: activationTime,\r\n        e_duration: activationTime,\r\n        activationLimit: Infinity,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n    if (!Fit.validateChargeSlot({ item, charge }))\r\n      return {\r\n        duration: Infinity,\r\n        e_duration: Infinity,\r\n        activationLimit: 0,\r\n        reloadTime: 0,\r\n        activationCost,\r\n      };\r\n\r\n    const itemCapacity = item.capacity;\r\n    const chargeVolume = charge.volume;\r\n    const chargePerCycle = findAttributebyID(item, 56); //attributeID: 56, attributeName: \"Charges Per Cycle\"\r\n\r\n    const chargeVolumePerAct = !!chargePerCycle\r\n      ? chargeVolume * chargePerCycle\r\n      : 0;\r\n    const activationLimit = Math.floor(itemCapacity / chargeVolumePerAct);\r\n    const reloadTimePerAct =\r\n      !!reloadTime && !!itemCapacity && !!chargeVolume\r\n        ? reloadTime / activationLimit\r\n        : 0;\r\n    const EactivationTime = activationTime + reloadTimePerAct;\r\n\r\n    return {\r\n      duration: activationTime,\r\n      e_duration: EactivationTime,\r\n      activationLimit,\r\n      reloadTime,\r\n      activationCost,\r\n    };\r\n  }\r\n  static #getActivationInfo_isTypeNeedCharge = (type) => {\r\n    if (!type || !type.typeEffectsStats) return false;\r\n\r\n    //TODO: Add command burst effectIDs\r\n    //effectID: 42, effectName: \"turretFitted\"\r\n    //effectID: 40, effectName: \"launcherFitted\"\r\n    //effectID: 48, effectName: \"powerBooster\"\r\n    const thisEffectsNeedCharge = [42, 40, 48];\r\n\r\n    return type.typeEffectsStats.reduce((acc, efft) => {\r\n      if (thisEffectsNeedCharge.includes(efft.effectID)) return true;\r\n      return acc;\r\n    }, false);\r\n  };\r\n\r\n  static getAmbientChargeRateMath = (Cmax, Cnow, Tchg) => {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  ListItem,\r\n  makeStyles,\r\n  Grid,\r\n  Typography,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\n\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n    marginBottom: 8,\r\n    width: \"100%\",\r\n    paddingLeft: 10,\r\n  },\r\n  boldTypography: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n  },\r\n}));\r\n\r\nconst GridBoldTypography = (props) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid style={{ flexBasis: 140, maxWidth: 140 }}>\r\n      <TextField\r\n        label={\r\n          <Typography className={classes.boldTypography} noWrap>\r\n            {props.children}\r\n          </Typography>\r\n        }\r\n        value={props.value || 0}\r\n        InputProps={{\r\n          readOnly: true,\r\n          disableUnderline: true,\r\n        }}\r\n        inputProps={{\r\n          style: {\r\n            padding: \"2px 0px 2px 0px\",\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n          },\r\n        }}\r\n      />\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default function ResourcesMiscellaneousListItem(props) {\r\n  const classes = useStyles();\r\n\r\n  const [misc, setMisc] = useState(Stat.defaultStat.miscellaneous);\r\n\r\n  useEffect(() => {\r\n    setMisc(props.stat.miscellaneous);\r\n  }, [props.stat.miscellaneous]);\r\n\r\n  return (\r\n    <ListItem className={classes.root} key=\"onlyOne\">\r\n      <Grid justify=\"center\" container>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumLockedTarget}\r\n        >{`Max Locked Target`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.maximumTargetingRange}\r\n        >{`Max Trageting Range (m)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.scanResolution}\r\n        >{`Scan Resolution (mm)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.gravimetric?.toFixed(1)}\r\n        >\r\n          {`Gravimetric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.magnetometric?.toFixed(1)}\r\n        >\r\n          {`Magnetometric (point)`}\r\n        </GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.ladar?.toFixed(1)}\r\n        >{`Ladar (point)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.sensor.strength.radar?.toFixed(1)}\r\n        >{`Radar (point)`}</GridBoldTypography>\r\n\r\n        <GridBoldTypography\r\n          value={misc.propulsion.TextFieldmaximumVelocity?.toFixed(2)}\r\n        >{`Max Velocity (m/sec)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.inertialModifier?.toFixed(6)}\r\n        >{`Inertia Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.propulsion.warpSpeedMultiplier}\r\n        >{`Warp Speed Modifier (x)`}</GridBoldTypography>\r\n        <GridBoldTypography\r\n          value={misc.misc.signatureRadius?.toFixed(2)}\r\n        >{`Signature Radius (m)`}</GridBoldTypography>\r\n        <Grid style={{ flexBasis: 140 }} item />\r\n      </Grid>\r\n    </ListItem>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport {\r\n  makeStyles,\r\n  Grid,\r\n  Tooltip,\r\n  List,\r\n  ListItem,\r\n  Collapse,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport {\r\n  TurretIcon,\r\n  LauncherIcon,\r\n  CalibrationIcon,\r\n  DroneBayIcon,\r\n  DroneBandwidthIcon,\r\n} from \"../../Icons/resourceIcons\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useCallback } from \"react\";\r\nimport ResourcesMiscellaneousListItem from \"./ResourcesMiscellaneousListItem\";\r\n\r\nconst TurretHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Turret Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst LauncherHardpoint = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Launcher Hardpoints\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <LauncherIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst Calibration = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Calibration\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <CalibrationIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBandwidth = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bandwidth\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBandwidthIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneBay = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={props.value}\r\n      label={props.label}\r\n      Icon={\r\n        <Tooltip title=\"Drone Bay\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneBayIcon\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n  expand: {\r\n    transform: \"rotate(0deg)\",\r\n    right: \"10%\",\r\n    transition: theme.transitions.create(\"transform\", {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    right: \"10%\",\r\n    transform: \"rotate(180deg)\",\r\n  },\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n    backgroundColor: theme.palette.action.hover,\r\n  },\r\n}));\r\n\r\nexport default function Hardpoints(props) {\r\n  const classes = useStyles();\r\n\r\n  const [open, setOpen] = useState(true);\r\n  const [load, setLoad] = useState(Stat.defaultStat.resource.load);\r\n  const [capacity, setCapacity] = useState(Stat.defaultStat.resource.capacity);\r\n\r\n  useEffect(() => {\r\n    setLoad(props.stat.resource.load);\r\n    setCapacity(props.stat.resource.capacity);\r\n  }, [props.stat]);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid container item alignContent=\"center\">\r\n            <Grid item xs={4} sm={2}>\r\n              <TurretHardpoint label={`${load.turret}/${capacity.turret}`} />\r\n            </Grid>\r\n            <Grid item xs={4} sm={2}>\r\n              <LauncherHardpoint\r\n                label={`${load.launcher}/${capacity.launcher}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={4} sm={2}>\r\n              <Calibration\r\n                label={`${load.calibration}/${capacity.calibration}`}\r\n              />\r\n            </Grid>\r\n\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBay\r\n                value={load.droneBay / capacity.droneBay}\r\n                label={`${load.droneBay}/${capacity.droneBay}m3`}\r\n                isError={load.droneBay > capacity.droneBay}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={6} sm={3}>\r\n              <DroneBandwidth\r\n                value={load.droneBandwidth / capacity.droneBandwidth}\r\n                label={`${load.droneBandwidth}/${capacity.droneBandwidth}Mbit/s`}\r\n                isError={load.droneBandwidth > capacity.droneBandwidth}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <ResourcesMiscellaneousListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const AlphaIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 14.104 8.315 L 14.182 8.315 L 14.182 8.315 Q 14.328 8.013 14.606 7.554 L 14.606 7.554 L 14.606 7.554 Q 14.885 7.095 15.139 6.841 L 15.139 6.841 L 17.619 6.841 L 17.619 6.841 Q 17.18 7.651 16.726 8.828 L 16.726 8.828 L 16.726 8.828 Q 16.271 10.005 16.018 11.177 L 16.018 11.177 L 15.363 14.302 L 15.363 14.302 Q 15.305 14.595 15.305 14.819 L 15.305 14.819 L 15.305 14.819 Q 15.305 15.454 15.9 15.454 L 15.9 15.454 L 15.9 15.454 Q 16.252 15.454 16.535 15.337 L 16.535 15.337 L 16.535 17.661 L 16.535 17.661 Q 15.92 17.954 14.924 17.954 L 14.924 17.954 L 14.924 17.954 Q 12.98 17.954 12.541 16.343 L 12.541 16.343 L 12.463 16.343 L 12.463 16.343 Q 11.672 17.271 10.964 17.612 L 10.964 17.612 L 10.964 17.612 Q 10.256 17.954 9.357 17.954 L 9.357 17.954 L 9.357 17.954 Q 7.941 17.954 7.16 16.914 L 7.16 16.914 L 7.16 16.914 Q 6.379 15.874 6.379 13.999 L 6.379 13.999 L 6.379 13.999 Q 6.379 11.929 7.033 10.234 L 7.033 10.234 L 7.033 10.234 Q 7.688 8.54 8.869 7.588 L 8.869 7.588 L 8.869 7.588 Q 10.051 6.636 11.516 6.636 L 11.516 6.636 L 11.516 6.636 Q 12.385 6.636 12.995 7.017 L 12.995 7.017 L 12.995 7.017 Q 13.605 7.397 14.104 8.315 L 14.104 8.315 L 14.104 8.315 Z  M 10.656 15.581 L 10.656 15.581 L 10.656 15.581 Q 11.408 15.581 11.975 14.893 L 11.975 14.893 L 11.975 14.893 Q 12.541 14.204 12.868 12.891 L 12.868 12.891 L 12.868 12.891 Q 13.195 11.577 13.195 10.737 L 13.195 10.737 L 13.195 10.737 Q 13.195 9.956 12.883 9.487 L 12.883 9.487 L 12.883 9.487 Q 12.57 9.019 11.936 9.019 L 11.936 9.019 L 11.936 9.019 Q 11.242 9.019 10.651 9.683 L 10.651 9.683 L 10.651 9.683 Q 10.061 10.347 9.709 11.445 L 9.709 11.445 L 9.709 11.445 Q 9.357 12.544 9.357 13.716 L 9.357 13.716 L 9.357 13.716 Q 9.357 14.683 9.675 15.132 L 9.675 15.132 L 9.675 15.132 Q 9.992 15.581 10.656 15.581 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\nexport const DroneDamageSVG = (props) => {\r\n  return (\r\n    <SvgIcon>\r\n      <line\r\n        x1=\"7.281\"\r\n        y1=\"6.953\"\r\n        x2=\"10.652\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"16.719\"\r\n        y1=\"6.953\"\r\n        x2=\"13.348\"\r\n        y2=\"10.558\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"10.652\"\r\n        y1=\"13.442\"\r\n        x2=\"7.281\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <line\r\n        x1=\"13.348\"\r\n        y1=\"13.442\"\r\n        x2=\"16.719\"\r\n        y2=\"17.047\"\r\n        strokeWidth=\"2\"\r\n        stroke={props.color}\r\n      />\r\n      <path\r\n        d=\" M 9.725 12 L 12 9.725 L 14.275 12 L 12 14.275 L 9.725 12 Z \"\r\n        fill=\"rgb(255,255,255)\"\r\n      />\r\n    </SvgIcon>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles, Typography, ListItem, useTheme } from \"@material-ui/core\";\r\nimport { useEffect } from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootPostIt: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n  },\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n  },\r\n  rootDiv: {\r\n    padding: 0,\r\n    width: \"100%\",\r\n    height: 52,\r\n    position: \"relative\",\r\n  },\r\n  label: {\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 6,\r\n    fontSize: 11,\r\n    color: \"#ffffff\",\r\n    fontWeight: 700,\r\n  },\r\n  optimalRangeLabel: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  rangeFont: {\r\n    fontSize: 14,\r\n    fontWeight: 700,\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nconst PostIt = (props) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div\r\n      className={classes.rootPostIt}\r\n      style={{\r\n        width: `${props.share || 0}%`,\r\n        height: props.index * 13 + 22,\r\n        borderRight: `solid 1px ${props.color}`,\r\n      }}\r\n    >\r\n      <div style={{ backgroundColor: props.color, height: 20 }} />\r\n      <div style={{ height: props.index * 13 }} />\r\n\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst OptimalRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <PostIt\r\n      share={props.share.optimalRangeShare}\r\n      index={0}\r\n      color={theme.palette.property.green}\r\n    >\r\n      <Typography className={classes.rangeFont} align=\"right\">\r\n        {`${(props.share.optimalRange / 1000).toFixed(1)}KM`}\r\n      </Typography>\r\n    </PostIt>\r\n  );\r\n};\r\nconst FalloffRangeBar = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    props.share.falloffRange > 0 && (\r\n      <PostIt\r\n        share={props.share.falloffRangeShare}\r\n        index={1}\r\n        color={theme.palette.property.org}\r\n      >\r\n        <Typography className={classes.rangeFont} align=\"right\">\r\n          {\r\n            //prettier-ignore\r\n            `${((props.share.optimalRange + props.share.falloffRange) / 1000).toFixed(1)}KM`\r\n          }\r\n        </Typography>\r\n      </PostIt>\r\n    )\r\n  );\r\n};\r\n\r\nexport default function DamageRangeListItem(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [shares, setShares] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setShares(getShares(props.stat.damage.turretLauncherRange));\r\n  }, [props.stat.damage.turretLauncherRange]);\r\n\r\n  return shares.map((share) => {\r\n    return (\r\n      <ListItem\r\n        className={classes.root}\r\n        key={`${share.optimalRangeShare}/${share.falloffRangeShare}`}\r\n      >\r\n        <div className={classes.rootDiv}>\r\n          <PostIt\r\n            share={100}\r\n            index={2}\r\n            color={theme.palette.property.greySecondary}\r\n          />\r\n          <FalloffRangeBar share={share} />\r\n          <OptimalRangeBar share={share} />\r\n          <Typography className={classes.label}>\r\n            {`${share.debug[0].item.typeName} - ${share.debug[0].charge.typeName}`}\r\n          </Typography>\r\n        </div>\r\n      </ListItem>\r\n    );\r\n  });\r\n}\r\nfunction getShares(turretLauncherRange) {\r\n  const rangeMax = turretLauncherRange.reduce((acc, range) => {\r\n    const rangeSum = range.optimalRange + range.falloffRange;\r\n    if (rangeSum > acc) return rangeSum;\r\n    else return acc;\r\n  }, 0);\r\n\r\n  return turretLauncherRange.map((range) => {\r\n    return {\r\n      ...range,\r\n      optimalRangeShare: (range.optimalRange / rangeMax) * 100,\r\n      falloffRangeShare:\r\n        ((range.falloffRange + range.optimalRange) / rangeMax) * 100,\r\n    };\r\n  });\r\n}\r\n","import React, { useState, useCallback } from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { AlphaIcon, DroneDamageSVG } from \"../../Icons/damageIcons\";\r\nimport { TurretIcon } from \"../../Icons/resourceIcons\";\r\nimport {\r\n  Tooltip,\r\n  Grid,\r\n  makeStyles,\r\n  Collapse,\r\n  ListItem,\r\n  List,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport DamageRangeListItem from \"./DamageRangeListItem\";\r\n\r\nconst WeaponDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Weapon DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <TurretIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst WeaponAlpha = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Alpha Damage\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <AlphaIcon color={theme.palette.text.primary} />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\nconst DroneDps = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={0}\r\n      label={props.label}\r\n      backgroundColor={theme.palette.background.paper}\r\n      Icon={\r\n        <Tooltip title=\"Drone DPS\" placement=\"left\" arrow>\r\n          <div style={{ height: 24 }}>\r\n            <DroneDamageSVG\r\n              color={\r\n                props.isError\r\n                  ? theme.palette.property.red\r\n                  : theme.palette.text.primary\r\n              }\r\n            />\r\n          </div>\r\n        </Tooltip>\r\n      }\r\n      typographyProps={{\r\n        style: {\r\n          fontSize: 14,\r\n          fontWeight: 700,\r\n          color: props.isError\r\n            ? theme.palette.property.red\r\n            : theme.palette.text.primary,\r\n        },\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n  rootChild: {\r\n    height: 20,\r\n    width: \"100%\",\r\n    padding: \"0px 0px 0px 0px\",\r\n  },\r\n\r\n  nested: {\r\n    padding: 0,\r\n    margin: 0,\r\n  },\r\n}));\r\n\r\nexport default function Damage(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [open, setOpen] = useState(true);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setOpen(!open);\r\n  }, [open]);\r\n\r\n  return (\r\n    <Grid container>\r\n      <List className={classes.root}>\r\n        <ListItem className={classes.rootChild} dense onClick={handleClick}>\r\n          <Grid item xs={1}></Grid>\r\n          <Grid item xs={4}>\r\n            <WeaponDps\r\n              label={`${props.stat.damage.turretLauncherDamage.effective.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={2}>\r\n            <WeaponAlpha\r\n              label={`${props.stat.damage.turretLauncherDamage.alpha.toFixed(\r\n                0\r\n              )}`}\r\n            />\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <DroneDps\r\n              label={`${props.stat.damage.droneDamage.max.toFixed(0)}`}\r\n              isError={\r\n                props.stat.resource.load.droneActive >\r\n                props.stat.resource.capacity.droneActive\r\n              }\r\n            />\r\n          </Grid>\r\n          <Grid item xs={1}></Grid>\r\n        </ListItem>\r\n        <Collapse in={open} timeout=\"auto\">\r\n          <DamageRangeListItem stat={props.stat} />\r\n        </Collapse>\r\n      </List>\r\n    </Grid>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Grid, useTheme } from \"@material-ui/core\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport FlagIcon from \"@material-ui/icons/Flag\";\r\n\r\nconst Cpu = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}tf`}\r\n      backgroundColor={theme.palette.property.blueSecondary}\r\n      color={theme.palette.property.blue}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\nconst Powergrid = (props) => {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <LinearProgressLabel\r\n      value={getPercent(props.load, props.output)}\r\n      label={`${getNum(props.load)}/${getNum(props.output)}MW`}\r\n      backgroundColor={theme.palette.property.redSecondary}\r\n      color={theme.palette.property.red}\r\n      Icon={\r\n        getPercent(props.load, props.output) >= 100 && (\r\n          <FlagIcon style={{ color: \"#ffffff\" }} fontSize=\"small\" />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default function Engineering(props) {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container>\r\n        <Grid item xs={12}>\r\n          <Cpu\r\n            load={props.stat.engineering.cpu.load}\r\n            output={props.stat.engineering.cpu.output}\r\n          />\r\n          <Powergrid\r\n            load={props.stat.engineering.pg.load}\r\n            output={props.stat.engineering.pg.output}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction getPercent(load, output) {\r\n  if (!load || !output) return 0;\r\n  if (load.constructor !== Number || output.constructor !== Number) return 0;\r\n\r\n  const percent = Number((load / output) * 100);\r\n  if (percent >= 100) return 100;\r\n  else return percent;\r\n}\r\nfunction getNum(data) {\r\n  if (!data || data.constructor !== Number) return 0;\r\n  else return data;\r\n}\r\n","import React from \"react\";\r\nimport { SvgIcon } from \"@material-ui/core\";\r\n\r\nexport const CapacitorChargeIcon = (props) => (\r\n  <SvgIcon>\r\n    <path\r\n      d=\" M 9.518 3.357 L 4.172 12.911 Q 5.394 15.954 9.319 16.238 L 15.148 6.712 Q 12.987 3.527 9.518 3.357 Z \"\r\n      fill={props.color || \"#000000\"}\r\n    />\r\n    <path\r\n      d=\" M 19.828 6.712 L 12.42 6.712 L 8.991 14.346 L 12.159 14.346 L 5.096 26.546 L 19.375 11.663 L 15.058 11.663 L 19.828 6.712 Z \"\r\n      fill={props.color || \"#000000\"}\r\n      strokeWidth=\"1.5\"\r\n      stroke={props.backgroundColor || \"#ffffff\"}\r\n    />\r\n  </SvgIcon>\r\n);\r\n","import React from \"react\";\r\nimport LinearProgressLabel from \"./LinearProgressLabel\";\r\nimport { CapacitorChargeIcon } from \"../../Icons/capacitorIcons\";\r\nimport { Tooltip, makeStyles, useTheme } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  tooltip: {\r\n    maxWidth: 80,\r\n  },\r\n}));\r\n\r\nexport default function Capacitor(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgressLabel\r\n        value={0}\r\n        label={`${(\r\n          props.stat.capacitor.ambientChargeRate +\r\n          props.stat.capacitor.boosterChargeRate -\r\n          props.stat.capacitor.activationUseRate\r\n        ).toFixed(2)}GJ/s`}\r\n        backgroundColor={theme.palette.background.paper}\r\n        Icon={\r\n          <Tooltip\r\n            classes={{ tooltip: classes.tooltip }}\r\n            //prettier-ignore\r\n            title={`Passive +${props.stat.capacitor.ambientChargeRate.toFixed(2)} \r\n            Active +${props.stat.capacitor.boosterChargeRate.toFixed(2)} \r\n            Active -${props.stat.capacitor.activationUseRate.toFixed(2)}`}\r\n            placement=\"left\"\r\n            arrow\r\n          >\r\n            <div style={{ height: 24 }}>\r\n              <CapacitorChargeIcon\r\n                color={theme.palette.text.primary}\r\n                backgroundColor={theme.palette.background.paper}\r\n              />\r\n            </div>\r\n          </Tooltip>\r\n        }\r\n        typographyProps={{\r\n          style: {\r\n            fontSize: 14,\r\n            fontWeight: 700,\r\n            color: theme.palette.text.primary,\r\n          },\r\n        }}\r\n      />\r\n      <LinearProgressLabel\r\n        value={props.stat.capacitor.stableLevel}\r\n        label={`${props.stat.capacitor.stableLevel}%`}\r\n        backgroundColor={theme.palette.property.orgSecondary}\r\n        color={theme.palette.property.org}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Resistance from \"./Resistance\";\r\nimport Resources from \"./Resouces\";\r\nimport Damage from \"./Damage\";\r\nimport Engineering from \"./Engineering\";\r\nimport Capacitor from \"./Capacitor\";\r\nimport Stat from \"./services/Stat\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function StatsSummary(props) {\r\n  useEffect(() => {\r\n    const stat = Stat.stat(props.fit);\r\n    props.setStat(stat);\r\n  }, [props.fitID]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Resources {...props} />\r\n      <Damage {...props} />\r\n      <Capacitor {...props} />\r\n      <Resistance {...props} />\r\n      <Engineering {...props} />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport Drawers from \"../Drawers/Drawers\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  Typography,\r\n  makeStyles,\r\n  useTheme,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport StatsSummary from \"./Stats/StatsSummary\";\r\nimport Stat from \"./Stats/services/Stat\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  editButton: {\r\n    color: theme.palette.button.color,\r\n    fontSize: 26,\r\n    fontWeight: 1000,\r\n    letterSpacing: -1.5,\r\n    lineHeight: 1,\r\n    width: \"auto\",\r\n  },\r\n}));\r\n\r\nconst EditButton = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Button\r\n      style={{\r\n        height: 70,\r\n        borderRadius: 0,\r\n        backgroundColor: props.backgroundColor,\r\n        marginBottom: 10,\r\n      }}\r\n      fullWidth\r\n      onClick={() => {\r\n        props.setOpen(!props.open);\r\n      }}\r\n    >\r\n      <Grid container item xs={2} justify=\"center\">\r\n        <Avatar\r\n          style={{\r\n            padding: 5,\r\n            width: 40,\r\n            height: 40,\r\n            backgroundColor: props.color,\r\n          }}\r\n        >\r\n          {!!props.fit?.ship?.typeID ? (\r\n            <img\r\n              draggable=\"false\"\r\n              style={{ width: 50, height: 50 }}\r\n              src={`https://images.evetech.net/types/${props.fit?.ship?.typeID}/icon?size=128`}\r\n            />\r\n          ) : (\r\n            \"\"\r\n          )}\r\n        </Avatar>\r\n      </Grid>\r\n      <Grid item xs={10}>\r\n        <Typography className={classes.editButton} align=\"center\">\r\n          {getFitCardTitle(props.open, props.fit.ship?.typeName)}\r\n        </Typography>\r\n      </Grid>\r\n    </Button>\r\n  );\r\n};\r\n\r\nexport default function FitCard(props) {\r\n  const [fit, setFit] = useState(false);\r\n  const [fitID, setFitID] = useState(false);\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [expand, setExpand] = useState(window.innerWidth < 1000 ? false : true);\r\n\r\n  const [stat, setStat] = useState(Stat.defaultStat);\r\n\r\n  const isInitialRender = useRef(true);\r\n  useEffect(() => {\r\n    if (!isInitialRender.current && !isSyncing.current) {\r\n      props.dispatchDrawersOpen({\r\n        type: open ? \"OPEN\" : \"CLOSE\",\r\n        tag: props.tag,\r\n        payload: open,\r\n      });\r\n    } else {\r\n      isInitialRender.current = false;\r\n      isSyncing.current = false;\r\n    }\r\n  }, [open]);\r\n\r\n  const isSyncing = useRef(false); // Too complicated.!\r\n  useEffect(() => {\r\n    setOpen(props.drawersOpen[props.tag]);\r\n    if (open !== props.drawersOpen[props.tag]) isSyncing.current = true;\r\n  }, [props.drawersOpen[props.tag]]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card\r\n        style={{ width: \"85%\", minWidth: 300, maxWidth: 600 }}\r\n        elevation={3}\r\n      >\r\n        <EditButton\r\n          fit={fit}\r\n          open={open}\r\n          setOpen={setOpen}\r\n          backgroundColor={props.backgroundColor}\r\n          color={props.color}\r\n        />\r\n        <StatsSummary fit={fit} fitID={fitID} stat={stat} setStat={setStat} />\r\n      </Card>\r\n\r\n      <Drawers\r\n        tag={props.tag}\r\n        open={open}\r\n        setOpen={setOpen}\r\n        backgroundColor={props.backgroundColor}\r\n        expand={expand}\r\n        setExpand={setExpand}\r\n        fitID={fitID}\r\n        setFitID={setFitID}\r\n        setFit={setFit}\r\n        setSlots={props.setSlots}\r\n        cache={props.cache}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction getFitCardTitle(open, typeName) {\r\n  if (!typeName)\r\n    return open\r\n      ? \"> CLICK HERE TO START FITTING <\"\r\n      : \"CLICK HERE TO START FITTING\";\r\n  else return open ? `> ${typeName} <` : typeName;\r\n}\r\n","import React from \"react\";\r\nimport { Stage, Layer, Arrow, Circle, Line, Text } from \"react-konva\";\r\nimport {\r\n  makeStyles,\r\n  Card,\r\n  Button,\r\n  Grid,\r\n  ButtonGroup,\r\n  Icon,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport { useReducer } from \"react\";\r\nimport { useTheme } from \"@material-ui/core/styles\";\r\nimport { useCallback } from \"react\";\r\nimport PanToolIcon from \"@material-ui/icons/PanTool\";\r\nimport ZoomInIcon from \"@material-ui/icons/ZoomIn\";\r\nimport ZoomOutIcon from \"@material-ui/icons/ZoomOut\";\r\nimport ReplayIcon from \"@material-ui/icons/Replay\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"85%\",\r\n    minWidth: 300,\r\n    maxWidth: 600,\r\n    height: \"80%\",\r\n  },\r\n}));\r\n\r\nconst hostileAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 200,\r\n    anchor2X: 75,\r\n    anchor2Y: 200,\r\n  },\r\n  vector: {\r\n    x: 50,\r\n    y: 0,\r\n    pX: 50,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction hostileAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return hostileAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\nconst onBoardAnchorInitial = {\r\n  anchors: {\r\n    anchor1X: 25,\r\n    anchor1Y: 25,\r\n    anchor2X: 25,\r\n    anchor2Y: 25,\r\n  },\r\n  vector: {\r\n    x: 0,\r\n    y: 0,\r\n    pX: 0,\r\n    pY: 0,\r\n  },\r\n};\r\nfunction onBoardAnchorReducer(state, action) {\r\n  switch (action.type) {\r\n    case \"anchor1\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"anchor2\":\r\n      return {\r\n        ...state,\r\n        anchors: { ...state.anchors, ...action.value },\r\n      };\r\n\r\n    case \"vector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, x: action.value.x, y: action.value.y },\r\n      };\r\n\r\n    case \"perfectVector\":\r\n      return {\r\n        ...state,\r\n        vector: { ...state.vector, pX: action.value.pX, pY: action.value.pY },\r\n      };\r\n    case \"reset\":\r\n      return onBoardAnchorInitial;\r\n    default:\r\n      return Error();\r\n  }\r\n}\r\n\r\nexport default function ShipCanvas(props) {\r\n  const [hostileAnchor, dispatchHostileAnchor] = useReducer(\r\n    hostileAnchorReducer,\r\n    hostileAnchorInitial\r\n  );\r\n  const [onBoardAnchor, dispatchOnBoardAnchor] = useReducer(\r\n    onBoardAnchorReducer,\r\n    onBoardAnchorInitial\r\n  );\r\n  const [distanceVector, setDistanceVector] = useState({\r\n    x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n    y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n  });\r\n  const [distance, setDistance] = useState(\r\n    Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100\r\n  );\r\n  const [stageWheel, setStageWheel] = useState(1);\r\n  const [stageScale, setStageScale] = useState(1);\r\n  const [stagePoint, setStagePoint] = useState({ x: 0, y: 0 });\r\n  const [isStageDrragable, setStageDraggable] = useState(false);\r\n\r\n  const theme = useTheme();\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      hostileAnchor.anchors.anchor2X - hostileAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      hostileAnchor.anchors.anchor2Y - hostileAnchor.anchors.anchor1Y;\r\n    dispatchHostileAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [hostileAnchor.anchors.anchor2X, hostileAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const vectorX =\r\n      onBoardAnchor.anchors.anchor2X - onBoardAnchor.anchors.anchor1X;\r\n    const vectorY =\r\n      onBoardAnchor.anchors.anchor2Y - onBoardAnchor.anchors.anchor1Y;\r\n    dispatchOnBoardAnchor({\r\n      type: \"vector\",\r\n      value: { x: vectorX, y: vectorY },\r\n    });\r\n  }, [onBoardAnchor.anchors.anchor2X, onBoardAnchor.anchors.anchor2Y]);\r\n\r\n  useEffect(() => {\r\n    const _distanceVector = {\r\n      x: hostileAnchor.anchors.anchor1X - onBoardAnchor.anchors.anchor1X,\r\n      y: hostileAnchor.anchors.anchor1Y - onBoardAnchor.anchors.anchor1Y,\r\n    };\r\n    const _distance =\r\n      Math.sqrt(\r\n        Math.pow(_distanceVector.x, 2) + Math.pow(_distanceVector.y, 2)\r\n      ) / 100;\r\n    setDistanceVector(_distanceVector);\r\n    setDistance(_distance);\r\n  }, [\r\n    hostileAnchor.anchors.anchor1X,\r\n    onBoardAnchor.anchors.anchor1X,\r\n    hostileAnchor.anchors.anchor1Y,\r\n    onBoardAnchor.anchors.anchor1Y,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    dispatchSituation();\r\n  }, []);\r\n\r\n  const dispatchSituation = useCallback(() => {\r\n    props.setSituation({\r\n      onboard: { ...onBoardAnchor },\r\n      hostile: { ...hostileAnchor },\r\n    });\r\n  }, [onBoardAnchor, hostileAnchor, distance]);\r\n\r\n  const handleResetClick = useCallback(() => {\r\n    setStagePoint({});\r\n    dispatchOnBoardAnchor({ type: \"reset\" });\r\n    dispatchHostileAnchor({ type: \"reset\" });\r\n  }, []);\r\n\r\n  const handleMagnifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 1.5);\r\n    setStageWheel(stageScale * 1.5);\r\n  }, [stageScale]);\r\n\r\n  const handleMinifyButton = useCallback(() => {\r\n    setStageScale(stageScale * 0.65);\r\n    setStageWheel(stageScale * 0.65);\r\n  }, [stageScale]);\r\n\r\n  const handleStageDrragable = useCallback(() => {\r\n    setStageDraggable(!isStageDrragable);\r\n  }, [isStageDrragable]);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Card className={classes.root} elevation={3}>\r\n        <Grid style={{ padding: 5 }} spacing={1} container justify=\"flex-end\">\r\n          <Grid item xs={8}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button onClick={handleMagnifyButton}>\r\n                <ZoomInIcon />\r\n              </Button>\r\n              <Button onClick={handleResetClick}>\r\n                <ReplayIcon />\r\n              </Button>\r\n              <Button onClick={handleMinifyButton}>\r\n                <ZoomOutIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n          <Grid item xs={4}>\r\n            <ButtonGroup fullWidth color=\"primary\">\r\n              <Button\r\n                variant={isStageDrragable ? \"contained\" : \"outlined\"}\r\n                onClick={handleStageDrragable}\r\n              >\r\n                <PanToolIcon />\r\n              </Button>\r\n            </ButtonGroup>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Stage\r\n          x={stagePoint.x}\r\n          y={stagePoint.y}\r\n          width={window.innerWidth}\r\n          height={window.innerHeight}\r\n          onWheel={handleWheel(setStageWheel, setStageScale)}\r\n          scaleX={stageWheel}\r\n          scaleY={stageWheel}\r\n          draggable={isStageDrragable}\r\n        >\r\n          <Layer>\r\n            <Text\r\n              x={onBoardAnchor.anchors.anchor1X + onBoardAnchor.vector.x}\r\n              y={onBoardAnchor.anchors.anchor1Y + onBoardAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(onBoardAnchor.vector.x, 2) +\r\n                    Math.pow(onBoardAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + hostileAnchor.vector.x}\r\n              y={hostileAnchor.anchors.anchor1Y + hostileAnchor.vector.y}\r\n              fill={theme.palette.text.primary}\r\n              text={`${(\r\n                Math.sqrt(\r\n                  Math.pow(hostileAnchor.vector.x, 2) +\r\n                    Math.pow(hostileAnchor.vector.y, 2)\r\n                ) * 3\r\n              ).toFixed(1)}m/s`}\r\n              fontSize={12 / stageScale}\r\n              offsetX={-2}\r\n            />\r\n            <Text\r\n              x={hostileAnchor.anchors.anchor1X + 12 / stageScale}\r\n              y={hostileAnchor.anchors.anchor1Y - 15 / stageScale}\r\n              fontSize={12 / stageScale}\r\n              fill={theme.palette.text.primary}\r\n              text={`${angleBetweenTwoVectors(\r\n                distanceVector,\r\n                hostileAnchor.vector\r\n              ).toFixed(0)}`}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor2X,\r\n                hostileAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.red}\r\n              fill={theme.palette.property.red}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor1X}\r\n              y={hostileAnchor.anchors.anchor1Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor1OnDragMove(\r\n                dispatchHostileAnchor,\r\n                hostileAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n            />\r\n            <Circle\r\n              x={hostileAnchor.anchors.anchor2X}\r\n              y={hostileAnchor.anchors.anchor2Y}\r\n              fill=\"#C0C0C0\"\r\n              opacity={0.1}\r\n              radius={10 / stageScale}\r\n              draggable\r\n              onDragMove={handleHostileAnchor2OnDragMove(dispatchHostileAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleHostileAnchor2OnDragEnd(\r\n                  dispatchHostileAnchor,\r\n                  hostileAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Arrow\r\n              pointerLength={4 / stageScale}\r\n              pointerWidth={4 / stageScale}\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                onBoardAnchor.anchors.anchor2X,\r\n                onBoardAnchor.anchors.anchor2Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.property.blue}\r\n              fill={theme.palette.property.blue}\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor1X}\r\n              y={onBoardAnchor.anchors.anchor1Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor1OnDragMove(\r\n                dispatchOnBoardAnchor,\r\n                onBoardAnchor\r\n              )}\r\n              onDragEnd={dispatchSituation}\r\n              on\r\n            />\r\n            <Circle\r\n              x={onBoardAnchor.anchors.anchor2X}\r\n              y={onBoardAnchor.anchors.anchor2Y}\r\n              radius={20 / stageScale}\r\n              draggable\r\n              onDragMove={handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor)}\r\n              onDragEnd={(e) => {\r\n                handleOnBoardAnchor2OnDragEnd(\r\n                  dispatchOnBoardAnchor,\r\n                  onBoardAnchor\r\n                )(e);\r\n                dispatchSituation();\r\n              }}\r\n            />\r\n            <Line\r\n              points={[\r\n                onBoardAnchor.anchors.anchor1X,\r\n                onBoardAnchor.anchors.anchor1Y,\r\n                hostileAnchor.anchors.anchor1X,\r\n                hostileAnchor.anchors.anchor1Y,\r\n              ]}\r\n              strokeWidth={2 / stageScale}\r\n              stroke={theme.palette.primary.main}\r\n              fill={theme.palette.primary.main}\r\n              dash={[5 / stageScale, 5 / stageScale]}\r\n            />\r\n            <Text\r\n              //prettier-ignore\r\n              x={\r\n              (onBoardAnchor.anchors.anchor1X + hostileAnchor.anchors.anchor1X) / 2\r\n            }\r\n              //prettier-ignore\r\n              y={\r\n              (onBoardAnchor.anchors.anchor1Y + hostileAnchor.anchors.anchor1Y) / 2\r\n            }\r\n              fill={theme.palette.text.primary}\r\n              fontSize={12 / stageScale}\r\n              text={`${distance.toFixed(2)}km`}\r\n              offsetX={-2}\r\n              /* rotation={handleRotation(distanceVector)} */\r\n            />\r\n          </Layer>\r\n        </Stage>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\nfunction handleHostileAnchor1OnDragMove(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + hostileAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + hostileAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragMove(dispatchHostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleHostileAnchor2OnDragEnd(dispatchHostileAnchor, hostileAnchor) {\r\n  return (e) => {\r\n    dispatchHostileAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - hostileAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - hostileAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\n\r\nfunction handleOnBoardAnchor1OnDragMove(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor1\",\r\n      value: { anchor1X: e.target.attrs.x, anchor1Y: e.target.attrs.y },\r\n    });\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: {\r\n        anchor2X: e.target.attrs.x + onBoardAnchor.vector.pX,\r\n        anchor2Y: e.target.attrs.y + onBoardAnchor.vector.pY,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragMove(dispatchOnBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"anchor2\",\r\n      value: { anchor2X: e.target.attrs.x, anchor2Y: e.target.attrs.y },\r\n    });\r\n  };\r\n}\r\nfunction handleOnBoardAnchor2OnDragEnd(dispatchOnBoardAnchor, onBoardAnchor) {\r\n  return (e) => {\r\n    dispatchOnBoardAnchor({\r\n      type: \"perfectVector\",\r\n      value: {\r\n        pX: e.target.attrs.x - onBoardAnchor.anchors.anchor1X,\r\n        pY: e.target.attrs.y - onBoardAnchor.anchors.anchor1Y,\r\n      },\r\n    });\r\n  };\r\n}\r\nfunction handleWheel(setStageWheel, setStageScale) {\r\n  return (e) => {\r\n    e.evt.preventDefault();\r\n\r\n    const scaleBy = 1.5;\r\n    const stage = e.target.getStage();\r\n    const oldScale = stage.scaleX();\r\n\r\n    const newScale = e.evt.deltaY > 0 ? oldScale * scaleBy : oldScale / scaleBy;\r\n    setStageScale(newScale);\r\n    setStageWheel(newScale);\r\n  };\r\n}\r\nfunction innerProduct(distanceVector, velocityVector) {\r\n  return (\r\n    distanceVector.x * velocityVector.x + distanceVector.y * velocityVector.y\r\n  );\r\n}\r\nfunction vectorLength(vector) {\r\n  return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n}\r\nfunction angleBetweenTwoVectors(distanceVector, velocityVector) {\r\n  const cosValue =\r\n    innerProduct(distanceVector, velocityVector) /\r\n    (vectorLength(distanceVector) * vectorLength(velocityVector));\r\n  return Math.acos(cosValue) * (180 / Math.PI);\r\n}\r\n","import { findAttributebyID } from \"../../../../services/dataManipulation/findAttributes\";\r\nimport Fit from \"../../../../fitter/src/Fit\";\r\nimport Stat from \"./Stat\";\r\n\r\nconst capPrioritySet = {\r\n  alwaysOn: 0,\r\n  mostTrivial: 10,\r\n  turretDamage: 1,\r\n  shieldHarden: 2,\r\n  shieldBoost: 2,\r\n  shieldBoostAncillaryFueled: 2,\r\n  shieldBoostAncillary: 5,\r\n  armorHardener: 2,\r\n  armorBoost: 2,\r\n  armorBoostAncillaryFueled: 3,\r\n  armorBoostAncillary: 5,\r\n  damageControl: 0,\r\n  structureBoost: 1,\r\n  capacitorNeutralizer: 3,\r\n  capacitorTransmitter: 4,\r\n};\r\n\r\nexport default class Summary extends Stat {\r\n  static updateSummaries = (summarizedSlots, situation) => {\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (slot) => {\r\n        if (!slot.item) return;\r\n        /*  if (slot?.summary?.activationState?.isActive === false) */\r\n        // MUTATION!!\r\n        slot.item.typeState = \"passive\";\r\n        /*  else if (slot?.summary?.activationState?.isActive === true); */\r\n        // MUTATION!!\r\n        /*   slot.item.typeState = \"activation\"; */\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    const fit = Fit.apply(summarizedSlots);\r\n    const shipSummary = Summary.getSummary_ship(fit, situation);\r\n    shipSummary.load = summarizedSlots.summary.load;\r\n    // MUTATION!!\r\n    Object.assign(summarizedSlots.summary, shipSummary);\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_modules(slot);\r\n        const _slot = SimFit.toPath(summarizedSlots, summary.path);\r\n        if (!summary || !_slot) return false;\r\n\r\n        if (summary.activationState)\r\n          summary.activationState = _slot.summary.activationState;\r\n        if (!!summary.load) summary.load = _slot.summary.load;\r\n\r\n        // MUTATION!!\r\n        Object.assign(_slot.summary, summary);\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_drones(slot);\r\n        const _slot = SimFit.toPath(summarizedSlots, summary.path);\r\n        if (!summary || !_slot) return false;\r\n\r\n        if (summary.activationState)\r\n          summary.activationState = _slot.summary.activationState;\r\n        if (!!summary.load) summary.load = _slot.summary.load;\r\n\r\n        // MUTATION!!\r\n        Object.assign(_slot.summary, summary);\r\n      },\r\n      {\r\n        isIterate: {\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    return summarizedSlots;\r\n  };\r\n\r\n  static addSummaries = (slots, situation) => {\r\n    const _slots = Summary.addSummaries_duplicateSlots(slots);\r\n    const fit = Fit.apply(_slots);\r\n\r\n    if (!!_slots) _slots[\"summary\"] = Summary.getSummary_ship(fit, situation);\r\n\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_modules(slot);\r\n        summary[\"root\"] = _slots;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.item) return false;\r\n\r\n        const summary = Summary.#getSummaries_drones(slot);\r\n        summary[\"root\"] = _slots;\r\n        const _slot = !!summary && SimFit.toPath(_slots, summary.path);\r\n        if (!!_slot) _slot[\"summary\"] = summary;\r\n      },\r\n      {\r\n        isIterate: {\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n    return _slots;\r\n  };\r\n  static addSummaries_duplicateSlots = (slots) => {\r\n    const _droneSlots = Summary.addSummaries_duplicateDroneSlots(slots);\r\n    const _slots = JSON.parse(JSON.stringify(slots));\r\n    _slots.droneSlots = _droneSlots;\r\n\r\n    return _slots;\r\n  };\r\n  // duplicate droneslots to number of typecount\r\n  static addSummaries_duplicateDroneSlots = (slots) => {\r\n    let slotCount = 0;\r\n    return slots.droneSlots.reduce((acc, slot) => {\r\n      const slotString = JSON.stringify(slot);\r\n      const _slots = new Array(slot.item.typeCount || 1).fill(false).map(() => {\r\n        const _slot = JSON.parse(slotString);\r\n        if (!!_slot.item) {\r\n          _slot.typeCount = undefined;\r\n          _slot.item.domainID = `droneSlots.${slotCount}.item`;\r\n        }\r\n        slotCount++;\r\n\r\n        return _slot;\r\n      });\r\n\r\n      return acc.concat(_slots);\r\n    }, []);\r\n  };\r\n\r\n  static #getSummaries_modules = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const charge = slot.charge;\r\n\r\n    const structureHP = findAttributebyID(item, 9); //attributeID: 9, attributeName: \"Structure Hitpoints\"\r\n    const heatDamage = findAttributebyID(item, 1211); // attributeID: 1211, attributeName: \"Heat Damage\"\r\n\r\n    const moduleSummary = {\r\n      load: {\r\n        structure: { HP: structureHP },\r\n      },\r\n      capacity: {\r\n        structure: { HP: structureHP },\r\n        misc: { heatDamage: heatDamage },\r\n      },\r\n    };\r\n\r\n    const activationDataSet = Summary.createActivationDataSet(slot);\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\"); //eg)highSlots.1\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        let summary = {};\r\n        let operation = false;\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_damage(item, charge);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          case 4: // effectID: 4, effectName: \"shieldBoosting\"\r\n          case 26: // effectID: 26, effectName: \"structureRepair\"\r\n          case 4936: // effectID: 4936, effectName: \"fueledShieldBoosting\"\r\n          case 27: // effectID: 27, effectName: \"armorRepair\"\r\n          case 5275: // effectID: 5275, effectName: \"fueledArmorRepair\"\r\n            summary = Summary.getSummary_defense(item, charge);\r\n            operation = \"defense\";\r\n            break;\r\n          case 48: //effectID: 48, effectName: \"powerBooster\"\r\n          case 6187: //effectID: 6187, effectName: \"energyNeutralizerFalloff\"\r\n          case 6197: //effectID: 6197, effectName: \"energyNosferatuFalloff\"\r\n          case 6148: // effectID: 6184, effectName: \"shipModuleRemoteCapacitorTransmitter\"\r\n            summary = Summary.getSummary_capacitor(item, charge);\r\n            operation = \"capacitor\";\r\n            break;\r\n          case 5230: // effectID: 5230, effectName: \"modifyActiveShieldResonancePostPercent\"\r\n          case 4928: // effectID: 4928, effectName: \"adaptiveArmorHardener\" //TODO: reactive armor bonus should be calculated\r\n          case 5231: // effectID: 5231, effectName: \"modifyActiveArmorResonancePostPercent\"\r\n          case 7012: // effectID: 7012, effectName: \"moduleBonusAssaultDamageControl\"\r\n            operation = \"temporary\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n\r\n        const activationPriority = Summary.getActivationPriority(efft);\r\n        activationDataSet.activationState[\"activationPriority\"] =\r\n          activationPriority;\r\n\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else return { ...moduleSummary, ...effectSummary[0], path };\r\n  };\r\n  static #getSummaries_drones = (slot) => {\r\n    if (!slot?.item?.typeEffectsStats) return false;\r\n    const item = slot.item;\r\n    const isSentry = item.marketGroupID === 911; // marketGroupID: 911 \"marketGroupName\": \"Sentry Drones\"\r\n\r\n    // These functions from Stat class is targeted for ship. modified to fit in drone in this case\r\n    const defense = this.defense_resistance({ ship: item });\r\n    const capacitor = this.capacitor_getChargeInfo({ ship: item });\r\n\r\n    const misc = this.miscellaneous({ ship: item });\r\n    const orbitVelocity = findAttributebyID(item, 508); // attributeID: 508, attributeName: \"Orbit Velocity\"\r\n    const orbitRange = findAttributebyID(item, 416); //attributeID: 416, attributeName: \"entityFlyRange\"\r\n    const maximumVelocity = findAttributebyID(item, 37); // attributeID: 37, attributeName: \"Maximum Velocity\"\r\n    misc.propulsion = {\r\n      ...misc.propulsion,\r\n      orbitVelocity,\r\n      orbitRange,\r\n      maximumVelocity,\r\n    };\r\n    const droneSumamry = {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n    };\r\n    const path = item.domainID.split(\".\").slice(0, 2).join(\".\");\r\n    const effectSummary = item.typeEffectsStats\r\n      .map((efft) => {\r\n        const activationDataSet = Summary.createActivationDataSet(slot);\r\n        let summary = {};\r\n        let operation = false;\r\n\r\n        switch (efft.effectID) {\r\n          case 101: // effectID: 101, effectName: \"useMissiles\"\r\n          case 34: // effectID: 34, effectName: \"projectileFired\"\r\n          case 10: // effectID: 10, effectName: \"targetAttack\"\r\n          case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n            summary = Summary.getSummary_drone(item);\r\n            if (!summary.damagePerAct.alpha) return false;\r\n            operation = \"damage\";\r\n            break;\r\n          default:\r\n            return false;\r\n        }\r\n        return { ...summary, ...activationDataSet, operation };\r\n      })\r\n      .filter((summary) => !!summary);\r\n\r\n    const situation_decription =\r\n      \"Currently situation is not calculated BUT! always hitted by smart bomb\";\r\n\r\n    if (effectSummary.length > 1)\r\n      console.error(\r\n        \"ERR: more than one summary produced in single module\",\r\n        slot\r\n      );\r\n    else\r\n      return {\r\n        ...droneSumamry,\r\n        ...effectSummary[0],\r\n        situation_decription,\r\n        isSentry,\r\n        isDrone: true,\r\n        path,\r\n      };\r\n  };\r\n  static createActivationDataSet = (slot) => {\r\n    const activationInfo = this.getActivationInfo(slot.item, slot.charge);\r\n\r\n    return {\r\n      activationInfo,\r\n      activationState: {\r\n        isActive: false,\r\n        lastActivation: 0,\r\n        nextActivation: 0,\r\n        nextActivationTick: 0,\r\n        activationLeft: activationInfo.activationLimit,\r\n      },\r\n    };\r\n  };\r\n  static getActivationPriority = (efft) => {\r\n    let activationPriority = 10;\r\n    switch (efft.effectID) {\r\n      case 6197: //effectID: 6197, effectName: \"energyNosferatuFalloff\"\r\n      case 48: //effectID: 48, effectName: \"powerBooster\"\r\n        activationPriority = capPrioritySet.alwaysOn;\r\n        break;\r\n      case 101: // effectID: 101, effectName: \"useMissiles\"\r\n      case 34: // effectID: 34, effectName: \"projectileFired\"\r\n      case 10: // effectID: 10, effectName: \"targetAttack\"\r\n      case 6995: // effectID: 6995, effectName: \"targetDisintegratorAttack\"\r\n        activationPriority = capPrioritySet.turretDamage;\r\n        break;\r\n      case 4: // effectID: 4, effectName: \"shieldBoosting\"\r\n        activationPriority = capPrioritySet.shieldBoost;\r\n        break;\r\n      case 26: // effectID: 26, effectName: \"structureRepair\"\r\n        activationPriority = capPrioritySet.structureBoost;\r\n        break;\r\n      case 4936: // effectID: 4936, effectName: \"fueledShieldBoosting\"\r\n        activationPriority = capPrioritySet.shieldBoostAncillaryFueled;\r\n        break;\r\n      case 27: // effectID: 27, effectName: \"armorRepair\"\r\n        activationPriority = capPrioritySet.armorBoost;\r\n        break;\r\n      case 5275: // effectID: 5275, effectName: \"fueledArmorRepair\"\r\n        activationPriority = capPrioritySet.armorBoostAncillaryFueled;\r\n        break;\r\n      case 6187: //effectID: 6187, effectName: \"energyNeutralizerFalloff\"\r\n        activationPriority = capPrioritySet.capacitorNeutralizer;\r\n        break;\r\n      case 6148: // effectID: 6184, effectName: \"shipModuleRemoteCapacitorTransmitter\"\r\n        activationPriority = capPrioritySet.capacitorTransmitter;\r\n        break;\r\n      case 5230: // effectID: 5230, effectName: \"modifyActiveShieldResonancePostPercent\"\r\n        activationPriority = capPrioritySet.shieldHardener;\r\n        break;\r\n      case 4928: // effectID: 4928, effectName: \"adaptiveArmorHardener\"\r\n      case 5231: // effectID: 5231, effectName: \"modifyActiveArmorResonancePostPercent\"\r\n        activationPriority = capPrioritySet.armorHardener;\r\n        break;\r\n      case 7012: // effectID: 7012, effectName: \"moduleBonusAssaultDamageControl\"\r\n        activationPriority = capPrioritySet.damageControl;\r\n        break;\r\n      default:\r\n        activationPriority = capPrioritySet.mostTrivial;\r\n    }\r\n\r\n    return activationPriority;\r\n  };\r\n  static getSummary_ship = (fit, situation) => {\r\n    const defense = this.defense_resistance(fit);\r\n    const misc = this.miscellaneous(fit);\r\n    const capacitor = this.capacitor_getChargeInfo(fit);\r\n\r\n    return {\r\n      load: {\r\n        armor: { HP: defense.armor.HP },\r\n        shield: { HP: defense.shield.HP },\r\n        structure: { HP: defense.structure.HP },\r\n        capacitor: { HP: capacitor.HP },\r\n      },\r\n      capacity: { ...defense, ...misc, capacitor },\r\n      situation: situation,\r\n    };\r\n  };\r\n\r\n  static getSummary_damage(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, charge);\r\n    const range = this.damage_range(item, charge);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_drone(item) {\r\n    if (!item) return false;\r\n\r\n    const damagePerAct = this.damage_damagePerAct(item, item);\r\n    const range = this.damage_range(item, item);\r\n\r\n    return { damagePerAct, range };\r\n  }\r\n  static getSummary_defense(item, charge) {\r\n    if (!item) return false;\r\n\r\n    const bonusPerAct = this.defense_getBonusPerAct(item, charge);\r\n\r\n    return { bonusPerAct: { self: bonusPerAct } };\r\n  }\r\n  static getSummary_capacitor(item, charge) {\r\n    if (!item) return false;\r\n    const booster_bonusPerAct = findAttributebyID(charge, 67) || 0; //attributeID: 67, attributeName: \"Capacitor Bonus\"\r\n    const transfer_bonusPerAct = findAttributebyID(item, 90) || 0; // attributeID: 90, attributeName: \"Energy transfer amount\"\r\n    const neut_bonusPerAct = findAttributebyID(item, 97) || 0; // attributeID: 97, attributeName: \"Neutralization Amount\"\r\n\r\n    const isNosferatuBloodRaiderOverriden = findAttributebyID(item, 1945) === 1; //attributeID: 1945, attributeName: \"nosOverride\"\r\n    const isCapacitorTransmitter = !!findAttributebyID(item, 3423); //attributeID: 182, attributeName: \"Primary Skill required\" (3423: capacitor emission system)\r\n    const isNosferatu = !isCapacitorTransmitter && !!transfer_bonusPerAct;\r\n\r\n    const bonusPerAct_self = isCapacitorTransmitter\r\n      ? 0\r\n      : booster_bonusPerAct + transfer_bonusPerAct;\r\n    const bonusPerAct_target = isCapacitorTransmitter\r\n      ? transfer_bonusPerAct\r\n      : -transfer_bonusPerAct - neut_bonusPerAct;\r\n\r\n    const optimalRange = findAttributebyID(item, 54); //attributeID: 54, attributeName: \"Optimal Range\"\r\n    const falloffRange = findAttributebyID(item, 2044); //attributeID: 2044, attributeName: \"Effectiveness Falloff\"\r\n\r\n    return {\r\n      bonusPerAct: { self: bonusPerAct_self, target: bonusPerAct_target },\r\n      range: { optimalRange, falloffRange },\r\n      isNosferatuBloodRaiderOverriden,\r\n      isCapacitorTransmitter,\r\n      isNosferatu,\r\n    };\r\n  }\r\n}\r\n\r\nclass SimFit extends Fit {\r\n  static changeStateOfModule(slots, path, state) {\r\n    if (![\"overload\", \"activation\", \"passive\", \"offline\"].includes(state))\r\n      return false;\r\n\r\n    const targetSlot = this.toPath(slots, path);\r\n    if (!targetSlot || !targetSlot.item) return false;\r\n\r\n    targetSlot.item.typeState = state;\r\n    const fit = this.apply(slots);\r\n    return fit;\r\n  }\r\n  static toPath(slots, path) {\r\n    if (!slots || !path) return {};\r\n    return path.split(\".\").reduce((p, c) => (p && p[c]) || undefined, slots);\r\n  }\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport function useAlwaysActivationInterval(callback, delay) {\r\n  const pauseFlag = useRef(false);\r\n  const savedCallback = useRef();\r\n  const interval = useRef(false);\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      tick();\r\n      interval.current = setInterval(() => {\r\n        if (pauseFlag.current === true) {\r\n          clearInterval(interval.current);\r\n          pauseFlag.current = false;\r\n        } else tick();\r\n      }, delay);\r\n      return () => {\r\n        pauseFlag.current = true;\r\n      };\r\n    }\r\n  }, [delay]);\r\n\r\n  // clear interval at componenet dismount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (interval.current) {\r\n        clearInterval(interval.current);\r\n      }\r\n    };\r\n  }, []);\r\n}\r\n\r\nexport function useProgressCircleInterval(callback, delay) {\r\n  const pauseFlag = useRef(false);\r\n  const savedCallback = useRef();\r\n  const interval = useRef(false);\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      tick();\r\n      interval.current = setInterval(() => {\r\n        tick();\r\n        if (pauseFlag.current === true) {\r\n          clearInterval(interval.current);\r\n          pauseFlag.current = false;\r\n        }\r\n      }, delay);\r\n      return () => {\r\n        pauseFlag.current = true;\r\n      };\r\n    }\r\n  }, [delay]);\r\n\r\n  // clear interval at componenet dismount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (interval.current) clearInterval(interval.current);\r\n    };\r\n  }, []);\r\n}\r\n\r\nexport function useInstaActivationInterval(callback, delay) {\r\n  const pauseFlag = useRef(false);\r\n  const savedCallback = useRef();\r\n  const interval = useRef(false);\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      tick();\r\n      interval.current = setInterval(() => {\r\n        if (pauseFlag.current === true) {\r\n          clearInterval(interval.current);\r\n          pauseFlag.current = false;\r\n        } else tick();\r\n      }, delay);\r\n      return () => {\r\n        pauseFlag.current = true;\r\n      };\r\n    }\r\n  }, [delay]);\r\n\r\n  // clear interval at componenet dismount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (interval.current) clearInterval(interval.current);\r\n    };\r\n  }, []);\r\n}\r\n\r\nexport function useLazyActivationInterval(callback, delay) {\r\n  const pauseFlag = useRef(false);\r\n  const savedCallback = useRef();\r\n  const interval = useRef(false);\r\n\r\n  // Remember the latest callback.\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  // Set up the interval.\r\n  useEffect(() => {\r\n    function tick() {\r\n      savedCallback.current();\r\n    }\r\n    if (delay !== null) {\r\n      interval.current = setInterval(() => {\r\n        tick();\r\n        if (pauseFlag.current === true) {\r\n          clearInterval(interval.current);\r\n          pauseFlag.current = false;\r\n        }\r\n      }, delay);\r\n      return () => {\r\n        pauseFlag.current = true;\r\n      };\r\n    }\r\n  }, [delay]);\r\n\r\n  // clear interval at componenet dismount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (interval.current) clearInterval(interval.current);\r\n    };\r\n  }, []);\r\n}\r\n","export default class EveMath {\r\n  static getAmbientChargeRateMath(Cmax, Cnow, Tchg) {\r\n    return ((10 * Cmax) / Tchg) * (Math.sqrt(Cnow / Cmax) - Cnow / Cmax) || 0;\r\n  }\r\n  static getTurretAcurracy(summary, owner, target) {\r\n    const onBoardVector = owner.summary.situation.vector;\r\n    const hostileVector = target.summary.situation.vector;\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const trackingValue =\r\n      summary.range.tracking * (40000 / summary.range.signatureResolution);\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n\r\n    const _angularVelocity = EveMath.#getTurretAcurracy_angularVelocuty(\r\n      distance,\r\n      distanceVector,\r\n      onBoardVector,\r\n      hostileVector\r\n    );\r\n    const _trackingPart = EveMath.#getTurretAcurracy_trackingPart(\r\n      _angularVelocity,\r\n      trackingValue,\r\n      signatureRadius\r\n    );\r\n\r\n    const trackingModifier = Math.pow(0.5, _trackingPart);\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    return (trackingModifier * rangeModifier).toFixed(3);\r\n  }\r\n  static getLauncherAccuracy(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    return summary.range.optimalRange < distance * 1000 ? 0 : 1;\r\n  }\r\n  static getDroneAccracy(summary, owner, target) {\r\n    // owner is owner of drone! which is ship\r\n    if (summary.isSentry)\r\n      return EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n    const targetUnitVector = EveMath.#common_makeUnitVector(\r\n      target.summary.situation.vector\r\n    );\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n    const isChasing =\r\n      summary.capacity.propulsion.orbitVelocity < targetVelocity;\r\n    if (isChasing) {\r\n      const droneAccuracyModifier = EveMath.#getDroneAccracy_getAccuracyModifier(\r\n        summary,\r\n        targetVelocity\r\n      );\r\n      const absoluteVelocity = summary.capacity.propulsion.orbitVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      };\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return (\r\n        EveMath.getTurretAcurracy(summary, droneSituationsummary, target) *\r\n        droneAccuracyModifier\r\n      );\r\n    } else {\r\n      const absoluteVelocity =\r\n        summary.capacity.propulsion.orbitVelocity + targetVelocity;\r\n      const droneVector = {\r\n        x: targetUnitVector.x * (absoluteVelocity / 3), // Currently 1px = 3m/s\r\n        y: targetUnitVector.y * (absoluteVelocity / 3),\r\n      }; // drone positions at perpendicular to targetVector\r\n      const droneSituationsummary = {\r\n        summary: {\r\n          situation: {\r\n            anchors: {\r\n              anchor1X:\r\n                target.summary.situation.anchors.anchor1X +\r\n                (targetUnitVector.y * summary.capacity.propulsion.orbitRange) /\r\n                  10, // Currently 1px = 10m\r\n              anchor1Y:\r\n                target.summary.situation.anchors.anchor1Y -\r\n                (targetUnitVector.x * summary.capacity.propulsion.orbitRange) /\r\n                  10,\r\n            },\r\n            vector: droneVector,\r\n          },\r\n        },\r\n      };\r\n      return EveMath.getTurretAcurracy(summary, droneSituationsummary, target);\r\n    }\r\n  }\r\n  static #getDroneAccracy_getAccuracyModifier = (summary, targetVelocity) => {\r\n    // Estimated modifier - drone movement is too complicated simplify the situation when target velocity is higher than orbit velocity\r\n    //prettier-ignore\r\n    const value = 1 -targetVelocity /\r\n          (summary.capacity.propulsion.maximumVelocity - summary.capacity.propulsion.orbitVelocity);\r\n    if (value >= 1) return 1;\r\n    return value >= 0 ? value : 0.01;\r\n  };\r\n  static getLauncherDamageModifier(summary, target) {\r\n    const signatureRadius = target.summary.capacity.misc.signatureRadius;\r\n    const explosionRadius = summary.range.explosionRadius;\r\n    const explosionVelocity = summary.range.explosionVelocity;\r\n    const damageReductionFactor = summary.range.damageReductionFactor;\r\n    const targetVelocity =\r\n      Math.sqrt(\r\n        Math.pow(target.summary.situation.vector.x, 2) +\r\n          Math.pow(target.summary.situation.vector.y, 2)\r\n      ) * 3;\r\n\r\n    const simplePart = signatureRadius / explosionRadius;\r\n    const complexPart = Math.pow(\r\n      (signatureRadius * explosionVelocity) /\r\n        (explosionRadius * targetVelocity),\r\n      damageReductionFactor\r\n    );\r\n\r\n    return Math.min(1, simplePart, complexPart);\r\n  }\r\n  static getTurretRandomDamageModifier() {\r\n    const randomDamageModifier = Math.random();\r\n    return randomDamageModifier < 0.01 ? 3 : randomDamageModifier + 0.49;\r\n  }\r\n  static getRangeModifier(summary, owner, target) {\r\n    const distanceVector = {\r\n      x:\r\n        target.summary.situation.anchors.anchor1X -\r\n        owner.summary.situation.anchors.anchor1X,\r\n      y:\r\n        target.summary.situation.anchors.anchor1Y -\r\n        owner.summary.situation.anchors.anchor1Y,\r\n    };\r\n    const distance =\r\n      Math.sqrt(Math.pow(distanceVector.x, 2) + Math.pow(distanceVector.y, 2)) /\r\n      100;\r\n\r\n    const optimal = summary.range.optimalRange;\r\n    const falloff = summary.range.falloffRange;\r\n    if (distance * 1000 > optimal + 3 * falloff) return 0;\r\n\r\n    const denominator = falloff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    const _distancePart = Math.pow(numerator / denominator, 2);\r\n\r\n    return Math.pow(0.5, _distancePart);\r\n  }\r\n\r\n  static #getTurretAcurracy_trackingPart = (\r\n    angularVelocity,\r\n    trackingValue,\r\n    signatureRadius\r\n  ) => {\r\n    const denominator = trackingValue * signatureRadius;\r\n    const numerator = angularVelocity * 40000;\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_distancePart = (optimal, fallOff, distance) => {\r\n    const denominator = fallOff;\r\n    const numerator = Math.max(0, distance * 1000 - optimal);\r\n    return Math.pow(numerator / denominator, 2);\r\n  };\r\n  static #getTurretAcurracy_angularVelocuty = (\r\n    distance,\r\n    distanceVector,\r\n    onBoardVector,\r\n    hostileVector\r\n  ) => {\r\n    if (\r\n      EveMath.#getTurretAcurracy_validateVector(distanceVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(onBoardVector) &&\r\n      EveMath.#getTurretAcurracy_validateVector(hostileVector)\r\n    ) {\r\n      const perpendicularVector = { x: -distanceVector.y, y: distanceVector.x };\r\n      const perpendicularUnitVector = EveMath.#common_makeUnitVector(\r\n        perpendicularVector\r\n      );\r\n      const hostileOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        hostileVector\r\n      );\r\n      const onBoardOrbitalVelocity = EveMath.#getTurretAcurracy_innerProduct(\r\n        perpendicularUnitVector,\r\n        onBoardVector\r\n      );\r\n      const trueObitalVelocity =\r\n        (hostileOrbitalVelocity - onBoardOrbitalVelocity) * 3;\r\n      return trueObitalVelocity / (distance * 1000);\r\n    } else return false;\r\n  };\r\n  static #getTurretAcurracy_innerProduct = (unitVector, velocityVector) => {\r\n    return unitVector.x * velocityVector.x + unitVector.y * velocityVector.y;\r\n  };\r\n  static #getTurretAcurracy_validateVector = (vector) => {\r\n    if (vector.x !== undefined && vector.y !== undefined) return true;\r\n    else return false;\r\n  };\r\n  static #common_makeUnitVector = (vector) => {\r\n    const length = Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2));\r\n    return { x: vector.x / length, y: vector.y / length };\r\n  };\r\n}\r\n","import Fit from \"../../../../fitter/src/Fit\";\r\nimport EveMath from \"./EveMath\";\r\nimport Summary from \"./Summary\";\r\n\r\nexport default class Simulator {\r\n  static test(slots, fit1, situation) {\r\n    const summarizedSlots1 = Summary.addSummaries(slots, situation.onboard);\r\n    const summarizedSlots2 = Summary.addSummaries(fit1, situation.hostile);\r\n    console.log(summarizedSlots1, summarizedSlots2, situation);\r\n\r\n    Fit.mapSlots(\r\n      summarizedSlots1,\r\n      (slot) => {\r\n        if (!slot?.summary?.activationState) return false;\r\n        slot.summary.activationState.isActive = true;\r\n        slot.summary.activationState.nextActivationTick = 0;\r\n        slot.summary.activationState.nextActivation = 0;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    console.log(\r\n      \"CAPACITOR_BY_LEVEL\",\r\n      HAL.manageActivation_getCapUsageLevels(summarizedSlots1)\r\n    );\r\n    const capLog = [];\r\n    for (let i = 0; i < 2; i++) {\r\n      const schedules = HAL.getSchedules(summarizedSlots1, summarizedSlots2, i);\r\n      console.log(schedules);\r\n      HAL.manageSchedules(schedules, summarizedSlots1, situation.onboard);\r\n\r\n      capLog.push({ x: i, y: summarizedSlots1.summary.load.capacitor.HP });\r\n    }\r\n\r\n    console.log(capLog);\r\n  }\r\n\r\n  static simulate_oneTick = (owner, target, tick) => {\r\n    Simulator.simulate_capacitor(owner);\r\n    Simulator.simulate_shield(owner);\r\n    Fit.mapSlots(\r\n      fit,\r\n      (slot) => {\r\n        if (!slot.summary) return false;\r\n\r\n        switch (slot.summary.operation) {\r\n          case \"damage\":\r\n            Simulator.activateDamage(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"defense\":\r\n            Simulator.activateDefense(slot.summary, owner, target, tick);\r\n            break;\r\n          case \"capacitor\":\r\n            Simulator.activateCapacitor(slot.summary, owner, target, tick);\r\n            break;\r\n        }\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static simulate_capacitor = (target) => {\r\n    const capacitorState = target.summary.load.capacitor;\r\n    const capacitorInfo = target.summary.capacity.capacitor;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      capacitorInfo.HP,\r\n      capacitorState.HP,\r\n      capacitorInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    capacitorState.HP += ambientChargeRate;\r\n    if (capacitorState.HP === 0) capacitorState.HP = 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  static simulate_shield = (target) => {\r\n    const shieldState = target.summary.load.shield;\r\n    const shieldInfo = target.summary.capacity.shield;\r\n\r\n    const ambientChargeRate = EveMath.getAmbientChargeRateMath(\r\n      shieldInfo.HP,\r\n      shieldState.HP,\r\n      shieldInfo.bonusRate\r\n    );\r\n\r\n    // MUTATION!\r\n    shieldState.HP += ambientChargeRate;\r\n    if (shieldState.HP === 0) shieldState.HP += 1;\r\n\r\n    return ambientChargeRate;\r\n  };\r\n  //Currently target boost (remote armor repair is nor possible)\r\n  static activateDefense = (summary) => {\r\n    const owner = summary.root;\r\n\r\n    // MUTATION!\r\n    owner.summary.load.shield.HP += summary.bonusPerAct.self.shield;\r\n    if (owner.summary.capacity.shield.HP < owner.summary.load.shield.HP)\r\n      owner.summary.load.shield.HP = owner.summary.capacity.shield.HP;\r\n\r\n    owner.summary.load.armor.HP += summary.bonusPerAct.self.armor;\r\n    if (owner.summary.capacity.armor.HP < owner.summary.load.armor.HP)\r\n      owner.summary.load.armor.HP = owner.summary.capacity.armor.HP;\r\n\r\n    owner.summary.load.structure.HP += summary.bonusPerAct.self.structure;\r\n    if (owner.summary.capacity.structure.HP < owner.summary.load.structure.HP)\r\n      owner.summary.load.structure.HP = owner.summary.capacity.structure.HP;\r\n    /*  } */\r\n  };\r\n\r\n  static activateDamage = (summary) => {\r\n    const owner = summary.isDrone ? summary : summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateDamage_getSituationalModifiedSummary(summary, owner, target);\r\n    //prettier-ignore\r\n    const alpha = Simulator.activateDamage_getAlpha(situationalModifiedSummary, target);\r\n    // MUTATION!\r\n    target.summary.load.shield.HP -= alpha.shield;\r\n    if (target.summary.load.shield.HP < 0) target.summary.load.shield.HP = 0;\r\n    target.summary.load.armor.HP -= alpha.armor;\r\n    if (target.summary.load.armor.HP < 0) target.summary.load.armor.HP = 0;\r\n    target.summary.load.structure.HP -= alpha.structure;\r\n    if (target.summary.load.structure.HP < 0)\r\n      target.summary.load.structure.HP = 0;\r\n  };\r\n  static activateDamage_getAlpha = (summary, target) => {\r\n    if (!summary.damagePerAct.alpha)\r\n      return { shield: 0, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const shieldDamage = Simulator.#activateDamage_getDamageResult(summary.damagePerAct, target, \"shield\");\r\n    if (shieldDamage.remaining.alpha <= 0.01)\r\n      return { shield: shieldDamage.appplied.alpha, armor: 0, structure: 0 };\r\n\r\n    //prettier-ignore\r\n    const armorDamage = Simulator.#activateDamage_getDamageResult(shieldDamage.remaining, target, \"armor\");\r\n    if (armorDamage.remaining.alpha <= 0.01)\r\n      return {\r\n        shield: shieldDamage.appplied.alpha,\r\n        armor: armorDamage.appplied.alpha,\r\n        structure: 0,\r\n      };\r\n\r\n    //prettier-ignore\r\n    const structureDamage = Simulator.#activateDamage_getDamageResult(armorDamage.remaining, target, \"structure\");\r\n    return {\r\n      shield: shieldDamage.appplied.alpha,\r\n      armor: armorDamage.appplied.alpha,\r\n      structure: structureDamage.appplied.alpha,\r\n    };\r\n  };\r\n  static #activateDamage_getDamageResult = (damagePerAct, target, type) => {\r\n    //prettier-ignore\r\n    const shot = Simulator.#activateDamage_getShot(damagePerAct, target, type);\r\n    const damageCapMultiplier =\r\n      target.summary.load[type].HP / shot.alpha_damaging < 1\r\n        ? target.summary.load[type].HP / shot.alpha_damaging\r\n        : 1;\r\n\r\n    const EM_applied = shot.EM_damaging * damageCapMultiplier;\r\n    const TH_applied = shot.TH_damaging * damageCapMultiplier;\r\n    const KI_applied = shot.KI_damaging * damageCapMultiplier;\r\n    const EX_applied = shot.EX_damaging * damageCapMultiplier;\r\n    const alpha_applied = EM_applied + TH_applied + KI_applied + EX_applied;\r\n\r\n    const EM_remaining = damagePerAct.EM - EM_applied - shot.EM_blocked;\r\n    const TH_remaining = damagePerAct.TH - TH_applied - shot.TH_blocked;\r\n    const KI_remaining = damagePerAct.KI - KI_applied - shot.KI_blocked;\r\n    const EX_remaining = damagePerAct.EX - EX_applied - shot.EX_blocked;\r\n    const alpha_remaining =\r\n      EM_remaining + TH_remaining + KI_remaining + EX_remaining;\r\n\r\n    return {\r\n      appplied: {\r\n        alpha: alpha_applied,\r\n        EM: EM_applied,\r\n        TH: TH_applied,\r\n        KI: KI_applied,\r\n        EX: EX_applied,\r\n      },\r\n      remaining: {\r\n        alpha: alpha_remaining,\r\n        EM: EM_remaining,\r\n        TH: TH_remaining,\r\n        KI: KI_remaining,\r\n        EX: EX_remaining,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getShot = (damagePerAct, target, type) => {\r\n    const EM_blocked =\r\n      (damagePerAct.EM * target.summary.capacity[type].EM) / 100;\r\n    const TH_blocked =\r\n      (damagePerAct.TH * target.summary.capacity[type].TH) / 100;\r\n    const KI_blocked =\r\n      (damagePerAct.KI * target.summary.capacity[type].KI) / 100;\r\n    const EX_blocked =\r\n      (damagePerAct.EX * target.summary.capacity[type].EX) / 100;\r\n    const alpha_blocked = EM_blocked + TH_blocked + KI_blocked + EX_blocked;\r\n\r\n    const EM_damaging = damagePerAct.EM - EM_blocked;\r\n    const TH_damaging = damagePerAct.TH - TH_blocked;\r\n    const KI_damaging = damagePerAct.KI - KI_blocked;\r\n    const EX_damaging = damagePerAct.EX - EX_blocked;\r\n    const alpha_damaging =\r\n      EM_damaging + TH_damaging + KI_damaging + EX_damaging;\r\n\r\n    return {\r\n      alpha_damaging,\r\n      EM_damaging,\r\n      TH_damaging,\r\n      KI_damaging,\r\n      EX_damaging,\r\n      alpha_blocked,\r\n      EM_blocked,\r\n      TH_blocked,\r\n      KI_blocked,\r\n      EX_blocked,\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const situationalMul = Simulator.#activateDamage_getSituationalMul(\r\n      summary,\r\n      owner,\r\n      target\r\n    );\r\n\r\n    return {\r\n      ...summary,\r\n      damagePerAct: {\r\n        alpha: summary.damagePerAct.alpha * situationalMul,\r\n        EM: summary.damagePerAct.EM * situationalMul,\r\n        TH: summary.damagePerAct.TH * situationalMul,\r\n        KI: summary.damagePerAct.KI * situationalMul,\r\n        EX: summary.damagePerAct.EX * situationalMul,\r\n      },\r\n    };\r\n  };\r\n  static #activateDamage_getSituationalMul = (summary, owner, target) => {\r\n    if (summary.isDrone) {\r\n      //prettier-ignore\r\n      const droneAccuracy = EveMath.getDroneAccracy(summary, owner, target);\r\n\r\n      return Math.random() <= droneAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.tracking) {\r\n      //prettier-ignore\r\n      const turretAccuracy = EveMath.getTurretAcurracy(summary, owner, target);\r\n\r\n      return Math.random() <= turretAccuracy\r\n        ? EveMath.getTurretRandomDamageModifier()\r\n        : 0;\r\n    } else if (!!summary.range.explosionRadius) {\r\n      //prettier-ignore\r\n      const launcherAccracy = EveMath.getLauncherAccuracy(summary, owner, target);\r\n\r\n      return Math.random() <= launcherAccracy\r\n        ? EveMath.getLauncherDamageModifier(summary, target)\r\n        : 0;\r\n    } else return 0;\r\n  };\r\n\r\n  static activateCapacitor = (summary) => {\r\n    const owner = summary.root;\r\n    const target = summary.target;\r\n    //prettier-ignore\r\n    const situationalModifiedSummary = Simulator.#activateCapacitor_getSituationalModifiedSummary(summary, owner, target);\r\n\r\n    // MUTATION!\r\n    target.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.target;\r\n    if (target.summary.load.capacitor.HP < 0)\r\n      target.summary.load.capacitor.HP = 0;\r\n    if (target.summary.capacity.capacitor.HP < target.summary.load.capacitor.HP)\r\n      target.summary.load.capacitor.HP = target.summary.capacity.capacitor.HP;\r\n\r\n    owner.summary.load.capacitor.HP +=\r\n      situationalModifiedSummary.bonusPerAct.owner;\r\n    if (owner.summary.load.capacitor.HP < 0)\r\n      owner.summary.load.capacitor.HP = 0;\r\n    if (owner.summary.capacity.capacitor.HP < owner.summary.load.capacitor.HP)\r\n      owner.summary.load.capacitor.HP = owner.summary.capacity.capacitor.HP;\r\n  };\r\n  static #activateCapacitor_getSituationalModifiedSummary = (\r\n    summary,\r\n    owner,\r\n    target\r\n  ) => {\r\n    const ownerCapacitorHP = owner.summary.load.capacitor.HP;\r\n    const targetCapacitorHP = target.summary.load.capacitor.HP;\r\n\r\n    // prettier-ignore\r\n    const situationalMul = Simulator.#activateCapacitor_getSituationalMul(summary, owner, target);\r\n    const bonusPerActOwner = summary.bonusPerAct.self * situationalMul;\r\n    const bonusPerActTarget = summary.bonusPerAct.target * situationalMul;\r\n\r\n    if (summary.isNosferatu) {\r\n      const maxBonusPerAct = Math.min(bonusPerActOwner, targetCapacitorHP);\r\n      let symmetricBonusPerAct = maxBonusPerAct;\r\n\r\n      if (\r\n        !summary.isNosferatuBloodRaiderOverriden &&\r\n        targetCapacitorHP + bonusPerActTarget < ownerCapacitorHP\r\n      )\r\n        symmetricBonusPerAct = Math.max(\r\n          Math.floor((targetCapacitorHP - ownerCapacitorHP) / 2),\r\n          0\r\n        );\r\n      symmetricBonusPerAct = Math.min(maxBonusPerAct, symmetricBonusPerAct);\r\n      return {\r\n        ...summary,\r\n        bonusPerAct: {\r\n          self: symmetricBonusPerAct,\r\n          target: -symmetricBonusPerAct,\r\n        },\r\n      };\r\n    }\r\n\r\n    return {\r\n      ...summary,\r\n      bonusPerAct: {\r\n        owner: bonusPerActOwner,\r\n        target: bonusPerActTarget,\r\n      },\r\n    };\r\n  };\r\n  static #activateCapacitor_getSituationalMul = (summary, owner, target) => {\r\n    const rangeModifier = EveMath.getRangeModifier(summary, owner, target);\r\n\r\n    const isCapacitorBooster = summary.slot.item?.typeEffectsStats?.reduce(\r\n      (acc, efft) => {\r\n        if (efft.effectID === 48)\r\n          //effectID: 48, effectName: \"powerBooster\"\r\n          return true;\r\n        return acc;\r\n      },\r\n      false\r\n    );\r\n\r\n    return isCapacitorBooster ? 1 : rangeModifier;\r\n  };\r\n\r\n  static simulateActivation = (summary) => {\r\n    const capacitorState =\r\n      summary.load.capacitor || summary.root.summary.load.capacitor;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n\r\n    // MUTATION!\r\n    capacitorState.HP -= info.activationCost;\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    return summary;\r\n  };\r\n}\r\nexport class HAL {\r\n  static getSchedules(summarizedSlots, target, tick) {\r\n    HAL.getSchedules_setTarget(summarizedSlots, target);\r\n    return Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        return HAL.#getSchedules_getFragment(summarizedSlot.summary, tick);\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    )\r\n      .reduce((acc, fragment) => {\r\n        if (!fragment) return acc;\r\n        return acc.concat(fragment);\r\n      }, [])\r\n      .sort((a, b) => a.time - b.time);\r\n  }\r\n  static getSchedules_setTarget = (summarizedSlots, target) => {\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (!summarizedSlot.summary) return false;\r\n        let _target = false;\r\n        switch (summarizedSlot?.summary?.operation) {\r\n          case \"damage\":\r\n          case \"defense\":\r\n          case \"capacitor\":\r\n            _target = target;\r\n            break;\r\n          default:\r\n            _target = false;\r\n            break;\r\n        }\r\n        summarizedSlot.summary[\"target\"] = _target;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n          droneSlots: true,\r\n        },\r\n      }\r\n    );\r\n  };\r\n  static #getSchedules_getFragment = (summary, tick) => {\r\n    const _summary = HAL.#getSchedules_copySummary(summary);\r\n    const fragment = HAL.#getSchedules_getFragmentRecursion(_summary, tick);\r\n    return fragment.map((schedule) => {\r\n      schedule[\"summary\"] = summary;\r\n      return schedule;\r\n    });\r\n  };\r\n  static #getSchedules_copySummary = (summary) => {\r\n    const _summary = JSON.parse(\r\n      JSON.stringify({ ...summary, root: undefined, target: undefined })\r\n    );\r\n    if (!!_summary?.activationState)\r\n      Object.keys(_summary.activationState).forEach((key) => {\r\n        if (_summary.activationState[key] === null)\r\n          // MUTATION!!\r\n          _summary.activationState[key] = Infinity;\r\n      });\r\n    if (!!_summary?.activationInfo)\r\n      Object.keys(_summary.activationInfo).forEach((key) => {\r\n        if (_summary.activationInfo[key] === null)\r\n          // MUTATION!!\r\n          _summary.activationInfo[key] = Infinity;\r\n      });\r\n\r\n    return _summary;\r\n  };\r\n  static #getSchedules_getFragmentRecursion = (summary, tick) => {\r\n    if (\r\n      !summary?.activationState?.isActive ||\r\n      summary?.activationState?.nextActivationTick !== tick\r\n    )\r\n      return [];\r\n    const currentTime = summary.activationState.nextActivation;\r\n    const state = summary.activationState;\r\n    const info = summary.activationInfo;\r\n    //prettier-ignore TODO: for testing, check tick is okay\r\n    if (state.isActive && state.nextActivationTick < tick)\r\n      console.warn(\"ERR: Tick is not in sync\");\r\n\r\n    // MUTATION!\r\n    state.activationLeft--;\r\n    state.lastActivation = state.nextActivation;\r\n\r\n    // Check if ammo left is 0, set time\r\n    if (state.activationLeft === 0) {\r\n      state.nextActivation =\r\n        state.lastActivation + info.duration + info.reloadTime;\r\n      state.activationLeft = info.activationLimit;\r\n    } else\r\n      state.nextActivation = Number(\r\n        (state.lastActivation + info.duration).toFixed(10)\r\n      );\r\n\r\n    state.nextActivationTick = Math.floor(state.nextActivation);\r\n\r\n    // Check if next activation is in same tick\r\n    let subSecSchedule = [];\r\n    if (state.nextActivationTick === tick)\r\n      subSecSchedule = HAL.#getSchedules_getFragmentRecursion(summary, tick);\r\n\r\n    return [{ time: currentTime }, ...subSecSchedule];\r\n  };\r\n\r\n  static manageSchedules(schedules, summarizedSlot, situation) {\r\n    schedules.forEach((schedule) => {\r\n      if (!HAL.manageSchedules_validate(schedule.summary)) {\r\n        // MUTATION!\r\n        schedule.summary.activationState.isActive = false;\r\n        if (schedule.summary.operation === \"temporary\")\r\n          Summary.updateSummaries(summarizedSlot, situation);\r\n\r\n        return;\r\n      } // TODO: loop through schedules with tick is moving\r\n\r\n      HAL.#manageSchedules_executeSchedule(schedule);\r\n    });\r\n  }\r\n  static #manageSchedules_executeSchedule = (schedule) => {\r\n    Simulator.simulateActivation(schedule.summary);\r\n    switch (schedule.summary.operation) {\r\n      case \"damage\":\r\n        Simulator.activateDamage(schedule.summary);\r\n        break;\r\n      case \"defense\":\r\n        Simulator.activateDefense(schedule.summary);\r\n        break;\r\n      case \"capacitor\":\r\n        Simulator.activateCapacitor(schedule.summary);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  static manageSchedules_validate(summary) {\r\n    if (!summary || !summary.activationState.isActive) return false;\r\n\r\n    const isCapacitorValidated = HAL.manageSchedules_validateCapacitor(summary);\r\n    const isStructureValidated = HAL.manageSchedules_validateStructure(summary);\r\n    if (!isCapacitorValidated || !isStructureValidated) return false;\r\n\r\n    return true;\r\n  }\r\n  static manageSchedules_validateCapacitor(summary) {\r\n    const activationInfo = summary.activationInfo;\r\n    const capacitorState =\r\n      summary?.load?.capacitor || summary.root.summary.load.capacitor;\r\n\r\n    if (capacitorState.HP < activationInfo.activationCost) return false;\r\n    else return true;\r\n  }\r\n  static manageSchedules_validateStructure(summary) {\r\n    const structureHP = summary?.load?.structure?.HP;\r\n    const rootStructureHP = summary.root.summary.load.structure.HP;\r\n\r\n    if (structureHP <= 0 || rootStructureHP <= 0) return false;\r\n    else return true;\r\n  }\r\n\r\n  // currently on halt. no ai included\r\n  static manageActivation(summarizedSlots, tick) {\r\n    // Find out current tick's cap usage amount\r\n    const capUsage = 0;\r\n    Fit.mapSlots(\r\n      summarizedSlots,\r\n      (summarizedSlot) => {\r\n        if (summarizedSlot.summary.activationState.nextActivationTick != tick)\r\n          return false;\r\n\r\n        capUsage += summarizedSlot.summary.activationInfo.activationCost;\r\n      },\r\n      {\r\n        isIterate: {\r\n          highSlots: true,\r\n          midSlots: true,\r\n          lowSlots: true,\r\n        },\r\n      }\r\n    );\r\n\r\n    if (\r\n      summarizedSlots.summary.load.capacitor.HP - capUsage <\r\n      summarizedSlots.summary.capacity.capacitor.HP * 0.3\r\n    )\r\n      return;\r\n  }\r\n  static manageActivation_getCapUsageLevels = (summarizedSlots) => {\r\n    return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map((activationPriority) => {\r\n      const capUsageRates = [];\r\n      Fit.mapSlots(\r\n        summarizedSlots,\r\n        (slot) => {\r\n          const info = slot?.summary?.activationInfo;\r\n          const state = slot?.summary?.activationState;\r\n          if (!info || !state || state.activationPriority > activationPriority)\r\n            return 0;\r\n          const capUsageRate = info.activationCost / info.duration || 0;\r\n          capUsageRates.push({ capUsageRate, slot });\r\n        },\r\n        {\r\n          isIterate: {\r\n            highSlots: true,\r\n            midSlots: true,\r\n            lowSlots: true,\r\n          },\r\n        }\r\n      );\r\n\r\n      return { activationPriority, capUsageRates };\r\n    });\r\n  };\r\n}\r\n","import {\r\n  Avatar,\r\n  Badge,\r\n  Button,\r\n  makeStyles,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\r\nimport React from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootAvatar: {\r\n    width: 20,\r\n    height: 20,\r\n    right: 15,\r\n    bottom: 3,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    transition: theme.transitions.create(\"color\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function ModuleButtonChargeBadge(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Badge\r\n      style={{ cursor: \"pointer\" }}\r\n      overlap=\"circle\"\r\n      anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\r\n      badgeContent={\r\n        props.count != Infinity ? (\r\n          <Avatar className={classes.rootAvatar} onClick={props.onClick}>\r\n            <Button>\r\n              <Typography\r\n                style={{\r\n                  color: theme.palette.text.primary,\r\n                  fontSize: 9,\r\n                  marginLeft: -1,\r\n                }}\r\n              >\r\n                {props.count}\r\n              </Typography>\r\n            </Button>\r\n          </Avatar>\r\n        ) : undefined\r\n      }\r\n    >\r\n      {props.children}\r\n    </Badge>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  CircularProgress,\r\n  makeStyles,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  useInstaActivationInterval,\r\n  useLazyActivationInterval,\r\n  useProgressCircleInterval,\r\n} from \"../../services/intervalHooks\";\r\nimport Simulator from \"../FitCard/Stats/services/Simulator\";\r\n\r\nconst useStyles = (duration) =>\r\n  makeStyles((theme) => ({\r\n    circularProrgess: {\r\n      position: \"absolute\",\r\n      left: 8,\r\n      top: 2,\r\n    },\r\n    circularTransition: {\r\n      transition: theme.transitions.create(\"stroke-dashoffset\", {\r\n        easing: \"linear\",\r\n        duration: `${duration}s`,\r\n      }),\r\n    },\r\n  }));\r\n\r\nexport default function ModuleActivation(props) {\r\n  const classes = useStyles(\r\n    props.moduleSet[0].summary.activationInfo.duration\r\n  )();\r\n  const theme = useTheme();\r\n\r\n  const [activationCounter, setActivationCounter] = useState(0);\r\n  const [flip, setFlip] = useState(false);\r\n  const [isActivating, setIsActivating] = useState(false);\r\n\r\n  useProgressCircleInterval(\r\n    () => {\r\n      if (props.moduleSet[0].summary.activationState.isActive == true) {\r\n        setActivationCounter(activationCounter + 100);\r\n        setFlip(!flip);\r\n        setIsActivating(true);\r\n        props.moduleSet.forEach((module) => {\r\n          Simulator.simulateActivation(module.summary);\r\n        });\r\n        props.setSummarizedSlots({ ...props.summarizedSlots });\r\n      } else setIsActivating(false);\r\n    },\r\n    props.moduleSet[0].summary.activationState.isActive\r\n      ? props.moduleSet[0].summary.activationInfo.duration * 1000\r\n      : null\r\n  );\r\n\r\n  useInstaActivationInterval(() => {\r\n    console.time(\"activate\");\r\n    props.moduleSet.forEach((module) => {\r\n      activateModule(\r\n        module.summary,\r\n        props.summarizedSlots,\r\n        props.setSummarizedSlots\r\n      );\r\n    });\r\n    console.timeEnd(\"activate\");\r\n  }, getInstaActivationDelay(props.moduleSet[0].summary));\r\n\r\n  useLazyActivationInterval(() => {\r\n    props.moduleSet.forEach((module) => {\r\n      activateModule(\r\n        module.summary,\r\n        props.summarizedSlots,\r\n        props.setSummarizedSlots\r\n      );\r\n    });\r\n  }, getLazyActivationDelay(props.moduleSet[0].summary));\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <CircularProgress\r\n        size={46}\r\n        thickness={2}\r\n        style={{\r\n          color:\r\n            !isActivating || !flip\r\n              ? theme.palette.background.paper\r\n              : theme.palette.text.primary,\r\n        }}\r\n        className={classes.circularProrgess}\r\n        classes={{\r\n          circleStatic: classes.circularTransition,\r\n        }}\r\n        variant=\"static\"\r\n        value={activationCounter}\r\n      />\r\n      <CircularProgress\r\n        size={46}\r\n        thickness={2}\r\n        style={{\r\n          color:\r\n            !isActivating || flip\r\n              ? theme.palette.background.paper\r\n              : theme.palette.text.primary,\r\n        }}\r\n        className={classes.circularProrgess}\r\n        classes={{\r\n          circleStatic: classes.circularTransition,\r\n        }}\r\n        variant=\"static\"\r\n        value={activationCounter + 100}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction activateModule(summary, summarizedSlots, setSummarizedSlots) {\r\n  switch (summary.operation) {\r\n    case \"damage\":\r\n      Simulator.activateDamage(summary);\r\n      break;\r\n    case \"defense\":\r\n      Simulator.activateDefense(summary);\r\n      break;\r\n    case \"capacitor\":\r\n      Simulator.activateCapacitor(summary);\r\n      break;\r\n  }\r\n  setSummarizedSlots({ ...summarizedSlots });\r\n}\r\nfunction getInstaActivationDelay(summary) {\r\n  if (\r\n    summary.bonusPerAct?.self.armor > 0 ||\r\n    summary.bonusPerAct?.self.structure > 0\r\n  )\r\n    return null;\r\n\r\n  return summary.activationState.isActive\r\n    ? summary.activationInfo.duration * 1000\r\n    : null;\r\n}\r\nfunction getLazyActivationDelay(summary) {\r\n  if (!summary.bonusPerAct || summary.bonusPerAct?.self.structure > 0)\r\n    return null;\r\n\r\n  return summary.activationState.isActive\r\n    ? summary.activationInfo.duration * 1000\r\n    : null;\r\n}\r\n","import { Avatar, Button, makeStyles } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport ModuleButtonChargeBadge from \"./ModuleButtonChargeBadge\";\r\nimport ModuleActivation from \"./ModuleActivation\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  rootDiv: {\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n    width: 40,\r\n    height: 40,\r\n  },\r\n  rootAvatarDefault: {\r\n    width: 40,\r\n    height: 40,\r\n    marginLeft: 10,\r\n    marginTop: 4,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: `0.1px solid ${theme.palette.divider}`,\r\n    marginRight: 20,\r\n  },\r\n  stateArcBorder: {\r\n    width: 40,\r\n    height: 40,\r\n    borderRadius: \"50%\",\r\n    border: \"3px solid\",\r\n    borderLeftColor: \"transparent\",\r\n    borderRightColor: \"transparent\",\r\n    borderTopColor: \"transparent\",\r\n    borderBottomColor: \"transparent\",\r\n    position: \"absolute\",\r\n    top: 2,\r\n    left: 7,\r\n  },\r\n  circularProrgess: {\r\n    position: \"absolute\",\r\n    right: 16,\r\n  },\r\n  circularTransition: {\r\n    transition: theme.transitions.create(\"stroke-dashoffset\", {\r\n      easing: \"linear\",\r\n      duration: \"1s\",\r\n    }),\r\n  },\r\n}));\r\n\r\nexport default function ModuleButton(props) {\r\n  const classes = useStyles();\r\n\r\n  const [, render] = useState();\r\n\r\n  return (\r\n    <div style={{ position: \"relative\" }}>\r\n      <ModuleActivation\r\n        summary={props.moduleSet[0].summary}\r\n        moduleSet={props.moduleSet}\r\n        summarizedSlots={props.summarizedSlots}\r\n        setSummarizedSlots={props.setSummarizedSlots}\r\n        targetSummarizedSlots={props.targetSummarizedSlots}\r\n      />\r\n      <ModuleButtonChargeBadge\r\n        count={props.moduleSet[0].summary.activationState.activationLeft}\r\n        onClick={() => {\r\n          activateModuleSet(props.moduleSet, render);\r\n        }}\r\n      >\r\n        <Avatar\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={() => {\r\n            activateModuleSet(props.moduleSet, render);\r\n          }}\r\n          className={classes.rootAvatarDefault}\r\n        >\r\n          <Button>\r\n            {feedSource(props.moduleSet[0]?.item, props.moduleSet[0]?.charge)}\r\n          </Button>\r\n        </Avatar>\r\n      </ModuleButtonChargeBadge>\r\n    </div>\r\n  );\r\n}\r\nfunction feedSource(item, charge) {\r\n  if (!!item && !charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"85%\", height: \"85%\", marginLeft: -2 }}\r\n        src={`https://images.evetech.net/types/${item?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n  else if (!!item && !!charge)\r\n    return (\r\n      <img\r\n        draggable=\"false\"\r\n        style={{ width: \"85%\", height: \"85%\", marginLeft: -2 }}\r\n        src={`https://images.evetech.net/types/${charge?.typeID}/icon?size=64`}\r\n      />\r\n    );\r\n}\r\nfunction activateModuleSet(moduleSet, forceRender) {\r\n  // ewww.. mutation\r\n  moduleSet.forEach((module) => {\r\n    module.summary.activationState.isActive =\r\n      !module.summary.activationState.isActive;\r\n  });\r\n  forceRender({});\r\n}\r\n","import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport Fit from \"../../fitter/src/Fit\";\r\nimport { useAlwaysActivationInterval } from \"../../services/intervalHooks\";\r\nimport Simulator from \"../FitCard/Stats/services/Simulator\";\r\nimport ModuleButton from \"./ModuleButton\";\r\n\r\nexport default function ContorlPanel(props) {\r\n  const [modules, setModules] = useState();\r\n\r\n  useEffect(() => {\r\n    if (!!props?.summarizedSlots?.highSlots) {\r\n      const example = Fit.mapSlots(\r\n        props.summarizedSlots,\r\n        (slot) => {\r\n          if (!slot?.summary?.activationInfo) return false;\r\n          else return slot;\r\n        },\r\n        {\r\n          isIterate: {\r\n            highSlots: true,\r\n            midSlots: true,\r\n            lowSlots: true,\r\n            droneSlots: true,\r\n          },\r\n        }\r\n      )\r\n        .filter((slot) => !!slot)\r\n        .reduce((acc, slot) => {\r\n          if (slot.summary.operation === \"damage\") {\r\n            const matchingSlotSet = acc.find(\r\n              (slotSet) =>\r\n                slotSet?.[0].item.typeName === slot.item.typeName &&\r\n                slotSet?.[0].charge.typeName === slot.charge.typeName\r\n            );\r\n            if (!matchingSlotSet) acc.push([slot]);\r\n            else matchingSlotSet.push(slot);\r\n          } else acc.push([slot]);\r\n\r\n          return acc;\r\n        }, []);\r\n      setModules(example);\r\n    }\r\n  }, [props.updateFlag]);\r\n\r\n  useAlwaysActivationInterval(\r\n    () => {\r\n      Simulator.simulate_capacitor(props.summarizedSlots);\r\n      Simulator.simulate_shield(props.summarizedSlots);\r\n      props.setSummarizedSlots({ ...props.summarizedSlots });\r\n    },\r\n    !!props?.summarizedSlots?.summary ? 1000 : null\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {modules?.map((moduleSet) => {\r\n        return (\r\n          <ModuleButton\r\n            key={moduleSet[0].summary.path}\r\n            moduleSet={moduleSet}\r\n            summarizedSlots={props.summarizedSlots}\r\n            setSummarizedSlots={props.setSummarizedSlots}\r\n            targetSummarizedSlots={props.targetSummarizedSlots}\r\n          />\r\n        );\r\n      })}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import { useTheme } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport LinearProgressLabel from \"../FitCard/Stats/LinearProgressLabel.jsx\";\r\n\r\nexport default function ShipPanel(props) {\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LinearProgressLabel\r\n        value={\r\n          (props.summarizedSlots?.summary.load.shield.HP /\r\n            props.summarizedSlots?.summary.capacity.shield.HP) *\r\n          100\r\n        }\r\n        label={`${props.summarizedSlots?.summary.load.shield.HP.toFixed(2)} / ${\r\n          props.summarizedSlots?.summary.capacity.shield.HP\r\n        }`}\r\n        backgroundColor={theme.palette.property.blueSecondary}\r\n        color={theme.palette.property.blue}\r\n      />\r\n      <LinearProgressLabel\r\n        value={\r\n          (props.summarizedSlots?.summary.load.armor.HP /\r\n            props.summarizedSlots?.summary.capacity.armor.HP) *\r\n          100\r\n        }\r\n        label={`${props.summarizedSlots?.summary.load.armor.HP.toFixed(2)} / ${\r\n          props.summarizedSlots?.summary.capacity.armor.HP\r\n        }`}\r\n        backgroundColor={theme.palette.property.redSecondary}\r\n        color={theme.palette.property.red}\r\n      />\r\n      <LinearProgressLabel\r\n        value={\r\n          (props.summarizedSlots?.summary.load.structure.HP /\r\n            props.summarizedSlots?.summary.capacity.structure.HP) *\r\n          100\r\n        }\r\n        label={`${props.summarizedSlots?.summary.load.structure.HP.toFixed(\r\n          2\r\n        )} / ${props.summarizedSlots?.summary.capacity.structure.HP}`}\r\n        backgroundColor={theme.palette.property.greySecondary}\r\n        color={theme.palette.property.grey}\r\n      />\r\n      <LinearProgressLabel\r\n        value={\r\n          (props.summarizedSlots?.summary.load.capacitor.HP /\r\n            props.summarizedSlots?.summary.capacity.capacitor.HP) *\r\n          100\r\n        }\r\n        label={`${props.summarizedSlots?.summary.load.capacitor.HP.toFixed(\r\n          2\r\n        )} / ${props.summarizedSlots?.summary.capacity.capacitor.HP}`}\r\n        backgroundColor={theme.palette.property.orgSecondary}\r\n        color={theme.palette.property.org}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  ButtonGroup,\r\n  Card,\r\n  Grid,\r\n  makeStyles,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport SystemUpdateAltIcon from \"@material-ui/icons/SystemUpdateAlt\";\r\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport Summary from \"../FitCard/Stats/services/Summary\";\r\nimport ContorlPanel from \"./ContorlPanel\";\r\nimport ShipPanel from \"./ShipPanel\";\r\nimport { HAL } from \"../FitCard/Stats/services/Simulator\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modeButton: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n}));\r\n\r\nexport default function SimulationPanel(props) {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  const [updateFlag, setUpdateFlag] = useState(false);\r\n  const [summarizedSlots0, setSummarizedSlots0] = useState();\r\n  const [summarizedSlots1, setSummarizedSlots1] = useState();\r\n\r\n  return (\r\n    <Card style={{ width: \"85%\", minWidth: 300, maxWidth: 600 }} elevation={3}>\r\n      <Grid style={{ width: \"100%\" }}>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ButtonGroup\r\n            color=\"inherit\"\r\n            variant=\"text\"\r\n            fullWidth\r\n            disableElevation\r\n          >\r\n            <Button\r\n              className={classes.modeButton}\r\n              onClick={() => {\r\n                const _summarizedSlots0 = Summary.addSummaries(\r\n                  props.slotsSet[0],\r\n                  props.situation.onboard\r\n                );\r\n                const _summarizedSlots1 = Summary.addSummaries(\r\n                  props.slotsSet[1],\r\n                  props.situation.hostile\r\n                );\r\n                HAL.getSchedules_setTarget(\r\n                  _summarizedSlots0,\r\n                  _summarizedSlots1\r\n                );\r\n                HAL.getSchedules_setTarget(\r\n                  _summarizedSlots1,\r\n                  _summarizedSlots0\r\n                );\r\n                setSummarizedSlots0(_summarizedSlots0);\r\n                setSummarizedSlots1(_summarizedSlots1);\r\n\r\n                setUpdateFlag(!updateFlag);\r\n\r\n                /* console.log(Summary.addSummaries(props.slotsSet[0]));\r\n                console.log(Summary.addSummaries(props.slotsSet[1])); */\r\n              }}\r\n            >\r\n              <SystemUpdateAltIcon\r\n                style={{ color: theme.palette.text.primary }}\r\n              />\r\n            </Button>\r\n            <Button className={classes.modeButton}>\r\n              <RefreshIcon style={{ color: theme.palette.text.primary }} />\r\n            </Button>\r\n          </ButtonGroup>\r\n        </Grid>\r\n\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ShipPanel summarizedSlots={summarizedSlots0} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ContorlPanel\r\n            summarizedSlots={summarizedSlots0}\r\n            setSummarizedSlots={setSummarizedSlots0}\r\n            targetSummarizedSlots={summarizedSlots1}\r\n            updateFlag={updateFlag}\r\n          />\r\n        </Grid>\r\n\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ShipPanel summarizedSlots={summarizedSlots1} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ContorlPanel\r\n            summarizedSlots={summarizedSlots1}\r\n            setSummarizedSlots={setSummarizedSlots1}\r\n            targetSummarizedSlots={summarizedSlots0}\r\n            updateFlag={updateFlag}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </Card>\r\n  );\r\n}\r\n\r\nfunction getShipStatusString(summarizedSlots) {\r\n  return `${summarizedSlots?.summary.load.shield.HP}${summarizedSlots?.summary.load.armor.HP}${summarizedSlots?.summary.load.structure.HP}${summarizedSlots?.summary.load.capacitor.HP}`;\r\n}\r\n","import React, { useEffect, useReducer, useState } from \"react\";\r\nimport FitCard from \"./FitCard/FitCard\";\r\nimport {\r\n  Button,\r\n  ButtonGroup,\r\n  Grid,\r\n  makeStyles,\r\n  Paper,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\r\nimport WbSunnyIcon from \"@material-ui/icons/WbSunny\";\r\nimport Brightness2Icon from \"@material-ui/icons/Brightness2\";\r\nimport ShipCanvas from \"./simpleEdition/ShipCanvas\";\r\n\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport worker from \"workerize-loader!./FitCard/Stats/services/SimWorker\";\r\nimport SimulationPanel from \"./SimulationPanel/SimulationPanel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modeButton: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.text.primary,\r\n  },\r\n  modeButtonActive: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    color: theme.palette.property.org,\r\n  },\r\n}));\r\n\r\nconst Links = (props) => {\r\n  return (\r\n    <Paper elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          <GitHubIcon />\r\n        </Button>\r\n        <Button\r\n          href={\"https://github.com/tiktrimo/EVE-Fitting.js/issues\"}\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          BUG REPORT\r\n        </Button>\r\n        <Button\r\n          href={\r\n            \"https://github.com/tiktrimo/EVE-Fitting.js/blob/master/DOCS/DOCS.md\"\r\n          }\r\n          target=\"_blank\"\r\n          color=\"primary\"\r\n        >\r\n          DOCS\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst Settings = (props) => {\r\n  const classes = useStyles();\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <Paper style={{ marginLeft: 10 }} elevation={2}>\r\n      <ButtonGroup variant=\"text\">\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButton : classes.modeButtonActive\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(false);\r\n          }}\r\n        >\r\n          <WbSunnyIcon />\r\n        </Button>\r\n        <Button\r\n          className={\r\n            props.isDark ? classes.modeButtonActive : classes.modeButton\r\n          }\r\n          onClick={() => {\r\n            props.setIsDark(true);\r\n          }}\r\n        >\r\n          <Brightness2Icon />\r\n        </Button>\r\n      </ButtonGroup>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst initialDrawersOpen = {\r\n  fit: true,\r\n  fit1: false,\r\n};\r\nconst defaultDrawersOpen = {\r\n  fit: false,\r\n  fit1: false,\r\n};\r\nfunction drawersOpenReducer(state, action) {\r\n  if (!action?.tag) return defaultDrawersOpen;\r\n  switch (action.type) {\r\n    case \"OPEN\":\r\n      return { ...defaultDrawersOpen, [action.tag]: action.payload };\r\n    case \"CLOSE\":\r\n      return { ...defaultDrawersOpen };\r\n    default:\r\n      return defaultDrawersOpen;\r\n  }\r\n}\r\n\r\nconst simWorkerInst = worker();\r\nexport default function InitialCard(props) {\r\n  const theme = useTheme();\r\n  const [width, setWidth] = useState(0);\r\n\r\n  const [drawersOpen, dispatchDrawersOpen] = useReducer(\r\n    drawersOpenReducer,\r\n    initialDrawersOpen\r\n  );\r\n\r\n  const [situation, setSituation] = useState();\r\n  const [slots0, setSlots0] = useState();\r\n  const [slots1, setSlots1] = useState();\r\n\r\n  useEffect(() => {\r\n    setWidth(window.innerWidth);\r\n    const handleRender = (e) => {\r\n      setWidth(window.innerWidth);\r\n    };\r\n    window.addEventListener(\"resize\", handleRender);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleRender);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\r\n      <Grid\r\n        style={{\r\n          width: width < 1000 ? \"100%\" : width - 600,\r\n          margin: 0,\r\n        }}\r\n        container\r\n        spacing={3}\r\n      >\r\n        <Grid xs={12} container item justify=\"center\"></Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots0}\r\n            backgroundColor={theme.palette.property.blue}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <FitCard\r\n            setSlots={setSlots1}\r\n            backgroundColor={theme.palette.property.red}\r\n            color={theme.palette.background.paper}\r\n            tag={\"fit1\"}\r\n            drawersOpen={drawersOpen}\r\n            dispatchDrawersOpen={dispatchDrawersOpen}\r\n            cache={props.cache}\r\n          />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Button\r\n            onClick={() => {\r\n              /*  if (!!slots0 && !!slots1)\r\n                simWorker.postMessage({ msg: \"simulator\" }); */\r\n              if (!!slots0 && !!slots1)\r\n                simWorkerInst.simulate(slots0, slots1, situation);\r\n            }}\r\n            fullWidth\r\n          >\r\n            Simulate\r\n          </Button>\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <SimulationPanel slotsSet={[slots0, slots1]} situation={situation} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <ShipCanvas setSituation={setSituation} />\r\n        </Grid>\r\n        <Grid xs={12} container item justify=\"center\">\r\n          <Links />\r\n          <Settings isDark={props.isDark} setIsDark={props.setIsDark} />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport cacheService from \"./cache/cacheService\";\r\nimport { useEffect } from \"react\";\r\nimport { storage } from \"./index\";\r\nimport cJSON from \"compressed-json\";\r\nimport InitialCard from \"./components/InitialCard\";\r\nimport { makeStyles, Paper } from \"@material-ui/core\";\r\n\r\nconst ttl = 60 * 60 * 1;\r\nconst cache = new cacheService(ttl);\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: 0,\r\n    borderRadius: 0,\r\n    overflow: \"auto\",\r\n  },\r\n}));\r\n\r\nexport default function InitialD(props) {\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/marketCategories\", () => {\r\n      return storage\r\n        .ref(\"/marketCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/typeIDsTable\", () => {\r\n      return storage\r\n        .ref(\"/listInvTypesTable.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/skillsStaticBoard\", () => {\r\n      return storage\r\n        .ref(\"/skillsStaticBoard.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    cache.get(\"/attributesCategories\", () => {\r\n      return storage\r\n        .ref(\"/attributesCategories.json\")\r\n        .getDownloadURL()\r\n        .then(async (url) => {\r\n          return await fetch(url)\r\n            .then((data) => data.json())\r\n            .then((data) => cJSON.decompress(data));\r\n        });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Paper className={classes.root} elevation={0}>\r\n      <InitialCard\r\n        isDark={props.isDark}\r\n        setIsDark={props.setIsDark}\r\n        cache={cache}\r\n      />\r\n    </Paper>\r\n  );\r\n}\r\n","import InitialFetch from \"./InitialFetch\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { red, orange, blue, blueGrey, green } from \"@material-ui/core/colors\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nconst lightTheme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      light: \"#6d6d6d\",\r\n      main: \"#424242\",\r\n      dark: \"#1b1b1b\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#F5F5F5\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: blue[500],\r\n      blueSecondary: blue[200],\r\n      red: red[500],\r\n      redSecondary: red[200],\r\n      grey: blueGrey[500],\r\n      greySecondary: blueGrey[200],\r\n      org: orange[500], // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: orange[200], // So instead of looking for some problem jusy used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n});\r\n\r\nconst darkTheme = createMuiTheme({\r\n  palette: {\r\n    type: \"dark\",\r\n    primary: {\r\n      light: \"#ffffff\",\r\n      main: \"#ffffff\",\r\n      dark: \"#f5f5f5\",\r\n    },\r\n    action: {\r\n      opaqueHover: \"#515151\",\r\n    },\r\n    button: {\r\n      color: \"#ffffff\",\r\n    },\r\n    property: {\r\n      blue: \"#66b3e8\",\r\n      blueSecondary: \"#b1cce2\",\r\n      red: \"#f54256\",\r\n      redSecondary: \"#e8a5a5\",\r\n      grey: blueGrey[400],\r\n      greySecondary: blueGrey[200],\r\n      org: \"#ff994d\", // For some f'ed reson using \"orange\"name make problem.\r\n      orgSecondary: \"#f3cb90\", // So instead of looking for problem just used or(an)g(e)\r\n      green: green[500],\r\n    },\r\n  },\r\n  overrides: {\r\n    MuiPaper: {\r\n      elevation3: {\r\n        boxShadow: \"\",\r\n        border: \"solid 0.1px #595959\",\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default function Initialtheming(props) {\r\n  const [isDark, setIsDark] = useState(false);\r\n\r\n  return (\r\n    <MuiThemeProvider theme={isDark ? darkTheme : lightTheme}>\r\n      <InitialFetch isDark={isDark} setIsDark={setIsDark} />\r\n    </MuiThemeProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport firebaseAPI from \"./key/ignore/firebaseAPI\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/analytics\";\r\nimport \"firebase/database\";\r\nimport \"firebase/storage\";\r\nimport Initialtheming from \"./Initialtheming\";\r\n\r\nfirebase.initializeApp(firebaseAPI);\r\nexport const database = firebase.database();\r\nexport const analytics = firebase.analytics();\r\nexport const storage = firebase.storage();\r\n\r\nanalytics.logEvent(\"pageLoad\", { type: \"log\" });\r\n\r\nReactDOM.render(<Initialtheming />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}